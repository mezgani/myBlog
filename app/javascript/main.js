(()=>{var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:true,configurable:true,writable:true,value}):obj[key]=value;var __esm=(fn2,res)=>function __init(){return fn2&&(res=(0,fn2[__getOwnPropNames(fn2)[0]])(fn2=0)),res;};var __commonJS=(cb,mod)=>function __require(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports;};var __export=(target,all)=>{for(var name in all)
__defProp(target,name,{get:all[name],enumerable:true});};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from==="object"||typeof from==="function"){for(let key of __getOwnPropNames(from))
if(!__hasOwnProp.call(to,key)&&key!==except)
__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});}
return to;};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:true}):target,mod));var __publicField=(obj,key,value)=>{__defNormalProp(obj,typeof key!=="symbol"?key+"":key,value);return value;};var adapters_default;var init_adapters=__esm({"node_modules/@rails/actioncable/src/adapters.js"(){adapters_default={logger:self.console,WebSocket:self.WebSocket};}});var logger_default;var init_logger=__esm({"node_modules/@rails/actioncable/src/logger.js"(){init_adapters();logger_default={log(...messages){if(this.enabled){messages.push(Date.now());adapters_default.logger.log("[ActionCable]",...messages);}}};}});var now,secondsSince,ConnectionMonitor,connection_monitor_default;var init_connection_monitor=__esm({"node_modules/@rails/actioncable/src/connection_monitor.js"(){init_logger();now=()=>new Date().getTime();secondsSince=(time)=>(now()-time)/1e3;ConnectionMonitor=class{constructor(connection){this.visibilityDidChange=this.visibilityDidChange.bind(this);this.connection=connection;this.reconnectAttempts=0;}
start(){if(!this.isRunning()){this.startedAt=now();delete this.stoppedAt;this.startPolling();addEventListener("visibilitychange",this.visibilityDidChange);logger_default.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`);}}
stop(){if(this.isRunning()){this.stoppedAt=now();this.stopPolling();removeEventListener("visibilitychange",this.visibilityDidChange);logger_default.log("ConnectionMonitor stopped");}}
isRunning(){return this.startedAt&&!this.stoppedAt;}
recordPing(){this.pingedAt=now();}
recordConnect(){this.reconnectAttempts=0;this.recordPing();delete this.disconnectedAt;logger_default.log("ConnectionMonitor recorded connect");}
recordDisconnect(){this.disconnectedAt=now();logger_default.log("ConnectionMonitor recorded disconnect");}
startPolling(){this.stopPolling();this.poll();}
stopPolling(){clearTimeout(this.pollTimeout);}
poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale();this.poll();},this.getPollInterval());}
getPollInterval(){const{staleThreshold,reconnectionBackoffRate}=this.constructor;const backoff=Math.pow(1+reconnectionBackoffRate,Math.min(this.reconnectAttempts,10));const jitterMax=this.reconnectAttempts===0?1:reconnectionBackoffRate;const jitter=jitterMax*Math.random();return staleThreshold*1e3*backoff*(1+jitter);}
reconnectIfStale(){if(this.connectionIsStale()){logger_default.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${secondsSince(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`);this.reconnectAttempts++;if(this.disconnectedRecently()){logger_default.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${secondsSince(this.disconnectedAt)} s`);}else{logger_default.log("ConnectionMonitor reopening");this.connection.reopen();}}}
get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt;}
connectionIsStale(){return secondsSince(this.refreshedAt)>this.constructor.staleThreshold;}
disconnectedRecently(){return this.disconnectedAt&&secondsSince(this.disconnectedAt)<this.constructor.staleThreshold;}
visibilityDidChange(){if(document.visibilityState==="visible"){setTimeout(()=>{if(this.connectionIsStale()||!this.connection.isOpen()){logger_default.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`);this.connection.reopen();}},200);}}};ConnectionMonitor.staleThreshold=6;ConnectionMonitor.reconnectionBackoffRate=0.15;connection_monitor_default=ConnectionMonitor;}});var internal_default;var init_internal=__esm({"node_modules/@rails/actioncable/src/internal.js"(){internal_default={"message_types":{"welcome":"welcome","disconnect":"disconnect","ping":"ping","confirmation":"confirm_subscription","rejection":"reject_subscription"},"disconnect_reasons":{"unauthorized":"unauthorized","invalid_request":"invalid_request","server_restart":"server_restart"},"default_mount_path":"/cable","protocols":["actioncable-v1-json","actioncable-unsupported"]};}});var message_types,protocols,supportedProtocols,indexOf,Connection,connection_default;var init_connection=__esm({"node_modules/@rails/actioncable/src/connection.js"(){init_adapters();init_connection_monitor();init_internal();init_logger();({message_types,protocols}=internal_default);supportedProtocols=protocols.slice(0,protocols.length-1);indexOf=[].indexOf;Connection=class{constructor(consumer2){this.open=this.open.bind(this);this.consumer=consumer2;this.subscriptions=this.consumer.subscriptions;this.monitor=new connection_monitor_default(this);this.disconnected=true;}
send(data){if(this.isOpen()){this.webSocket.send(JSON.stringify(data));return true;}else{return false;}}
open(){if(this.isActive()){logger_default.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`);return false;}else{logger_default.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${protocols}`);if(this.webSocket){this.uninstallEventHandlers();}
this.webSocket=new adapters_default.WebSocket(this.consumer.url,protocols);this.installEventHandlers();this.monitor.start();return true;}}
close({allowReconnect}={allowReconnect:true}){if(!allowReconnect){this.monitor.stop();}
if(this.isOpen()){return this.webSocket.close();}}
reopen(){logger_default.log(`Reopening WebSocket, current state is ${this.getState()}`);if(this.isActive()){try{return this.close();}catch(error2){logger_default.log("Failed to reopen WebSocket",error2);}finally{logger_default.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`);setTimeout(this.open,this.constructor.reopenDelay);}}else{return this.open();}}
getProtocol(){if(this.webSocket){return this.webSocket.protocol;}}
isOpen(){return this.isState("open");}
isActive(){return this.isState("open","connecting");}
isProtocolSupported(){return indexOf.call(supportedProtocols,this.getProtocol())>=0;}
isState(...states){return indexOf.call(states,this.getState())>=0;}
getState(){if(this.webSocket){for(let state in adapters_default.WebSocket){if(adapters_default.WebSocket[state]===this.webSocket.readyState){return state.toLowerCase();}}}
return null;}
installEventHandlers(){for(let eventName in this.events){const handler=this.events[eventName].bind(this);this.webSocket[`on${eventName}`]=handler;}}
uninstallEventHandlers(){for(let eventName in this.events){this.webSocket[`on${eventName}`]=function(){};}}};Connection.reopenDelay=500;Connection.prototype.events={message(event2){if(!this.isProtocolSupported()){return;}
const{identifier,message,reason,reconnect,type}=JSON.parse(event2.data);switch(type){case message_types.welcome:this.monitor.recordConnect();return this.subscriptions.reload();case message_types.disconnect:logger_default.log(`Disconnecting. Reason: ${reason}`);return this.close({allowReconnect:reconnect});case message_types.ping:return this.monitor.recordPing();case message_types.confirmation:this.subscriptions.confirmSubscription(identifier);return this.subscriptions.notify(identifier,"connected");case message_types.rejection:return this.subscriptions.reject(identifier);default:return this.subscriptions.notify(identifier,"received",message);}},open(){logger_default.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`);this.disconnected=false;if(!this.isProtocolSupported()){logger_default.log("Protocol is unsupported. Stopping monitor and disconnecting.");return this.close({allowReconnect:false});}},close(event2){logger_default.log("WebSocket onclose event");if(this.disconnected){return;}
this.disconnected=true;this.monitor.recordDisconnect();return this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()});},error(){logger_default.log("WebSocket onerror event");}};connection_default=Connection;}});var extend,Subscription;var init_subscription=__esm({"node_modules/@rails/actioncable/src/subscription.js"(){extend=function(object,properties){if(properties!=null){for(let key in properties){const value=properties[key];object[key]=value;}}
return object;};Subscription=class{constructor(consumer2,params2={},mixin){this.consumer=consumer2;this.identifier=JSON.stringify(params2);extend(this,mixin);}
perform(action,data={}){data.action=action;return this.send(data);}
send(data){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(data)});}
unsubscribe(){return this.consumer.subscriptions.remove(this);}};}});var SubscriptionGuarantor,subscription_guarantor_default;var init_subscription_guarantor=__esm({"node_modules/@rails/actioncable/src/subscription_guarantor.js"(){init_logger();SubscriptionGuarantor=class{constructor(subscriptions){this.subscriptions=subscriptions;this.pendingSubscriptions=[];}
guarantee(subscription){if(this.pendingSubscriptions.indexOf(subscription)==-1){logger_default.log(`SubscriptionGuarantor guaranteeing ${subscription.identifier}`);this.pendingSubscriptions.push(subscription);}else{logger_default.log(`SubscriptionGuarantor already guaranteeing ${subscription.identifier}`);}
this.startGuaranteeing();}
forget(subscription){logger_default.log(`SubscriptionGuarantor forgetting ${subscription.identifier}`);this.pendingSubscriptions=this.pendingSubscriptions.filter((s2)=>s2!==subscription);}
startGuaranteeing(){this.stopGuaranteeing();this.retrySubscribing();}
stopGuaranteeing(){clearTimeout(this.retryTimeout);}
retrySubscribing(){this.retryTimeout=setTimeout(()=>{if(this.subscriptions&&typeof this.subscriptions.subscribe==="function"){this.pendingSubscriptions.map((subscription)=>{logger_default.log(`SubscriptionGuarantor resubscribing ${subscription.identifier}`);this.subscriptions.subscribe(subscription);});}},500);}};subscription_guarantor_default=SubscriptionGuarantor;}});var Subscriptions;var init_subscriptions=__esm({"node_modules/@rails/actioncable/src/subscriptions.js"(){init_subscription();init_subscription_guarantor();init_logger();Subscriptions=class{constructor(consumer2){this.consumer=consumer2;this.guarantor=new subscription_guarantor_default(this);this.subscriptions=[];}
create(channelName,mixin){const channel=channelName;const params2=typeof channel==="object"?channel:{channel};const subscription=new Subscription(this.consumer,params2,mixin);return this.add(subscription);}
add(subscription){this.subscriptions.push(subscription);this.consumer.ensureActiveConnection();this.notify(subscription,"initialized");this.subscribe(subscription);return subscription;}
remove(subscription){this.forget(subscription);if(!this.findAll(subscription.identifier).length){this.sendCommand(subscription,"unsubscribe");}
return subscription;}
reject(identifier){return this.findAll(identifier).map((subscription)=>{this.forget(subscription);this.notify(subscription,"rejected");return subscription;});}
forget(subscription){this.guarantor.forget(subscription);this.subscriptions=this.subscriptions.filter((s2)=>s2!==subscription);return subscription;}
findAll(identifier){return this.subscriptions.filter((s2)=>s2.identifier===identifier);}
reload(){return this.subscriptions.map((subscription)=>this.subscribe(subscription));}
notifyAll(callbackName,...args){return this.subscriptions.map((subscription)=>this.notify(subscription,callbackName,...args));}
notify(subscription,callbackName,...args){let subscriptions;if(typeof subscription==="string"){subscriptions=this.findAll(subscription);}else{subscriptions=[subscription];}
return subscriptions.map((subscription2)=>typeof subscription2[callbackName]==="function"?subscription2[callbackName](...args):void 0);}
subscribe(subscription){if(this.sendCommand(subscription,"subscribe")){this.guarantor.guarantee(subscription);}}
confirmSubscription(identifier){logger_default.log(`Subscription confirmed ${identifier}`);this.findAll(identifier).map((subscription)=>this.guarantor.forget(subscription));}
sendCommand(subscription,command){const{identifier}=subscription;return this.consumer.send({command,identifier});}};}});function createWebSocketURL(url){if(typeof url==="function"){url=url();}
if(url&&!/^wss?:/i.test(url)){const a2=document.createElement("a");a2.href=url;a2.href=a2.href;a2.protocol=a2.protocol.replace("http","ws");return a2.href;}else{return url;}}
var Consumer;var init_consumer=__esm({"node_modules/@rails/actioncable/src/consumer.js"(){init_connection();init_subscriptions();Consumer=class{constructor(url){this._url=url;this.subscriptions=new Subscriptions(this);this.connection=new connection_default(this);}
get url(){return createWebSocketURL(this._url);}
send(data){return this.connection.send(data);}
connect(){return this.connection.open();}
disconnect(){return this.connection.close({allowReconnect:false});}
ensureActiveConnection(){if(!this.connection.isActive()){return this.connection.open();}}};}});var src_exports={};__export(src_exports,{Connection:()=>connection_default,ConnectionMonitor:()=>connection_monitor_default,Consumer:()=>Consumer,INTERNAL:()=>internal_default,Subscription:()=>Subscription,SubscriptionGuarantor:()=>subscription_guarantor_default,Subscriptions:()=>Subscriptions,adapters:()=>adapters_default,createConsumer:()=>createConsumer,createWebSocketURL:()=>createWebSocketURL,getConfig:()=>getConfig,logger:()=>logger_default});function createConsumer(url=getConfig("url")||internal_default.default_mount_path){return new Consumer(url);}
function getConfig(name){const element=document.head.querySelector(`meta[name='action-cable-${name}']`);if(element){return element.getAttribute("content");}}
var init_src=__esm({"node_modules/@rails/actioncable/src/index.js"(){init_connection();init_connection_monitor();init_consumer();init_internal();init_subscription();init_subscriptions();init_subscription_guarantor();init_adapters();init_logger();}});var require_tagify_min=__commonJS({"node_modules/@yaireo/tagify/dist/tagify.min.js"(exports,module){!function(t2,e2){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e2():"function"==typeof define&&define.amd?define(e2):(t2="undefined"!=typeof globalThis?globalThis:t2||self).Tagify=e2();}(exports,function(){"use strict";function t2(t3,e3){var i3=Object.keys(t3);if(Object.getOwnPropertySymbols){var s3=Object.getOwnPropertySymbols(t3);e3&&(s3=s3.filter(function(e4){return Object.getOwnPropertyDescriptor(t3,e4).enumerable;})),i3.push.apply(i3,s3);}
return i3;}
function e2(e3){for(var s3=1;s3<arguments.length;s3++){var a3=null!=arguments[s3]?arguments[s3]:{};s3%2?t2(Object(a3),true).forEach(function(t3){i2(e3,t3,a3[t3]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e3,Object.getOwnPropertyDescriptors(a3)):t2(Object(a3)).forEach(function(t3){Object.defineProperty(e3,t3,Object.getOwnPropertyDescriptor(a3,t3));});}
return e3;}
function i2(t3,e3,i3){return(e3=function(t4){var e4=function(t5,e5){if("object"!=typeof t5||null===t5)
return t5;var i4=t5[Symbol.toPrimitive];if(void 0!==i4){var s3=i4.call(t5,e5||"default");if("object"!=typeof s3)
return s3;throw new TypeError("@@toPrimitive must return a primitive value.");}
return("string"===e5?String:Number)(t5);}(t4,"string");return "symbol"==typeof e4?e4:String(e4);}(e3))in t3?Object.defineProperty(t3,e3,{value:i3,enumerable:true,configurable:true,writable:true}):t3[e3]=i3,t3;}
const s2=(t3,e3,i3,s3)=>(t3=""+t3,e3=""+e3,s3&&(t3=t3.trim(),e3=e3.trim()),i3?t3==e3:t3.toLowerCase()==e3.toLowerCase()),a2=(t3,e3)=>t3&&Array.isArray(t3)&&t3.map((t4)=>n2(t4,e3));function n2(t3,e3){var i3,s3={};for(i3 in t3)
e3.indexOf(i3)<0&&(s3[i3]=t3[i3]);return s3;}
function o2(t3){var e3=document.createElement("div");return t3.replace(/\&#?[0-9a-z]+;/gi,function(t4){return e3.innerHTML=t4,e3.innerText;});}
function r2(t3){return new DOMParser().parseFromString(t3.trim(),"text/html").body.firstElementChild;}
function l2(t3,e3){for(e3=e3||"previous";t3=t3[e3+"Sibling"];)
if(3==t3.nodeType)
return t3;}
function d2(t3){return "string"==typeof t3?t3.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t3;}
function h2(t3){var e3=Object.prototype.toString.call(t3).split(" ")[1].slice(0,-1);return t3===Object(t3)&&"Array"!=e3&&"Function"!=e3&&"RegExp"!=e3&&"HTMLUnknownElement"!=e3;}
function g2(t3,e3,i3){function s3(t4,e4){for(var i4 in e4)
if(e4.hasOwnProperty(i4)){if(h2(e4[i4])){h2(t4[i4])?s3(t4[i4],e4[i4]):t4[i4]=Object.assign({},e4[i4]);continue;}
if(Array.isArray(e4[i4])){t4[i4]=Object.assign([],e4[i4]);continue;}
t4[i4]=e4[i4];}}
return t3 instanceof Object||(t3={}),s3(t3,e3),i3&&s3(t3,i3),t3;}
function p2(){const t3=[],e3={};for(let i3 of arguments)
for(let s3 of i3)
h2(s3)?e3[s3.value]||(t3.push(s3),e3[s3.value]=1):t3.includes(s3)||t3.push(s3);return t3;}
function c2(t3){return String.prototype.normalize?"string"==typeof t3?t3.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t3;}
var u2=()=>/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent);function m2(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t3)=>(t3^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t3/4).toString(16));}
function v2(t3){return t3&&t3.classList&&t3.classList.contains(this.settings.classNames.tag);}
function f2(t3,e3){var i3=window.getSelection();return e3=e3||i3.getRangeAt(0),"string"==typeof t3&&(t3=document.createTextNode(t3)),e3&&(e3.deleteContents(),e3.insertNode(t3)),t3;}
function T2(t3,e3,i3){return t3?(e3&&(t3.__tagifyTagData=i3?e3:g2({},t3.__tagifyTagData||{},e3)),t3.__tagifyTagData):(console.warn("tag element doesn't exist",t3,e3),e3);}
var w2={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:true,onChangeAfterBlur:true,duplicates:false,whitelist:[],blacklist:[],enforceWhitelist:false,userInput:true,keepInvalidTags:false,createInvalidTags:true,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:true,skipInvalid:false,pasteAsTags:true,editTags:{clicks:2,keepInvalid:true},transformTag:()=>{},trim:true,a11y:{focusableTags:false},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:true,rightKey:false},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:true,caseSensitive:false,accentedSearch:true,includeSelectedTags:false,highlightFirst:false,closeOnSelect:true,clearOnSelect:true,position:"all",appendTarget:null},hooks:{beforeRemoveTag:()=>Promise.resolve(),beforePaste:()=>Promise.resolve(),suggestionClick:()=>Promise.resolve()}};function b2(){this.dropdown={};for(let t3 in this._dropdown)
this.dropdown[t3]="function"==typeof this._dropdown[t3]?this._dropdown[t3].bind(this):this._dropdown[t3];this.dropdown.refs();}
var y2={refs(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']");},getHeaderRef(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']");},getFooterRef(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']");},getAllSuggestionsRefs(){return[...this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector)];},show(t3){var e3,i3,a3,n3=this.settings,o3="mix"==n3.mode&&!n3.enforceWhitelist,r3=!n3.whitelist||!n3.whitelist.length,l3="manual"==n3.dropdown.position;if(t3=void 0===t3?this.state.inputText:t3,!(r3&&!o3&&!n3.templates.dropdownItemNoMatch||false===n3.dropdown.enable||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t3),t3&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t3),n3.templates.dropdownItemNoMatch&&(a3=n3.templates.dropdownItemNoMatch.call(this,{value:t3}))),!a3){if(this.suggestedListItems.length)
t3&&o3&&!this.state.editing.scope&&!s2(this.suggestedListItems[0].value,t3)&&this.suggestedListItems.unshift({value:t3});else{if(!t3||!o3||this.state.editing.scope)
return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t3}];}
i3=""+(h2(e3=this.suggestedListItems[0])?e3.value:e3),n3.autoComplete&&i3&&0==i3.indexOf(t3)&&this.input.autocomplete.suggest.call(this,e3);}
this.dropdown.fill(a3),n3.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(n3.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t3||true,this.state.dropdown.query=t3,this.setStateSelection(),l3||setTimeout(()=>{this.dropdown.position(),this.dropdown.render();}),setTimeout(()=>{this.trigger("dropdown:show",this.DOM.dropdown);});}},hide(t3){var e3=this.DOM,i3=e3.scope,s3=e3.dropdown,a3="manual"==this.settings.dropdown.position&&!t3;if(s3&&document.body.contains(s3)&&!a3)
return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,false),i3.setAttribute("aria-expanded",false),s3.parentNode.removeChild(s3),setTimeout(()=>{this.state.dropdown.visible=false;},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",s3),this;},toggle(t3){this.dropdown[this.state.dropdown.visible&&!t3?"hide":"show"]();},render(){var t3,e3,i3,s3=(t3=this.DOM.dropdown,(i3=t3.cloneNode(true)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(i3),e3=i3.clientHeight,i3.parentNode.removeChild(i3),e3),a3=this.settings;return "number"==typeof a3.dropdown.enabled&&a3.dropdown.enabled>=0?(this.DOM.scope.setAttribute("aria-expanded",true),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(a3.classNames.dropdownInital),this.dropdown.position(s3),a3.dropdown.appendTarget.appendChild(this.DOM.dropdown),setTimeout(()=>this.DOM.dropdown.classList.remove(a3.classNames.dropdownInital))),this):this;},fill(t3){t3="string"==typeof t3?t3:this.dropdown.createListHTML(t3||this.suggestedListItems);var e3,i3=this.settings.templates.dropdownContent.call(this,t3);this.DOM.dropdown.content.innerHTML=(e3=i3)?e3.replace(/\>[\r\n ]+\</g,"><").replace(/(<.*?>)|\s+/g,(t4,e4)=>e4||" "):"";},fillHeaderFooter(){var t3=this.dropdown.filterListItems(this.state.dropdown.query),e3=this.parseTemplate("dropdownHeader",[t3]),i3=this.parseTemplate("dropdownFooter",[t3]),s3=this.dropdown.getHeaderRef(),a3=this.dropdown.getFooterRef();e3&&s3?.parentNode.replaceChild(e3,s3),i3&&a3?.parentNode.replaceChild(i3,a3);},refilter(t3){t3=t3||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t3),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown);},position(t3){var e3=this.settings.dropdown;if("manual"!=e3.position){var i3,s3,a3,n3,o3,r3,l3=this.DOM.dropdown,d3=e3.placeAbove,h3=e3.appendTarget===document.body,g3=h3?window.pageYOffset:e3.appendTarget.scrollTop,p3=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,c3=p3.clientHeight,u3=Math.max(p3.clientWidth||0,window.innerWidth||0)>480?e3.position:"all",m3=this.DOM["input"==u3?"input":"scope"];if(t3=t3||l3.clientHeight,this.state.dropdown.visible){if("text"==u3?(a3=(i3=function(){const t4=document.getSelection();if(t4.rangeCount){const e4=t4.getRangeAt(0),i4=e4.startContainer,s4=e4.startOffset;let a4,n4;if(s4>0)
return n4=document.createRange(),n4.setStart(i4,s4-1),n4.setEnd(i4,s4),a4=n4.getBoundingClientRect(),{left:a4.right,top:a4.top,bottom:a4.bottom};if(i4.getBoundingClientRect)
return i4.getBoundingClientRect();}
return{left:-9999,top:-9999};}()).bottom,s3=i3.top,n3=i3.left,o3="auto"):(r3=function(t4){for(var e4=0,i4=0;t4&&t4!=p3;)
e4+=t4.offsetLeft||0,i4+=t4.offsetTop||0,t4=t4.parentNode;return{left:e4,top:i4};}(e3.appendTarget),s3=(i3=m3.getBoundingClientRect()).top-r3.top,a3=i3.bottom-1-r3.top,n3=i3.left-r3.left,o3=i3.width+"px"),!h3){let t4=function(){for(var t5=0,i4=e3.appendTarget.parentNode;i4;)
t5+=i4.scrollTop||0,i4=i4.parentNode;return t5;}();s3+=t4,a3+=t4;}
s3=Math.floor(s3),a3=Math.ceil(a3),d3=void 0===d3?c3-i3.bottom<t3:d3,l3.style.cssText="left:"+(n3+window.pageXOffset)+"px; width:"+o3+";"+(d3?"top: "+(s3+g3)+"px":"top: "+(a3+g3)+"px"),l3.setAttribute("placement",d3?"top":"bottom"),l3.setAttribute("position",u3);}}},events:{binding(){let t3=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e3=this.dropdown.events.callbacks,i3=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e3.onKeyDown.bind(this),onMouseOver:e3.onMouseOver.bind(this),onMouseLeave:e3.onMouseLeave.bind(this),onClick:e3.onClick.bind(this),onScroll:e3.onScroll.bind(this)},s3=t3?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(document[s3]("scroll",i3.position,true),window[s3]("resize",i3.position),window[s3]("keydown",i3.onKeyDown)),this.DOM.dropdown[s3]("mouseover",i3.onMouseOver),this.DOM.dropdown[s3]("mouseleave",i3.onMouseLeave),this.DOM.dropdown[s3]("mousedown",i3.onClick),this.DOM.dropdown.content[s3]("scroll",i3.onScroll);},callbacks:{onKeyDown(t3){if(this.state.hasFocus&&!this.state.composing){var e3=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownItemActiveSelector),i3=this.dropdown.getSuggestionDataByNode(e3);switch(t3.key){case "ArrowDown":case "ArrowUp":case "Down":case "Up":t3.preventDefault();var s3=this.dropdown.getAllSuggestionsRefs(),a3="ArrowUp"==t3.key||"Up"==t3.key;e3&&(e3=this.dropdown.getNextOrPrevOption(e3,!a3)),e3&&e3.matches(this.settings.classNames.dropdownItemSelector)||(e3=s3[a3?s3.length-1:0]),this.dropdown.highlightOption(e3,true);break;case "Escape":case "Esc":this.dropdown.hide();break;case "ArrowRight":if(this.state.actions.ArrowLeft)
return;case "Tab":if("mix"!=this.settings.mode&&e3&&!this.settings.autoComplete.rightKey&&!this.state.editing){t3.preventDefault();var n3=this.dropdown.getMappedValue(i3);return this.input.autocomplete.set.call(this,n3),false;}
return true;case "Enter":t3.preventDefault(),this.settings.hooks.suggestionClick(t3,{tagify:this,tagData:i3,suggestionElm:e3}).then(()=>{if(e3)
return this.dropdown.selectOption(e3),e3=this.dropdown.getNextOrPrevOption(e3,!a3),void this.dropdown.highlightOption(e3);this.dropdown.hide(),"mix"!=this.settings.mode&&this.addTags(this.state.inputText.trim(),true);}).catch((t4)=>t4);break;case "Backspace":{if("mix"==this.settings.mode||this.state.editing.scope)
return;const t4=this.input.raw.call(this);""!=t4&&8203!=t4.charCodeAt(0)||(true===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0));}}}},onMouseOver(t3){var e3=t3.target.closest(this.settings.classNames.dropdownItemSelector);e3&&this.dropdown.highlightOption(e3);},onMouseLeave(t3){this.dropdown.highlightOption();},onClick(t3){if(0==t3.button&&t3.target!=this.DOM.dropdown&&t3.target!=this.DOM.dropdown.content){var e3=t3.target.closest(this.settings.classNames.dropdownItemSelector),i3=this.dropdown.getSuggestionDataByNode(e3);this.state.actions.selectOption=true,setTimeout(()=>this.state.actions.selectOption=false,50),this.settings.hooks.suggestionClick(t3,{tagify:this,tagData:i3,suggestionElm:e3}).then(()=>{e3?this.dropdown.selectOption(e3,t3):this.dropdown.hide();}).catch((t4)=>console.warn(t4));}},onScroll(t3){var e3=t3.target,i3=e3.scrollTop/(e3.scrollHeight-e3.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(i3)});}}},getSuggestionDataByNode(t3){var e3=t3&&t3.getAttribute("value");return this.suggestedListItems.find((t4)=>t4.value==e3)||null;},getNextOrPrevOption(t3){let e3=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i3=this.dropdown.getAllSuggestionsRefs(),s3=i3.findIndex((e4)=>e4===t3);return e3?i3[s3+1]:i3[s3-1];},highlightOption(t3,e3){var i3,s3=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(s3),this.state.ddItemElm.removeAttribute("aria-selected")),!t3)
return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);i3=this.dropdown.getSuggestionDataByNode(t3),this.state.ddItemData=i3,this.state.ddItemElm=t3,t3.classList.add(s3),t3.setAttribute("aria-selected",true),e3&&(t3.parentNode.scrollTop=t3.clientHeight+t3.offsetTop-t3.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,i3),this.dropdown.position());},selectOption(t3,e3){var i3=this.settings.dropdown,s3=i3.clearOnSelect,a3=i3.closeOnSelect;if(!t3)
return this.addTags(this.state.inputText,true),void(a3&&this.dropdown.hide());e3=e3||{};var n3=t3.getAttribute("value"),o3="noMatch"==n3,r3=this.suggestedListItems.find((t4)=>(t4.value??t4)==n3);this.trigger("dropdown:select",{data:r3,elm:t3,event:e3}),n3&&(r3||o3)?(this.state.editing?this.onEditTagDone(null,g2({__isValid:true},this.normalizeTags([r3])[0])):this["mix"==this.settings.mode?"addMixTags":"addTags"]([r3||this.input.raw.call(this)],s3),this.DOM.input.parentNode&&(setTimeout(()=>{this.DOM.input.focus(),this.toggleFocusClass(true);}),a3&&setTimeout(this.dropdown.hide.bind(this)),t3.addEventListener("transitionend",()=>{this.dropdown.fillHeaderFooter(),setTimeout(()=>t3.remove(),100);},{once:true}),t3.classList.add(this.settings.classNames.dropdownItemHidden))):a3&&setTimeout(this.dropdown.hide.bind(this));},selectAll(t3){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e3=this.dropdown.filterListItems("");return t3||(e3=this.state.dropdown.suggestions),this.addTags(e3,true),this;},filterListItems(t3,e3){var i3,s3,a3,n3,o3,r3=this.settings,l3=r3.dropdown,d3=(e3=e3||{},[]),g3=[],p3=r3.whitelist,u3=l3.maxItems>=0?l3.maxItems:1/0,m3=l3.searchKeys,v3=0;if(!(t3="select"==r3.mode&&this.value.length&&this.value[0][r3.tagTextProp]==t3?"":t3)||!m3.length)
return d3=l3.includeSelectedTags?p3:p3.filter((t4)=>!this.isTagDuplicate(h2(t4)?t4.value:t4)),this.state.dropdown.suggestions=d3,d3.slice(0,u3);function f3(t4,e4){return e4.toLowerCase().split(" ").every((e5)=>t4.includes(e5.toLowerCase()));}
for(o3=l3.caseSensitive?""+t3:(""+t3).toLowerCase();v3<p3.length;v3++){let t4,r4;i3=p3[v3]instanceof Object?p3[v3]:{value:p3[v3]};let u4=!Object.keys(i3).some((t5)=>m3.includes(t5))?["value"]:m3;l3.fuzzySearch&&!e3.exact?(a3=u4.reduce((t5,e4)=>t5+" "+(i3[e4]||""),"").toLowerCase().trim(),l3.accentedSearch&&(a3=c2(a3),o3=c2(o3)),t4=0==a3.indexOf(o3),r4=a3===o3,s3=f3(a3,o3)):(t4=true,s3=u4.some((t5)=>{var s4=""+(i3[t5]||"");return l3.accentedSearch&&(s4=c2(s4),o3=c2(o3)),l3.caseSensitive||(s4=s4.toLowerCase()),r4=s4===o3,e3.exact?s4===o3:0==s4.indexOf(o3);})),n3=!l3.includeSelectedTags&&this.isTagDuplicate(h2(i3)?i3.value:i3),s3&&!n3&&(r4&&t4?g3.push(i3):"startsWith"==l3.sortby&&t4?d3.unshift(i3):d3.push(i3));}
return this.state.dropdown.suggestions=g3.concat(d3),"function"==typeof l3.sortby?l3.sortby(g3.concat(d3),o3):g3.concat(d3).slice(0,u3);},getMappedValue(t3){var e3=this.settings.dropdown.mapValueTo;return e3?"function"==typeof e3?e3(t3):t3[e3]||t3.value:t3.value;},createListHTML(t3){return g2([],t3).map((t4,i3)=>{"string"!=typeof t4&&"number"!=typeof t4||(t4={value:t4});var s3=this.dropdown.getMappedValue(t4);return s3="string"==typeof s3?d2(s3):s3,this.settings.templates.dropdownItem.apply(this,[e2(e2({},t4),{},{mappedValue:s3}),this]);}).join("");}};const x2="@yaireo/tagify/";var O2,D2={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},M2={wrapper:(t3,e3)=>`<tags class="${e3.classNames.namespace} ${e3.mode?`${e3.classNames[e3.mode+"Mode"]}`:""} ${t3.className}"
                    ${e3.readonly?"readonly":""}
                    ${e3.disabled?"disabled":""}
                    ${e3.required?"required":""}
                    ${"select"===e3.mode?"spellcheck='false'":""}
                    tabIndex="-1">
            <span ${!e3.readonly&&e3.userInput?"contenteditable":""} tabIndex="0" data-placeholder="${e3.placeholder||"&#8203;"}" aria-placeholder="${e3.placeholder||""}"
                class="${e3.classNames.input}"
                role="textbox"
                aria-autocomplete="both"
                aria-multiline="${"mix"==e3.mode}"></span>
                &#8203;
        </tags>`,tag(t3,e3){let i3=e3.settings;return `<tag title="${t3.title||t3.value}"
                    contenteditable='false'
                    spellcheck='false'
                    tabIndex="${i3.a11y.focusableTags?0:-1}"
                    class="${i3.classNames.tag} ${t3.class||""}"
                    ${this.getAttributes(t3)}>
            <x title='' class="${i3.classNames.tagX}" role='button' aria-label='remove tag'></x>
            <div>
                <span class="${i3.classNames.tagText}">${t3[i3.tagTextProp]||t3.value}</span>
            </div>
        </tag>`;},dropdown(t3){var e3=t3.dropdown,i3="manual"==e3.position,s3=`${t3.classNames.dropdown}`;return `<div class="${i3?"":s3} ${e3.classname}" role="listbox" aria-labelledby="dropdown">
                    <div data-selector='tagify-suggestions-wrapper' class="${t3.classNames.dropdownWrapper}"></div>
                </div>`;},dropdownContent(t3){var e3=this.settings,i3=this.state.dropdown.suggestions;return `
            ${e3.templates.dropdownHeader.call(this,i3)}
            ${t3}
            ${e3.templates.dropdownFooter.call(this,i3)}
        `;},dropdownItem(t3){return `<div ${this.getAttributes(t3)}
                    class='${this.settings.classNames.dropdownItem} ${t3.class?t3.class:""}'
                    tabindex="0"
                    role="option">${t3.mappedValue||t3.value}</div>`;},dropdownHeader(t3){return `<header data-selector='tagify-suggestions-header' class="${this.settings.classNames.dropdownHeader}"></header>`;},dropdownFooter(t3){var e3=t3.length-this.settings.dropdown.maxItems;return e3>0?`<footer data-selector='tagify-suggestions-footer' class="${this.settings.classNames.dropdownFooter}">
                ${e3} more items. Refine your search.
            </footer>`:"";},dropdownItemNoMatch:null};var I2={customBinding(){this.customEventsList.forEach((t3)=>{this.on(t3,this.settings.callbacks[t3]);});},binding(){let t3=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e3,i3=this.events.callbacks,s3=t3?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!t3){for(var a3 in this.state.mainEvents=t3,t3&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e3=this.listeners.main=this.listeners.main||{focus:["input",i3.onFocusBlur.bind(this)],keydown:["input",i3.onKeydown.bind(this)],click:["scope",i3.onClickScope.bind(this)],dblclick:["scope",i3.onDoubleClickScope.bind(this)],paste:["input",i3.onPaste.bind(this)],drop:["input",i3.onDrop.bind(this)],compositionstart:["input",i3.onCompositionStart.bind(this)],compositionend:["input",i3.onCompositionEnd.bind(this)]})
this.DOM[e3[a3][0]][s3](a3,e3[a3][1]);clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(i3.observeOriginalInputValue.bind(this),500);var n3=this.listeners.main.inputMutationObserver||new MutationObserver(i3.onInputDOMChange.bind(this));n3.disconnect(),"mix"==this.settings.mode&&n3.observe(this.DOM.input,{childList:true});}},bindGlobal(t3){var e3,i3=this.events.callbacks,s3=t3?"removeEventListener":"addEventListener";if(this.listeners&&(t3||!this.listeners.global))
for(e3 of(this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:i3[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:i3.onWindowKeyDown.bind(this)},{type:"blur",target:this.DOM.input,cb:i3.onFocusBlur.bind(this)},{type:"click",target:document,cb:i3.onClickAnywhere.bind(this)}],this.listeners.global))
e3.target[s3](e3.type,e3.cb);},unbindGlobal(){this.events.bindGlobal.call(this,true);},callbacks:{onFocusBlur(t3){var e3=this.settings,i3=t3.target?this.trim(t3.target.textContent):"",s3=this.value?.[0]?.[e3.tagTextProp],a3=t3.type,n3=e3.dropdown.enabled>=0,o3={relatedTarget:t3.relatedTarget},r3=this.state.actions.selectOption&&(n3||!e3.dropdown.closeOnSelect),l3=this.state.actions.addNew&&n3,d3=t3.relatedTarget&&v2.call(this,t3.relatedTarget)&&this.DOM.scope.contains(t3.relatedTarget);if("blur"==a3){if(t3.relatedTarget===this.DOM.scope)
return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),e3.onChangeAfterBlur&&this.triggerChangeEvent();}
if(!r3&&!l3)
if(this.state.hasFocus="focus"==a3&&+new Date(),this.toggleFocusClass(this.state.hasFocus),"mix"!=e3.mode){if("focus"==a3)
return this.trigger("focus",o3),void(0!==e3.dropdown.enabled&&e3.userInput||this.dropdown.show(this.value.length?"":void 0));"blur"==a3&&(this.trigger("blur",o3),this.loading(false),"select"==e3.mode&&(d3&&(this.removeTags(),i3=""),s3===i3&&(i3="")),i3&&!this.state.actions.selectOption&&e3.addTagOnBlur&&this.addTags(i3,true)),this.DOM.input.removeAttribute("style"),this.dropdown.hide();}else
"focus"==a3?this.trigger("focus",o3):"blur"==t3.type&&(this.trigger("blur",o3),this.loading(false),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection());},onCompositionStart(t3){this.state.composing=true;},onCompositionEnd(t3){this.state.composing=false;},onWindowKeyDown(t3){var e3,i3=document.activeElement,s3=v2.call(this,i3)&&this.DOM.scope.contains(document.activeElement),a3=s3&&i3.hasAttribute("readonly");if(s3&&!a3)
switch(e3=i3.nextElementSibling,t3.key){case "Backspace":this.settings.readonly||(this.removeTags(i3),(e3||this.DOM.input).focus());break;case "Enter":setTimeout(this.editTag.bind(this),0,i3);}},onKeydown(t3){var e3=this.settings;if(!this.state.composing&&e3.userInput){"select"==e3.mode&&e3.enforceWhitelist&&this.value.length&&"Tab"!=t3.key&&t3.preventDefault();var i3=this.trim(t3.target.textContent);if(this.trigger("keydown",{event:t3}),"mix"==e3.mode){switch(t3.key){case "Left":case "ArrowLeft":this.state.actions.ArrowLeft=true;break;case "Delete":case "Backspace":if(this.state.editing)
return;var s3=document.getSelection(),a3="Delete"==t3.key&&s3.anchorOffset==(s3.anchorNode.length||0),n3=s3.anchorNode.previousSibling,r3=1==s3.anchorNode.nodeType||!s3.anchorOffset&&n3&&1==n3.nodeType&&s3.anchorNode.previousSibling;o2(this.DOM.input.innerHTML);var d3,h3,g3,p3=this.getTagElms();if("edit"==e3.backspace&&r3)
return d3=1==s3.anchorNode.nodeType?null:s3.anchorNode.previousElementSibling,setTimeout(this.editTag.bind(this),0,d3),void t3.preventDefault();if(u2()&&r3 instanceof Element)
return g3=l2(r3),r3.hasAttribute("readonly")||r3.remove(),this.DOM.input.focus(),void setTimeout(()=>{this.placeCaretAfterNode(g3),this.DOM.input.click();});if("BR"==s3.anchorNode.nodeName)
return;if((a3||r3)&&1==s3.anchorNode.nodeType?h3=0==s3.anchorOffset?a3?p3[0]:null:p3[Math.min(p3.length,s3.anchorOffset)-1]:a3?h3=s3.anchorNode.nextElementSibling:r3 instanceof Element&&(h3=r3),3==s3.anchorNode.nodeType&&!s3.anchorNode.nodeValue&&s3.anchorNode.previousElementSibling&&t3.preventDefault(),(r3||a3)&&!e3.backspace)
return void t3.preventDefault();if("Range"!=s3.type&&!s3.anchorOffset&&s3.anchorNode==this.DOM.input&&"Delete"!=t3.key)
return void t3.preventDefault();if("Range"!=s3.type&&h3&&h3.hasAttribute("readonly"))
return void this.placeCaretAfterNode(l2(h3));clearTimeout(O2),O2=setTimeout(()=>{var t4=document.getSelection();o2(this.DOM.input.innerHTML),!a3&&t4.anchorNode.previousSibling,this.value=[].map.call(p3,(t5,e4)=>{var i4=T2(t5);if(t5.parentNode||i4.readonly)
return i4;this.trigger("remove",{tag:t5,index:e4,data:i4});}).filter((t5)=>t5);},20);}
return true;}
switch(t3.key){case "Backspace":"select"==e3.mode&&e3.enforceWhitelist&&this.value.length?this.removeTags():this.state.dropdown.visible&&"manual"!=e3.dropdown.position||""!=t3.target.textContent&&8203!=i3.charCodeAt(0)||(true===e3.backspace?this.removeTags():"edit"==e3.backspace&&setTimeout(this.editTag.bind(this),0));break;case "Esc":case "Escape":if(this.state.dropdown.visible)
return;t3.target.blur();break;case "Down":case "ArrowDown":this.state.dropdown.visible||this.dropdown.show();break;case "ArrowRight":{let t4=this.state.inputSuggestion||this.state.ddItemData;if(t4&&e3.autoComplete.rightKey)
return void this.addTags([t4],true);break;}
case "Tab":{let s4="select"==e3.mode;if(!i3||s4)
return true;t3.preventDefault();}
case "Enter":if(this.state.dropdown.visible&&"manual"!=e3.dropdown.position)
return;t3.preventDefault(),setTimeout(()=>{this.state.dropdown.visible||this.state.actions.selectOption||this.addTags(i3,true);});}}},onInput(t3){this.postUpdate();var e3=this.settings;if("mix"==e3.mode)
return this.events.callbacks.onMixTagsInput.call(this,t3);var i3=this.input.normalize.call(this),s3=i3.length>=e3.dropdown.enabled,a3={value:i3,inputElm:this.DOM.input},n3=this.validateTag({value:i3});"select"==e3.mode&&this.toggleScopeValidation(n3),a3.isValid=n3,this.state.inputText!=i3&&(this.input.set.call(this,i3,false),-1!=i3.search(e3.delimiters)?this.addTags(i3)&&this.input.set.call(this):e3.dropdown.enabled>=0&&this.dropdown[s3?"show":"hide"](i3),this.trigger("input",a3));},onMixTagsInput(t3){var e3,i3,s3,a3,n3,o3,r3,l3,d3=this.settings,h3=this.value.length,p3=this.getTagElms(),c3=document.createDocumentFragment(),m3=window.getSelection().getRangeAt(0),v3=[].map.call(p3,(t4)=>T2(t4).value);if("deleteContentBackward"==t3.inputType&&u2()&&this.events.callbacks.onKeydown.call(this,{target:t3.target,key:"Backspace"}),this.value.slice().forEach((t4)=>{t4.readonly&&!v3.includes(t4.value)&&c3.appendChild(this.createTagElem(t4));}),c3.childNodes.length&&(m3.insertNode(c3),this.setRangeAtStartEnd(false,c3.lastChild)),p3.length!=h3)
return this.value=[].map.call(this.getTagElms(),(t4)=>T2(t4)),void this.update({withoutChangeEvent:true});if(this.hasMaxTags())
return true;if(window.getSelection&&(o3=window.getSelection()).rangeCount>0&&3==o3.anchorNode.nodeType){if((m3=o3.getRangeAt(0).cloneRange()).collapse(true),m3.setStart(o3.focusNode,0),s3=(e3=m3.toString().slice(0,m3.endOffset)).split(d3.pattern).length-1,(i3=e3.match(d3.pattern))&&(a3=e3.slice(e3.lastIndexOf(i3[i3.length-1]))),a3){if(this.state.actions.ArrowLeft=false,this.state.tag={prefix:a3.match(d3.pattern)[0],value:a3.replace(d3.pattern,"")},this.state.tag.baseOffset=o3.baseOffset-this.state.tag.value.length,l3=this.state.tag.value.match(d3.delimiters))
return this.state.tag.value=this.state.tag.value.replace(d3.delimiters,""),this.state.tag.delimiters=l3[0],this.addTags(this.state.tag.value,d3.dropdown.clearOnSelect),void this.dropdown.hide();n3=this.state.tag.value.length>=d3.dropdown.enabled;try{r3=(r3=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&r3.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset];}catch(t4){}
(r3||s3<this.state.mixMode.matchedPatternCount)&&(n3=false);}else
this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=s3;}
setTimeout(()=>{this.update({withoutChangeEvent:true}),this.trigger("input",g2({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[n3?"show":"hide"](this.state.tag.value);},10);},onInputIE(t3){var e3=this;setTimeout(function(){e3.events.callbacks.onInput.call(e3,t3);});},observeOriginalInputValue(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues();},onClickAnywhere(t3){t3.target==this.DOM.scope||this.DOM.scope.contains(t3.target)||(this.toggleFocusClass(false),this.state.hasFocus=false);},onClickScope(t3){var e3=this.settings,i3=t3.target.closest("."+e3.classNames.tag),s3=+new Date()-this.state.hasFocus;if(t3.target!=this.DOM.scope){if(!t3.target.classList.contains(e3.classNames.tagX))
return i3?(this.trigger("click",{tag:i3,index:this.getNodeIndex(i3),data:T2(i3),event:t3}),void(1!==e3.editTags&&1!==e3.editTags.clicks||this.events.callbacks.onDoubleClickScope.call(this,t3))):void(t3.target==this.DOM.input&&("mix"==e3.mode&&this.fixFirefoxLastTagNoCaret(),s3>500)?this.state.dropdown.visible?this.dropdown.hide():0===e3.dropdown.enabled&&"mix"!=e3.mode&&this.dropdown.show(this.value.length?"":void 0):"select"!=e3.mode||0!==e3.dropdown.enabled||this.state.dropdown.visible||this.dropdown.show());this.removeTags(t3.target.parentNode);}else
this.DOM.input.focus();},onPaste(t3){t3.preventDefault();var e3,i3,s3=this.settings;if("select"==s3.mode&&s3.enforceWhitelist||!s3.userInput)
return false;s3.readonly||(e3=t3.clipboardData||window.clipboardData,i3=e3.getData("Text"),s3.hooks.beforePaste(t3,{tagify:this,pastedText:i3,clipboardData:e3}).then((e4)=>{void 0===e4&&(e4=i3),e4&&(this.injectAtCaret(e4,window.getSelection().getRangeAt(0)),"mix"==this.settings.mode?this.events.callbacks.onMixTagsInput.call(this,t3):this.settings.pasteAsTags?this.addTags(this.state.inputText+e4,true):this.state.inputText=e4);}).catch((t4)=>t4));},onDrop(t3){t3.preventDefault();},onEditTagInput(t3,e3){var i3=t3.closest("."+this.settings.classNames.tag),s3=this.getNodeIndex(i3),a3=T2(i3),n3=this.input.normalize.call(this,t3),o3={[this.settings.tagTextProp]:n3,__tagId:a3.__tagId},r3=this.validateTag(o3);this.editTagChangeDetected(g2(a3,o3))||true!==t3.originalIsValid||(r3=true),i3.classList.toggle(this.settings.classNames.tagInvalid,true!==r3),a3.__isValid=r3,i3.title=true===r3?a3.title||a3.value:r3,n3.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=n3),this.dropdown.show(n3)),this.trigger("edit:input",{tag:i3,index:s3,data:g2({},this.value[s3],{newValue:n3}),event:e3});},onEditTagPaste(t3,e3){var i3=(e3.clipboardData||window.clipboardData).getData("Text");e3.preventDefault();var s3=f2(i3);this.setRangeAtStartEnd(false,s3);},onEditTagFocus(t3){this.state.editing={scope:t3,input:t3.querySelector("[contenteditable]")};},onEditTagBlur(t3){if(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(t3)){var e3,i3,s3=this.settings,a3=t3.closest("."+s3.classNames.tag),n3=T2(a3),o3=this.input.normalize.call(this,t3),r3={[s3.tagTextProp]:o3,__tagId:n3.__tagId},l3=n3.__originalData,d3=this.editTagChangeDetected(g2(n3,r3)),h3=this.validateTag(r3);if(o3)
if(d3){if(e3=this.hasMaxTags(),i3=g2({},l3,{[s3.tagTextProp]:this.trim(o3),__isValid:h3}),s3.transformTag.call(this,i3,l3),true!==(h3=(!e3||true===l3.__isValid)&&this.validateTag(i3))){if(this.trigger("invalid",{data:i3,tag:a3,message:h3}),s3.editTags.keepInvalid)
return;s3.keepInvalidTags?i3.__isValid=h3:i3=l3;}else
s3.keepInvalidTags&&(delete i3.title,delete i3["aria-invalid"],delete i3.class);this.onEditTagDone(a3,i3);}else
this.onEditTagDone(a3,l3);else
this.onEditTagDone(a3);}},onEditTagkeydown(t3,e3){if(!this.state.composing)
switch(this.trigger("edit:keydown",{event:t3}),t3.key){case "Esc":case "Escape":e3.parentNode.replaceChild(e3.__tagifyTagData.__originalHTML,e3),this.state.editing=false;case "Enter":case "Tab":t3.preventDefault(),t3.target.blur();}},onDoubleClickScope(t3){var e3,i3,s3=t3.target.closest("."+this.settings.classNames.tag),a3=T2(s3),n3=this.settings;s3&&n3.userInput&&false!==a3.editable&&(e3=s3.classList.contains(this.settings.classNames.tagEditing),i3=s3.hasAttribute("readonly"),"select"==n3.mode||n3.readonly||e3||i3||!this.settings.editTags||this.editTag(s3),this.toggleFocusClass(true),this.trigger("dblclick",{tag:s3,index:this.getNodeIndex(s3),data:T2(s3)}));},onInputDOMChange(t3){t3.forEach((t4)=>{t4.addedNodes.forEach((t5)=>{if("<div><br></div>"==t5.outerHTML)
t5.replaceWith(document.createElement("br"));else if(1==t5.nodeType&&t5.querySelector(this.settings.classNames.tagSelector)){let e4=document.createTextNode("");3==t5.childNodes[0].nodeType&&"BR"!=t5.previousSibling.nodeName&&(e4=document.createTextNode("\n")),t5.replaceWith(e4,...[...t5.childNodes].slice(0,-1)),this.placeCaretAfterNode(e4);}else if(v2.call(this,t5)&&(3!=t5.previousSibling?.nodeType||t5.previousSibling.textContent||t5.previousSibling.remove(),t5.previousSibling&&"BR"==t5.previousSibling.nodeName)){t5.previousSibling.replaceWith("\n\u200B");let e4=t5.nextSibling,i3="";for(;e4;)
i3+=e4.textContent,e4=e4.nextSibling;i3.trim()&&this.placeCaretAfterNode(t5.previousSibling);}}),t4.removedNodes.forEach((t5)=>{t5&&"BR"==t5.nodeName&&v2.call(this,e3)&&(this.removeTags(e3),this.fixFirefoxLastTagNoCaret());});});var e3=this.DOM.input.lastChild;e3&&""==e3.nodeValue&&e3.remove(),e3&&"BR"==e3.nodeName||this.DOM.input.appendChild(document.createElement("br"));}}};function N2(t3,e3){if(!t3){console.warn("Tagify:","input element not found",t3);const e4=new Proxy(this,{get:()=>()=>e4});return e4;}
if(t3.__tagify)
return console.warn("Tagify: ","input element is already Tagified - Same instance is returned.",t3),t3.__tagify;var i3;g2(this,function(t4){var e4=document.createTextNode("");function i4(t5,i5,s3){s3&&i5.split(/\s+/g).forEach((i6)=>e4[t5+"EventListener"].call(e4,i6,s3));}
return{off(t5,e5){return i4("remove",t5,e5),this;},on(t5,e5){return e5&&"function"==typeof e5&&i4("add",t5,e5),this;},trigger(i5,s3,a3){var n3;if(a3=a3||{cloneData:true},i5)
if(t4.settings.isJQueryPlugin)
"remove"==i5&&(i5="removeTag"),jQuery(t4.DOM.originalInput).triggerHandler(i5,[s3]);else{try{var o3="object"==typeof s3?s3:{value:s3};if((o3=a3.cloneData?g2({},o3):o3).tagify=this,s3.event&&(o3.event=this.cloneEvent(s3.event)),s3 instanceof Object)
for(var r3 in s3)
s3[r3]instanceof HTMLElement&&(o3[r3]=s3[r3]);n3=new CustomEvent(i5,{detail:o3});}catch(t5){console.warn(t5);}
e4.dispatchEvent(n3);}}};}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e3=e3||{},this.getPersistedData=(i3=e3.id,(t4)=>{let e4,s3="/"+t4;if(1==localStorage.getItem(x2+i3+"/v",1))
try{e4=JSON.parse(localStorage[x2+i3+s3]);}catch(t5){}
return e4;}),this.setPersistedData=((t4)=>t4?(localStorage.setItem(x2+t4+"/v",1),(e4,i4)=>{let s3="/"+i4,a3=JSON.stringify(e4);e4&&i4&&(localStorage.setItem(x2+t4+s3,a3),dispatchEvent(new Event("storage")));}):()=>{})(e3.id),this.clearPersistedData=((t4)=>(e4)=>{const i4=x2+"/"+t4+"/";if(e4)
localStorage.removeItem(i4+e4);else
for(let t5 in localStorage)
t5.includes(i4)&&localStorage.removeItem(t5);})(e3.id),this.applySettings(t3,e3),this.state={inputText:"",editing:false,composing:false,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t3),b2.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t3.autofocus&&this.DOM.input.focus(),t3.__tagify=this;}
return N2.prototype={_dropdown:y2,getSetTagData:T2,helpers:{sameStr:s2,removeCollectionProp:a2,omit:n2,isObject:h2,parseHTML:r2,escapeHTML:d2,extend:g2,concatWithoutDups:p2,getUID:m2,isNodeTag:v2},customEventsList:["change","add","remove","invalid","input","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim(t3){return this.settings.trim&&t3&&"string"==typeof t3?t3.trim():t3;},parseHTML:r2,templates:M2,parseTemplate(t3,e3){return r2((t3=this.settings.templates[t3]||t3).apply(this,e3));},set whitelist(t3){const e3=t3&&Array.isArray(t3);this.settings.whitelist=e3?t3:[],this.setPersistedData(e3?t3:[],"whitelist");},get whitelist(){return this.settings.whitelist;},generateClassSelectors(t3){for(let e3 in t3){let i3=e3;Object.defineProperty(t3,i3+"Selector",{get(){return "."+this[i3].split(" ")[0];}});}},applySettings(t3,i3){w2.templates=this.templates;var s3=g2({},w2,"mix"==i3.mode?{dropdown:{position:"text"}}:{}),a3=this.settings=g2({},s3,i3);if(a3.disabled=t3.hasAttribute("disabled"),a3.readonly=a3.readonly||t3.hasAttribute("readonly"),a3.placeholder=d2(t3.getAttribute("placeholder")||a3.placeholder||""),a3.required=t3.hasAttribute("required"),this.generateClassSelectors(a3.classNames),void 0===a3.dropdown.includeSelectedTags&&(a3.dropdown.includeSelectedTags=a3.duplicates),this.isIE&&(a3.autoComplete=false),["whitelist","blacklist"].forEach((e3)=>{var i4=t3.getAttribute("data-"+e3);i4&&(i4=i4.split(a3.delimiters))instanceof Array&&(a3[e3]=i4);}),"autoComplete"in i3&&!h2(i3.autoComplete)&&(a3.autoComplete=w2.autoComplete,a3.autoComplete.enabled=i3.autoComplete),"mix"==a3.mode&&(a3.pattern=a3.pattern||/@/,a3.autoComplete.rightKey=true,a3.delimiters=i3.delimiters||null,a3.tagTextProp&&!a3.dropdown.searchKeys.includes(a3.tagTextProp)&&a3.dropdown.searchKeys.push(a3.tagTextProp)),t3.pattern)
try{a3.pattern=new RegExp(t3.pattern);}catch(t4){}
if(a3.delimiters){a3._delimiters=a3.delimiters;try{a3.delimiters=new RegExp(this.settings.delimiters,"g");}catch(t4){}}
a3.disabled&&(a3.userInput=false),this.TEXTS=e2(e2({},D2),a3.texts||{}),("select"!=a3.mode||i3.dropdown?.enabled)&&a3.userInput||(a3.dropdown.enabled=0),a3.dropdown.appendTarget=i3.dropdown?.appendTarget||document.body;let n3=this.getPersistedData("whitelist");Array.isArray(n3)&&(this.whitelist=Array.isArray(a3.whitelist)?p2(a3.whitelist,n3):n3);},getAttributes(t3){var e3,i3=this.getCustomAttributes(t3),s3="";for(e3 in i3)
s3+=" "+e3+(void 0!==t3[e3]?`="${i3[e3]}"`:"");return s3;},getCustomAttributes(t3){if(!h2(t3))
return "";var e3,i3={};for(e3 in t3)
"__"!=e3.slice(0,2)&&"class"!=e3&&t3.hasOwnProperty(e3)&&void 0!==t3[e3]&&(i3[e3]=d2(t3[e3]));return i3;},setStateSelection(){var t3=window.getSelection(),e3={anchorOffset:t3.anchorOffset,anchorNode:t3.anchorNode,range:t3.getRangeAt&&t3.rangeCount&&t3.getRangeAt(0)};return this.state.selection=e3,e3;},getCSSVars(){var t3=getComputedStyle(this.DOM.scope,null);var e3;this.CSSVars={tagHideTransition:((t4)=>{let e4=t4.value;return "s"==t4.unit?1e3*e4:e4;})(function(t4){if(!t4)
return{};var e4=(t4=t4.trim().split(" ")[0]).split(/\d+/g).filter((t5)=>t5).pop().trim();return{value:+t4.split(e4).filter((t5)=>t5)[0].trim(),unit:e4};}((e3="tag-hide-transition",t3.getPropertyValue("--"+e3))))};},build(t3){var e3=this.DOM;this.settings.mixMode.integrated?(e3.originalInput=null,e3.scope=t3,e3.input=t3):(e3.originalInput=t3,e3.originalInput_tabIndex=t3.tabIndex,e3.scope=this.parseTemplate("wrapper",[t3,this.settings]),e3.input=e3.scope.querySelector(this.settings.classNames.inputSelector),t3.parentNode.insertBefore(e3.scope,t3),t3.tabIndex=-1);},destroy(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(true),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval);},loadOriginalValues(t3){var e3,i3=this.settings;if(this.state.blockChangeEvent=true,void 0===t3){const e4=this.getPersistedData("value");t3=e4&&!this.DOM.originalInput.value?e4:i3.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value;}
if(this.removeAllTags(),t3)
if("mix"==i3.mode)
this.parseMixTags(t3),(e3=this.DOM.input.lastChild)&&"BR"==e3.tagName||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{JSON.parse(t3)instanceof Array&&(t3=JSON.parse(t3));}catch(t4){}
this.addTags(t3,true).forEach((t4)=>t4&&t4.classList.add(i3.classNames.tagNoAnimation));}
else
this.postUpdate();this.state.lastOriginalValueReported=i3.mixMode.integrated?"":this.DOM.originalInput.value;},cloneEvent(t3){var e3={};for(var i3 in t3)
"path"!=i3&&(e3[i3]=t3[i3]);return e3;},loading(t3){return this.state.isLoading=t3,this.DOM.scope.classList[t3?"add":"remove"](this.settings.classNames.scopeLoading),this;},tagLoading(t3,e3){return t3&&t3.classList[e3?"add":"remove"](this.settings.classNames.tagLoading),this;},toggleClass(t3,e3){"string"==typeof t3&&this.DOM.scope.classList.toggle(t3,e3);},toggleScopeValidation(t3){var e3=true===t3||void 0===t3;!this.settings.required&&t3&&t3===this.TEXTS.empty&&(e3=true),this.toggleClass(this.settings.classNames.tagInvalid,!e3),this.DOM.scope.title=e3?"":t3;},toggleFocusClass(t3){this.toggleClass(this.settings.classNames.focus,!!t3);},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t3=this.DOM.originalInput,e3=this.state.lastOriginalValueReported!==t3.value,i3=new CustomEvent("change",{bubbles:true});e3&&(this.state.lastOriginalValueReported=t3.value,i3.simulated=true,t3._valueTracker&&t3._valueTracker.setValue(Math.random()),t3.dispatchEvent(i3),this.trigger("change",this.state.lastOriginalValueReported),t3.value=this.state.lastOriginalValueReported);}},events:I2,fixFirefoxLastTagNoCaret(){},setRangeAtStartEnd(t3,e3){if(e3){t3="number"==typeof t3?t3:!!t3,e3=e3.lastChild||e3;var i3=document.getSelection();if(i3.focusNode instanceof Element&&!this.DOM.input.contains(i3.focusNode))
return true;try{i3.rangeCount>=1&&["Start","End"].forEach((s3)=>i3.getRangeAt(0)["set"+s3](e3,t3||e3.length));}catch(t4){}}},placeCaretAfterNode(t3){if(t3&&t3.parentNode){var e3=t3,i3=window.getSelection(),s3=i3.getRangeAt(0);i3.rangeCount&&(s3.setStartAfter(e3),s3.collapse(true),i3.removeAllRanges(),i3.addRange(s3));}},insertAfterTag(t3,e3){if(e3=e3||this.settings.mixMode.insertAfterTag,t3&&t3.parentNode&&e3)
return e3="string"==typeof e3?document.createTextNode(e3):e3,t3.parentNode.insertBefore(e3,t3.nextSibling),e3;},editTagChangeDetected(t3){var e3=t3.__originalData;for(var i3 in e3)
if(!this.dataProps.includes(i3)&&t3[i3]!=e3[i3])
return true;return false;},getTagTextNode(t3){return t3.querySelector(this.settings.classNames.tagTextSelector);},setTagTextNode(t3,e3){this.getTagTextNode(t3).innerHTML=d2(e3);},editTag(t3,e3){t3=t3||this.getLastTag(),e3=e3||{},this.dropdown.hide();var i3=this.settings,s3=this.getTagTextNode(t3),a3=this.getNodeIndex(t3),n3=T2(t3),o3=this.events.callbacks,r3=this,l3=true;if(s3){if(!(n3 instanceof Object&&"editable"in n3)||n3.editable)
return n3=T2(t3,{__originalData:g2({},n3),__originalHTML:t3.cloneNode(true)}),T2(n3.__originalHTML,n3.__originalData),s3.setAttribute("contenteditable",true),t3.classList.add(i3.classNames.tagEditing),s3.addEventListener("focus",o3.onEditTagFocus.bind(this,t3)),s3.addEventListener("blur",function(){setTimeout(()=>o3.onEditTagBlur.call(r3,r3.getTagTextNode(t3)));}),s3.addEventListener("input",o3.onEditTagInput.bind(this,s3)),s3.addEventListener("paste",o3.onEditTagPaste.bind(this,s3)),s3.addEventListener("keydown",(e4)=>o3.onEditTagkeydown.call(this,e4,t3)),s3.addEventListener("compositionstart",o3.onCompositionStart.bind(this)),s3.addEventListener("compositionend",o3.onCompositionEnd.bind(this)),e3.skipValidation||(l3=this.editTagToggleValidity(t3)),s3.originalIsValid=l3,this.trigger("edit:start",{tag:t3,index:a3,data:n3,isValid:l3}),s3.focus(),this.setRangeAtStartEnd(false,s3),this;}else
console.warn("Cannot find element in Tag template: .",i3.classNames.tagTextSelector);},editTagToggleValidity(t3,e3){var i3;if(e3=e3||T2(t3))
return(i3=!("__isValid"in e3)||true===e3.__isValid)||this.removeTagsFromValue(t3),this.update(),t3.classList.toggle(this.settings.classNames.tagNotAllowed,!i3),e3.__isValid;console.warn("tag has no data: ",t3,e3);},onEditTagDone(t3,e3){e3=e3||{};var i3={tag:t3=t3||this.state.editing.scope,index:this.getNodeIndex(t3),previousData:T2(t3),data:e3};this.trigger("edit:beforeUpdate",i3,{cloneData:false}),this.state.editing=false,delete e3.__originalData,delete e3.__originalHTML,t3&&e3[this.settings.tagTextProp]?(t3=this.replaceTag(t3,e3),this.editTagToggleValidity(t3,e3),this.settings.a11y.focusableTags?t3.focus():this.placeCaretAfterNode(t3)):t3&&this.removeTags(t3),this.trigger("edit:updated",i3),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags();},replaceTag(t3,e3){e3&&e3.value||(e3=t3.__tagifyTagData),e3.__isValid&&1!=e3.__isValid&&g2(e3,this.getInvalidTagAttrs(e3,e3.__isValid));var i3=this.createTagElem(e3);return t3.parentNode.replaceChild(i3,t3),this.updateValueByDOMTags(),i3;},updateValueByDOMTags(){this.value.length=0,[].forEach.call(this.getTagElms(),(t3)=>{t3.classList.contains(this.settings.classNames.tagNotAllowed.split(" ")[0])||this.value.push(T2(t3));}),this.update();},injectAtCaret(t3,e3){return!(e3=e3||this.state.selection?.range)&&t3?(this.appendMixTags(t3),this):(f2(t3,e3),this.setRangeAtStartEnd(false,t3),this.updateValueByDOMTags(),this.update(),this);},input:{set(){let t3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e3=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i3=this.settings.dropdown.closeOnSelect;this.state.inputText=t3,e3&&(this.DOM.input.innerHTML=d2(""+t3)),!t3&&i3&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this);},raw(){return this.DOM.input.textContent;},validate(){var t3=!this.state.inputText||true===this.validateTag({value:this.state.inputText});return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t3),t3;},normalize(t3){var e3=t3||this.DOM.input,i3=[];e3.childNodes.forEach((t4)=>3==t4.nodeType&&i3.push(t4.nodeValue)),i3=i3.join("\n");try{i3=i3.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0));}catch(t4){}
return i3=i3.replace(/\s/g," "),this.trim(i3);},autocomplete:{suggest(t3){if(this.settings.autoComplete.enabled){"string"==typeof(t3=t3||{value:""})&&(t3={value:t3});var e3=this.dropdown.getMappedValue(t3);if("number"!=typeof e3){var i3=e3.substr(0,this.state.inputText.length).toLowerCase(),s3=e3.substring(this.state.inputText.length);e3&&this.state.inputText&&i3==this.state.inputText.toLowerCase()?(this.DOM.input.setAttribute("data-suggest",s3),this.state.inputSuggestion=t3):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion);}}},set(t3){var e3=this.DOM.input.getAttribute("data-suggest"),i3=t3||(e3?this.state.inputText+e3:null);return!!i3&&("mix"==this.settings.mode?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+i3)):(this.input.set.call(this,i3),this.setRangeAtStartEnd(false,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),true);}}},getTagIdx(t3){return this.value.findIndex((e3)=>e3.__tagId==(t3||{}).__tagId);},getNodeIndex(t3){var e3=0;if(t3)
for(;t3=t3.previousElementSibling;)
e3++;return e3;},getTagElms(){for(var t3=arguments.length,e3=new Array(t3),i3=0;i3<t3;i3++)
e3[i3]=arguments[i3];var s3="."+[...this.settings.classNames.tag.split(" "),...e3].join(".");return[].slice.call(this.DOM.scope.querySelectorAll(s3));},getLastTag(){var t3=this.DOM.scope.querySelectorAll(`${this.settings.classNames.tagSelector}:not(.${this.settings.classNames.tagHide}):not([readonly])`);return t3[t3.length-1];},isTagDuplicate(t3,e3,i3){var a3=0;if("select"==this.settings.mode)
return false;for(let n3 of this.value){s2(this.trim(""+t3),n3.value,e3)&&i3!=n3.__tagId&&a3++;}
return a3;},getTagIndexByValue(t3){var e3=[];return this.getTagElms().forEach((i3,a3)=>{s2(this.trim(i3.textContent),t3,this.settings.dropdown.caseSensitive)&&e3.push(a3);}),e3;},getTagElmByValue(t3){var e3=this.getTagIndexByValue(t3)[0];return this.getTagElms()[e3];},flashTag(t3){t3&&(t3.classList.add(this.settings.classNames.tagFlash),setTimeout(()=>{t3.classList.remove(this.settings.classNames.tagFlash);},100));},isTagBlacklisted(t3){return t3=this.trim(t3.toLowerCase()),this.settings.blacklist.filter((e3)=>(""+e3).toLowerCase()==t3).length;},isTagWhitelisted(t3){return!!this.getWhitelistItem(t3);},getWhitelistItem(t3,e3,i3){e3=e3||"value";var a3,n3=this.settings;return(i3=i3||n3.whitelist).some((i4)=>{var o3="string"==typeof i4?i4:i4[e3]||i4.value;if(s2(o3,t3,n3.dropdown.caseSensitive,n3.trim))
return a3="string"==typeof i4?{value:i4}:i4,true;}),a3||"value"!=e3||"value"==n3.tagTextProp||(a3=this.getWhitelistItem(t3,n3.tagTextProp,i3)),a3;},validateTag(t3){var e3=this.settings,i3="value"in t3?"value":e3.tagTextProp,s3=this.trim(t3[i3]+"");return(t3[i3]+"").trim()?e3.pattern&&e3.pattern instanceof RegExp&&!e3.pattern.test(s3)?this.TEXTS.pattern:!e3.duplicates&&this.isTagDuplicate(s3,e3.dropdown.caseSensitive,t3.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(s3)||e3.enforceWhitelist&&!this.isTagWhitelisted(s3)?this.TEXTS.notAllowed:!e3.validate||e3.validate(t3):this.TEXTS.empty;},getInvalidTagAttrs(t3,e3){return{"aria-invalid":true,class:`${t3.class||""} ${this.settings.classNames.tagNotAllowed}`.trim(),title:e3};},hasMaxTags(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed;},setReadonly(t3,e3){var i3=this.settings;document.activeElement.blur(),i3[e3||"readonly"]=t3,this.DOM.scope[(t3?"set":"remove")+"Attribute"](e3||"readonly",true),this.setContentEditable(!t3);},setContentEditable(t3){this.settings.userInput&&(this.DOM.input.contentEditable=t3,this.DOM.input.tabIndex=t3?0:-1);},setDisabled(t3){this.setReadonly(t3,"disabled");},normalizeTags(t3){var e3=this.settings,i3=e3.whitelist,s3=e3.delimiters,a3=e3.mode,n3=e3.tagTextProp,o3=[],r3=!!i3&&i3[0]instanceof Object,l3=Array.isArray(t3),d3=l3&&t3[0].value,h3=(t4)=>(t4+"").split(s3).filter((t5)=>t5).map((t5)=>({[n3]:this.trim(t5),value:this.trim(t5)}));if("number"==typeof t3&&(t3=t3.toString()),"string"==typeof t3){if(!t3.trim())
return[];t3=h3(t3);}else
l3&&(t3=[].concat(...t3.map((t4)=>null!=t4.value?t4:h3(t4))));return r3&&!d3&&(t3.forEach((t4)=>{var e4=o3.map((t5)=>t5.value),i4=this.dropdown.filterListItems.call(this,t4[n3],{exact:true});this.settings.duplicates||(i4=i4.filter((t5)=>!e4.includes(t5.value)));var s4=i4.length>1?this.getWhitelistItem(t4[n3],n3,i4):i4[0];s4&&s4 instanceof Object?o3.push(s4):"mix"!=a3&&(null==t4.value&&(t4.value=t4[n3]),o3.push(t4));}),o3.length&&(t3=o3)),t3;},parseMixTags(t3){var e3=this.settings,i3=e3.mixTagsInterpolator,s3=e3.duplicates,a3=e3.transformTag,n3=e3.enforceWhitelist,o3=e3.maxTags,r3=e3.tagTextProp,l3=[];return t3=t3.split(i3[0]).map((t4,e4)=>{var d3,h3,g3,p3=t4.split(i3[1]),c3=p3[0],u3=l3.length==o3;try{if(c3==+c3)
throw Error;h3=JSON.parse(c3);}catch(t5){h3=this.normalizeTags(c3)[0]||{value:c3};}
if(a3.call(this,h3),u3||!(p3.length>1)||n3&&!this.isTagWhitelisted(h3.value)||!s3&&this.isTagDuplicate(h3.value)){if(t4)
return e4?i3[0]+t4:t4;}else
h3[d3=h3[r3]?r3:"value"]=this.trim(h3[d3]),g3=this.createTagElem(h3),l3.push(h3),g3.classList.add(this.settings.classNames.tagNoAnimation),p3[0]=g3.outerHTML,this.value.push(h3);return p3.join("");}).join(""),this.DOM.input.innerHTML=t3,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize(),this.getTagElms().forEach((t4,e4)=>T2(t4,l3[e4])),this.update({withoutChangeEvent:true}),t3;},replaceTextWithNode(t3,e3){if(this.state.tag||e3){e3=e3||this.state.tag.prefix+this.state.tag.value;var i3,s3,a3=this.state.selection||window.getSelection(),n3=a3.anchorNode,o3=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return n3.splitText(a3.anchorOffset-o3),-1==(i3=n3.nodeValue.lastIndexOf(e3))?true:(s3=n3.splitText(i3),t3&&n3.parentNode.replaceChild(t3,s3),true);}},selectTag(t3,e3){var i3=this.settings;if(!i3.enforceWhitelist||this.isTagWhitelisted(e3.value)){this.input.set.call(this,e3[i3.tagTextProp]||e3.value,true),this.state.actions.selectOption&&setTimeout(()=>this.setRangeAtStartEnd(false,this.DOM.input));var s3=this.getLastTag();return s3?this.replaceTag(s3,e3):this.appendTag(t3),this.value[0]=e3,this.update(),this.trigger("add",{tag:t3,data:e3}),[t3];}},addEmptyTag(t3){var e3=g2({value:""},t3||{}),i3=this.createTagElem(e3);T2(i3,e3),this.appendTag(i3),this.editTag(i3,{skipValidation:true});},addTags(t3,e3,i3){var s3=[],a3=this.settings,n3=[],o3=document.createDocumentFragment();if(i3=i3||a3.skipInvalid,!t3||0==t3.length)
return s3;switch(t3=this.normalizeTags(t3),a3.mode){case "mix":return this.addMixTags(t3);case "select":e3=false,this.removeAllTags();}
return this.DOM.input.removeAttribute("style"),t3.forEach((t4)=>{var e4,r3={},l3=Object.assign({},t4,{value:t4.value+""});if(t4=Object.assign({},l3),a3.transformTag.call(this,t4),t4.__isValid=this.hasMaxTags()||this.validateTag(t4),true!==t4.__isValid){if(i3)
return;if(g2(r3,this.getInvalidTagAttrs(t4,t4.__isValid),{__preInvalidData:l3}),t4.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t4.value)),!a3.createInvalidTags)
return void n3.push(t4.value);}
if("readonly"in t4&&(t4.readonly?r3["aria-readonly"]=true:delete t4.readonly),e4=this.createTagElem(t4,r3),s3.push(e4),"select"==a3.mode)
return this.selectTag(e4,t4);o3.appendChild(e4),t4.__isValid&&true===t4.__isValid?(this.value.push(t4),this.trigger("add",{tag:e4,index:this.value.length-1,data:t4})):(this.trigger("invalid",{data:t4,index:this.value.length,tag:e4,message:t4.__isValid}),a3.keepInvalidTags||setTimeout(()=>this.removeTags(e4,true),1e3)),this.dropdown.position();}),this.appendTag(o3),this.update(),t3.length&&e3&&(this.input.set.call(this,a3.createInvalidTags?"":n3.join(a3._delimiters)),this.setRangeAtStartEnd(false,this.DOM.input)),a3.dropdown.enabled&&this.dropdown.refilter(),s3;},addMixTags(t3){if((t3=this.normalizeTags(t3))[0].prefix||this.state.tag)
return this.prefixedTextToTag(t3[0]);var e3=document.createDocumentFragment();return t3.forEach((t4)=>{var i3=this.createTagElem(t4);e3.appendChild(i3);}),this.appendMixTags(e3),e3;},appendMixTags(t3){var e3=!!this.state.selection;e3?this.injectAtCaret(t3):(this.DOM.input.focus(),(e3=this.setStateSelection()).range.setStart(this.DOM.input,e3.range.endOffset),e3.range.setEnd(this.DOM.input,e3.range.endOffset),this.DOM.input.appendChild(t3),this.updateValueByDOMTags(),this.update());},prefixedTextToTag(t3){var e3,i3=this.settings,s3=this.state.tag.delimiters;if(i3.transformTag.call(this,t3),t3.prefix=t3.prefix||this.state.tag?this.state.tag.prefix:(i3.pattern.source||i3.pattern)[0],e3=this.createTagElem(t3),this.replaceTextWithNode(e3)||this.DOM.input.appendChild(e3),setTimeout(()=>e3.classList.add(this.settings.classNames.tagNoAnimation),300),this.value.push(t3),this.update(),!s3){var a3=this.insertAfterTag(e3)||e3;setTimeout(this.placeCaretAfterNode,0,a3);}
return this.state.tag=null,this.trigger("add",g2({},{tag:e3},{data:t3})),e3;},appendTag(t3){var e3=this.DOM,i3=e3.input;e3.scope.insertBefore(t3,i3);},createTagElem(t3,i3){t3.__tagId=m2();var s3,a3=g2({},t3,e2({value:d2(t3.value+"")},i3));return function(t4){for(var e3,i4=document.createNodeIterator(t4,NodeFilter.SHOW_TEXT,null,false);e3=i4.nextNode();)
e3.textContent.trim()||e3.parentNode.removeChild(e3);}(s3=this.parseTemplate("tag",[a3,this])),T2(s3,t3),s3;},reCheckInvalidTags(){var t3=this.settings;this.getTagElms(t3.classNames.tagNotAllowed).forEach((e3,i3)=>{var s3=T2(e3),a3=this.hasMaxTags(),n3=this.validateTag(s3),o3=true===n3&&!a3;if("select"==t3.mode&&this.toggleScopeValidation(n3),o3)
return s3=s3.__preInvalidData?s3.__preInvalidData:{value:s3.value},this.replaceTag(e3,s3);e3.title=a3||n3;});},removeTags(t3,e3,i3){var s3,a3=this.settings;if(t3=t3&&t3 instanceof HTMLElement?[t3]:t3 instanceof Array?t3:t3?[t3]:[this.getLastTag()],s3=t3.reduce((t4,e4)=>{e4&&"string"==typeof e4&&(e4=this.getTagElmByValue(e4));var i4=T2(e4);return e4&&i4&&!i4.readonly&&t4.push({node:e4,idx:this.getTagIdx(i4),data:T2(e4,{__removed:true})}),t4;},[]),i3="number"==typeof i3?i3:this.CSSVars.tagHideTransition,"select"==a3.mode&&(i3=0,this.input.set.call(this)),1==s3.length&&"select"!=a3.mode&&s3[0].node.classList.contains(a3.classNames.tagNotAllowed)&&(e3=true),s3.length)
return a3.hooks.beforeRemoveTag(s3,{tagify:this}).then(()=>{function t4(t5){t5.node.parentNode&&(t5.node.parentNode.removeChild(t5.node),e3?a3.keepInvalidTags&&this.trigger("remove",{tag:t5.node,index:t5.idx}):(this.trigger("remove",{tag:t5.node,index:t5.idx,data:t5.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),a3.keepInvalidTags&&this.reCheckInvalidTags()));}
i3&&i3>10&&1==s3.length?function(e4){e4.node.style.width=parseFloat(window.getComputedStyle(e4.node).width)+"px",document.body.clientTop,e4.node.classList.add(a3.classNames.tagHide),setTimeout(t4.bind(this),i3,e4);}.call(this,s3[0]):s3.forEach(t4.bind(this)),e3||(this.removeTagsFromValue(s3.map((t5)=>t5.node)),this.update(),"select"==a3.mode&&this.setContentEditable(true));}).catch((t4)=>{});},removeTagsFromDOM(){[].slice.call(this.getTagElms()).forEach((t3)=>t3.parentNode.removeChild(t3));},removeTagsFromValue(t3){(t3=Array.isArray(t3)?t3:[t3]).forEach((t4)=>{var e3=T2(t4),i3=this.getTagIdx(e3);i3>-1&&this.value.splice(i3,1);});},removeAllTags(t3){t3=t3||{},this.value=[],"mix"==this.settings.mode?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(()=>{this.DOM.input.focus();}),"select"==this.settings.mode&&(this.input.set.call(this),this.setContentEditable(true)),this.update(t3);},postUpdate(){this.state.blockChangeEvent=false;var t3=this.settings,e3=t3.classNames,i3="mix"==t3.mode?t3.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(e3.hasMaxTags,this.value.length>=t3.maxTags),this.toggleClass(e3.hasNoTags,!this.value.length),this.toggleClass(e3.empty,!i3),"select"==t3.mode&&this.toggleScopeValidation(this.value?.[0]?.__isValid);},setOriginalInputValue(t3){var e3=this.DOM.originalInput;this.settings.mixMode.integrated||(e3.value=t3,e3.tagifyValue=e3.value,this.setPersistedData(t3,"value"));},update(t3){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e3=this.getInputValue();this.setOriginalInputValue(e3),this.settings.onChangeAfterBlur&&(t3||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent();this.postUpdate();}.bind(this),100);},getInputValue(){var t3=this.getCleanValue();return "mix"==this.settings.mode?this.getMixedTagsAsString(t3):t3.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t3):JSON.stringify(t3):"";},getCleanValue(t3){return a2(t3||this.value,this.dataProps);},getMixedTagsAsString(){var t3="",e3=this,i3=this.settings,s3=i3.originalInputValueFormat||JSON.stringify,a3=i3.mixTagsInterpolator;return function i4(o3){o3.childNodes.forEach((o4)=>{if(1==o4.nodeType){const r3=T2(o4);if("BR"==o4.tagName&&(t3+="\r\n"),r3&&v2.call(e3,o4)){if(r3.__removed)
return;t3+=a3[0]+s3(n2(r3,e3.dataProps))+a3[1];}else
o4.getAttribute("style")||["B","I","U"].includes(o4.tagName)?t3+=o4.textContent:"DIV"!=o4.tagName&&"P"!=o4.tagName||(t3+="\r\n",i4(o4));}else
t3+=o4.textContent;});}(this.DOM.input),t3;}},N2.prototype.removeTag=N2.prototype.removeTags,N2;});}});var require_core=__commonJS({"node_modules/highlight.js/lib/core.js"(exports,module){function deepFreeze(obj){if(obj instanceof Map){obj.clear=obj.delete=obj.set=function(){throw new Error("map is read-only");};}else if(obj instanceof Set){obj.add=obj.clear=obj.delete=function(){throw new Error("set is read-only");};}
Object.freeze(obj);Object.getOwnPropertyNames(obj).forEach((name)=>{const prop=obj[name];const type=typeof prop;if((type==="object"||type==="function")&&!Object.isFrozen(prop)){deepFreeze(prop);}});return obj;}
var Response2=class{constructor(mode){if(mode.data===void 0)
mode.data={};this.data=mode.data;this.isMatchIgnored=false;}
ignoreMatch(){this.isMatchIgnored=true;}};function escapeHTML(value){return value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");}
function inherit$1(original,...objects){const result=Object.create(null);for(const key in original){result[key]=original[key];}
objects.forEach(function(obj){for(const key in obj){result[key]=obj[key];}});return result;}
var SPAN_CLOSE="</span>";var emitsWrappingTags=(node)=>{return!!node.scope;};var scopeToCSSClass=(name,{prefix})=>{if(name.startsWith("language:")){return name.replace("language:","language-");}
if(name.includes(".")){const pieces=name.split(".");return[`${prefix}${pieces.shift()}`,...pieces.map((x2,i2)=>`${x2}${"_".repeat(i2+1)}`)].join(" ");}
return `${prefix}${name}`;};var HTMLRenderer=class{constructor(parseTree,options){this.buffer="";this.classPrefix=options.classPrefix;parseTree.walk(this);}
addText(text){this.buffer+=escapeHTML(text);}
openNode(node){if(!emitsWrappingTags(node))
return;const className=scopeToCSSClass(node.scope,{prefix:this.classPrefix});this.span(className);}
closeNode(node){if(!emitsWrappingTags(node))
return;this.buffer+=SPAN_CLOSE;}
value(){return this.buffer;}
span(className){this.buffer+=`<span class="${className}">`;}};var newNode=(opts={})=>{const result={children:[]};Object.assign(result,opts);return result;};var TokenTree=class{constructor(){this.rootNode=newNode();this.stack=[this.rootNode];}
get top(){return this.stack[this.stack.length-1];}
get root(){return this.rootNode;}
add(node){this.top.children.push(node);}
openNode(scope){const node=newNode({scope});this.add(node);this.stack.push(node);}
closeNode(){if(this.stack.length>1){return this.stack.pop();}
return void 0;}
closeAllNodes(){while(this.closeNode());}
toJSON(){return JSON.stringify(this.rootNode,null,4);}
walk(builder){return this.constructor._walk(builder,this.rootNode);}
static _walk(builder,node){if(typeof node==="string"){builder.addText(node);}else if(node.children){builder.openNode(node);node.children.forEach((child)=>this._walk(builder,child));builder.closeNode(node);}
return builder;}
static _collapse(node){if(typeof node==="string")
return;if(!node.children)
return;if(node.children.every((el)=>typeof el==="string")){node.children=[node.children.join("")];}else{node.children.forEach((child)=>{TokenTree._collapse(child);});}}};var TokenTreeEmitter=class extends TokenTree{constructor(options){super();this.options=options;}
addText(text){if(text===""){return;}
this.add(text);}
startScope(scope){this.openNode(scope);}
endScope(){this.closeNode();}
__addSublanguage(emitter,name){const node=emitter.root;if(name)
node.scope=`language:${name}`;this.add(node);}
toHTML(){const renderer=new HTMLRenderer(this,this.options);return renderer.value();}
finalize(){this.closeAllNodes();return true;}};function source(re2){if(!re2)
return null;if(typeof re2==="string")
return re2;return re2.source;}
function lookahead(re2){return concat("(?=",re2,")");}
function anyNumberOfTimes(re2){return concat("(?:",re2,")*");}
function optional(re2){return concat("(?:",re2,")?");}
function concat(...args){const joined=args.map((x2)=>source(x2)).join("");return joined;}
function stripOptionsFromArgs(args){const opts=args[args.length-1];if(typeof opts==="object"&&opts.constructor===Object){args.splice(args.length-1,1);return opts;}else{return{};}}
function either(...args){const opts=stripOptionsFromArgs(args);const joined="("+(opts.capture?"":"?:")+args.map((x2)=>source(x2)).join("|")+")";return joined;}
function countMatchGroups(re2){return new RegExp(re2.toString()+"|").exec("").length-1;}
function startsWith(re2,lexeme){const match=re2&&re2.exec(lexeme);return match&&match.index===0;}
var BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(regexps,{joinWith}){let numCaptures=0;return regexps.map((regex)=>{numCaptures+=1;const offset=numCaptures;let re2=source(regex);let out="";while(re2.length>0){const match=BACKREF_RE.exec(re2);if(!match){out+=re2;break;}
out+=re2.substring(0,match.index);re2=re2.substring(match.index+match[0].length);if(match[0][0]==="\\"&&match[1]){out+="\\"+String(Number(match[1])+offset);}else{out+=match[0];if(match[0]==="("){numCaptures++;}}}
return out;}).map((re2)=>`(${re2})`).join(joinWith);}
var MATCH_NOTHING_RE=/\b\B/;var IDENT_RE="[a-zA-Z]\\w*";var UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*";var NUMBER_RE="\\b\\d+(\\.\\d+)?";var C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";var BINARY_NUMBER_RE="\\b(0b[01]+)";var RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";var SHEBANG=(opts={})=>{const beginShebang=/^#![ ]*\//;if(opts.binary){opts.begin=concat(beginShebang,/.*\b/,opts.binary,/\b.*/);}
return inherit$1({scope:"meta",begin:beginShebang,end:/$/,relevance:0,"on:begin":(m2,resp)=>{if(m2.index!==0)
resp.ignoreMatch();}},opts);};var BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0};var APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]};var QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]};var PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/};var COMMENT=function(begin,end,modeOptions={}){const mode=inherit$1({scope:"comment",begin,end,contains:[]},modeOptions);mode.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:true,relevance:0});const ENGLISH_WORD=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);mode.contains.push({begin:concat(/[ ]+/,"(",ENGLISH_WORD,/[.]?[:]?([.][ ]|[ ])/,"){3}")});return mode;};var C_LINE_COMMENT_MODE=COMMENT("//","$");var C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/");var HASH_COMMENT_MODE=COMMENT("#","$");var NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0};var C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0};var BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0};var REGEXP_MODE={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]}]};var TITLE_MODE={scope:"title",begin:IDENT_RE,relevance:0};var UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0};var METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0};var END_SAME_AS_BEGIN=function(mode){return Object.assign(mode,{"on:begin":(m2,resp)=>{resp.data._beginMatch=m2[1];},"on:end":(m2,resp)=>{if(resp.data._beginMatch!==m2[1])
resp.ignoreMatch();}});};var MODES=Object.freeze({__proto__:null,MATCH_NOTHING_RE,IDENT_RE,UNDERSCORE_IDENT_RE,NUMBER_RE,C_NUMBER_RE,BINARY_NUMBER_RE,RE_STARTERS_RE,SHEBANG,BACKSLASH_ESCAPE,APOS_STRING_MODE,QUOTE_STRING_MODE,PHRASAL_WORDS_MODE,COMMENT,C_LINE_COMMENT_MODE,C_BLOCK_COMMENT_MODE,HASH_COMMENT_MODE,NUMBER_MODE,C_NUMBER_MODE,BINARY_NUMBER_MODE,REGEXP_MODE,TITLE_MODE,UNDERSCORE_TITLE_MODE,METHOD_GUARD,END_SAME_AS_BEGIN});function skipIfHasPrecedingDot(match,response){const before=match.input[match.index-1];if(before==="."){response.ignoreMatch();}}
function scopeClassName(mode,_parent){if(mode.className!==void 0){mode.scope=mode.className;delete mode.className;}}
function beginKeywords(mode,parent){if(!parent)
return;if(!mode.beginKeywords)
return;mode.begin="\\b("+mode.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)";mode.__beforeBegin=skipIfHasPrecedingDot;mode.keywords=mode.keywords||mode.beginKeywords;delete mode.beginKeywords;if(mode.relevance===void 0)
mode.relevance=0;}
function compileIllegal(mode,_parent){if(!Array.isArray(mode.illegal))
return;mode.illegal=either(...mode.illegal);}
function compileMatch(mode,_parent){if(!mode.match)
return;if(mode.begin||mode.end)
throw new Error("begin & end are not supported with match");mode.begin=mode.match;delete mode.match;}
function compileRelevance(mode,_parent){if(mode.relevance===void 0)
mode.relevance=1;}
var beforeMatchExt=(mode,parent)=>{if(!mode.beforeMatch)
return;if(mode.starts)
throw new Error("beforeMatch cannot be used with starts");const originalMode=Object.assign({},mode);Object.keys(mode).forEach((key)=>{delete mode[key];});mode.keywords=originalMode.keywords;mode.begin=concat(originalMode.beforeMatch,lookahead(originalMode.begin));mode.starts={relevance:0,contains:[Object.assign(originalMode,{endsParent:true})]};mode.relevance=0;delete originalMode.beforeMatch;};var COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"];var DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(rawKeywords,caseInsensitive,scopeName=DEFAULT_KEYWORD_SCOPE){const compiledKeywords=Object.create(null);if(typeof rawKeywords==="string"){compileList(scopeName,rawKeywords.split(" "));}else if(Array.isArray(rawKeywords)){compileList(scopeName,rawKeywords);}else{Object.keys(rawKeywords).forEach(function(scopeName2){Object.assign(compiledKeywords,compileKeywords(rawKeywords[scopeName2],caseInsensitive,scopeName2));});}
return compiledKeywords;function compileList(scopeName2,keywordList){if(caseInsensitive){keywordList=keywordList.map((x2)=>x2.toLowerCase());}
keywordList.forEach(function(keyword){const pair=keyword.split("|");compiledKeywords[pair[0]]=[scopeName2,scoreForKeyword(pair[0],pair[1])];});}}
function scoreForKeyword(keyword,providedScore){if(providedScore){return Number(providedScore);}
return commonKeyword(keyword)?0:1;}
function commonKeyword(keyword){return COMMON_KEYWORDS.includes(keyword.toLowerCase());}
var seenDeprecations={};var error2=(message)=>{console.error(message);};var warn=(message,...args)=>{console.log(`WARN: ${message}`,...args);};var deprecated=(version3,message)=>{if(seenDeprecations[`${version3}/${message}`])
return;console.log(`Deprecated as of ${version3}. ${message}`);seenDeprecations[`${version3}/${message}`]=true;};var MultiClassError=new Error();function remapScopeNames(mode,regexes,{key}){let offset=0;const scopeNames=mode[key];const emit={};const positions={};for(let i2=1;i2<=regexes.length;i2++){positions[i2+offset]=scopeNames[i2];emit[i2+offset]=true;offset+=countMatchGroups(regexes[i2-1]);}
mode[key]=positions;mode[key]._emit=emit;mode[key]._multi=true;}
function beginMultiClass(mode){if(!Array.isArray(mode.begin))
return;if(mode.skip||mode.excludeBegin||mode.returnBegin){error2("skip, excludeBegin, returnBegin not compatible with beginScope: {}");throw MultiClassError;}
if(typeof mode.beginScope!=="object"||mode.beginScope===null){error2("beginScope must be object");throw MultiClassError;}
remapScopeNames(mode,mode.begin,{key:"beginScope"});mode.begin=_rewriteBackreferences(mode.begin,{joinWith:""});}
function endMultiClass(mode){if(!Array.isArray(mode.end))
return;if(mode.skip||mode.excludeEnd||mode.returnEnd){error2("skip, excludeEnd, returnEnd not compatible with endScope: {}");throw MultiClassError;}
if(typeof mode.endScope!=="object"||mode.endScope===null){error2("endScope must be object");throw MultiClassError;}
remapScopeNames(mode,mode.end,{key:"endScope"});mode.end=_rewriteBackreferences(mode.end,{joinWith:""});}
function scopeSugar(mode){if(mode.scope&&typeof mode.scope==="object"&&mode.scope!==null){mode.beginScope=mode.scope;delete mode.scope;}}
function MultiClass(mode){scopeSugar(mode);if(typeof mode.beginScope==="string"){mode.beginScope={_wrap:mode.beginScope};}
if(typeof mode.endScope==="string"){mode.endScope={_wrap:mode.endScope};}
beginMultiClass(mode);endMultiClass(mode);}
function compileLanguage(language){function langRe(value,global2){return new RegExp(source(value),"m"+(language.case_insensitive?"i":"")+(language.unicodeRegex?"u":"")+(global2?"g":""));}
class MultiRegex{constructor(){this.matchIndexes={};this.regexes=[];this.matchAt=1;this.position=0;}
addRule(re2,opts){opts.position=this.position++;this.matchIndexes[this.matchAt]=opts;this.regexes.push([opts,re2]);this.matchAt+=countMatchGroups(re2)+1;}
compile(){if(this.regexes.length===0){this.exec=()=>null;}
const terminators=this.regexes.map((el)=>el[1]);this.matcherRe=langRe(_rewriteBackreferences(terminators,{joinWith:"|"}),true);this.lastIndex=0;}
exec(s2){this.matcherRe.lastIndex=this.lastIndex;const match=this.matcherRe.exec(s2);if(!match){return null;}
const i2=match.findIndex((el,i3)=>i3>0&&el!==void 0);const matchData=this.matchIndexes[i2];match.splice(0,i2);return Object.assign(match,matchData);}}
class ResumableMultiRegex{constructor(){this.rules=[];this.multiRegexes=[];this.count=0;this.lastIndex=0;this.regexIndex=0;}
getMatcher(index){if(this.multiRegexes[index])
return this.multiRegexes[index];const matcher=new MultiRegex();this.rules.slice(index).forEach(([re2,opts])=>matcher.addRule(re2,opts));matcher.compile();this.multiRegexes[index]=matcher;return matcher;}
resumingScanAtSamePosition(){return this.regexIndex!==0;}
considerAll(){this.regexIndex=0;}
addRule(re2,opts){this.rules.push([re2,opts]);if(opts.type==="begin")
this.count++;}
exec(s2){const m2=this.getMatcher(this.regexIndex);m2.lastIndex=this.lastIndex;let result=m2.exec(s2);if(this.resumingScanAtSamePosition()){if(result&&result.index===this.lastIndex);else{const m22=this.getMatcher(0);m22.lastIndex=this.lastIndex+1;result=m22.exec(s2);}}
if(result){this.regexIndex+=result.position+1;if(this.regexIndex===this.count){this.considerAll();}}
return result;}}
function buildModeRegex(mode){const mm=new ResumableMultiRegex();mode.contains.forEach((term)=>mm.addRule(term.begin,{rule:term,type:"begin"}));if(mode.terminatorEnd){mm.addRule(mode.terminatorEnd,{type:"end"});}
if(mode.illegal){mm.addRule(mode.illegal,{type:"illegal"});}
return mm;}
function compileMode(mode,parent){const cmode=mode;if(mode.isCompiled)
return cmode;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach((ext)=>ext(mode,parent));language.compilerExtensions.forEach((ext)=>ext(mode,parent));mode.__beforeBegin=null;[beginKeywords,compileIllegal,compileRelevance].forEach((ext)=>ext(mode,parent));mode.isCompiled=true;let keywordPattern=null;if(typeof mode.keywords==="object"&&mode.keywords.$pattern){mode.keywords=Object.assign({},mode.keywords);keywordPattern=mode.keywords.$pattern;delete mode.keywords.$pattern;}
keywordPattern=keywordPattern||/\w+/;if(mode.keywords){mode.keywords=compileKeywords(mode.keywords,language.case_insensitive);}
cmode.keywordPatternRe=langRe(keywordPattern,true);if(parent){if(!mode.begin)
mode.begin=/\B|\b/;cmode.beginRe=langRe(cmode.begin);if(!mode.end&&!mode.endsWithParent)
mode.end=/\B|\b/;if(mode.end)
cmode.endRe=langRe(cmode.end);cmode.terminatorEnd=source(cmode.end)||"";if(mode.endsWithParent&&parent.terminatorEnd){cmode.terminatorEnd+=(mode.end?"|":"")+parent.terminatorEnd;}}
if(mode.illegal)
cmode.illegalRe=langRe(mode.illegal);if(!mode.contains)
mode.contains=[];mode.contains=[].concat(...mode.contains.map(function(c2){return expandOrCloneMode(c2==="self"?mode:c2);}));mode.contains.forEach(function(c2){compileMode(c2,cmode);});if(mode.starts){compileMode(mode.starts,parent);}
cmode.matcher=buildModeRegex(cmode);return cmode;}
if(!language.compilerExtensions)
language.compilerExtensions=[];if(language.contains&&language.contains.includes("self")){throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");}
language.classNameAliases=inherit$1(language.classNameAliases||{});return compileMode(language);}
function dependencyOnParent(mode){if(!mode)
return false;return mode.endsWithParent||dependencyOnParent(mode.starts);}
function expandOrCloneMode(mode){if(mode.variants&&!mode.cachedVariants){mode.cachedVariants=mode.variants.map(function(variant){return inherit$1(mode,{variants:null},variant);});}
if(mode.cachedVariants){return mode.cachedVariants;}
if(dependencyOnParent(mode)){return inherit$1(mode,{starts:mode.starts?inherit$1(mode.starts):null});}
if(Object.isFrozen(mode)){return inherit$1(mode);}
return mode;}
var version2="11.8.0";var HTMLInjectionError=class extends Error{constructor(reason,html){super(reason);this.name="HTMLInjectionError";this.html=html;}};var escape2=escapeHTML;var inherit=inherit$1;var NO_MATCH=Symbol("nomatch");var MAX_KEYWORD_HITS=7;var HLJS=function(hljs){const languages=Object.create(null);const aliases=Object.create(null);const plugins=[];let SAFE_MODE=true;const LANGUAGE_NOT_FOUND="Could not find the language '{}', did you forget to load/include a language module?";const PLAINTEXT_LANGUAGE={disableAutodetect:true,name:"Plain text",contains:[]};let options={ignoreUnescapedHTML:false,throwUnescapedHTML:false,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function shouldNotHighlight(languageName){return options.noHighlightRe.test(languageName);}
function blockLanguage(block){let classes=block.className+" ";classes+=block.parentNode?block.parentNode.className:"";const match=options.languageDetectRe.exec(classes);if(match){const language=getLanguage(match[1]);if(!language){warn(LANGUAGE_NOT_FOUND.replace("{}",match[1]));warn("Falling back to no-highlight mode for this block.",block);}
return language?match[1]:"no-highlight";}
return classes.split(/\s+/).find((_class)=>shouldNotHighlight(_class)||getLanguage(_class));}
function highlight2(codeOrLanguageName,optionsOrCode,ignoreIllegals){let code="";let languageName="";if(typeof optionsOrCode==="object"){code=codeOrLanguageName;ignoreIllegals=optionsOrCode.ignoreIllegals;languageName=optionsOrCode.language;}else{deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated.");deprecated("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277");languageName=codeOrLanguageName;code=optionsOrCode;}
if(ignoreIllegals===void 0){ignoreIllegals=true;}
const context={code,language:languageName};fire("before:highlight",context);const result=context.result?context.result:_highlight(context.language,context.code,ignoreIllegals);result.code=context.code;fire("after:highlight",result);return result;}
function _highlight(languageName,codeToHighlight,ignoreIllegals,continuation){const keywordHits=Object.create(null);function keywordData(mode,matchText){return mode.keywords[matchText];}
function processKeywords(){if(!top.keywords){emitter.addText(modeBuffer);return;}
let lastIndex=0;top.keywordPatternRe.lastIndex=0;let match=top.keywordPatternRe.exec(modeBuffer);let buf="";while(match){buf+=modeBuffer.substring(lastIndex,match.index);const word=language.case_insensitive?match[0].toLowerCase():match[0];const data=keywordData(top,word);if(data){const[kind,keywordRelevance]=data;emitter.addText(buf);buf="";keywordHits[word]=(keywordHits[word]||0)+1;if(keywordHits[word]<=MAX_KEYWORD_HITS)
relevance+=keywordRelevance;if(kind.startsWith("_")){buf+=match[0];}else{const cssClass=language.classNameAliases[kind]||kind;emitKeyword(match[0],cssClass);}}else{buf+=match[0];}
lastIndex=top.keywordPatternRe.lastIndex;match=top.keywordPatternRe.exec(modeBuffer);}
buf+=modeBuffer.substring(lastIndex);emitter.addText(buf);}
function processSubLanguage(){if(modeBuffer==="")
return;let result2=null;if(typeof top.subLanguage==="string"){if(!languages[top.subLanguage]){emitter.addText(modeBuffer);return;}
result2=_highlight(top.subLanguage,modeBuffer,true,continuations[top.subLanguage]);continuations[top.subLanguage]=result2._top;}else{result2=highlightAuto(modeBuffer,top.subLanguage.length?top.subLanguage:null);}
if(top.relevance>0){relevance+=result2.relevance;}
emitter.__addSublanguage(result2._emitter,result2.language);}
function processBuffer(){if(top.subLanguage!=null){processSubLanguage();}else{processKeywords();}
modeBuffer="";}
function emitKeyword(keyword,scope){if(keyword==="")
return;emitter.startScope(scope);emitter.addText(keyword);emitter.endScope();}
function emitMultiClass(scope,match){let i2=1;const max=match.length-1;while(i2<=max){if(!scope._emit[i2]){i2++;continue;}
const klass=language.classNameAliases[scope[i2]]||scope[i2];const text=match[i2];if(klass){emitKeyword(text,klass);}else{modeBuffer=text;processKeywords();modeBuffer="";}
i2++;}}
function startNewMode(mode,match){if(mode.scope&&typeof mode.scope==="string"){emitter.openNode(language.classNameAliases[mode.scope]||mode.scope);}
if(mode.beginScope){if(mode.beginScope._wrap){emitKeyword(modeBuffer,language.classNameAliases[mode.beginScope._wrap]||mode.beginScope._wrap);modeBuffer="";}else if(mode.beginScope._multi){emitMultiClass(mode.beginScope,match);modeBuffer="";}}
top=Object.create(mode,{parent:{value:top}});return top;}
function endOfMode(mode,match,matchPlusRemainder){let matched=startsWith(mode.endRe,matchPlusRemainder);if(matched){if(mode["on:end"]){const resp=new Response2(mode);mode["on:end"](match,resp);if(resp.isMatchIgnored)
matched=false;}
if(matched){while(mode.endsParent&&mode.parent){mode=mode.parent;}
return mode;}}
if(mode.endsWithParent){return endOfMode(mode.parent,match,matchPlusRemainder);}}
function doIgnore(lexeme){if(top.matcher.regexIndex===0){modeBuffer+=lexeme[0];return 1;}else{resumeScanAtSamePosition=true;return 0;}}
function doBeginMatch(match){const lexeme=match[0];const newMode=match.rule;const resp=new Response2(newMode);const beforeCallbacks=[newMode.__beforeBegin,newMode["on:begin"]];for(const cb of beforeCallbacks){if(!cb)
continue;cb(match,resp);if(resp.isMatchIgnored)
return doIgnore(lexeme);}
if(newMode.skip){modeBuffer+=lexeme;}else{if(newMode.excludeBegin){modeBuffer+=lexeme;}
processBuffer();if(!newMode.returnBegin&&!newMode.excludeBegin){modeBuffer=lexeme;}}
startNewMode(newMode,match);return newMode.returnBegin?0:lexeme.length;}
function doEndMatch(match){const lexeme=match[0];const matchPlusRemainder=codeToHighlight.substring(match.index);const endMode=endOfMode(top,match,matchPlusRemainder);if(!endMode){return NO_MATCH;}
const origin=top;if(top.endScope&&top.endScope._wrap){processBuffer();emitKeyword(lexeme,top.endScope._wrap);}else if(top.endScope&&top.endScope._multi){processBuffer();emitMultiClass(top.endScope,match);}else if(origin.skip){modeBuffer+=lexeme;}else{if(!(origin.returnEnd||origin.excludeEnd)){modeBuffer+=lexeme;}
processBuffer();if(origin.excludeEnd){modeBuffer=lexeme;}}
do{if(top.scope){emitter.closeNode();}
if(!top.skip&&!top.subLanguage){relevance+=top.relevance;}
top=top.parent;}while(top!==endMode.parent);if(endMode.starts){startNewMode(endMode.starts,match);}
return origin.returnEnd?0:lexeme.length;}
function processContinuations(){const list=[];for(let current=top;current!==language;current=current.parent){if(current.scope){list.unshift(current.scope);}}
list.forEach((item)=>emitter.openNode(item));}
let lastMatch={};function processLexeme(textBeforeMatch,match){const lexeme=match&&match[0];modeBuffer+=textBeforeMatch;if(lexeme==null){processBuffer();return 0;}
if(lastMatch.type==="begin"&&match.type==="end"&&lastMatch.index===match.index&&lexeme===""){modeBuffer+=codeToHighlight.slice(match.index,match.index+1);if(!SAFE_MODE){const err=new Error(`0 width match regex (${languageName})`);err.languageName=languageName;err.badRule=lastMatch.rule;throw err;}
return 1;}
lastMatch=match;if(match.type==="begin"){return doBeginMatch(match);}else if(match.type==="illegal"&&!ignoreIllegals){const err=new Error('Illegal lexeme "'+lexeme+'" for mode "'+(top.scope||"<unnamed>")+'"');err.mode=top;throw err;}else if(match.type==="end"){const processed=doEndMatch(match);if(processed!==NO_MATCH){return processed;}}
if(match.type==="illegal"&&lexeme===""){return 1;}
if(iterations>1e5&&iterations>match.index*3){const err=new Error("potential infinite loop, way more iterations than matches");throw err;}
modeBuffer+=lexeme;return lexeme.length;}
const language=getLanguage(languageName);if(!language){error2(LANGUAGE_NOT_FOUND.replace("{}",languageName));throw new Error('Unknown language: "'+languageName+'"');}
const md=compileLanguage(language);let result="";let top=continuation||md;const continuations={};const emitter=new options.__emitter(options);processContinuations();let modeBuffer="";let relevance=0;let index=0;let iterations=0;let resumeScanAtSamePosition=false;try{if(!language.__emitTokens){top.matcher.considerAll();for(;;){iterations++;if(resumeScanAtSamePosition){resumeScanAtSamePosition=false;}else{top.matcher.considerAll();}
top.matcher.lastIndex=index;const match=top.matcher.exec(codeToHighlight);if(!match)
break;const beforeMatch=codeToHighlight.substring(index,match.index);const processedCount=processLexeme(beforeMatch,match);index=match.index+processedCount;}
processLexeme(codeToHighlight.substring(index));}else{language.__emitTokens(codeToHighlight,emitter);}
emitter.finalize();result=emitter.toHTML();return{language:languageName,value:result,relevance,illegal:false,_emitter:emitter,_top:top};}catch(err){if(err.message&&err.message.includes("Illegal")){return{language:languageName,value:escape2(codeToHighlight),illegal:true,relevance:0,_illegalBy:{message:err.message,index,context:codeToHighlight.slice(index-100,index+100),mode:err.mode,resultSoFar:result},_emitter:emitter};}else if(SAFE_MODE){return{language:languageName,value:escape2(codeToHighlight),illegal:false,relevance:0,errorRaised:err,_emitter:emitter,_top:top};}else{throw err;}}}
function justTextHighlightResult(code){const result={value:escape2(code),illegal:false,relevance:0,_top:PLAINTEXT_LANGUAGE,_emitter:new options.__emitter(options)};result._emitter.addText(code);return result;}
function highlightAuto(code,languageSubset){languageSubset=languageSubset||options.languages||Object.keys(languages);const plaintext=justTextHighlightResult(code);const results=languageSubset.filter(getLanguage).filter(autoDetection).map((name)=>_highlight(name,code,false));results.unshift(plaintext);const sorted=results.sort((a2,b2)=>{if(a2.relevance!==b2.relevance)
return b2.relevance-a2.relevance;if(a2.language&&b2.language){if(getLanguage(a2.language).supersetOf===b2.language){return 1;}else if(getLanguage(b2.language).supersetOf===a2.language){return-1;}}
return 0;});const[best,secondBest]=sorted;const result=best;result.secondBest=secondBest;return result;}
function updateClassName(element,currentLang,resultLang){const language=currentLang&&aliases[currentLang]||resultLang;element.classList.add("hljs");element.classList.add(`language-${language}`);}
function highlightElement(element){let node=null;const language=blockLanguage(element);if(shouldNotHighlight(language))
return;fire("before:highlightElement",{el:element,language});if(element.children.length>0){if(!options.ignoreUnescapedHTML){console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk.");console.warn("https://github.com/highlightjs/highlight.js/wiki/security");console.warn("The element with unescaped HTML:");console.warn(element);}
if(options.throwUnescapedHTML){const err=new HTMLInjectionError("One of your code blocks includes unescaped HTML.",element.innerHTML);throw err;}}
node=element;const text=node.textContent;const result=language?highlight2(text,{language,ignoreIllegals:true}):highlightAuto(text);element.innerHTML=result.value;updateClassName(element,language,result.language);element.result={language:result.language,re:result.relevance,relevance:result.relevance};if(result.secondBest){element.secondBest={language:result.secondBest.language,relevance:result.secondBest.relevance};}
fire("after:highlightElement",{el:element,result,text});}
function configure(userOptions){options=inherit(options,userOptions);}
const initHighlighting=()=>{highlightAll();deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.");};function initHighlightingOnLoad(){highlightAll();deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.");}
let wantsHighlight=false;function highlightAll(){if(document.readyState==="loading"){wantsHighlight=true;return;}
const blocks=document.querySelectorAll(options.cssSelector);blocks.forEach(highlightElement);}
function boot(){if(wantsHighlight)
highlightAll();}
if(typeof window!=="undefined"&&window.addEventListener){window.addEventListener("DOMContentLoaded",boot,false);}
function registerLanguage(languageName,languageDefinition){let lang=null;try{lang=languageDefinition(hljs);}catch(error$1){error2("Language definition for '{}' could not be registered.".replace("{}",languageName));if(!SAFE_MODE){throw error$1;}else{error2(error$1);}
lang=PLAINTEXT_LANGUAGE;}
if(!lang.name)
lang.name=languageName;languages[languageName]=lang;lang.rawDefinition=languageDefinition.bind(null,hljs);if(lang.aliases){registerAliases(lang.aliases,{languageName});}}
function unregisterLanguage(languageName){delete languages[languageName];for(const alias of Object.keys(aliases)){if(aliases[alias]===languageName){delete aliases[alias];}}}
function listLanguages(){return Object.keys(languages);}
function getLanguage(name){name=(name||"").toLowerCase();return languages[name]||languages[aliases[name]];}
function registerAliases(aliasList,{languageName}){if(typeof aliasList==="string"){aliasList=[aliasList];}
aliasList.forEach((alias)=>{aliases[alias.toLowerCase()]=languageName;});}
function autoDetection(name){const lang=getLanguage(name);return lang&&!lang.disableAutodetect;}
function upgradePluginAPI(plugin){if(plugin["before:highlightBlock"]&&!plugin["before:highlightElement"]){plugin["before:highlightElement"]=(data)=>{plugin["before:highlightBlock"](Object.assign({block:data.el},data));};}
if(plugin["after:highlightBlock"]&&!plugin["after:highlightElement"]){plugin["after:highlightElement"]=(data)=>{plugin["after:highlightBlock"](Object.assign({block:data.el},data));};}}
function addPlugin(plugin){upgradePluginAPI(plugin);plugins.push(plugin);}
function removePlugin(plugin){const index=plugins.indexOf(plugin);if(index!==-1){plugins.splice(index,1);}}
function fire(event2,args){const cb=event2;plugins.forEach(function(plugin){if(plugin[cb]){plugin[cb](args);}});}
function deprecateHighlightBlock(el){deprecated("10.7.0","highlightBlock will be removed entirely in v12.0");deprecated("10.7.0","Please use highlightElement now.");return highlightElement(el);}
Object.assign(hljs,{highlight:highlight2,highlightAuto,highlightAll,highlightElement,highlightBlock:deprecateHighlightBlock,configure,initHighlighting,initHighlightingOnLoad,registerLanguage,unregisterLanguage,listLanguages,getLanguage,registerAliases,autoDetection,inherit,addPlugin,removePlugin});hljs.debugMode=function(){SAFE_MODE=false;};hljs.safeMode=function(){SAFE_MODE=true;};hljs.versionString=version2;hljs.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const key in MODES){if(typeof MODES[key]==="object"){deepFreeze(MODES[key]);}}
Object.assign(hljs,MODES);return hljs;};var highlight=HLJS({});highlight.newInstance=()=>HLJS({});module.exports=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;}});var require_ruby=__commonJS({"node_modules/highlight.js/lib/languages/ruby.js"(exports,module){function ruby(hljs){const regex=hljs.regex;const RUBY_METHOD_RE="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)";const CLASS_NAME_RE=regex.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/);const CLASS_NAME_WITH_NAMESPACE_RE=regex.concat(CLASS_NAME_RE,/(::\w+)*/);const PSEUDO_KWS=["include","extend","prepend","public","private","protected","raise","throw"];const RUBY_KEYWORDS={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...PSEUDO_KWS],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]};const YARDOCTAG={className:"doctag",begin:"@[A-Za-z]+"};const IRB_OBJECT={begin:"#<",end:">"};const COMMENT_MODES=[hljs.COMMENT("#","$",{contains:[YARDOCTAG]}),hljs.COMMENT("^=begin","^=end",{contains:[YARDOCTAG],relevance:10}),hljs.COMMENT("^__END__",hljs.MATCH_NOTHING_RE)];const SUBST={className:"subst",begin:/#\{/,end:/\}/,keywords:RUBY_KEYWORDS};const STRING={className:"string",contains:[hljs.BACKSLASH_ESCAPE,SUBST],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:regex.concat(/<<[-~]?'?/,regex.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[hljs.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[hljs.BACKSLASH_ESCAPE,SUBST]})]}]};const decimal="[1-9](_?[0-9])*|0";const digits="[0-9](_?[0-9])*";const NUMBER={className:"number",relevance:0,variants:[{begin:`\\b(${decimal})(\\.(${digits}))?([eE][+-]?(${digits})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]};const PARAMS={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:true,endsParent:true,keywords:RUBY_KEYWORDS}]};const INCLUDE_EXTEND={match:[/(include|extend)\s+/,CLASS_NAME_WITH_NAMESPACE_RE],scope:{2:"title.class"},keywords:RUBY_KEYWORDS};const CLASS_DEFINITION={variants:[{match:[/class\s+/,CLASS_NAME_WITH_NAMESPACE_RE,/\s+<\s+/,CLASS_NAME_WITH_NAMESPACE_RE]},{match:[/\b(class|module)\s+/,CLASS_NAME_WITH_NAMESPACE_RE]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:RUBY_KEYWORDS};const UPPER_CASE_CONSTANT={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};const METHOD_DEFINITION={match:[/def/,/\s+/,RUBY_METHOD_RE],scope:{1:"keyword",3:"title.function"},contains:[PARAMS]};const OBJECT_CREATION={relevance:0,match:[CLASS_NAME_WITH_NAMESPACE_RE,/\.new[. (]/],scope:{1:"title.class"}};const CLASS_REFERENCE={relevance:0,match:CLASS_NAME_RE,scope:"title.class"};const RUBY_DEFAULT_CONTAINS=[STRING,CLASS_DEFINITION,INCLUDE_EXTEND,OBJECT_CREATION,UPPER_CASE_CONSTANT,CLASS_REFERENCE,METHOD_DEFINITION,{begin:hljs.IDENT_RE+"::"},{className:"symbol",begin:hljs.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[STRING,{begin:RUBY_METHOD_RE}],relevance:0},NUMBER,{className:"variable",begin:`(\\$\
module.exports=ruby;}});var require_erb=__commonJS({"node_modules/highlight.js/lib/languages/erb.js"(exports,module){function erb(hljs){return{name:"ERB",subLanguage:"xml",contains:[hljs.COMMENT("<%#","%>"),{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:true,excludeEnd:true}]};}
module.exports=erb;}});var require_bash=__commonJS({"node_modules/highlight.js/lib/languages/bash.js"(exports,module){function bash(hljs){const regex=hljs.regex;const VAR={};const BRACED_VAR={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[VAR]}]};Object.assign(VAR,{className:"variable",variants:[{begin:regex.concat(/\$[\w\d#@][\w\d_]*/,`(?![\\w\\d])(?![$])`)},BRACED_VAR]});const SUBST={className:"subst",begin:/\$\(/,end:/\)/,contains:[hljs.BACKSLASH_ESCAPE]};const HERE_DOC={begin:/<<-?\s*(?=\w+)/,starts:{contains:[hljs.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}};const QUOTE_STRING={className:"string",begin:/"/,end:/"/,contains:[hljs.BACKSLASH_ESCAPE,VAR,SUBST]};SUBST.contains.push(QUOTE_STRING);const ESCAPED_QUOTE={className:"",begin:/\\"/};const APOS_STRING={className:"string",begin:/'/,end:/'/};const ARITHMETIC={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},hljs.NUMBER_MODE,VAR]};const SH_LIKE_SHELLS=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"];const KNOWN_SHEBANG=hljs.SHEBANG({binary:`(${SH_LIKE_SHELLS.join("|")})`,relevance:10});const FUNCTION={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:true,contains:[hljs.inherit(hljs.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};const KEYWORDS=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"];const LITERALS=["true","false"];const PATH_MODE={match:/(\/[a-z._-]+)+/};const SHELL_BUILT_INS=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"];const BASH_BUILT_INS=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"];const ZSH_BUILT_INS=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"];const GNU_CORE_UTILS=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:KEYWORDS,literal:LITERALS,built_in:[...SHELL_BUILT_INS,...BASH_BUILT_INS,"set","shopt",...ZSH_BUILT_INS,...GNU_CORE_UTILS]},contains:[KNOWN_SHEBANG,hljs.SHEBANG(),FUNCTION,ARITHMETIC,hljs.HASH_COMMENT_MODE,HERE_DOC,PATH_MODE,QUOTE_STRING,ESCAPED_QUOTE,APOS_STRING,VAR]};}
module.exports=bash;}});var require_javascript=__commonJS({"node_modules/highlight.js/lib/languages/javascript.js"(exports,module){var IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*";var KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"];var LITERALS=["true","false","null","undefined","NaN","Infinity"];var TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"];var ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"];var BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"];var BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"];var BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(hljs){const regex=hljs.regex;const hasClosingTag=(match,{after})=>{const tag="</"+match[0].slice(1);const pos=match.input.indexOf(tag,after);return pos!==-1;};const IDENT_RE$1=IDENT_RE;const FRAGMENT={begin:"<>",end:"</>"};const XML_SELF_CLOSING=/<[A-Za-z0-9\\._:-]+\s*\/>/;const XML_TAG={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(match,response)=>{const afterMatchIndex=match[0].length+match.index;const nextChar=match.input[afterMatchIndex];if(nextChar==="<"||nextChar===","){response.ignoreMatch();return;}
if(nextChar===">"){if(!hasClosingTag(match,{after:afterMatchIndex})){response.ignoreMatch();}}
let m2;const afterMatch=match.input.substring(afterMatchIndex);if(m2=afterMatch.match(/^\s*=/)){response.ignoreMatch();return;}
if(m2=afterMatch.match(/^\s+extends\s+/)){if(m2.index===0){response.ignoreMatch();return;}}}};const KEYWORDS$1={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES};const decimalDigits="[0-9](_?[0-9])*";const frac=`\\.(${decimalDigits})`;const decimalInteger=`0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*`;const NUMBER={className:"number",variants:[{begin:`(\\b(${decimalInteger})((${frac})|\\.)?|(${frac}))[eE][+-]?(${decimalDigits})\\b`},{begin:`\\b(${decimalInteger})\\b((${frac})\\b|\\.)?|(${frac})\\b`},{begin:`\\b(0|[1-9](_?[0-9])*)n\\b`},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0};const SUBST={className:"subst",begin:"\\$\\{",end:"\\}",keywords:KEYWORDS$1,contains:[]};const HTML_TEMPLATE={begin:"html`",end:"",starts:{end:"`",returnEnd:false,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"xml"}};const CSS_TEMPLATE={begin:"css`",end:"",starts:{end:"`",returnEnd:false,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"css"}};const GRAPHQL_TEMPLATE={begin:"gql`",end:"",starts:{end:"`",returnEnd:false,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"graphql"}};const TEMPLATE_STRING={className:"string",begin:"`",end:"`",contains:[hljs.BACKSLASH_ESCAPE,SUBST]};const JSDOC_COMMENT=hljs.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:true,excludeBegin:true,relevance:0},{className:"variable",begin:IDENT_RE$1+"(?=\\s*(-)|$)",endsParent:true,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]});const COMMENT={className:"comment",variants:[JSDOC_COMMENT,hljs.C_BLOCK_COMMENT_MODE,hljs.C_LINE_COMMENT_MODE]};const SUBST_INTERNALS=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,{match:/\$\d+/},NUMBER];SUBST.contains=SUBST_INTERNALS.concat({begin:/\{/,end:/\}/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_INTERNALS)});const SUBST_AND_COMMENTS=[].concat(COMMENT,SUBST.contains);const PARAMS_CONTAINS=SUBST_AND_COMMENTS.concat([{begin:/\(/,end:/\)/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_AND_COMMENTS)}]);const PARAMS={className:"params",begin:/\(/,end:/\)/,excludeBegin:true,excludeEnd:true,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS};const CLASS_OR_EXTENDS={variants:[{match:[/class/,/\s+/,IDENT_RE$1,/\s+/,/extends/,/\s+/,regex.concat(IDENT_RE$1,"(",regex.concat(/\./,IDENT_RE$1),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,IDENT_RE$1],scope:{1:"keyword",3:"title.class"}}]};const CLASS_REFERENCE={relevance:0,match:regex.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}};const USE_STRICT={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/};const FUNCTION_DEFINITION={variants:[{match:[/function/,/\s+/,IDENT_RE$1,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[PARAMS],illegal:/%/};const UPPER_CASE_CONSTANT={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function noneOf(list){return regex.concat("(?!",list.join("|"),")");}
const FUNCTION_CALL={match:regex.concat(/\b/,noneOf([...BUILT_IN_GLOBALS,"super","import"]),IDENT_RE$1,regex.lookahead(/\(/)),className:"title.function",relevance:0};const PROPERTY_ACCESS={begin:regex.concat(/\./,regex.lookahead(regex.concat(IDENT_RE$1,/(?![0-9A-Za-z$_(])/))),end:IDENT_RE$1,excludeBegin:true,keywords:"prototype",className:"property",relevance:0};const GETTER_OR_SETTER={match:[/get|set/,/\s+/,IDENT_RE$1,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},PARAMS]};const FUNC_LEAD_IN_RE="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+hljs.UNDERSCORE_IDENT_RE+")\\s*=>";const FUNCTION_VARIABLE={match:[/const|var|let/,/\s+/,IDENT_RE$1,/\s*/,/=\s*/,/(async\s*)?/,regex.lookahead(FUNC_LEAD_IN_RE)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[PARAMS]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:KEYWORDS$1,exports:{PARAMS_CONTAINS,CLASS_REFERENCE},illegal:/#(?![$_A-z])/,contains:[hljs.SHEBANG({label:"shebang",binary:"node",relevance:5}),USE_STRICT,hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,COMMENT,{match:/\$\d+/},NUMBER,CLASS_REFERENCE,{className:"attr",begin:IDENT_RE$1+regex.lookahead(":"),relevance:0},FUNCTION_VARIABLE,{begin:"("+hljs.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[COMMENT,hljs.REGEXP_MODE,{className:"function",begin:FUNC_LEAD_IN_RE,returnBegin:true,end:"\\s*=>",contains:[{className:"params",variants:[{begin:hljs.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:true},{begin:/\(/,end:/\)/,excludeBegin:true,excludeEnd:true,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:FRAGMENT.begin,end:FRAGMENT.end},{match:XML_SELF_CLOSING},{begin:XML_TAG.begin,"on:begin":XML_TAG.isTrulyOpeningTag,end:XML_TAG.end}],subLanguage:"xml",contains:[{begin:XML_TAG.begin,end:XML_TAG.end,skip:true,contains:["self"]}]}]},FUNCTION_DEFINITION,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+hljs.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:true,label:"func.def",contains:[PARAMS,hljs.inherit(hljs.TITLE_MODE,{begin:IDENT_RE$1,className:"title.function"})]},{match:/\.\.\./,relevance:0},PROPERTY_ACCESS,{match:"\\$"+IDENT_RE$1,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[PARAMS]},FUNCTION_CALL,UPPER_CASE_CONSTANT,CLASS_OR_EXTENDS,GETTER_OR_SETTER,{match:/\$[(.]/}]};}
module.exports=javascript;}});var require_css=__commonJS({"node_modules/highlight.js/lib/languages/css.js"(exports,module){var MODES=(hljs)=>{return{IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:hljs.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:hljs.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}};};var TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"];var MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"];var PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"];var PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"];var ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","
module.exports=css;}});var require_plaintext=__commonJS({"node_modules/highlight.js/lib/languages/plaintext.js"(exports,module){function plaintext(hljs){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:true};}
module.exports=plaintext;}});var require_tribute_min=__commonJS({"node_modules/tributejs/dist/tribute.min.js"(exports,module){!function(e2,t2){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t2():"function"==typeof define&&define.amd?define(t2):(e2=e2||self).Tribute=t2();}(exports,function(){"use strict";function e2(e3,t3){if(!(e3 instanceof t3))
throw new TypeError("Cannot call a class as a function");}
function t2(e3,t3){for(var n3=0;n3<t3.length;n3++){var i3=t3[n3];i3.enumerable=i3.enumerable||false,i3.configurable=true,"value"in i3&&(i3.writable=true),Object.defineProperty(e3,i3.key,i3);}}
function n2(e3,n3,i3){return n3&&t2(e3.prototype,n3),i3&&t2(e3,i3),e3;}
function i2(e3,t3){return function(e4){if(Array.isArray(e4))
return e4;}(e3)||function(e4,t4){if(!(Symbol.iterator in Object(e4)||"[object Arguments]"===Object.prototype.toString.call(e4)))
return;var n3=[],i3=true,r3=false,o3=void 0;try{for(var u3,l3=e4[Symbol.iterator]();!(i3=(u3=l3.next()).done)&&(n3.push(u3.value),!t4||n3.length!==t4);i3=true);}catch(e5){r3=true,o3=e5;}finally{try{i3||null==l3.return||l3.return();}finally{if(r3)
throw o3;}}
return n3;}(e3,t3)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}();}
if(Array.prototype.find||(Array.prototype.find=function(e3){if(null===this)
throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e3)
throw new TypeError("predicate must be a function");for(var t3,n3=Object(this),i3=n3.length>>>0,r3=arguments[1],o3=0;o3<i3;o3++)
if(t3=n3[o3],e3.call(r3,t3,o3,n3))
return t3;}),window&&"function"!=typeof window.CustomEvent){var r2=function(e3,t3){t3=t3||{bubbles:false,cancelable:false,detail:void 0};var n3=document.createEvent("CustomEvent");return n3.initCustomEvent(e3,t3.bubbles,t3.cancelable,t3.detail),n3;};void 0!==window.Event&&(r2.prototype=window.Event.prototype),window.CustomEvent=r2;}
var o2=function(){function t3(n3){e2(this,t3),this.tribute=n3,this.tribute.events=this;}
return n2(t3,[{key:"bind",value:function(e3){e3.boundKeydown=this.keydown.bind(e3,this),e3.boundKeyup=this.keyup.bind(e3,this),e3.boundInput=this.input.bind(e3,this),e3.addEventListener("keydown",e3.boundKeydown,false),e3.addEventListener("keyup",e3.boundKeyup,false),e3.addEventListener("input",e3.boundInput,false);}},{key:"unbind",value:function(e3){e3.removeEventListener("keydown",e3.boundKeydown,false),e3.removeEventListener("keyup",e3.boundKeyup,false),e3.removeEventListener("input",e3.boundInput,false),delete e3.boundKeydown,delete e3.boundKeyup,delete e3.boundInput;}},{key:"keydown",value:function(e3,n3){e3.shouldDeactivate(n3)&&(e3.tribute.isActive=false,e3.tribute.hideMenu());var i3=this;e3.commandEvent=false,t3.keys().forEach(function(t4){t4.key===n3.keyCode&&(e3.commandEvent=true,e3.callbacks()[t4.value.toLowerCase()](n3,i3));});}},{key:"input",value:function(e3,t4){e3.inputEvent=true,e3.keyup.call(this,e3,t4);}},{key:"click",value:function(e3,t4){var n3=e3.tribute;if(n3.menu&&n3.menu.contains(t4.target)){var i3=t4.target;for(t4.preventDefault(),t4.stopPropagation();"li"!==i3.nodeName.toLowerCase();)
if(!(i3=i3.parentNode)||i3===n3.menu)
throw new Error("cannot find the <li> container for the click");n3.selectItemAtIndex(i3.getAttribute("data-index"),t4),n3.hideMenu();}else
n3.current.element&&!n3.current.externalTrigger&&(n3.current.externalTrigger=false,setTimeout(function(){return n3.hideMenu();}));}},{key:"keyup",value:function(e3,t4){if(e3.inputEvent&&(e3.inputEvent=false),e3.updateSelection(this),27!==t4.keyCode){if(!e3.tribute.allowSpaces&&e3.tribute.hasTrailingSpace)
return e3.tribute.hasTrailingSpace=false,e3.commandEvent=true,void e3.callbacks().space(t4,this);if(!e3.tribute.isActive)
if(e3.tribute.autocompleteMode)
e3.callbacks().triggerChar(t4,this,"");else{var n3=e3.getKeyCode(e3,this,t4);if(isNaN(n3)||!n3)
return;var i3=e3.tribute.triggers().find(function(e4){return e4.charCodeAt(0)===n3;});void 0!==i3&&e3.callbacks().triggerChar(t4,this,i3);}
e3.tribute.current.mentionText.length<e3.tribute.current.collection.menuShowMinLength||((e3.tribute.current.trigger||e3.tribute.autocompleteMode)&&false===e3.commandEvent||e3.tribute.isActive&&8===t4.keyCode)&&e3.tribute.showMenuFor(this,true);}}},{key:"shouldDeactivate",value:function(e3){if(!this.tribute.isActive)
return false;if(0===this.tribute.current.mentionText.length){var n3=false;return t3.keys().forEach(function(t4){e3.keyCode===t4.key&&(n3=true);}),!n3;}
return false;}},{key:"getKeyCode",value:function(e3,t4,n3){var i3=e3.tribute,r3=i3.range.getTriggerInfo(false,i3.hasTrailingSpace,true,i3.allowSpaces,i3.autocompleteMode);return!!r3&&r3.mentionTriggerChar.charCodeAt(0);}},{key:"updateSelection",value:function(e3){this.tribute.current.element=e3;var t4=this.tribute.range.getTriggerInfo(false,this.tribute.hasTrailingSpace,true,this.tribute.allowSpaces,this.tribute.autocompleteMode);t4&&(this.tribute.current.selectedPath=t4.mentionSelectedPath,this.tribute.current.mentionText=t4.mentionText,this.tribute.current.selectedOffset=t4.mentionSelectedOffset);}},{key:"callbacks",value:function(){var e3=this;return{triggerChar:function(t4,n3,i3){var r3=e3.tribute;r3.current.trigger=i3;var o3=r3.collection.find(function(e4){return e4.trigger===i3;});r3.current.collection=o3,r3.current.mentionText.length>=r3.current.collection.menuShowMinLength&&r3.inputEvent&&r3.showMenuFor(n3,true);},enter:function(t4,n3){e3.tribute.isActive&&e3.tribute.current.filteredItems&&(t4.preventDefault(),t4.stopPropagation(),setTimeout(function(){e3.tribute.selectItemAtIndex(e3.tribute.menuSelected,t4),e3.tribute.hideMenu();},0));},escape:function(t4,n3){e3.tribute.isActive&&(t4.preventDefault(),t4.stopPropagation(),e3.tribute.isActive=false,e3.tribute.hideMenu());},tab:function(t4,n3){e3.callbacks().enter(t4,n3);},space:function(t4,n3){e3.tribute.isActive&&(e3.tribute.spaceSelectsMatch?e3.callbacks().enter(t4,n3):e3.tribute.allowSpaces||(t4.stopPropagation(),setTimeout(function(){e3.tribute.hideMenu(),e3.tribute.isActive=false;},0)));},up:function(t4,n3){if(e3.tribute.isActive&&e3.tribute.current.filteredItems){t4.preventDefault(),t4.stopPropagation();var i3=e3.tribute.current.filteredItems.length,r3=e3.tribute.menuSelected;i3>r3&&r3>0?(e3.tribute.menuSelected--,e3.setActiveLi()):0===r3&&(e3.tribute.menuSelected=i3-1,e3.setActiveLi(),e3.tribute.menu.scrollTop=e3.tribute.menu.scrollHeight);}},down:function(t4,n3){if(e3.tribute.isActive&&e3.tribute.current.filteredItems){t4.preventDefault(),t4.stopPropagation();var i3=e3.tribute.current.filteredItems.length-1,r3=e3.tribute.menuSelected;i3>r3?(e3.tribute.menuSelected++,e3.setActiveLi()):i3===r3&&(e3.tribute.menuSelected=0,e3.setActiveLi(),e3.tribute.menu.scrollTop=0);}},delete:function(t4,n3){e3.tribute.isActive&&e3.tribute.current.mentionText.length<1?e3.tribute.hideMenu():e3.tribute.isActive&&e3.tribute.showMenuFor(n3);}};}},{key:"setActiveLi",value:function(e3){var t4=this.tribute.menu.querySelectorAll("li"),n3=t4.length>>>0;e3&&(this.tribute.menuSelected=parseInt(e3));for(var i3=0;i3<n3;i3++){var r3=t4[i3];if(i3===this.tribute.menuSelected){r3.classList.add(this.tribute.current.collection.selectClass);var o3=r3.getBoundingClientRect(),u3=this.tribute.menu.getBoundingClientRect();if(o3.bottom>u3.bottom){var l3=o3.bottom-u3.bottom;this.tribute.menu.scrollTop+=l3;}else if(o3.top<u3.top){var s3=u3.top-o3.top;this.tribute.menu.scrollTop-=s3;}}else
r3.classList.remove(this.tribute.current.collection.selectClass);}}},{key:"getFullHeight",value:function(e3,t4){var n3=e3.getBoundingClientRect().height;if(t4){var i3=e3.currentStyle||window.getComputedStyle(e3);return n3+parseFloat(i3.marginTop)+parseFloat(i3.marginBottom);}
return n3;}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}];}}]),t3;}(),u2=function(){function t3(n3){e2(this,t3),this.tribute=n3,this.tribute.menuEvents=this,this.menu=this.tribute.menu;}
return n2(t3,[{key:"bind",value:function(e3){var t4=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce(function(){t4.tribute.isActive&&t4.tribute.showMenuFor(t4.tribute.current.element,false);},300,false),this.windowResizeEvent=this.debounce(function(){t4.tribute.isActive&&t4.tribute.range.positionMenuAtCaret(true);},300,false),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,false),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,false),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,false):window.addEventListener("scroll",this.menuContainerScrollEvent);}},{key:"unbind",value:function(e3){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,false),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,false),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,false):window.removeEventListener("scroll",this.menuContainerScrollEvent);}},{key:"debounce",value:function(e3,t4,n3){var i3,r3=arguments,o3=this;return function(){var u3=o3,l3=r3,s3=n3&&!i3;clearTimeout(i3),i3=setTimeout(function(){i3=null,n3||e3.apply(u3,l3);},t4),s3&&e3.apply(u3,l3);};}}]),t3;}(),l2=function(){function t3(n3){e2(this,t3),this.tribute=n3,this.tribute.range=this;}
return n2(t3,[{key:"getDocument",value:function(){var e3;return this.tribute.current.collection&&(e3=this.tribute.current.collection.iframe),e3?e3.contentWindow.document:document;}},{key:"positionMenuAtCaret",value:function(e3){var t4,n3=this,i3=this.tribute.current,r3=this.getTriggerInfo(false,this.tribute.hasTrailingSpace,true,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==r3){if(!this.tribute.positionMenu)
return void(this.tribute.menu.style.cssText="display: block;");t4=this.isContentEditable(i3.element)?this.getContentEditableCaretPosition(r3.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,r3.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(t4.top,"px;\n                                     left: ").concat(t4.left,"px;\n                                     right: ").concat(t4.right,"px;\n                                     bottom: ").concat(t4.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===t4.left&&(this.tribute.menu.style.left="auto"),"auto"===t4.top&&(this.tribute.menu.style.top="auto"),e3&&this.scrollIntoView(),window.setTimeout(function(){var i4={width:n3.tribute.menu.offsetWidth,height:n3.tribute.menu.offsetHeight},r4=n3.isMenuOffScreen(t4,i4),o3=window.innerWidth>i4.width&&(r4.left||r4.right),u3=window.innerHeight>i4.height&&(r4.top||r4.bottom);(o3||u3)&&(n3.tribute.menu.style.cssText="display: none",n3.positionMenuAtCaret(e3));},0);}else
this.tribute.menu.style.cssText="display: none";}},{key:"selectElement",value:function(e3,t4,n3){var i3,r3=e3;if(t4)
for(var o3=0;o3<t4.length;o3++){if(void 0===(r3=r3.childNodes[t4[o3]]))
return;for(;r3.length<n3;)
n3-=r3.length,r3=r3.nextSibling;0!==r3.childNodes.length||r3.length||(r3=r3.previousSibling);}
var u3=this.getWindowSelection();(i3=this.getDocument().createRange()).setStart(r3,n3),i3.setEnd(r3,n3),i3.collapse(true);try{u3.removeAllRanges();}catch(e4){}
u3.addRange(i3),e3.focus();}},{key:"replaceTriggerText",value:function(e3,t4,n3,i3,r3){var o3=this.getTriggerInfo(true,n3,t4,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o3){var u3=this.tribute.current,l3=new CustomEvent("tribute-replaced",{detail:{item:r3,instance:u3,context:o3,event:i3}});if(this.isContentEditable(u3.element)){e3+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:"\xA0";var s3=o3.mentionPosition+o3.mentionText.length;this.tribute.autocompleteMode||(s3+=o3.mentionTriggerChar.length),this.pasteHtml(e3,o3.mentionPosition,s3);}else{var a2=this.tribute.current.element,c2="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";e3+=c2;var h2=o3.mentionPosition,d2=o3.mentionPosition+o3.mentionText.length+c2.length;this.tribute.autocompleteMode||(d2+=o3.mentionTriggerChar.length-1),a2.value=a2.value.substring(0,h2)+e3+a2.value.substring(d2,a2.value.length),a2.selectionStart=h2+e3.length,a2.selectionEnd=h2+e3.length;}
u3.element.dispatchEvent(new CustomEvent("input",{bubbles:true})),u3.element.dispatchEvent(l3);}}},{key:"pasteHtml",value:function(e3,t4,n3){var i3,r3;r3=this.getWindowSelection(),(i3=this.getDocument().createRange()).setStart(r3.anchorNode,t4),i3.setEnd(r3.anchorNode,n3),i3.deleteContents();var o3=this.getDocument().createElement("div");o3.innerHTML=e3;for(var u3,l3,s3=this.getDocument().createDocumentFragment();u3=o3.firstChild;)
l3=s3.appendChild(u3);i3.insertNode(s3),l3&&((i3=i3.cloneRange()).setStartAfter(l3),i3.collapse(true),r3.removeAllRanges(),r3.addRange(i3));}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection();}},{key:"getNodePositionInParent",value:function(e3){if(null===e3.parentNode)
return 0;for(var t4=0;t4<e3.parentNode.childNodes.length;t4++){if(e3.parentNode.childNodes[t4]===e3)
return t4;}}},{key:"getContentEditableSelectedPath",value:function(e3){var t4=this.getWindowSelection(),n3=t4.anchorNode,i3=[];if(null!=n3){for(var r3,o3=n3.contentEditable;null!==n3&&"true"!==o3;)
r3=this.getNodePositionInParent(n3),i3.push(r3),null!==(n3=n3.parentNode)&&(o3=n3.contentEditable);return i3.reverse(),{selected:n3,path:i3,offset:t4.getRangeAt(0).startOffset};}}},{key:"getTextPrecedingCurrentSelection",value:function(){var e3=this.tribute.current,t4="";if(this.isContentEditable(e3.element)){var n3=this.getWindowSelection().anchorNode;if(null!=n3){var i3=n3.textContent,r3=this.getWindowSelection().getRangeAt(0).startOffset;i3&&r3>=0&&(t4=i3.substring(0,r3));}}else{var o3=this.tribute.current.element;if(o3){var u3=o3.selectionStart;o3.value&&u3>=0&&(t4=o3.value.substring(0,u3));}}
return t4;}},{key:"getLastWordInText",value:function(e3){var t4=(e3=e3.replace(/\u00A0/g," ")).split(/\s+/);return t4[t4.length-1].trim();}},{key:"getTriggerInfo",value:function(e3,t4,n3,i3,r3){var o3,u3,l3,s3=this,a2=this.tribute.current;if(this.isContentEditable(a2.element)){var c2=this.getContentEditableSelectedPath(a2);c2&&(o3=c2.selected,u3=c2.path,l3=c2.offset);}else
o3=this.tribute.current.element;var h2=this.getTextPrecedingCurrentSelection(),d2=this.getLastWordInText(h2);if(r3)
return{mentionPosition:h2.length-d2.length,mentionText:d2,mentionSelectedElement:o3,mentionSelectedPath:u3,mentionSelectedOffset:l3};if(null!=h2){var f2,m2=-1;if(this.tribute.collection.forEach(function(e4){var t5=e4.trigger,i4=e4.requireLeadingSpace?s3.lastIndexWithLeadingSpace(h2,t5):h2.lastIndexOf(t5);i4>m2&&(m2=i4,f2=t5,n3=e4.requireLeadingSpace);}),m2>=0&&(0===m2||!n3||/[\xA0\s]/g.test(h2.substring(m2-1,m2)))){var p2=h2.substring(m2+f2.length,h2.length);f2=h2.substring(m2,m2+f2.length);var v2=p2.substring(0,1),g2=p2.length>0&&(" "===v2||"\xA0"===v2);t4&&(p2=p2.trim());var b2=i3?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=b2.test(p2),!g2&&(e3||!b2.test(p2)))
return{mentionPosition:m2,mentionText:p2,mentionSelectedElement:o3,mentionSelectedPath:u3,mentionSelectedOffset:l3,mentionTriggerChar:f2};}}}},{key:"lastIndexWithLeadingSpace",value:function(e3,t4){for(var n3=e3.split("").reverse().join(""),i3=-1,r3=0,o3=e3.length;r3<o3;r3++){for(var u3=r3===e3.length-1,l3=/\s/.test(n3[r3+1]),s3=true,a2=t4.length-1;a2>=0;a2--)
if(t4[a2]!==n3[r3-a2]){s3=false;break;}
if(s3&&(u3||l3)){i3=e3.length-1-r3;break;}}
return i3;}},{key:"isContentEditable",value:function(e3){return "INPUT"!==e3.nodeName&&"TEXTAREA"!==e3.nodeName;}},{key:"isMenuOffScreen",value:function(e3,t4){var n3=window.innerWidth,i3=window.innerHeight,r3=document.documentElement,o3=(window.pageXOffset||r3.scrollLeft)-(r3.clientLeft||0),u3=(window.pageYOffset||r3.scrollTop)-(r3.clientTop||0),l3="number"==typeof e3.top?e3.top:u3+i3-e3.bottom-t4.height,s3="number"==typeof e3.right?e3.right:e3.left+t4.width,a2="number"==typeof e3.bottom?e3.bottom:e3.top+t4.height,c2="number"==typeof e3.left?e3.left:o3+n3-e3.right-t4.width;return{top:l3<Math.floor(u3),right:s3>Math.ceil(o3+n3),bottom:a2>Math.ceil(u3+i3),left:c2<Math.floor(o3)};}},{key:"getMenuDimensions",value:function(){var e3={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",e3.width=this.tribute.menu.offsetWidth,e3.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e3;}},{key:"getTextAreaOrInputUnderlinePosition",value:function(e3,t4,n3){var i3=null!==window.mozInnerScreenX,r3=this.getDocument().createElement("div");r3.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(r3);var o3=r3.style,u3=window.getComputedStyle?getComputedStyle(e3):e3.currentStyle;o3.whiteSpace="pre-wrap","INPUT"!==e3.nodeName&&(o3.wordWrap="break-word"),o3.position="absolute",o3.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach(function(e4){o3[e4]=u3[e4];}),i3?(o3.width="".concat(parseInt(u3.width)-2,"px"),e3.scrollHeight>parseInt(u3.height)&&(o3.overflowY="scroll")):o3.overflow="hidden",r3.textContent=e3.value.substring(0,t4),"INPUT"===e3.nodeName&&(r3.textContent=r3.textContent.replace(/\s/g,"\xA0"));var l3=this.getDocument().createElement("span");l3.textContent=e3.value.substring(t4)||".",r3.appendChild(l3);var s3=e3.getBoundingClientRect(),a2=document.documentElement,c2=(window.pageXOffset||a2.scrollLeft)-(a2.clientLeft||0),h2=(window.pageYOffset||a2.scrollTop)-(a2.clientTop||0),d2=0,f2=0;this.menuContainerIsBody&&(d2=s3.top,f2=s3.left);var m2={top:d2+h2+l3.offsetTop+parseInt(u3.borderTopWidth)+parseInt(u3.fontSize)-e3.scrollTop,left:f2+c2+l3.offsetLeft+parseInt(u3.borderLeftWidth)},p2=window.innerWidth,v2=window.innerHeight,g2=this.getMenuDimensions(),b2=this.isMenuOffScreen(m2,g2);b2.right&&(m2.right=p2-m2.left,m2.left="auto");var y2=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(b2.bottom){var w2=y2-(v2-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);m2.bottom=w2+(v2-s3.top-l3.offsetTop),m2.top="auto";}
return(b2=this.isMenuOffScreen(m2,g2)).left&&(m2.left=p2>g2.width?c2+p2-g2.width:c2,delete m2.right),b2.top&&(m2.top=v2>g2.height?h2+v2-g2.height:h2,delete m2.bottom),this.getDocument().body.removeChild(r3),m2;}},{key:"getContentEditableCaretPosition",value:function(e3){var t4,n3=this.getWindowSelection();(t4=this.getDocument().createRange()).setStart(n3.anchorNode,e3),t4.setEnd(n3.anchorNode,e3),t4.collapse(false);var i3=t4.getBoundingClientRect(),r3=document.documentElement,o3=(window.pageXOffset||r3.scrollLeft)-(r3.clientLeft||0),u3=(window.pageYOffset||r3.scrollTop)-(r3.clientTop||0),l3={left:i3.left+o3,top:i3.top+i3.height+u3},s3=window.innerWidth,a2=window.innerHeight,c2=this.getMenuDimensions(),h2=this.isMenuOffScreen(l3,c2);h2.right&&(l3.left="auto",l3.right=s3-i3.left-o3);var d2=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(h2.bottom){var f2=d2-(a2-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);l3.top="auto",l3.bottom=f2+(a2-i3.top);}
return(h2=this.isMenuOffScreen(l3,c2)).left&&(l3.left=s3>c2.width?o3+s3-c2.width:o3,delete l3.right),h2.top&&(l3.top=a2>c2.height?u3+a2-c2.height:u3,delete l3.bottom),this.menuContainerIsBody||(l3.left=l3.left?l3.left-this.tribute.menuContainer.offsetLeft:l3.left,l3.top=l3.top?l3.top-this.tribute.menuContainer.offsetTop:l3.top),l3;}},{key:"scrollIntoView",value:function(e3){var t4,n3=this.menu;if(void 0!==n3){for(;void 0===t4||0===t4.height;)
if(0===(t4=n3.getBoundingClientRect()).height&&(void 0===(n3=n3.childNodes[0])||!n3.getBoundingClientRect))
return;var i3=t4.top,r3=i3+t4.height;if(i3<0)
window.scrollTo(0,window.pageYOffset+t4.top-20);else if(r3>window.innerHeight){var o3=window.pageYOffset+t4.top-20;o3-window.pageYOffset>100&&(o3=window.pageYOffset+100);var u3=window.pageYOffset-(window.innerHeight-r3);u3>o3&&(u3=o3),window.scrollTo(0,u3);}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer;}}]),t3;}(),s2=function(){function t3(n3){e2(this,t3),this.tribute=n3,this.tribute.search=this;}
return n2(t3,[{key:"simpleFilter",value:function(e3,t4){var n3=this;return t4.filter(function(t5){return n3.test(e3,t5);});}},{key:"test",value:function(e3,t4){return null!==this.match(e3,t4);}},{key:"match",value:function(e3,t4,n3){n3=n3||{};t4.length;var i3=n3.pre||"",r3=n3.post||"",o3=n3.caseSensitive&&t4||t4.toLowerCase();if(n3.skip)
return{rendered:t4,score:0};e3=n3.caseSensitive&&e3||e3.toLowerCase();var u3=this.traverse(o3,e3,0,0,[]);return u3?{rendered:this.render(t4,u3.cache,i3,r3),score:u3.score}:null;}},{key:"traverse",value:function(e3,t4,n3,i3,r3){if(t4.length===i3)
return{score:this.calculateScore(r3),cache:r3.slice()};if(!(e3.length===n3||t4.length-i3>e3.length-n3)){for(var o3,u3,l3=t4[i3],s3=e3.indexOf(l3,n3);s3>-1;){if(r3.push(s3),u3=this.traverse(e3,t4,s3+1,i3+1,r3),r3.pop(),!u3)
return o3;(!o3||o3.score<u3.score)&&(o3=u3),s3=e3.indexOf(l3,s3+1);}
return o3;}}},{key:"calculateScore",value:function(e3){var t4=0,n3=1;return e3.forEach(function(i3,r3){r3>0&&(e3[r3-1]+1===i3?n3+=n3+1:n3=1),t4+=n3;}),t4;}},{key:"render",value:function(e3,t4,n3,i3){var r3=e3.substring(0,t4[0]);return t4.forEach(function(o3,u3){r3+=n3+e3[o3]+i3+e3.substring(o3+1,t4[u3+1]?t4[u3+1]:e3.length);}),r3;}},{key:"filter",value:function(e3,t4,n3){var i3=this;return n3=n3||{},t4.reduce(function(t5,r3,o3,u3){var l3=r3;n3.extract&&((l3=n3.extract(r3))||(l3=""));var s3=i3.match(e3,l3,n3);return null!=s3&&(t5[t5.length]={string:s3.rendered,score:s3.score,index:o3,original:r3}),t5;},[]).sort(function(e4,t5){var n4=t5.score-e4.score;return n4||e4.index-t5.index;});}}]),t3;}();return function(){function t3(n3){var i3,r3=this,a2=n3.values,c2=void 0===a2?null:a2,h2=n3.iframe,d2=void 0===h2?null:h2,f2=n3.selectClass,m2=void 0===f2?"highlight":f2,p2=n3.containerClass,v2=void 0===p2?"tribute-container":p2,g2=n3.itemClass,b2=void 0===g2?"":g2,y2=n3.trigger,w2=void 0===y2?"@":y2,T2=n3.autocompleteMode,C2=void 0!==T2&&T2,S2=n3.selectTemplate,E2=void 0===S2?null:S2,k2=n3.menuItemTemplate,x2=void 0===k2?null:k2,M2=n3.lookup,A2=void 0===M2?"key":M2,L2=n3.fillAttr,I2=void 0===L2?"value":L2,N2=n3.collection,O2=void 0===N2?null:N2,D2=n3.menuContainer,P2=void 0===D2?null:D2,R2=n3.noMatchTemplate,W2=void 0===R2?null:R2,H2=n3.requireLeadingSpace,B2=void 0===H2||H2,F2=n3.allowSpaces,_2=void 0!==F2&&F2,j2=n3.replaceTextSuffix,Y2=void 0===j2?null:j2,z2=n3.positionMenu,K2=void 0===z2||z2,q2=n3.spaceSelectsMatch,U2=void 0!==q2&&q2,X2=n3.searchOpts,Q2=void 0===X2?{}:X2,V2=n3.menuItemLimit,G2=void 0===V2?null:V2,J2=n3.menuShowMinLength,Z2=void 0===J2?0:J2;if(e2(this,t3),this.autocompleteMode=C2,this.menuSelected=0,this.current={},this.inputEvent=false,this.isActive=false,this.menuContainer=P2,this.allowSpaces=_2,this.replaceTextSuffix=Y2,this.positionMenu=K2,this.hasTrailingSpace=false,this.spaceSelectsMatch=U2,this.autocompleteMode&&(w2="",_2=false),c2)
this.collection=[{trigger:w2,iframe:d2,selectClass:m2,containerClass:v2,itemClass:b2,selectTemplate:(E2||t3.defaultSelectTemplate).bind(this),menuItemTemplate:(x2||t3.defaultMenuItemTemplate).bind(this),noMatchTemplate:(i3=W2,"string"==typeof i3?""===i3.trim()?null:i3:"function"==typeof i3?i3.bind(r3):W2||function(){return "<li>No Match Found!</li>";}.bind(r3)),lookup:A2,fillAttr:I2,values:c2,requireLeadingSpace:B2,searchOpts:Q2,menuItemLimit:G2,menuShowMinLength:Z2}];else{if(!O2)
throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=O2.map(function(e3){return{trigger:e3.trigger||w2,iframe:e3.iframe||d2,selectClass:e3.selectClass||m2,containerClass:e3.containerClass||v2,itemClass:e3.itemClass||b2,selectTemplate:(e3.selectTemplate||t3.defaultSelectTemplate).bind(r3),menuItemTemplate:(e3.menuItemTemplate||t3.defaultMenuItemTemplate).bind(r3),noMatchTemplate:function(e4){return "string"==typeof e4?""===e4.trim()?null:e4:"function"==typeof e4?e4.bind(r3):W2||function(){return "<li>No Match Found!</li>";}.bind(r3);}(W2),lookup:e3.lookup||A2,fillAttr:e3.fillAttr||I2,values:e3.values,requireLeadingSpace:e3.requireLeadingSpace,searchOpts:e3.searchOpts||Q2,menuItemLimit:e3.menuItemLimit||G2,menuShowMinLength:e3.menuShowMinLength||Z2};});}
new l2(this),new o2(this),new u2(this),new s2(this);}
return n2(t3,[{key:"triggers",value:function(){return this.collection.map(function(e3){return e3.trigger;});}},{key:"attach",value:function(e3){if(!e3)
throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e3 instanceof jQuery&&(e3=e3.get()),e3.constructor===NodeList||e3.constructor===HTMLCollection||e3.constructor===Array)
for(var t4=e3.length,n3=0;n3<t4;++n3)
this._attach(e3[n3]);else
this._attach(e3);}},{key:"_attach",value:function(e3){e3.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e3.nodeName),this.ensureEditable(e3),this.events.bind(e3),e3.setAttribute("data-tribute",true);}},{key:"ensureEditable",value:function(e3){if(-1===t3.inputTypes().indexOf(e3.nodeName)){if(!e3.contentEditable)
throw new Error("[Tribute] Cannot bind to "+e3.nodeName);e3.contentEditable=true;}}},{key:"createMenu",value:function(e3){var t4=this.range.getDocument().createElement("div"),n3=this.range.getDocument().createElement("ul");return t4.className=e3,t4.appendChild(n3),this.menuContainer?this.menuContainer.appendChild(t4):this.range.getDocument().body.appendChild(t4);}},{key:"showMenuFor",value:function(e3,t4){var n3=this;if(!this.isActive||this.current.element!==e3||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e3.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=true,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var r3=function(e4){if(n3.isActive){var r4=n3.search.filter(n3.current.mentionText,e4,{pre:n3.current.collection.searchOpts.pre||"<span>",post:n3.current.collection.searchOpts.post||"</span>",skip:n3.current.collection.searchOpts.skip,extract:function(e5){if("string"==typeof n3.current.collection.lookup)
return e5[n3.current.collection.lookup];if("function"==typeof n3.current.collection.lookup)
return n3.current.collection.lookup(e5,n3.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.");}});n3.current.collection.menuItemLimit&&(r4=r4.slice(0,n3.current.collection.menuItemLimit)),n3.current.filteredItems=r4;var o3=n3.menu.querySelector("ul");if(n3.range.positionMenuAtCaret(t4),!r4.length){var u3=new CustomEvent("tribute-no-match",{detail:n3.menu});return n3.current.element.dispatchEvent(u3),void("function"==typeof n3.current.collection.noMatchTemplate&&!n3.current.collection.noMatchTemplate()||!n3.current.collection.noMatchTemplate?n3.hideMenu():"function"==typeof n3.current.collection.noMatchTemplate?o3.innerHTML=n3.current.collection.noMatchTemplate():o3.innerHTML=n3.current.collection.noMatchTemplate);}
o3.innerHTML="";var l3=n3.range.getDocument().createDocumentFragment();r4.forEach(function(e5,t5){var r5=n3.range.getDocument().createElement("li");r5.setAttribute("data-index",t5),r5.className=n3.current.collection.itemClass,r5.addEventListener("mousemove",function(e6){var t6=i2(n3._findLiTarget(e6.target),2),r6=(t6[0],t6[1]);0!==e6.movementY&&n3.events.setActiveLi(r6);}),n3.menuSelected===t5&&r5.classList.add(n3.current.collection.selectClass),r5.innerHTML=n3.current.collection.menuItemTemplate(e5),l3.appendChild(r5);}),o3.appendChild(l3);}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,r3):r3(this.current.collection.values);}}},{key:"_findLiTarget",value:function(e3){if(!e3)
return[];var t4=e3.getAttribute("data-index");return t4?[e3,t4]:this._findLiTarget(e3.parentNode);}},{key:"showMenuForCollection",value:function(e3,t4){e3!==document.activeElement&&this.placeCaretAtEnd(e3),this.current.collection=this.collection[t4||0],this.current.externalTrigger=true,this.current.element=e3,e3.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e3,this.current.collection.trigger),this.showMenuFor(e3);}},{key:"placeCaretAtEnd",value:function(e3){if(e3.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t4=document.createRange();t4.selectNodeContents(e3),t4.collapse(false);var n3=window.getSelection();n3.removeAllRanges(),n3.addRange(t4);}else if(void 0!==document.body.createTextRange){var i3=document.body.createTextRange();i3.moveToElementText(e3),i3.collapse(false),i3.select();}}},{key:"insertTextAtCursor",value:function(e3){var t4,n3;(n3=(t4=window.getSelection()).getRangeAt(0)).deleteContents();var i3=document.createTextNode(e3);n3.insertNode(i3),n3.selectNodeContents(i3),n3.collapse(false),t4.removeAllRanges(),t4.addRange(n3);}},{key:"insertAtCaret",value:function(e3,t4){var n3=e3.scrollTop,i3=e3.selectionStart,r3=e3.value.substring(0,i3),o3=e3.value.substring(e3.selectionEnd,e3.value.length);e3.value=r3+t4+o3,i3+=t4.length,e3.selectionStart=i3,e3.selectionEnd=i3,e3.focus(),e3.scrollTop=n3;}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=false,this.menuSelected=0,this.current={});}},{key:"selectItemAtIndex",value:function(e3,t4){if("number"==typeof(e3=parseInt(e3))&&!isNaN(e3)){var n3=this.current.filteredItems[e3],i3=this.current.collection.selectTemplate(n3);null!==i3&&this.replaceText(i3,t4,n3);}}},{key:"replaceText",value:function(e3,t4,n3){this.range.replaceTriggerText(e3,true,true,t4,n3);}},{key:"_append",value:function(e3,t4,n3){if("function"==typeof e3.values)
throw new Error("Unable to append to values, as it is a function.");e3.values=n3?t4:e3.values.concat(t4);}},{key:"append",value:function(e3,t4,n3){var i3=parseInt(e3);if("number"!=typeof i3)
throw new Error("please provide an index for the collection to update.");var r3=this.collection[i3];this._append(r3,t4,n3);}},{key:"appendCurrent",value:function(e3,t4){if(!this.isActive)
throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,e3,t4);}},{key:"detach",value:function(e3){if(!e3)
throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e3 instanceof jQuery&&(e3=e3.get()),e3.constructor===NodeList||e3.constructor===HTMLCollection||e3.constructor===Array)
for(var t4=e3.length,n3=0;n3<t4;++n3)
this._detach(e3[n3]);else
this._detach(e3);}},{key:"_detach",value:function(e3){var t4=this;this.events.unbind(e3),e3.tributeMenu&&this.menuEvents.unbind(e3.tributeMenu),setTimeout(function(){e3.removeAttribute("data-tribute"),t4.isActive=false,e3.tributeMenu&&e3.tributeMenu.remove();});}},{key:"isActive",get:function(){return this._isActive;},set:function(e3){if(this._isActive!=e3&&(this._isActive=e3,this.current.element)){var t4=new CustomEvent("tribute-active-".concat(e3));this.current.element.dispatchEvent(t4);}}}],[{key:"defaultSelectTemplate",value:function(e3){return void 0===e3?"".concat(this.current.collection.trigger).concat(this.current.mentionText):this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e3.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e3.original[this.current.collection.fillAttr];}},{key:"defaultMenuItemTemplate",value:function(e3){return e3.string;}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"];}}]),t3;}();});}});var require_window=__commonJS({"node_modules/global/window.js"(exports,module){var win;if(typeof window!=="undefined"){win=window;}else if(typeof global!=="undefined"){win=global;}else if(typeof self!=="undefined"){win=self;}else{win={};}
module.exports=win;}});var require_min_document=__commonJS({"(disabled):node_modules/min-document/index.js"(){}});var require_document=__commonJS({"node_modules/global/document.js"(exports,module){var topLevel=typeof global!=="undefined"?global:typeof window!=="undefined"?window:{};var minDoc=require_min_document();var doccy;if(typeof document!=="undefined"){doccy=document;}else{doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];if(!doccy){doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc;}}
module.exports=doccy;}});var require_extends=__commonJS({"node_modules/@babel/runtime/helpers/extends.js"(exports,module){function _extends(){module.exports=_extends=Object.assign?Object.assign.bind():function(target){for(var i2=1;i2<arguments.length;i2++){var source=arguments[i2];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;},module.exports.__esModule=true,module.exports["default"]=module.exports;return _extends.apply(this,arguments);}
module.exports=_extends,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_keycode=__commonJS({"node_modules/keycode/index.js"(exports,module){function keyCode(searchInput){if(searchInput&&"object"===typeof searchInput){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)
searchInput=hasKeyCode;}
if("number"===typeof searchInput)
return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)
return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)
return foundNamedKey;if(search.length===1)
return search.charCodeAt(0);return void 0;}
keyCode.isEventKey=function isEventKey(event2,nameOrCode){if(event2&&"object"===typeof event2){var keyCode2=event2.which||event2.keyCode||event2.charCode;if(keyCode2===null||keyCode2===void 0){return false;}
if(typeof nameOrCode==="string"){var foundNamedKey=codes[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode2;}
var foundNamedKey=aliases[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode2;}}else if(typeof nameOrCode==="number"){return nameOrCode===keyCode2;}
return false;}};exports=module.exports=keyCode;var codes=exports.code=exports.codes={"backspace":8,"tab":9,"enter":13,"shift":16,"ctrl":17,"alt":18,"pause/break":19,"caps lock":20,"esc":27,"space":32,"page up":33,"page down":34,"end":35,"home":36,"left":37,"up":38,"right":39,"down":40,"insert":45,"delete":46,"command":91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={"windows":91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,"ctl":17,"control":17,"option":18,"pause":19,"break":19,"caps":20,"return":13,"escape":27,"spc":32,"spacebar":32,"pgup":33,"pgdn":34,"ins":45,"del":46,"cmd":91};for(i2=97;i2<123;i2++)
codes[String.fromCharCode(i2)]=i2-32;for(i2=48;i2<58;i2++)
codes[i2-48]=i2;var i2;for(i2=1;i2<13;i2++)
codes["f"+i2]=i2+111;for(i2=0;i2<10;i2++)
codes["numpad "+i2]=i2+96;var names=exports.names=exports.title={};for(i2 in codes)
names[codes[i2]]=i2;for(alias in aliases){codes[alias]=aliases[alias];}
var alias;}});var require_assertThisInitialized=__commonJS({"node_modules/@babel/runtime/helpers/assertThisInitialized.js"(exports,module){function _assertThisInitialized(self2){if(self2===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return self2;}
module.exports=_assertThisInitialized,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_setPrototypeOf=__commonJS({"node_modules/@babel/runtime/helpers/setPrototypeOf.js"(exports,module){function _setPrototypeOf(o2,p2){module.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf2(o3,p3){o3.__proto__=p3;return o3;},module.exports.__esModule=true,module.exports["default"]=module.exports;return _setPrototypeOf(o2,p2);}
module.exports=_setPrototypeOf,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_inheritsLoose=__commonJS({"node_modules/@babel/runtime/helpers/inheritsLoose.js"(exports,module){var setPrototypeOf=require_setPrototypeOf();function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;setPrototypeOf(subClass,superClass);}
module.exports=_inheritsLoose,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_tuple=__commonJS({"node_modules/safe-json-parse/tuple.js"(exports,module){module.exports=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error2=null;try{json=JSON.parse(obj,reviver);}catch(err){error2=err;}
return[error2,json];}}});var require_is_function=__commonJS({"node_modules/is-function/index.js"(exports,module){module.exports=isFunction;var toString=Object.prototype.toString;function isFunction(fn2){if(!fn2){return false;}
var string=toString.call(fn2);return string==="[object Function]"||typeof fn2==="function"&&string!=="[object RegExp]"||typeof window!=="undefined"&&(fn2===window.setTimeout||fn2===window.alert||fn2===window.confirm||fn2===window.prompt);}}});var require_http_handler=__commonJS({"node_modules/@videojs/xhr/lib/http-handler.js"(exports,module){"use strict";var window2=require_window();var httpResponseHandler=function httpResponseHandler2(callback,decodeResponseBody){if(decodeResponseBody===void 0){decodeResponseBody=false;}
return function(err,response,responseBody){if(err){callback(err);return;}
if(response.statusCode>=400&&response.statusCode<=599){var cause=responseBody;if(decodeResponseBody){if(window2.TextDecoder){var charset=getCharset(response.headers&&response.headers["content-type"]);try{cause=new TextDecoder(charset).decode(responseBody);}catch(e2){}}else{cause=String.fromCharCode.apply(null,new Uint8Array(responseBody));}}
callback({cause});return;}
callback(null,responseBody);};};function getCharset(contentTypeHeader){if(contentTypeHeader===void 0){contentTypeHeader="";}
return contentTypeHeader.toLowerCase().split(";").reduce(function(charset,contentType){var _contentType$split=contentType.split("="),type=_contentType$split[0],value=_contentType$split[1];if(type.trim()==="charset"){return value.trim();}
return charset;},"utf-8");}
module.exports=httpResponseHandler;}});var require_lib=__commonJS({"node_modules/@videojs/xhr/lib/index.js"(exports,module){"use strict";var window2=require_window();var _extends=require_extends();var isFunction=require_is_function();createXHR.httpHandler=require_http_handler();var parseHeaders=function parseHeaders2(headers){var result={};if(!headers){return result;}
headers.trim().split("\n").forEach(function(row){var index=row.indexOf(":");var key=row.slice(0,index).trim().toLowerCase();var value=row.slice(index+1).trim();if(typeof result[key]==="undefined"){result[key]=value;}else if(Array.isArray(result[key])){result[key].push(value);}else{result[key]=[result[key],value];}});return result;};module.exports=createXHR;module.exports.default=createXHR;createXHR.XMLHttpRequest=window2.XMLHttpRequest||noop;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest()?createXHR.XMLHttpRequest:window2.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR[method==="delete"?"del":method]=function(uri,options,callback){options=initParams(uri,options,callback);options.method=method.toUpperCase();return _createXHR(options);};});function forEachArray(array,iterator){for(var i2=0;i2<array.length;i2++){iterator(array[i2]);}}
function isEmpty(obj){for(var i2 in obj){if(obj.hasOwnProperty(i2))
return false;}
return true;}
function initParams(uri,options,callback){var params2=uri;if(isFunction(options)){callback=options;if(typeof uri==="string"){params2={uri};}}else{params2=_extends({},options,{uri});}
params2.callback=callback;return params2;}
function createXHR(uri,options,callback){options=initParams(uri,options,callback);return _createXHR(options);}
function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing");}
var called=false;var callback=function cbOnce(err,response,body2){if(!called){called=true;options.callback(err,response,body2);}};function readystatechange(){if(xhr.readyState===4){setTimeout(loadFunc,0);}}
function getBody(){var body2=void 0;if(xhr.response){body2=xhr.response;}else{body2=xhr.responseText||getXml(xhr);}
if(isJson){try{body2=JSON.parse(body2);}catch(e2){}}
return body2;}
function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"));}
evt.statusCode=0;return callback(evt,failureResponse);}
function loadFunc(){if(aborted)
return;var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===void 0){status=200;}else{status=xhr.status===1223?204:xhr.status;}
var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders());}}else{err=new Error("Internal XMLHttpRequest Error");}
return callback(err,response,response.body);}
var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest();}else{xhr=new createXHR.XMLHttpRequest();}}
var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;var failureResponse={body:void 0,headers:{},statusCode:0,method,url:uri,rawRequest:xhr};if("json"in options&&options.json!==false){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");body=JSON.stringify(options.json===true?body:options.json);}}
xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;xhr.onprogress=function(){};xhr.onabort=function(){aborted=true;};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);if(!sync){xhr.withCredentials=!!options.withCredentials;}
if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){if(aborted)
return;aborted=true;xhr.abort("timeout");var e2=new Error("XMLHttpRequest timeout");e2.code="ETIMEDOUT";errorFunc(e2);},options.timeout);}
if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key]);}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object");}
if("responseType"in options){xhr.responseType=options.responseType;}
if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr);}
xhr.send(body||null);return xhr;}
function getXml(xhr){try{if(xhr.responseType==="document"){return xhr.responseXML;}
var firefoxBugTakenEffect=xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML;}}catch(e2){}
return null;}
function noop(){}}});var require_vtt=__commonJS({"node_modules/videojs-vtt.js/lib/vtt.js"(exports,module){var document2=require_document();var _objCreate=Object.create||function(){function F2(){}
return function(o2){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.");}
F2.prototype=o2;return new F2();};}();function ParsingError(errorData,message){this.name="ParsingError";this.code=errorData.code;this.message=message||errorData.message;}
ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(input){function computeSeconds(h2,m3,s2,f2){return(h2|0)*3600+(m3|0)*60+(s2|0)+(f2|0)/1e3;}
var m2=input.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!m2){return null;}
if(m2[3]){return computeSeconds(m2[1],m2[2],m2[3].replace(":",""),m2[4]);}else if(m2[1]>59){return computeSeconds(m2[1],m2[2],0,m2[4]);}else{return computeSeconds(0,m2[1],m2[2],m2[4]);}}
function Settings(){this.values=_objCreate(null);}
Settings.prototype={set:function(k2,v2){if(!this.get(k2)&&v2!==""){this.values[k2]=v2;}},get:function(k2,dflt,defaultKey){if(defaultKey){return this.has(k2)?this.values[k2]:dflt[defaultKey];}
return this.has(k2)?this.values[k2]:dflt;},has:function(k2){return k2 in this.values;},alt:function(k2,v2,a2){for(var n2=0;n2<a2.length;++n2){if(v2===a2[n2]){this.set(k2,v2);break;}}},integer:function(k2,v2){if(/^-?\d+$/.test(v2)){this.set(k2,parseInt(v2,10));}},percent:function(k2,v2){var m2;if(m2=v2.match(/^([\d]{1,3})(\.[\d]*)?%$/)){v2=parseFloat(v2);if(v2>=0&&v2<=100){this.set(k2,v2);return true;}}
return false;}};function parseOptions(input,callback,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i2 in groups){if(typeof groups[i2]!=="string"){continue;}
var kv=groups[i2].split(keyValueDelim);if(kv.length!==2){continue;}
var k2=kv[0].trim();var v2=kv[1].trim();callback(k2,v2);}}
function parseCue(input,cue,regionList){var oInput=input;function consumeTimeStamp(){var ts=parseTimeStamp(input);if(ts===null){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput);}
input=input.replace(/^[^\sa-zA-Z-]+/,"");return ts;}
function consumeCueSettings(input2,cue2){var settings=new Settings();parseOptions(input2,function(k2,v2){switch(k2){case "region":for(var i2=regionList.length-1;i2>=0;i2--){if(regionList[i2].id===v2){settings.set(k2,regionList[i2].region);break;}}
break;case "vertical":settings.alt(k2,v2,["rl","lr"]);break;case "line":var vals=v2.split(","),vals0=vals[0];settings.integer(k2,vals0);settings.percent(k2,vals0)?settings.set("snapToLines",false):null;settings.alt(k2,vals0,["auto"]);if(vals.length===2){settings.alt("lineAlign",vals[1],["start","center","end"]);}
break;case "position":vals=v2.split(",");settings.percent(k2,vals[0]);if(vals.length===2){settings.alt("positionAlign",vals[1],["start","center","end"]);}
break;case "size":settings.percent(k2,v2);break;case "align":settings.alt(k2,v2,["start","center","end","left","right"]);break;}},/:/,/\s/);cue2.region=settings.get("region",null);cue2.vertical=settings.get("vertical","");try{cue2.line=settings.get("line","auto");}catch(e2){}
cue2.lineAlign=settings.get("lineAlign","start");cue2.snapToLines=settings.get("snapToLines",true);cue2.size=settings.get("size",100);try{cue2.align=settings.get("align","center");}catch(e2){cue2.align=settings.get("align","middle");}
try{cue2.position=settings.get("position","auto");}catch(e2){cue2.position=settings.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},cue2.align);}
cue2.positionAlign=settings.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},cue2.align);}
function skipWhitespace(){input=input.replace(/^\s+/,"");}
skipWhitespace();cue.startTime=consumeTimeStamp();skipWhitespace();if(input.substr(0,3)!=="-->"){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+oInput);}
input=input.substr(3);skipWhitespace();cue.endTime=consumeTimeStamp();skipWhitespace();consumeCueSettings(input,cue);}
var TEXTAREA_ELEMENT=document2.createElement&&document2.createElement("textarea");var TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var DEFAULT_COLOR_CLASS={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var TAG_ANNOTATION={v:"title",lang:"lang"};var NEEDS_PARENT={rt:"ruby"};function parseContent(window2,input){function nextToken(){if(!input){return null;}
function consume(result){input=input.substr(result.length);return result;}
var m3=input.match(/^([^<]*)(<[^>]*>?)?/);return consume(m3[1]?m3[1]:m3[2]);}
function unescape2(s2){TEXTAREA_ELEMENT.innerHTML=s2;s2=TEXTAREA_ELEMENT.textContent;TEXTAREA_ELEMENT.textContent="";return s2;}
function shouldAdd(current2,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current2.localName;}
function createElement(type,annotation){var tagName=TAG_NAME[type];if(!tagName){return null;}
var element=window2.document.createElement(tagName);var name=TAG_ANNOTATION[type];if(name&&annotation){element[name]=annotation.trim();}
return element;}
var rootDiv=window2.document.createElement("div"),current=rootDiv,t2,tagStack=[];while((t2=nextToken())!==null){if(t2[0]==="<"){if(t2[1]==="/"){if(tagStack.length&&tagStack[tagStack.length-1]===t2.substr(2).replace(">","")){tagStack.pop();current=current.parentNode;}
continue;}
var ts=parseTimeStamp(t2.substr(1,t2.length-2));var node;if(ts){node=window2.document.createProcessingInstruction("timestamp",ts);current.appendChild(node);continue;}
var m2=t2.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m2){continue;}
node=createElement(m2[1],m2[3]);if(!node){continue;}
if(!shouldAdd(current,node)){continue;}
if(m2[2]){var classes=m2[2].split(".");classes.forEach(function(cl){var bgColor=/^bg_/.test(cl);var colorName=bgColor?cl.slice(3):cl;if(DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)){var propName=bgColor?"background-color":"color";var propValue=DEFAULT_COLOR_CLASS[colorName];node.style[propName]=propValue;}});node.className=classes.join(" ");}
tagStack.push(m2[1]);current.appendChild(node);current=node;continue;}
current.appendChild(window2.document.createTextNode(unescape2(t2)));}
return rootDiv;}
var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(charCode){for(var i2=0;i2<strongRTLRanges.length;i2++){var currentRange=strongRTLRanges[i2];if(charCode>=currentRange[0]&&charCode<=currentRange[1]){return true;}}
return false;}
function determineBidi(cueDiv){var nodeStack=[],text="",charCode;if(!cueDiv||!cueDiv.childNodes){return "ltr";}
function pushNodes(nodeStack2,node){for(var i3=node.childNodes.length-1;i3>=0;i3--){nodeStack2.push(node.childNodes[i3]);}}
function nextTextNode(nodeStack2){if(!nodeStack2||!nodeStack2.length){return null;}
var node=nodeStack2.pop(),text2=node.textContent||node.innerText;if(text2){var m2=text2.match(/^.*(\n|\r)/);if(m2){nodeStack2.length=0;return m2[0];}
return text2;}
if(node.tagName==="ruby"){return nextTextNode(nodeStack2);}
if(node.childNodes){pushNodes(nodeStack2,node);return nextTextNode(nodeStack2);}}
pushNodes(nodeStack,cueDiv);while(text=nextTextNode(nodeStack)){for(var i2=0;i2<text.length;i2++){charCode=text.charCodeAt(i2);if(isStrongRTLChar(charCode)){return "rtl";}}}
return "ltr";}
function computeLinePos(cue){if(typeof cue.line==="number"&&(cue.snapToLines||cue.line>=0&&cue.line<=100)){return cue.line;}
if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement){return-1;}
var track=cue.track,trackList=track.textTrackList,count=0;for(var i2=0;i2<trackList.length&&trackList[i2]!==track;i2++){if(trackList[i2].mode==="showing"){count++;}}
return++count*-1;}
function StyleBox(){}
StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles){if(styles.hasOwnProperty(prop)){div.style[prop]=styles[prop];}}};StyleBox.prototype.formatStyle=function(val,unit){return val===0?0:val+unit;};function CueStyleBox(window2,cue,styleOptions){StyleBox.call(this);this.cue=cue;this.cueDiv=parseContent(window2,cue.text);var styles={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(styles,this.cueDiv);this.div=window2.document.createElement("div");styles={direction:determineBidi(this.cueDiv),writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:cue.align==="middle"?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(styles);this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case "start":textPos=cue.position;break;case "center":textPos=cue.position-cue.size/2;break;case "end":textPos=cue.position-cue.size;break;}
if(cue.vertical===""){this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")});}else{this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")});}
this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")});};}
CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(obj){var lh,height,width,top;if(obj.div){height=obj.div.offsetHeight;width=obj.div.offsetWidth;top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect();lh=rects?Math.max(rects[0]&&rects[0].height||0,obj.height/rects.length):0;}
this.left=obj.left;this.right=obj.right;this.top=obj.top||top;this.height=obj.height||height;this.bottom=obj.bottom||top+(obj.height||height);this.width=obj.width||width;this.lineHeight=lh!==void 0?lh:obj.lineHeight;}
BoxPosition.prototype.move=function(axis,toMove){toMove=toMove!==void 0?toMove:this.lineHeight;switch(axis){case "+x":this.left+=toMove;this.right+=toMove;break;case "-x":this.left-=toMove;this.right-=toMove;break;case "+y":this.top+=toMove;this.bottom+=toMove;break;case "-y":this.top-=toMove;this.bottom-=toMove;break;}};BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top;};BoxPosition.prototype.overlapsAny=function(boxes){for(var i2=0;i2<boxes.length;i2++){if(this.overlaps(boxes[i2])){return true;}}
return false;};BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right;};BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case "+x":return this.left<container.left;case "-x":return this.right>container.right;case "+y":return this.top<container.top;case "-y":return this.bottom>container.bottom;}};BoxPosition.prototype.intersectPercentage=function(b2){var x2=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y2=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x2*y2;return intersectArea/(this.height*this.width);};BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width};};BoxPosition.getSimpleBoxPosition=function(obj){var height=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0;var width=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0;var top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height,bottom:obj.bottom||top+(obj.height||height),width:obj.width||width};return ret;};function moveBoxToLinePosition(window2,styleBox,containerBox,boxPositions){function findBestPosition(b2,axis2){var bestPosition2,specifiedPosition=new BoxPosition(b2),percentage=1;for(var i2=0;i2<axis2.length;i2++){while(b2.overlapsOppositeAxis(containerBox,axis2[i2])||b2.within(containerBox)&&b2.overlapsAny(boxPositions)){b2.move(axis2[i2]);}
if(b2.within(containerBox)){return b2;}
var p2=b2.intersectPercentage(containerBox);if(percentage>p2){bestPosition2=new BoxPosition(b2);percentage=p2;}
b2=new BoxPosition(specifiedPosition);}
return bestPosition2||specifiedPosition;}
var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case "":axis=["+y","-y"];size="height";break;case "rl":axis=["+x","-x"];size="width";break;case "lr":axis=["-x","+x"];size="width";break;}
var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];if(Math.abs(position)>maxPosition){position=position<0?-1:1;position*=Math.ceil(maxPosition/step)*step;}
if(linePos<0){position+=cue.vertical===""?containerBox.height:containerBox.width;axis=axis.reverse();}
boxPosition.move(initialAxis,position);}else{var calculatedPercentage=boxPosition.lineHeight/containerBox.height*100;switch(cue.lineAlign){case "center":linePos-=calculatedPercentage/2;break;case "end":linePos-=calculatedPercentage;break;}
switch(cue.vertical){case "":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case "rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case "lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")});break;}
axis=["+y","-x","+x","-y"];boxPosition=new BoxPosition(styleBox);}
var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox));}
function WebVTT2(){}
WebVTT2.StringDecoder=function(){return{decode:function(data){if(!data){return "";}
if(typeof data!=="string"){throw new Error("Error - expected string data.");}
return decodeURIComponent(encodeURIComponent(data));}};};WebVTT2.convertCueToDOMTree=function(window2,cuetext){if(!window2||!cuetext){return null;}
return parseContent(window2,cuetext);};var FONT_SIZE_PERCENT=0.05;var FONT_STYLE="sans-serif";var CUE_BACKGROUND_PADDING="1.5%";WebVTT2.processCues=function(window2,cues,overlay){if(!window2||!cues||!overlay){return null;}
while(overlay.firstChild){overlay.removeChild(overlay.firstChild);}
var paddedOverlay=window2.document.createElement("div");paddedOverlay.style.position="absolute";paddedOverlay.style.left="0";paddedOverlay.style.right="0";paddedOverlay.style.top="0";paddedOverlay.style.bottom="0";paddedOverlay.style.margin=CUE_BACKGROUND_PADDING;overlay.appendChild(paddedOverlay);function shouldCompute(cues2){for(var i3=0;i3<cues2.length;i3++){if(cues2[i3].hasBeenReset||!cues2[i3].displayState){return true;}}
return false;}
if(!shouldCompute(cues)){for(var i2=0;i2<cues.length;i2++){paddedOverlay.appendChild(cues[i2].displayState);}
return;}
var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100;var styleOptions={font:fontSize+"px "+FONT_STYLE};(function(){var styleBox,cue;for(var i3=0;i3<cues.length;i3++){cue=cues[i3];styleBox=new CueStyleBox(window2,cue,styleOptions);paddedOverlay.appendChild(styleBox.div);moveBoxToLinePosition(window2,styleBox,containerBox,boxPositions);cue.displayState=styleBox.div;boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));}})();};WebVTT2.Parser=function(window2,vttjs,decoder){if(!decoder){decoder=vttjs;vttjs={};}
if(!vttjs){vttjs={};}
this.window=window2;this.vttjs=vttjs;this.state="INITIAL";this.buffer="";this.decoder=decoder||new TextDecoder("utf8");this.regionList=[];};WebVTT2.Parser.prototype={reportOrThrowError:function(e2){if(e2 instanceof ParsingError){this.onparsingerror&&this.onparsingerror(e2);}else{throw e2;}},parse:function(data){var self2=this;if(data){self2.buffer+=self2.decoder.decode(data,{stream:true});}
function collectNextLine(){var buffer=self2.buffer;var pos=0;while(pos<buffer.length&&buffer[pos]!=="\r"&&buffer[pos]!=="\n"){++pos;}
var line2=buffer.substr(0,pos);if(buffer[pos]==="\r"){++pos;}
if(buffer[pos]==="\n"){++pos;}
self2.buffer=buffer.substr(pos);return line2;}
function parseRegion(input){var settings=new Settings();parseOptions(input,function(k2,v2){switch(k2){case "id":settings.set(k2,v2);break;case "width":settings.percent(k2,v2);break;case "lines":settings.integer(k2,v2);break;case "regionanchor":case "viewportanchor":var xy=v2.split(",");if(xy.length!==2){break;}
var anchor=new Settings();anchor.percent("x",xy[0]);anchor.percent("y",xy[1]);if(!anchor.has("x")||!anchor.has("y")){break;}
settings.set(k2+"X",anchor.get("x"));settings.set(k2+"Y",anchor.get("y"));break;case "scroll":settings.alt(k2,v2,["up"]);break;}},/=/,/\s/);if(settings.has("id")){var region=new(self2.vttjs.VTTRegion||self2.window.VTTRegion)();region.width=settings.get("width",100);region.lines=settings.get("lines",3);region.regionAnchorX=settings.get("regionanchorX",0);region.regionAnchorY=settings.get("regionanchorY",100);region.viewportAnchorX=settings.get("viewportanchorX",0);region.viewportAnchorY=settings.get("viewportanchorY",100);region.scroll=settings.get("scroll","");self2.onregion&&self2.onregion(region);self2.regionList.push({id:settings.get("id"),region});}}
function parseTimestampMap(input){var settings=new Settings();parseOptions(input,function(k2,v2){switch(k2){case "MPEGT":settings.integer(k2+"S",v2);break;case "LOCA":settings.set(k2+"L",parseTimeStamp(v2));break;}},/[^\d]:/,/,/);self2.ontimestampmap&&self2.ontimestampmap({"MPEGTS":settings.get("MPEGTS"),"LOCAL":settings.get("LOCAL")});}
function parseHeader(input){if(input.match(/X-TIMESTAMP-MAP/)){parseOptions(input,function(k2,v2){switch(k2){case "X-TIMESTAMP-MAP":parseTimestampMap(v2);break;}},/=/);}else{parseOptions(input,function(k2,v2){switch(k2){case "Region":parseRegion(v2);break;}},/:/);}}
try{var line;if(self2.state==="INITIAL"){if(!/\r\n|\n/.test(self2.buffer)){return this;}
line=collectNextLine();var m2=line.match(/^WEBVTT([ \t].*)?$/);if(!m2||!m2[0]){throw new ParsingError(ParsingError.Errors.BadSignature);}
self2.state="HEADER";}
var alreadyCollectedLine=false;while(self2.buffer){if(!/\r\n|\n/.test(self2.buffer)){return this;}
if(!alreadyCollectedLine){line=collectNextLine();}else{alreadyCollectedLine=false;}
switch(self2.state){case "HEADER":if(/:/.test(line)){parseHeader(line);}else if(!line){self2.state="ID";}
continue;case "NOTE":if(!line){self2.state="ID";}
continue;case "ID":if(/^NOTE($|[ \t])/.test(line)){self2.state="NOTE";break;}
if(!line){continue;}
self2.cue=new(self2.vttjs.VTTCue||self2.window.VTTCue)(0,0,"");try{self2.cue.align="center";}catch(e2){self2.cue.align="middle";}
self2.state="CUE";if(line.indexOf("-->")===-1){self2.cue.id=line;continue;}
case "CUE":try{parseCue(line,self2.cue,self2.regionList);}catch(e2){self2.reportOrThrowError(e2);self2.cue=null;self2.state="BADCUE";continue;}
self2.state="CUETEXT";continue;case "CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=true)){self2.oncue&&self2.oncue(self2.cue);self2.cue=null;self2.state="ID";continue;}
if(self2.cue.text){self2.cue.text+="\n";}
self2.cue.text+=line.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case "BADCUE":if(!line){self2.state="ID";}
continue;}}}catch(e2){self2.reportOrThrowError(e2);if(self2.state==="CUETEXT"&&self2.cue&&self2.oncue){self2.oncue(self2.cue);}
self2.cue=null;self2.state=self2.state==="INITIAL"?"BADWEBVTT":"BADCUE";}
return this;},flush:function(){var self2=this;try{self2.buffer+=self2.decoder.decode();if(self2.cue||self2.state==="HEADER"){self2.buffer+="\n\n";self2.parse();}
if(self2.state==="INITIAL"){throw new ParsingError(ParsingError.Errors.BadSignature);}}catch(e2){self2.reportOrThrowError(e2);}
self2.onflush&&self2.onflush();return this;}};module.exports=WebVTT2;}});var require_vttcue=__commonJS({"node_modules/videojs-vtt.js/lib/vttcue.js"(exports,module){var autoKeyword="auto";var directionSetting={"":1,"lr":1,"rl":1};var alignSetting={"start":1,"center":1,"end":1,"left":1,"right":1,"auto":1,"line-left":1,"line-right":1};function findDirectionSetting(value){if(typeof value!=="string"){return false;}
var dir=directionSetting[value.toLowerCase()];return dir?value.toLowerCase():false;}
function findAlignSetting(value){if(typeof value!=="string"){return false;}
var align=alignSetting[value.toLowerCase()];return align?value.toLowerCase():false;}
function VTTCue(startTime,endTime,text){this.hasBeenReset=false;var _id="";var _pauseOnExit=false;var _startTime=startTime;var _endTime=endTime;var _text=text;var _region=null;var _vertical="";var _snapToLines=true;var _line="auto";var _lineAlign="start";var _position="auto";var _positionAlign="auto";var _size=100;var _align="center";Object.defineProperties(this,{"id":{enumerable:true,get:function(){return _id;},set:function(value){_id=""+value;}},"pauseOnExit":{enumerable:true,get:function(){return _pauseOnExit;},set:function(value){_pauseOnExit=!!value;}},"startTime":{enumerable:true,get:function(){return _startTime;},set:function(value){if(typeof value!=="number"){throw new TypeError("Start time must be set to a number.");}
_startTime=value;this.hasBeenReset=true;}},"endTime":{enumerable:true,get:function(){return _endTime;},set:function(value){if(typeof value!=="number"){throw new TypeError("End time must be set to a number.");}
_endTime=value;this.hasBeenReset=true;}},"text":{enumerable:true,get:function(){return _text;},set:function(value){_text=""+value;this.hasBeenReset=true;}},"region":{enumerable:true,get:function(){return _region;},set:function(value){_region=value;this.hasBeenReset=true;}},"vertical":{enumerable:true,get:function(){return _vertical;},set:function(value){var setting=findDirectionSetting(value);if(setting===false){throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");}
_vertical=setting;this.hasBeenReset=true;}},"snapToLines":{enumerable:true,get:function(){return _snapToLines;},set:function(value){_snapToLines=!!value;this.hasBeenReset=true;}},"line":{enumerable:true,get:function(){return _line;},set:function(value){if(typeof value!=="number"&&value!==autoKeyword){throw new SyntaxError("Line: an invalid number or illegal string was specified.");}
_line=value;this.hasBeenReset=true;}},"lineAlign":{enumerable:true,get:function(){return _lineAlign;},set:function(value){var setting=findAlignSetting(value);if(!setting){console.warn("lineAlign: an invalid or illegal string was specified.");}else{_lineAlign=setting;this.hasBeenReset=true;}}},"position":{enumerable:true,get:function(){return _position;},set:function(value){if(value<0||value>100){throw new Error("Position must be between 0 and 100.");}
_position=value;this.hasBeenReset=true;}},"positionAlign":{enumerable:true,get:function(){return _positionAlign;},set:function(value){var setting=findAlignSetting(value);if(!setting){console.warn("positionAlign: an invalid or illegal string was specified.");}else{_positionAlign=setting;this.hasBeenReset=true;}}},"size":{enumerable:true,get:function(){return _size;},set:function(value){if(value<0||value>100){throw new Error("Size must be between 0 and 100.");}
_size=value;this.hasBeenReset=true;}},"align":{enumerable:true,get:function(){return _align;},set:function(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("align: an invalid or illegal alignment string was specified.");}
_align=setting;this.hasBeenReset=true;}}});this.displayState=void 0;}
VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text);};module.exports=VTTCue;}});var require_vttregion=__commonJS({"node_modules/videojs-vtt.js/lib/vttregion.js"(exports,module){var scrollSetting={"":true,"up":true};function findScrollSetting(value){if(typeof value!=="string"){return false;}
var scroll=scrollSetting[value.toLowerCase()];return scroll?value.toLowerCase():false;}
function isValidPercentValue(value){return typeof value==="number"&&(value>=0&&value<=100);}
function VTTRegion(){var _width=100;var _lines=3;var _regionAnchorX=0;var _regionAnchorY=100;var _viewportAnchorX=0;var _viewportAnchorY=100;var _scroll="";Object.defineProperties(this,{"width":{enumerable:true,get:function(){return _width;},set:function(value){if(!isValidPercentValue(value)){throw new Error("Width must be between 0 and 100.");}
_width=value;}},"lines":{enumerable:true,get:function(){return _lines;},set:function(value){if(typeof value!=="number"){throw new TypeError("Lines must be set to a number.");}
_lines=value;}},"regionAnchorY":{enumerable:true,get:function(){return _regionAnchorY;},set:function(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorX must be between 0 and 100.");}
_regionAnchorY=value;}},"regionAnchorX":{enumerable:true,get:function(){return _regionAnchorX;},set:function(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorY must be between 0 and 100.");}
_regionAnchorX=value;}},"viewportAnchorY":{enumerable:true,get:function(){return _viewportAnchorY;},set:function(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorY must be between 0 and 100.");}
_viewportAnchorY=value;}},"viewportAnchorX":{enumerable:true,get:function(){return _viewportAnchorX;},set:function(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorX must be between 0 and 100.");}
_viewportAnchorX=value;}},"scroll":{enumerable:true,get:function(){return _scroll;},set:function(value){var setting=findScrollSetting(value);if(setting===false){console.warn("Scroll: an invalid or illegal string was specified.");}else{_scroll=setting;}}}});}
module.exports=VTTRegion;}});var require_browser_index=__commonJS({"node_modules/videojs-vtt.js/lib/browser-index.js"(exports,module){var window2=require_window();var vttjs=module.exports={WebVTT:require_vtt(),VTTCue:require_vttcue(),VTTRegion:require_vttregion()};window2.vttjs=vttjs;window2.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue;var regionShim=vttjs.VTTRegion;var nativeVTTCue=window2.VTTCue;var nativeVTTRegion=window2.VTTRegion;vttjs.shim=function(){window2.VTTCue=cueShim;window2.VTTRegion=regionShim;};vttjs.restore=function(){window2.VTTCue=nativeVTTCue;window2.VTTRegion=nativeVTTRegion;};if(!window2.VTTCue){vttjs.shim();}}});var require_isNativeReflectConstruct=__commonJS({"node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js"(exports,module){function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)
return false;if(Reflect.construct.sham)
return false;if(typeof Proxy==="function")
return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e2){return false;}}
module.exports=_isNativeReflectConstruct,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_construct=__commonJS({"node_modules/@babel/runtime/helpers/construct.js"(exports,module){var setPrototypeOf=require_setPrototypeOf();var isNativeReflectConstruct=require_isNativeReflectConstruct();function _construct(Parent,args,Class){if(isNativeReflectConstruct()){module.exports=_construct=Reflect.construct.bind(),module.exports.__esModule=true,module.exports["default"]=module.exports;}else{module.exports=_construct=function _construct2(Parent2,args2,Class2){var a2=[null];a2.push.apply(a2,args2);var Constructor=Function.bind.apply(Parent2,a2);var instance=new Constructor();if(Class2)
setPrototypeOf(instance,Class2.prototype);return instance;},module.exports.__esModule=true,module.exports["default"]=module.exports;}
return _construct.apply(null,arguments);}
module.exports=_construct,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_inherits=__commonJS({"node_modules/@babel/runtime/helpers/inherits.js"(exports,module){var setPrototypeOf=require_setPrototypeOf();function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)
setPrototypeOf(subClass,superClass);}
module.exports=_inherits,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_interopRequireDefault=__commonJS({"node_modules/@babel/runtime/helpers/interopRequireDefault.js"(exports,module){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
module.exports=_interopRequireDefault,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_url_toolkit=__commonJS({"node_modules/url-toolkit/src/url-toolkit.js"(exports,module){(function(root){var URL_REGEX=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;var FIRST_SEGMENT_REGEX=/^(?=([^\/?#]*))\1([^]*)$/;var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var URLToolkit={buildAbsoluteURL:function(baseURL,relativeURL,opts){opts=opts||{};baseURL=baseURL.trim();relativeURL=relativeURL.trim();if(!relativeURL){if(!opts.alwaysNormalize){return baseURL;}
var basePartsForNormalise=URLToolkit.parseURL(baseURL);if(!basePartsForNormalise){throw new Error("Error trying to parse base URL.");}
basePartsForNormalise.path=URLToolkit.normalizePath(basePartsForNormalise.path);return URLToolkit.buildURLFromParts(basePartsForNormalise);}
var relativeParts=URLToolkit.parseURL(relativeURL);if(!relativeParts){throw new Error("Error trying to parse relative URL.");}
if(relativeParts.scheme){if(!opts.alwaysNormalize){return relativeURL;}
relativeParts.path=URLToolkit.normalizePath(relativeParts.path);return URLToolkit.buildURLFromParts(relativeParts);}
var baseParts=URLToolkit.parseURL(baseURL);if(!baseParts){throw new Error("Error trying to parse base URL.");}
if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=="/"){var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);baseParts.netLoc=pathParts[1];baseParts.path=pathParts[2];}
if(baseParts.netLoc&&!baseParts.path){baseParts.path="/";}
var builtParts={scheme:baseParts.scheme,netLoc:relativeParts.netLoc,path:null,params:relativeParts.params,query:relativeParts.query,fragment:relativeParts.fragment};if(!relativeParts.netLoc){builtParts.netLoc=baseParts.netLoc;if(relativeParts.path[0]!=="/"){if(!relativeParts.path){builtParts.path=baseParts.path;if(!relativeParts.params){builtParts.params=baseParts.params;if(!relativeParts.query){builtParts.query=baseParts.query;}}}else{var baseURLPath=baseParts.path;var newPath=baseURLPath.substring(0,baseURLPath.lastIndexOf("/")+1)+relativeParts.path;builtParts.path=URLToolkit.normalizePath(newPath);}}}
if(builtParts.path===null){builtParts.path=opts.alwaysNormalize?URLToolkit.normalizePath(relativeParts.path):relativeParts.path;}
return URLToolkit.buildURLFromParts(builtParts);},parseURL:function(url){var parts=URL_REGEX.exec(url);if(!parts){return null;}
return{scheme:parts[1]||"",netLoc:parts[2]||"",path:parts[3]||"",params:parts[4]||"",query:parts[5]||"",fragment:parts[6]||""};},normalizePath:function(path){path=path.split("").reverse().join("").replace(SLASH_DOT_REGEX,"");while(path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,"")).length){}
return path.split("").reverse().join("");},buildURLFromParts:function(parts){return parts.scheme+parts.netLoc+parts.path+parts.params+parts.query+parts.fragment;}};if(typeof exports==="object"&&typeof module==="object")
module.exports=URLToolkit;else if(typeof define==="function"&&define.amd)
define([],function(){return URLToolkit;});else if(typeof exports==="object")
exports["URLToolkit"]=URLToolkit;else
root["URLToolkit"]=URLToolkit;})(exports);}});var require_resolve_url=__commonJS({"node_modules/@videojs/vhs-utils/cjs/resolve-url.js"(exports,module){"use strict";var _interopRequireDefault=require_interopRequireDefault();Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _urlToolkit=_interopRequireDefault(require_url_toolkit());var _window=_interopRequireDefault(require_window());var DEFAULT_LOCATION="http://example.com";var resolveUrl=function resolveUrl2(baseUrl,relativeUrl){if(/^[a-z]+:/i.test(relativeUrl)){return relativeUrl;}
if(/^data:/.test(baseUrl)){baseUrl=_window.default.location&&_window.default.location.href||"";}
var nativeURL=typeof _window.default.URL==="function";var protocolLess=/^\/\//.test(baseUrl);var removeLocation=!_window.default.location&&!/\/\//i.test(baseUrl);if(nativeURL){baseUrl=new _window.default.URL(baseUrl,_window.default.location||DEFAULT_LOCATION);}else if(!/\/\//i.test(baseUrl)){baseUrl=_urlToolkit.default.buildAbsoluteURL(_window.default.location&&_window.default.location.href||"",baseUrl);}
if(nativeURL){var newUrl=new URL(relativeUrl,baseUrl);if(removeLocation){return newUrl.href.slice(DEFAULT_LOCATION.length);}else if(protocolLess){return newUrl.href.slice(newUrl.protocol.length);}
return newUrl.href;}
return _urlToolkit.default.buildAbsoluteURL(baseUrl,relativeUrl);};var _default=resolveUrl;exports.default=_default;module.exports=exports.default;}});var require_stream=__commonJS({"node_modules/@videojs/vhs-utils/cjs/stream.js"(exports,module){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var Stream=function(){function Stream2(){this.listeners={};}
var _proto=Stream2.prototype;_proto.on=function on2(type,listener){if(!this.listeners[type]){this.listeners[type]=[];}
this.listeners[type].push(listener);};_proto.off=function off(type,listener){if(!this.listeners[type]){return false;}
var index=this.listeners[type].indexOf(listener);this.listeners[type]=this.listeners[type].slice(0);this.listeners[type].splice(index,1);return index>-1;};_proto.trigger=function trigger(type){var callbacks=this.listeners[type];if(!callbacks){return;}
if(arguments.length===2){var length=callbacks.length;for(var i2=0;i2<length;++i2){callbacks[i2].call(this,arguments[1]);}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i2=0;_i2<_length;++_i2){callbacks[_i2].apply(this,args);}}};_proto.dispose=function dispose(){this.listeners={};};_proto.pipe=function pipe(destination){this.on("data",function(data){destination.push(data);});};return Stream2;}();exports.default=Stream;module.exports=exports.default;}});var require_decode_b64_to_uint8_array=__commonJS({"node_modules/@videojs/vhs-utils/cjs/decode-b64-to-uint8-array.js"(exports,module){"use strict";var _interopRequireDefault=require_interopRequireDefault();Object.defineProperty(exports,"__esModule",{value:true});exports.default=decodeB64ToUint8Array;var _window=_interopRequireDefault(require_window());var atob=function atob2(s2){return _window.default.atob?_window.default.atob(s2):Buffer.from(s2,"base64").toString("binary");};function decodeB64ToUint8Array(b64Text){var decodedString=atob(b64Text);var array=new Uint8Array(decodedString.length);for(var i2=0;i2<decodedString.length;i2++){array[i2]=decodedString.charCodeAt(i2);}
return array;}
module.exports=exports.default;}});var require_m3u8_parser_cjs=__commonJS({"node_modules/m3u8-parser/dist/m3u8-parser.cjs.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _inheritsLoose=require_inheritsLoose();var Stream=require_stream();var _extends=require_extends();var _assertThisInitialized=require_assertThisInitialized();var decodeB64ToUint8Array=require_decode_b64_to_uint8_array();function _interopDefaultLegacy(e2){return e2&&typeof e2==="object"&&"default"in e2?e2:{"default":e2};}
var _inheritsLoose__default=_interopDefaultLegacy(_inheritsLoose);var Stream__default=_interopDefaultLegacy(Stream);var _extends__default=_interopDefaultLegacy(_extends);var _assertThisInitialized__default=_interopDefaultLegacy(_assertThisInitialized);var decodeB64ToUint8Array__default=_interopDefaultLegacy(decodeB64ToUint8Array);var LineStream=function(_Stream){_inheritsLoose__default["default"](LineStream2,_Stream);function LineStream2(){var _this;_this=_Stream.call(this)||this;_this.buffer="";return _this;}
var _proto=LineStream2.prototype;_proto.push=function push(data){var nextNewline;this.buffer+=data;nextNewline=this.buffer.indexOf("\n");for(;nextNewline>-1;nextNewline=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,nextNewline));this.buffer=this.buffer.substring(nextNewline+1);}};return LineStream2;}(Stream__default["default"]);var TAB=String.fromCharCode(9);var parseByterange=function parseByterange2(byterangeString){var match=/([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString||"");var result={};if(match[1]){result.length=parseInt(match[1],10);}
if(match[2]){result.offset=parseInt(match[2],10);}
return result;};var attributeSeparator=function attributeSeparator2(){var key="[^=]*";var value='"[^"]*"|[^,]*';var keyvalue="(?:"+key+")=(?:"+value+")";return new RegExp("(?:^|,)("+keyvalue+")");};var parseAttributes=function parseAttributes2(attributes){var attrs=attributes.split(attributeSeparator());var result={};var i2=attrs.length;var attr;while(i2--){if(attrs[i2]===""){continue;}
attr=/([^=]*)=(.*)/.exec(attrs[i2]).slice(1);attr[0]=attr[0].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^['"](.*)['"]$/g,"$1");result[attr[0]]=attr[1];}
return result;};var ParseStream=function(_Stream){_inheritsLoose__default["default"](ParseStream2,_Stream);function ParseStream2(){var _this;_this=_Stream.call(this)||this;_this.customParsers=[];_this.tagMappers=[];return _this;}
var _proto=ParseStream2.prototype;_proto.push=function push(line){var _this2=this;var match;var event2;line=line.trim();if(line.length===0){return;}
if(line[0]!=="#"){this.trigger("data",{type:"uri",uri:line});return;}
var newLines=this.tagMappers.reduce(function(acc,mapper){var mappedLine=mapper(line);if(mappedLine===line){return acc;}
return acc.concat([mappedLine]);},[line]);newLines.forEach(function(newLine){for(var i2=0;i2<_this2.customParsers.length;i2++){if(_this2.customParsers[i2].call(_this2,newLine)){return;}}
if(newLine.indexOf("#EXT")!==0){_this2.trigger("data",{type:"comment",text:newLine.slice(1)});return;}
newLine=newLine.replace("\r","");match=/^#EXTM3U/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"m3u"});return;}
match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(newLine);if(match){event2={type:"tag",tagType:"inf"};if(match[1]){event2.duration=parseFloat(match[1]);}
if(match[2]){event2.title=match[2];}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);if(match){event2={type:"tag",tagType:"targetduration"};if(match[1]){event2.duration=parseInt(match[1],10);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);if(match){event2={type:"tag",tagType:"version"};if(match[1]){event2.version=parseInt(match[1],10);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event2={type:"tag",tagType:"media-sequence"};if(match[1]){event2.number=parseInt(match[1],10);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event2={type:"tag",tagType:"discontinuity-sequence"};if(match[1]){event2.number=parseInt(match[1],10);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);if(match){event2={type:"tag",tagType:"playlist-type"};if(match[1]){event2.playlistType=match[1];}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);if(match){event2=_extends__default["default"](parseByterange(match[1]),{type:"tag",tagType:"byterange"});_this2.trigger("data",event2);return;}
match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);if(match){event2={type:"tag",tagType:"allow-cache"};if(match[1]){event2.allowed=!/NO/.test(match[1]);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-MAP:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"map"};if(match[1]){var attributes=parseAttributes(match[1]);if(attributes.URI){event2.uri=attributes.URI;}
if(attributes.BYTERANGE){event2.byterange=parseByterange(attributes.BYTERANGE);}}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"stream-inf"};if(match[1]){event2.attributes=parseAttributes(match[1]);if(event2.attributes.RESOLUTION){var split=event2.attributes.RESOLUTION.split("x");var resolution={};if(split[0]){resolution.width=parseInt(split[0],10);}
if(split[1]){resolution.height=parseInt(split[1],10);}
event2.attributes.RESOLUTION=resolution;}
if(event2.attributes.BANDWIDTH){event2.attributes.BANDWIDTH=parseInt(event2.attributes.BANDWIDTH,10);}
if(event2.attributes["FRAME-RATE"]){event2.attributes["FRAME-RATE"]=parseFloat(event2.attributes["FRAME-RATE"]);}
if(event2.attributes["PROGRAM-ID"]){event2.attributes["PROGRAM-ID"]=parseInt(event2.attributes["PROGRAM-ID"],10);}}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-MEDIA:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"media"};if(match[1]){event2.attributes=parseAttributes(match[1]);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-ENDLIST/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"endlist"});return;}
match=/^#EXT-X-DISCONTINUITY/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"discontinuity"});return;}
match=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"program-date-time"};if(match[1]){event2.dateTimeString=match[1];event2.dateTimeObject=new Date(match[1]);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-KEY:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"key"};if(match[1]){event2.attributes=parseAttributes(match[1]);if(event2.attributes.IV){if(event2.attributes.IV.substring(0,2).toLowerCase()==="0x"){event2.attributes.IV=event2.attributes.IV.substring(2);}
event2.attributes.IV=event2.attributes.IV.match(/.{8}/g);event2.attributes.IV[0]=parseInt(event2.attributes.IV[0],16);event2.attributes.IV[1]=parseInt(event2.attributes.IV[1],16);event2.attributes.IV[2]=parseInt(event2.attributes.IV[2],16);event2.attributes.IV[3]=parseInt(event2.attributes.IV[3],16);event2.attributes.IV=new Uint32Array(event2.attributes.IV);}}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-START:?(.*)$/.exec(newLine);if(match){event2={type:"tag",tagType:"start"};if(match[1]){event2.attributes=parseAttributes(match[1]);event2.attributes["TIME-OFFSET"]=parseFloat(event2.attributes["TIME-OFFSET"]);event2.attributes.PRECISE=/YES/.test(event2.attributes.PRECISE);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);if(match){event2={type:"tag",tagType:"cue-out-cont"};if(match[1]){event2.data=match[1];}else{event2.data="";}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);if(match){event2={type:"tag",tagType:"cue-out"};if(match[1]){event2.data=match[1];}else{event2.data="";}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);if(match){event2={type:"tag",tagType:"cue-in"};if(match[1]){event2.data=match[1];}else{event2.data="";}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-SKIP:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"skip"};event2.attributes=parseAttributes(match[1]);if(event2.attributes.hasOwnProperty("SKIPPED-SEGMENTS")){event2.attributes["SKIPPED-SEGMENTS"]=parseInt(event2.attributes["SKIPPED-SEGMENTS"],10);}
if(event2.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")){event2.attributes["RECENTLY-REMOVED-DATERANGES"]=event2.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-PART:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"part"};event2.attributes=parseAttributes(match[1]);["DURATION"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=parseFloat(event2.attributes[key]);}});["INDEPENDENT","GAP"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=/YES/.test(event2.attributes[key]);}});if(event2.attributes.hasOwnProperty("BYTERANGE")){event2.attributes.byterange=parseByterange(event2.attributes.BYTERANGE);}
_this2.trigger("data",event2);return;}
match=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"server-control"};event2.attributes=parseAttributes(match[1]);["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=parseFloat(event2.attributes[key]);}});["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=/YES/.test(event2.attributes[key]);}});_this2.trigger("data",event2);return;}
match=/^#EXT-X-PART-INF:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"part-inf"};event2.attributes=parseAttributes(match[1]);["PART-TARGET"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=parseFloat(event2.attributes[key]);}});_this2.trigger("data",event2);return;}
match=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"preload-hint"};event2.attributes=parseAttributes(match[1]);["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=parseInt(event2.attributes[key],10);var subkey=key==="BYTERANGE-LENGTH"?"length":"offset";event2.attributes.byterange=event2.attributes.byterange||{};event2.attributes.byterange[subkey]=event2.attributes[key];delete event2.attributes[key];}});_this2.trigger("data",event2);return;}
match=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);if(match&&match[1]){event2={type:"tag",tagType:"rendition-report"};event2.attributes=parseAttributes(match[1]);["LAST-MSN","LAST-PART"].forEach(function(key){if(event2.attributes.hasOwnProperty(key)){event2.attributes[key]=parseInt(event2.attributes[key],10);}});_this2.trigger("data",event2);return;}
_this2.trigger("data",{type:"tag",data:newLine.slice(4)});});};_proto.addParser=function addParser(_ref){var _this3=this;var expression=_ref.expression,customType=_ref.customType,dataParser=_ref.dataParser,segment=_ref.segment;if(typeof dataParser!=="function"){dataParser=function dataParser2(line){return line;};}
this.customParsers.push(function(line){var match=expression.exec(line);if(match){_this3.trigger("data",{type:"custom",data:dataParser(line),customType,segment});return true;}});};_proto.addTagMapper=function addTagMapper(_ref2){var expression=_ref2.expression,map=_ref2.map;var mapFn=function mapFn2(line){if(expression.test(line)){return map(line);}
return line;};this.tagMappers.push(mapFn);};return ParseStream2;}(Stream__default["default"]);var camelCase=function camelCase2(str){return str.toLowerCase().replace(/-(\w)/g,function(a2){return a2[1].toUpperCase();});};var camelCaseKeys=function camelCaseKeys2(attributes){var result={};Object.keys(attributes).forEach(function(key){result[camelCase(key)]=attributes[key];});return result;};var setHoldBack=function setHoldBack2(manifest){var serverControl=manifest.serverControl,targetDuration=manifest.targetDuration,partTargetDuration=manifest.partTargetDuration;if(!serverControl){return;}
var tag="#EXT-X-SERVER-CONTROL";var hb="holdBack";var phb="partHoldBack";var minTargetDuration=targetDuration&&targetDuration*3;var minPartDuration=partTargetDuration&&partTargetDuration*2;if(targetDuration&&!serverControl.hasOwnProperty(hb)){serverControl[hb]=minTargetDuration;this.trigger("info",{message:tag+" defaulting HOLD-BACK to targetDuration * 3 ("+minTargetDuration+")."});}
if(minTargetDuration&&serverControl[hb]<minTargetDuration){this.trigger("warn",{message:tag+" clamping HOLD-BACK ("+serverControl[hb]+") to targetDuration * 3 ("+minTargetDuration+")"});serverControl[hb]=minTargetDuration;}
if(partTargetDuration&&!serverControl.hasOwnProperty(phb)){serverControl[phb]=partTargetDuration*3;this.trigger("info",{message:tag+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+serverControl[phb]+")."});}
if(partTargetDuration&&serverControl[phb]<minPartDuration){this.trigger("warn",{message:tag+" clamping PART-HOLD-BACK ("+serverControl[phb]+") to partTargetDuration * 2 ("+minPartDuration+")."});serverControl[phb]=minPartDuration;}};var Parser=function(_Stream){_inheritsLoose__default["default"](Parser2,_Stream);function Parser2(){var _this;_this=_Stream.call(this)||this;_this.lineStream=new LineStream();_this.parseStream=new ParseStream();_this.lineStream.pipe(_this.parseStream);var self2=_assertThisInitialized__default["default"](_this);var uris=[];var currentUri={};var currentMap;var _key;var hasParts=false;var noop=function noop2(){};var defaultMediaGroups={"AUDIO":{},"VIDEO":{},"CLOSED-CAPTIONS":{},"SUBTITLES":{}};var widevineUuid="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var currentTimeline=0;_this.manifest={allowCache:true,discontinuityStarts:[],segments:[]};var lastByterangeEnd=0;var lastPartByterangeEnd=0;_this.on("end",function(){if(currentUri.uri||!currentUri.parts&&!currentUri.preloadHints){return;}
if(!currentUri.map&&currentMap){currentUri.map=currentMap;}
if(!currentUri.key&&_key){currentUri.key=_key;}
if(!currentUri.timeline&&typeof currentTimeline==="number"){currentUri.timeline=currentTimeline;}
_this.manifest.preloadSegment=currentUri;});_this.parseStream.on("data",function(entry){var mediaGroup;var rendition;({tag:function tag(){({version:function version2(){if(entry.version){this.manifest.version=entry.version;}},"allow-cache":function allowCache(){this.manifest.allowCache=entry.allowed;if(!("allowed"in entry)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true;}},byterange:function byterange(){var byterange2={};if("length"in entry){currentUri.byterange=byterange2;byterange2.length=entry.length;if(!("offset"in entry)){entry.offset=lastByterangeEnd;}}
if("offset"in entry){currentUri.byterange=byterange2;byterange2.offset=entry.offset;}
lastByterangeEnd=byterange2.offset+byterange2.length;},endlist:function endlist(){this.manifest.endList=true;},inf:function inf(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"});}
if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"});}
if(entry.duration>0){currentUri.duration=entry.duration;}
if(entry.duration===0){currentUri.duration=0.01;this.trigger("info",{message:"updating zero segment duration to a small value"});}
this.manifest.segments=uris;},key:function key(){if(!entry.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return;}
if(entry.attributes.METHOD==="NONE"){_key=null;return;}
if(!entry.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return;}
if(entry.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:entry.attributes};return;}
if(entry.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.microsoft.playready"]={uri:entry.attributes.URI};return;}
if(entry.attributes.KEYFORMAT===widevineUuid){var VALID_METHODS=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(VALID_METHODS.indexOf(entry.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return;}
if(entry.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"});}
if(entry.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return;}
if(!(entry.attributes.KEYID&&entry.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return;}
this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:entry.attributes.KEYFORMAT,keyId:entry.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array__default["default"](entry.attributes.URI.split(",")[1])};return;}
if(!entry.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"});}
_key={method:entry.attributes.METHOD||"AES-128",uri:entry.attributes.URI};if(typeof entry.attributes.IV!=="undefined"){_key.iv=entry.attributes.IV;}},"media-sequence":function mediaSequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+entry.number});return;}
this.manifest.mediaSequence=entry.number;},"discontinuity-sequence":function discontinuitySequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+entry.number});return;}
this.manifest.discontinuitySequence=entry.number;currentTimeline=entry.number;},"playlist-type":function playlistType(){if(!/VOD|EVENT/.test(entry.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+entry.playlist});return;}
this.manifest.playlistType=entry.playlistType;},map:function map(){currentMap={};if(entry.uri){currentMap.uri=entry.uri;}
if(entry.byterange){currentMap.byterange=entry.byterange;}
if(_key){currentMap.key=_key;}},"stream-inf":function streamInf(){this.manifest.playlists=uris;this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!entry.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return;}
if(!currentUri.attributes){currentUri.attributes={};}
_extends__default["default"](currentUri.attributes,entry.attributes);},media:function media(){this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!(entry.attributes&&entry.attributes.TYPE&&entry.attributes["GROUP-ID"]&&entry.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return;}
var mediaGroupType=this.manifest.mediaGroups[entry.attributes.TYPE];mediaGroupType[entry.attributes["GROUP-ID"]]=mediaGroupType[entry.attributes["GROUP-ID"]]||{};mediaGroup=mediaGroupType[entry.attributes["GROUP-ID"]];rendition={default:/yes/i.test(entry.attributes.DEFAULT)};if(rendition.default){rendition.autoselect=true;}else{rendition.autoselect=/yes/i.test(entry.attributes.AUTOSELECT);}
if(entry.attributes.LANGUAGE){rendition.language=entry.attributes.LANGUAGE;}
if(entry.attributes.URI){rendition.uri=entry.attributes.URI;}
if(entry.attributes["INSTREAM-ID"]){rendition.instreamId=entry.attributes["INSTREAM-ID"];}
if(entry.attributes.CHARACTERISTICS){rendition.characteristics=entry.attributes.CHARACTERISTICS;}
if(entry.attributes.FORCED){rendition.forced=/yes/i.test(entry.attributes.FORCED);}
mediaGroup[entry.attributes.NAME]=rendition;},discontinuity:function discontinuity(){currentTimeline+=1;currentUri.discontinuity=true;this.manifest.discontinuityStarts.push(uris.length);},"program-date-time":function programDateTime(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=entry.dateTimeString;this.manifest.dateTimeObject=entry.dateTimeObject;}
currentUri.dateTimeString=entry.dateTimeString;currentUri.dateTimeObject=entry.dateTimeObject;},targetduration:function targetduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+entry.duration});return;}
this.manifest.targetDuration=entry.duration;setHoldBack.call(this,this.manifest);},start:function start3(){if(!entry.attributes||isNaN(entry.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return;}
this.manifest.start={timeOffset:entry.attributes["TIME-OFFSET"],precise:entry.attributes.PRECISE};},"cue-out":function cueOut(){currentUri.cueOut=entry.data;},"cue-out-cont":function cueOutCont(){currentUri.cueOutCont=entry.data;},"cue-in":function cueIn(){currentUri.cueIn=entry.data;},"skip":function skip(){this.manifest.skip=camelCaseKeys(entry.attributes);this.warnOnMissingAttributes_("#EXT-X-SKIP",entry.attributes,["SKIPPED-SEGMENTS"]);},"part":function part(){var _this2=this;hasParts=true;var segmentIndex=this.manifest.segments.length;var part2=camelCaseKeys(entry.attributes);currentUri.parts=currentUri.parts||[];currentUri.parts.push(part2);if(part2.byterange){if(!part2.byterange.hasOwnProperty("offset")){part2.byterange.offset=lastPartByterangeEnd;}
lastPartByterangeEnd=part2.byterange.offset+part2.byterange.length;}
var partIndex=currentUri.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+partIndex+" for segment #"+segmentIndex,entry.attributes,["URI","DURATION"]);if(this.manifest.renditionReports){this.manifest.renditionReports.forEach(function(r2,i2){if(!r2.hasOwnProperty("lastPart")){_this2.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i2+" lacks required attribute(s): LAST-PART"});}});}},"server-control":function serverControl(){var attrs=this.manifest.serverControl=camelCaseKeys(entry.attributes);if(!attrs.hasOwnProperty("canBlockReload")){attrs.canBlockReload=false;this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"});}
setHoldBack.call(this,this.manifest);if(attrs.canSkipDateranges&&!attrs.hasOwnProperty("canSkipUntil")){this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"});}},"preload-hint":function preloadHint(){var segmentIndex=this.manifest.segments.length;var hint=camelCaseKeys(entry.attributes);var isPart=hint.type&&hint.type==="PART";currentUri.preloadHints=currentUri.preloadHints||[];currentUri.preloadHints.push(hint);if(hint.byterange){if(!hint.byterange.hasOwnProperty("offset")){hint.byterange.offset=isPart?lastPartByterangeEnd:0;if(isPart){lastPartByterangeEnd=hint.byterange.offset+hint.byterange.length;}}}
var index=currentUri.preloadHints.length-1;this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+index+" for segment #"+segmentIndex,entry.attributes,["TYPE","URI"]);if(!hint.type){return;}
for(var i2=0;i2<currentUri.preloadHints.length-1;i2++){var otherHint=currentUri.preloadHints[i2];if(!otherHint.type){continue;}
if(otherHint.type===hint.type){this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+index+" for segment #"+segmentIndex+" has the same TYPE "+hint.type+" as preload hint #"+i2});}}},"rendition-report":function renditionReport(){var report=camelCaseKeys(entry.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(report);var index=this.manifest.renditionReports.length-1;var required=["LAST-MSN","URI"];if(hasParts){required.push("LAST-PART");}
this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+index,entry.attributes,required);},"part-inf":function partInf(){this.manifest.partInf=camelCaseKeys(entry.attributes);this.warnOnMissingAttributes_("#EXT-X-PART-INF",entry.attributes,["PART-TARGET"]);if(this.manifest.partInf.partTarget){this.manifest.partTargetDuration=this.manifest.partInf.partTarget;}
setHoldBack.call(this,this.manifest);}}[entry.tagType]||noop).call(self2);},uri:function uri(){currentUri.uri=entry.uri;uris.push(currentUri);if(this.manifest.targetDuration&&!("duration"in currentUri)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});currentUri.duration=this.manifest.targetDuration;}
if(_key){currentUri.key=_key;}
currentUri.timeline=currentTimeline;if(currentMap){currentUri.map=currentMap;}
lastPartByterangeEnd=0;currentUri={};},comment:function comment(){},custom:function custom(){if(entry.segment){currentUri.custom=currentUri.custom||{};currentUri.custom[entry.customType]=entry.data;}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[entry.customType]=entry.data;}}})[entry.type].call(self2);});return _this;}
var _proto=Parser2.prototype;_proto.warnOnMissingAttributes_=function warnOnMissingAttributes_(identifier,attributes,required){var missing=[];required.forEach(function(key){if(!attributes.hasOwnProperty(key)){missing.push(key);}});if(missing.length){this.trigger("warn",{message:identifier+" lacks required attribute(s): "+missing.join(", ")});}};_proto.push=function push(chunk){this.lineStream.push(chunk);};_proto.end=function end(){this.lineStream.push("\n");this.trigger("end");};_proto.addParser=function addParser(options){this.parseStream.addParser(options);};_proto.addTagMapper=function addTagMapper(options){this.parseStream.addTagMapper(options);};return Parser2;}(Stream__default["default"]);exports.LineStream=LineStream;exports.ParseStream=ParseStream;exports.Parser=Parser;}});var require_codecs=__commonJS({"node_modules/@videojs/vhs-utils/cjs/codecs.js"(exports){"use strict";var _interopRequireDefault=require_interopRequireDefault();Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_VIDEO_CODEC=exports.DEFAULT_AUDIO_CODEC=exports.muxerSupportsCodec=exports.browserSupportsCodec=exports.getMimeForCodec=exports.isTextCodec=exports.isAudioCodec=exports.isVideoCodec=exports.codecsFromDefault=exports.parseCodecs=exports.mapLegacyAvcCodecs=exports.translateLegacyCodecs=exports.translateLegacyCodec=void 0;var _window=_interopRequireDefault(require_window());var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/};var mediaTypes=["video","audio","text"];var upperMediaTypes=["Video","Audio","Text"];var translateLegacyCodec=function translateLegacyCodec2(codec){if(!codec){return codec;}
return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=("00"+Number(profile).toString(16)).slice(-2);var avcLevelHex=("00"+Number(avcLevel).toString(16)).slice(-2);return "avc1."+profileHex+"00"+avcLevelHex;});};exports.translateLegacyCodec=translateLegacyCodec;var translateLegacyCodecs=function translateLegacyCodecs2(codecs){return codecs.map(translateLegacyCodec);};exports.translateLegacyCodecs=translateLegacyCodecs;var mapLegacyAvcCodecs=function mapLegacyAvcCodecs2(codecString){return codecString.replace(/avc1\.(\d+)\.(\d+)/i,function(match){return translateLegacyCodecs([match])[0];});};exports.mapLegacyAvcCodecs=mapLegacyAvcCodecs;var parseCodecs=function parseCodecs2(codecString){if(codecString===void 0){codecString="";}
var codecs=codecString.split(",");var result=[];codecs.forEach(function(codec){codec=codec.trim();var codecType;mediaTypes.forEach(function(name){var match=regexs[name].exec(codec.toLowerCase());if(!match||match.length<=1){return;}
codecType=name;var type=codec.substring(0,match[1].length);var details=codec.replace(type,"");result.push({type,details,mediaType:name});});if(!codecType){result.push({type:codec,details:"",mediaType:"unknown"});}});return result;};exports.parseCodecs=parseCodecs;var codecsFromDefault=function codecsFromDefault2(master,audioGroupId){if(!master.mediaGroups.AUDIO||!audioGroupId){return null;}
var audioGroup=master.mediaGroups.AUDIO[audioGroupId];if(!audioGroup){return null;}
for(var name in audioGroup){var audioType=audioGroup[name];if(audioType.default&&audioType.playlists){return parseCodecs(audioType.playlists[0].attributes.CODECS);}}
return null;};exports.codecsFromDefault=codecsFromDefault;var isVideoCodec=function isVideoCodec2(codec){if(codec===void 0){codec="";}
return regexs.video.test(codec.trim().toLowerCase());};exports.isVideoCodec=isVideoCodec;var isAudioCodec=function isAudioCodec2(codec){if(codec===void 0){codec="";}
return regexs.audio.test(codec.trim().toLowerCase());};exports.isAudioCodec=isAudioCodec;var isTextCodec=function isTextCodec2(codec){if(codec===void 0){codec="";}
return regexs.text.test(codec.trim().toLowerCase());};exports.isTextCodec=isTextCodec;var getMimeForCodec=function getMimeForCodec2(codecString){if(!codecString||typeof codecString!=="string"){return;}
var codecs=codecString.toLowerCase().split(",").map(function(c2){return translateLegacyCodec(c2.trim());});var type="video";if(codecs.length===1&&isAudioCodec(codecs[0])){type="audio";}else if(codecs.length===1&&isTextCodec(codecs[0])){type="application";}
var container="mp4";if(codecs.every(function(c2){return regexs.mp4.test(c2);})){container="mp4";}else if(codecs.every(function(c2){return regexs.webm.test(c2);})){container="webm";}else if(codecs.every(function(c2){return regexs.ogg.test(c2);})){container="ogg";}
return type+"/"+container+';codecs="'+codecString+'"';};exports.getMimeForCodec=getMimeForCodec;var browserSupportsCodec=function browserSupportsCodec2(codecString){if(codecString===void 0){codecString="";}
return _window.default.MediaSource&&_window.default.MediaSource.isTypeSupported&&_window.default.MediaSource.isTypeSupported(getMimeForCodec(codecString))||false;};exports.browserSupportsCodec=browserSupportsCodec;var muxerSupportsCodec=function muxerSupportsCodec2(codecString){if(codecString===void 0){codecString="";}
return codecString.toLowerCase().split(",").every(function(codec){codec=codec.trim();for(var i2=0;i2<upperMediaTypes.length;i2++){var type=upperMediaTypes[i2];if(regexs["muxer"+type].test(codec)){return true;}}
return false;});};exports.muxerSupportsCodec=muxerSupportsCodec;var DEFAULT_AUDIO_CODEC="mp4a.40.2";exports.DEFAULT_AUDIO_CODEC=DEFAULT_AUDIO_CODEC;var DEFAULT_VIDEO_CODEC="avc1.4d400d";exports.DEFAULT_VIDEO_CODEC=DEFAULT_VIDEO_CODEC;}});var require_media_types=__commonJS({"node_modules/@videojs/vhs-utils/cjs/media-types.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.simpleTypeFromSourceType=void 0;var MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;var DASH_REGEX=/^application\/dash\+xml/i;var simpleTypeFromSourceType=function simpleTypeFromSourceType2(type){if(MPEGURL_REGEX.test(type)){return "hls";}
if(DASH_REGEX.test(type)){return "dash";}
if(type==="application/vnd.videojs.vhs+json"){return "vhs-json";}
return null;};exports.simpleTypeFromSourceType=simpleTypeFromSourceType;}});var require_byte_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/byte-helpers.js"(exports){"use strict";var _interopRequireDefault=require_interopRequireDefault();Object.defineProperty(exports,"__esModule",{value:true});exports.reverseBytes=exports.sliceBytes=exports.bytesMatch=exports.concatTypedArrays=exports.stringToBytes=exports.bytesToString=exports.numberToBytes=exports.bytesToNumber=exports.IS_LITTLE_ENDIAN=exports.IS_BIG_ENDIAN=exports.ENDIANNESS=exports.toBinaryString=exports.toHexString=exports.toUint8=exports.isTypedArray=exports.isArrayBufferView=exports.padStart=exports.countBytes=exports.countBits=void 0;var _window=_interopRequireDefault(require_window());var repeat=function repeat2(str,len){var acc="";while(len--){acc+=str;}
return acc;};var countBits=function countBits2(x2){return x2.toString(2).length;};exports.countBits=countBits;var countBytes=function countBytes2(x2){return Math.ceil(countBits(x2)/8);};exports.countBytes=countBytes;var padStart=function padStart2(b2,len,str){if(str===void 0){str=" ";}
return(repeat(str,len)+b2.toString()).slice(-len);};exports.padStart=padStart;var isArrayBufferView=function isArrayBufferView2(obj){if(ArrayBuffer.isView==="function"){return ArrayBuffer.isView(obj);}
return obj&&obj.buffer instanceof ArrayBuffer;};exports.isArrayBufferView=isArrayBufferView;var isTypedArray=function isTypedArray2(obj){return isArrayBufferView(obj);};exports.isTypedArray=isTypedArray;var toUint8=function toUint82(bytes){if(bytes instanceof Uint8Array){return bytes;}
if(!Array.isArray(bytes)&&!isTypedArray(bytes)&&!(bytes instanceof ArrayBuffer)){if(typeof bytes!=="number"||typeof bytes==="number"&&bytes!==bytes){bytes=0;}else{bytes=[bytes];}}
return new Uint8Array(bytes&&bytes.buffer||bytes,bytes&&bytes.byteOffset||0,bytes&&bytes.byteLength||0);};exports.toUint8=toUint8;var toHexString=function toHexString2(bytes){bytes=toUint8(bytes);var str="";for(var i2=0;i2<bytes.length;i2++){str+=padStart(bytes[i2].toString(16),2,"0");}
return str;};exports.toHexString=toHexString;var toBinaryString=function toBinaryString2(bytes){bytes=toUint8(bytes);var str="";for(var i2=0;i2<bytes.length;i2++){str+=padStart(bytes[i2].toString(2),8,"0");}
return str;};exports.toBinaryString=toBinaryString;var BigInt=_window.default.BigInt||Number;var BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];var ENDIANNESS=function(){var a2=new Uint16Array([65484]);var b2=new Uint8Array(a2.buffer,a2.byteOffset,a2.byteLength);if(b2[0]===255){return "big";}
if(b2[0]===204){return "little";}
return "unknown";}();exports.ENDIANNESS=ENDIANNESS;var IS_BIG_ENDIAN=ENDIANNESS==="big";exports.IS_BIG_ENDIAN=IS_BIG_ENDIAN;var IS_LITTLE_ENDIAN=ENDIANNESS==="little";exports.IS_LITTLE_ENDIAN=IS_LITTLE_ENDIAN;var bytesToNumber=function bytesToNumber2(bytes,_temp){var _ref=_temp===void 0?{}:_temp,_ref$signed=_ref.signed,signed=_ref$signed===void 0?false:_ref$signed,_ref$le=_ref.le,le2=_ref$le===void 0?false:_ref$le;bytes=toUint8(bytes);var fn2=le2?"reduce":"reduceRight";var obj=bytes[fn2]?bytes[fn2]:Array.prototype[fn2];var number=obj.call(bytes,function(total,byte,i2){var exponent=le2?i2:Math.abs(i2+1-bytes.length);return total+BigInt(byte)*BYTE_TABLE[exponent];},BigInt(0));if(signed){var max=BYTE_TABLE[bytes.length]/BigInt(2)-BigInt(1);number=BigInt(number);if(number>max){number-=max;number-=max;number-=BigInt(2);}}
return Number(number);};exports.bytesToNumber=bytesToNumber;var numberToBytes=function numberToBytes2(number,_temp2){var _ref2=_temp2===void 0?{}:_temp2,_ref2$le=_ref2.le,le2=_ref2$le===void 0?false:_ref2$le;if(typeof number!=="bigint"&&typeof number!=="number"||typeof number==="number"&&number!==number){number=0;}
number=BigInt(number);var byteCount=countBytes(number);var bytes=new Uint8Array(new ArrayBuffer(byteCount));for(var i2=0;i2<byteCount;i2++){var byteIndex=le2?i2:Math.abs(i2+1-bytes.length);bytes[byteIndex]=Number(number/BYTE_TABLE[i2]&BigInt(255));if(number<0){bytes[byteIndex]=Math.abs(~bytes[byteIndex]);bytes[byteIndex]-=i2===0?1:2;}}
return bytes;};exports.numberToBytes=numberToBytes;var bytesToString=function bytesToString2(bytes){if(!bytes){return "";}
bytes=Array.prototype.slice.call(bytes);var string=String.fromCharCode.apply(null,toUint8(bytes));try{return decodeURIComponent(escape(string));}catch(e2){}
return string;};exports.bytesToString=bytesToString;var stringToBytes=function stringToBytes2(string,stringIsBytes){if(typeof string!=="string"&&string&&typeof string.toString==="function"){string=string.toString();}
if(typeof string!=="string"){return new Uint8Array();}
if(!stringIsBytes){string=unescape(encodeURIComponent(string));}
var view=new Uint8Array(string.length);for(var i2=0;i2<string.length;i2++){view[i2]=string.charCodeAt(i2);}
return view;};exports.stringToBytes=stringToBytes;var concatTypedArrays=function concatTypedArrays2(){for(var _len=arguments.length,buffers=new Array(_len),_key=0;_key<_len;_key++){buffers[_key]=arguments[_key];}
buffers=buffers.filter(function(b2){return b2&&(b2.byteLength||b2.length)&&typeof b2!=="string";});if(buffers.length<=1){return toUint8(buffers[0]);}
var totalLen=buffers.reduce(function(total,buf,i2){return total+(buf.byteLength||buf.length);},0);var tempBuffer=new Uint8Array(totalLen);var offset=0;buffers.forEach(function(buf){buf=toUint8(buf);tempBuffer.set(buf,offset);offset+=buf.byteLength;});return tempBuffer;};exports.concatTypedArrays=concatTypedArrays;var bytesMatch=function bytesMatch2(a2,b2,_temp3){var _ref3=_temp3===void 0?{}:_temp3,_ref3$offset=_ref3.offset,offset=_ref3$offset===void 0?0:_ref3$offset,_ref3$mask=_ref3.mask,mask=_ref3$mask===void 0?[]:_ref3$mask;a2=toUint8(a2);b2=toUint8(b2);var fn2=b2.every?b2.every:Array.prototype.every;return b2.length&&a2.length-offset>=b2.length&&fn2.call(b2,function(bByte,i2){var aByte=mask[i2]?mask[i2]&a2[offset+i2]:a2[offset+i2];return bByte===aByte;});};exports.bytesMatch=bytesMatch;var sliceBytes=function sliceBytes2(src,start3,end){if(Uint8Array.prototype.slice){return Uint8Array.prototype.slice.call(src,start3,end);}
return new Uint8Array(Array.prototype.slice.call(src,start3,end));};exports.sliceBytes=sliceBytes;var reverseBytes=function reverseBytes2(src){if(src.reverse){return src.reverse();}
return Array.prototype.reverse.call(src);};exports.reverseBytes=reverseBytes;}});var require_media_groups=__commonJS({"node_modules/@videojs/vhs-utils/cjs/media-groups.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forEachMediaGroup=void 0;var forEachMediaGroup=function forEachMediaGroup2(master,groups,callback){groups.forEach(function(mediaType){for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback(mediaProperties,mediaType,groupKey,labelKey);}}});};exports.forEachMediaGroup=forEachMediaGroup;}});var require_conventions=__commonJS({"node_modules/@xmldom/xmldom/lib/conventions.js"(exports){"use strict";function find(list,predicate,ac){if(ac===void 0){ac=Array.prototype;}
if(list&&typeof ac.find==="function"){return ac.find.call(list,predicate);}
for(var i2=0;i2<list.length;i2++){if(Object.prototype.hasOwnProperty.call(list,i2)){var item=list[i2];if(predicate.call(void 0,item,i2,list)){return item;}}}}
function freeze(object,oc){if(oc===void 0){oc=Object;}
return oc&&typeof oc.freeze==="function"?oc.freeze(object):object;}
function assign(target,source){if(target===null||typeof target!=="object"){throw new TypeError("target is not an object");}
for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}
return target;}
var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(value){return value===MIME_TYPE.HTML;},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"});var NAMESPACE=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(uri){return uri===NAMESPACE.HTML;},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});exports.assign=assign;exports.find=find;exports.freeze=freeze;exports.MIME_TYPE=MIME_TYPE;exports.NAMESPACE=NAMESPACE;}});var require_dom=__commonJS({"node_modules/@xmldom/xmldom/lib/dom.js"(exports){var conventions=require_conventions();var find=conventions.find;var NAMESPACE=conventions.NAMESPACE;function notEmptyString(input){return input!=="";}
function splitOnASCIIWhitespace(input){return input?input.split(/[\t\n\f\r ]+/).filter(notEmptyString):[];}
function orderedSetReducer(current,element){if(!current.hasOwnProperty(element)){current[element]=true;}
return current;}
function toOrderedSet(input){if(!input)
return[];var list=splitOnASCIIWhitespace(input);return Object.keys(list.reduce(orderedSetReducer,{}));}
function arrayIncludes(list){return function(element){return list&&list.indexOf(element)!==-1;};}
function copy(src,dest){for(var p2 in src){if(Object.prototype.hasOwnProperty.call(src,p2)){dest[p2]=src[p2];}}}
function _extends(Class,Super){var pt2=Class.prototype;if(!(pt2 instanceof Super)){let t3=function(){};var t2=t3;;t3.prototype=Super.prototype;t3=new t3();copy(pt2,t3);Class.prototype=pt2=t3;}
if(pt2.constructor!=Class){if(typeof Class!="function"){console.error("unknown Class:"+Class);}
pt2.constructor=Class;}}
var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException2(code,message){if(message instanceof Error){var error2=message;}else{error2=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)
Error.captureStackTrace(this,DOMException2);}
error2.code=code;if(message)
this.message=this.message+": "+message;return error2;}
DOMException2.prototype=Error.prototype;copy(ExceptionCode,DOMException2);function NodeList2(){}
NodeList2.prototype={length:0,item:function(index){return this[index]||null;},toString:function(isHTML2,nodeFilter){for(var buf=[],i2=0;i2<this.length;i2++){serializeToString(this[i2],buf,isHTML2,nodeFilter);}
return buf.join("");},filter:function(predicate){return Array.prototype.filter.call(this,predicate);},indexOf:function(item){return Array.prototype.indexOf.call(this,item);}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this);}
function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc;}}
LiveNodeList.prototype.item=function(i2){_updateLiveList(this);return this[i2];};_extends(LiveNodeList,NodeList2);function NamedNodeMap(){}
function _findNodeIndex(list,node){var i2=list.length;while(i2--){if(list[i2]===node){return i2;}}}
function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr){list[_findNodeIndex(list,oldAttr)]=newAttr;}else{list[list.length++]=newAttr;}
if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr);}}}
function _removeNamedNode(el,list,attr){var i2=_findNodeIndex(list,attr);if(i2>=0){var lastIndex=list.length-1;while(i2<lastIndex){list[i2]=list[++i2];}
list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null;}}}else{throw new DOMException2(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));}}
NamedNodeMap.prototype={length:0,item:NodeList2.prototype.item,getNamedItem:function(key){var i2=this.length;while(i2--){var attr=this[i2];if(attr.nodeName==key){return attr;}}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement){throw new DOMException2(INUSE_ATTRIBUTE_ERR);}
var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr;},setNamedItemNS:function(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement){throw new DOMException2(INUSE_ATTRIBUTE_ERR);}
oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr;},removeNamedItem:function(key){var attr=this.getNamedItem(key);_removeNamedNode(this._ownerElement,this,attr);return attr;},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr;},getNamedItemNS:function(namespaceURI,localName){var i2=this.length;while(i2--){var node=this[i2];if(node.localName==localName&&node.namespaceURI==namespaceURI){return node;}}
return null;}};function DOMImplementation(){}
DOMImplementation.prototype={hasFeature:function(feature,version2){return true;},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document();doc.implementation=this;doc.childNodes=new NodeList2();doc.doctype=doctype||null;if(doctype){doc.appendChild(doctype);}
if(qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root);}
return doc;},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType();node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId||"";node.systemId=systemId||"";return node;}};function Node2(){}
Node2.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild);},replaceChild:function(newChild,oldChild){_insertBefore(this,newChild,oldChild,assertPreReplacementValidityInDocument);if(oldChild){this.removeChild(oldChild);}},removeChild:function(oldChild){return _removeChild(this,oldChild);},appendChild:function(newChild){return this.insertBefore(newChild,null);},hasChildNodes:function(){return this.firstChild!=null;},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep);},normalize:function(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data);}else{child.normalize();child=next;}}},isSupported:function(feature,version2){return this.ownerDocument.implementation.hasFeature(feature,version2);},hasAttributes:function(){return this.attributes.length>0;},lookupPrefix:function(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map){for(var n2 in map){if(Object.prototype.hasOwnProperty.call(map,n2)&&map[n2]===namespaceURI){return n2;}}}
el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode;}
return null;},lookupNamespaceURI:function(prefix){var el=this;while(el){var map=el._nsMap;if(map){if(Object.prototype.hasOwnProperty.call(map,prefix)){return map[prefix];}}
el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode;}
return null;},isDefaultNamespace:function(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null;}};function _xmlEncoder(c2){return c2=="<"&&"&lt;"||c2==">"&&"&gt;"||c2=="&"&&"&amp;"||c2=='"'&&"&quot;"||"&#"+c2.charCodeAt()+";";}
copy(NodeType,Node2);copy(NodeType,Node2.prototype);function _visitNode(node,callback){if(callback(node)){return true;}
if(node=node.firstChild){do{if(_visitNode(node,callback)){return true;}}while(node=node.nextSibling);}}
function Document(){this.ownerDocument=this;}
function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value;}}
function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){delete el._nsMap[newAttr.prefix?newAttr.localName:""];}}
function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild){cs[cs.length++]=newChild;}else{var child=el.firstChild;var i2=0;while(child){cs[i2++]=child;child=child.nextSibling;}
cs.length=i2;delete cs[cs.length];}}}
function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous){previous.nextSibling=next;}else{parentNode.firstChild=next;}
if(next){next.previousSibling=previous;}else{parentNode.lastChild=previous;}
child.parentNode=null;child.previousSibling=null;child.nextSibling=null;_onUpdateChild(parentNode.ownerDocument,parentNode);return child;}
function hasValidParentNodeType(node){return node&&(node.nodeType===Node2.DOCUMENT_NODE||node.nodeType===Node2.DOCUMENT_FRAGMENT_NODE||node.nodeType===Node2.ELEMENT_NODE);}
function hasInsertableNodeType(node){return node&&(isElementNode(node)||isTextNode(node)||isDocTypeNode(node)||node.nodeType===Node2.DOCUMENT_FRAGMENT_NODE||node.nodeType===Node2.COMMENT_NODE||node.nodeType===Node2.PROCESSING_INSTRUCTION_NODE);}
function isDocTypeNode(node){return node&&node.nodeType===Node2.DOCUMENT_TYPE_NODE;}
function isElementNode(node){return node&&node.nodeType===Node2.ELEMENT_NODE;}
function isTextNode(node){return node&&node.nodeType===Node2.TEXT_NODE;}
function isElementInsertionPossible(doc,child){var parentChildNodes=doc.childNodes||[];if(find(parentChildNodes,isElementNode)||isDocTypeNode(child)){return false;}
var docTypeNode=find(parentChildNodes,isDocTypeNode);return!(child&&docTypeNode&&parentChildNodes.indexOf(docTypeNode)>parentChildNodes.indexOf(child));}
function isElementReplacementPossible(doc,child){var parentChildNodes=doc.childNodes||[];function hasElementChildThatIsNotChild(node){return isElementNode(node)&&node!==child;}
if(find(parentChildNodes,hasElementChildThatIsNotChild)){return false;}
var docTypeNode=find(parentChildNodes,isDocTypeNode);return!(child&&docTypeNode&&parentChildNodes.indexOf(docTypeNode)>parentChildNodes.indexOf(child));}
function assertPreInsertionValidity1to5(parent,node,child){if(!hasValidParentNodeType(parent)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+parent.nodeType);}
if(child&&child.parentNode!==parent){throw new DOMException2(NOT_FOUND_ERR,"child not in parent");}
if(!hasInsertableNodeType(node)||isDocTypeNode(node)&&parent.nodeType!==Node2.DOCUMENT_NODE){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Unexpected node type "+node.nodeType+" for parent node type "+parent.nodeType);}}
function assertPreInsertionValidityInDocument(parent,node,child){var parentChildNodes=parent.childNodes||[];var nodeChildNodes=node.childNodes||[];if(node.nodeType===Node2.DOCUMENT_FRAGMENT_NODE){var nodeChildElements=nodeChildNodes.filter(isElementNode);if(nodeChildElements.length>1||find(nodeChildNodes,isTextNode)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");}
if(nodeChildElements.length===1&&!isElementInsertionPossible(parent,child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype");}}
if(isElementNode(node)){if(!isElementInsertionPossible(parent,child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");}}
if(isDocTypeNode(node)){if(find(parentChildNodes,isDocTypeNode)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");}
var parentElementChild=find(parentChildNodes,isElementNode);if(child&&parentChildNodes.indexOf(parentElementChild)<parentChildNodes.indexOf(child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");}
if(!child&&parentElementChild){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present");}}}
function assertPreReplacementValidityInDocument(parent,node,child){var parentChildNodes=parent.childNodes||[];var nodeChildNodes=node.childNodes||[];if(node.nodeType===Node2.DOCUMENT_FRAGMENT_NODE){var nodeChildElements=nodeChildNodes.filter(isElementNode);if(nodeChildElements.length>1||find(nodeChildNodes,isTextNode)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");}
if(nodeChildElements.length===1&&!isElementReplacementPossible(parent,child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype");}}
if(isElementNode(node)){if(!isElementReplacementPossible(parent,child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");}}
if(isDocTypeNode(node)){let hasDoctypeChildThatIsNotChild2=function(node2){return isDocTypeNode(node2)&&node2!==child;};var hasDoctypeChildThatIsNotChild=hasDoctypeChildThatIsNotChild2;if(find(parentChildNodes,hasDoctypeChildThatIsNotChild2)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");}
var parentElementChild=find(parentChildNodes,isElementNode);if(child&&parentChildNodes.indexOf(parentElementChild)<parentChildNodes.indexOf(child)){throw new DOMException2(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");}}}
function _insertBefore(parent,node,child,_inDocumentAssertion){assertPreInsertionValidity1to5(parent,node,child);if(parent.nodeType===Node2.DOCUMENT_NODE){(_inDocumentAssertion||assertPreInsertionValidityInDocument)(parent,node,child);}
var cp=node.parentNode;if(cp){cp.removeChild(node);}
if(node.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=node.firstChild;if(newFirst==null){return node;}
var newLast=node.lastChild;}else{newFirst=newLast=node;}
var pre=child?child.previousSibling:parent.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=child;if(pre){pre.nextSibling=newFirst;}else{parent.firstChild=newFirst;}
if(child==null){parent.lastChild=newLast;}else{child.previousSibling=newLast;}
do{newFirst.parentNode=parent;}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parent.ownerDocument||parent,parent);if(node.nodeType==DOCUMENT_FRAGMENT_NODE){node.firstChild=node.lastChild=null;}
return node;}
function _appendSingleChild(parentNode,newChild){if(newChild.parentNode){newChild.parentNode.removeChild(newChild);}
newChild.parentNode=parentNode;newChild.previousSibling=parentNode.lastChild;newChild.nextSibling=null;if(newChild.previousSibling){newChild.previousSibling.nextSibling=newChild;}else{parentNode.firstChild=newChild;}
parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild;}
Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=child.nextSibling;this.insertBefore(child,refChild);child=next;}
return newChild;}
_insertBefore(this,newChild,refChild);newChild.ownerDocument=this;if(this.documentElement===null&&newChild.nodeType===ELEMENT_NODE){this.documentElement=newChild;}
return newChild;},removeChild:function(oldChild){if(this.documentElement==oldChild){this.documentElement=null;}
return _removeChild(this,oldChild);},replaceChild:function(newChild,oldChild){_insertBefore(this,newChild,oldChild,assertPreReplacementValidityInDocument);newChild.ownerDocument=this;if(oldChild){this.removeChild(oldChild);}
if(isElementNode(newChild)){this.documentElement=newChild;}},importNode:function(importedNode,deep){return importNode(this,importedNode,deep);},getElementById:function(id2){var rtv=null;_visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE){if(node.getAttribute("id")==id2){rtv=node;return true;}}});return rtv;},getElementsByClassName:function(classNames){var classNamesSet=toOrderedSet(classNames);return new LiveNodeList(this,function(base){var ls=[];if(classNamesSet.length>0){_visitNode(base.documentElement,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE){var nodeClassNames=node.getAttribute("class");if(nodeClassNames){var matches=classNames===nodeClassNames;if(!matches){var nodeClassNamesSet=toOrderedSet(nodeClassNames);matches=classNamesSet.every(arrayIncludes(nodeClassNamesSet));}
if(matches){ls.push(node);}}}});}
return ls;});},createElement:function(tagName){var node=new Element2();node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.localName=tagName;node.childNodes=new NodeList2();var attrs=node.attributes=new NamedNodeMap();attrs._ownerElement=node;return node;},createDocumentFragment:function(){var node=new DocumentFragment();node.ownerDocument=this;node.childNodes=new NodeList2();return node;},createTextNode:function(data){var node=new Text();node.ownerDocument=this;node.appendData(data);return node;},createComment:function(data){var node=new Comment();node.ownerDocument=this;node.appendData(data);return node;},createCDATASection:function(data){var node=new CDATASection();node.ownerDocument=this;node.appendData(data);return node;},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction();node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=data;return node;},createAttribute:function(name){var node=new Attr();node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node;},createEntityReference:function(name){var node=new EntityReference();node.ownerDocument=this;node.nodeName=name;return node;},createElementNS:function(namespaceURI,qualifiedName){var node=new Element2();var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap();node.childNodes=new NodeList2();node.ownerDocument=this;node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1];}else{node.localName=qualifiedName;}
attrs._ownerElement=node;return node;},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr();var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1];}else{node.localName=qualifiedName;}
return node;}};_extends(Document,Node2);function Element2(){this._nsMap={};}
Element2.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return this.getAttributeNode(name)!=null;},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||"";},getAttributeNode:function(name){return this.attributes.getNamedItem(name);},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr);},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr);},appendChild:function(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){return this.insertBefore(newChild,null);}else{return _appendSingleChild(this,newChild);}},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr);},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr);},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName);},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old);},hasAttributeNS:function(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null;},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||"";},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr);},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName);},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName)){ls.push(node);}});return ls;});},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&(namespaceURI==="*"||node.namespaceURI===namespaceURI)&&(localName==="*"||node.localName==localName)){ls.push(node);}});return ls;});}};Document.prototype.getElementsByTagName=Element2.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element2.prototype.getElementsByTagNameNS;_extends(Element2,Node2);function Attr(){}
Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node2);function CharacterData(){}
CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count);},appendData:function(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length;},insertData:function(offset,text){this.replaceData(offset,0,text);},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);},deleteData:function(offset,count){this.replaceData(offset,count,"");},replaceData:function(offset,count,text){var start3=this.data.substring(0,offset);var end=this.data.substring(offset+count);text=start3+text+end;this.nodeValue=this.data=text;this.length=text.length;}};_extends(CharacterData,Node2);function Text(){}
Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode){this.parentNode.insertBefore(newNode,this.nextSibling);}
return newNode;}};_extends(Text,CharacterData);function Comment(){}
Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}
CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}
DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node2);function Notation(){}
Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node2);function Entity(){}
Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node2);function EntityReference(){}
EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node2);function DocumentFragment(){}
DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node2);function ProcessingInstruction(){}
ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node2);function XMLSerializer(){}
XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter);};Node2.prototype.toString=nodeSerializeToString;function nodeSerializeToString(isHtml,nodeFilter){var buf=[];var refNode=this.nodeType==9&&this.documentElement||this;var prefix=refNode.prefix;var uri=refNode.namespaceURI;if(uri&&prefix==null){var prefix=refNode.lookupPrefix(uri);if(prefix==null){var visibleNamespaces=[{namespace:uri,prefix:null}];}}
serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);return buf.join("");}
function needNamespaceDefine(node,isHTML2,visibleNamespaces){var prefix=node.prefix||"";var uri=node.namespaceURI;if(!uri){return false;}
if(prefix==="xml"&&uri===NAMESPACE.XML||uri===NAMESPACE.XMLNS){return false;}
var i2=visibleNamespaces.length;while(i2--){var ns=visibleNamespaces[i2];if(ns.prefix===prefix){return ns.namespace!==uri;}}
return true;}
function addSerializedAttribute(buf,qualifiedName,value){buf.push(" ",qualifiedName,'="',value.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"');}
function serializeToString(node,buf,isHTML2,nodeFilter,visibleNamespaces){if(!visibleNamespaces){visibleNamespaces=[];}
if(nodeFilter){node=nodeFilter(node);if(node){if(typeof node=="string"){buf.push(node);return;}}else{return;}}
switch(node.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;isHTML2=NAMESPACE.isHTML(node.namespaceURI)||isHTML2;var prefixedNodeName=nodeName;if(!isHTML2&&!node.prefix&&node.namespaceURI){var defaultNS;for(var ai2=0;ai2<attrs.length;ai2++){if(attrs.item(ai2).name==="xmlns"){defaultNS=attrs.item(ai2).value;break;}}
if(!defaultNS){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.prefix===""&&namespace.namespace===node.namespaceURI){defaultNS=namespace.namespace;break;}}}
if(defaultNS!==node.namespaceURI){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.namespace===node.namespaceURI){if(namespace.prefix){prefixedNodeName=namespace.prefix+":"+nodeName;}
break;}}}}
buf.push("<",prefixedNodeName);for(var i2=0;i2<len;i2++){var attr=attrs.item(i2);if(attr.prefix=="xmlns"){visibleNamespaces.push({prefix:attr.localName,namespace:attr.value});}else if(attr.nodeName=="xmlns"){visibleNamespaces.push({prefix:"",namespace:attr.value});}}
for(var i2=0;i2<len;i2++){var attr=attrs.item(i2);if(needNamespaceDefine(attr,isHTML2,visibleNamespaces)){var prefix=attr.prefix||"";var uri=attr.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix,namespace:uri});}
serializeToString(attr,buf,isHTML2,nodeFilter,visibleNamespaces);}
if(nodeName===prefixedNodeName&&needNamespaceDefine(node,isHTML2,visibleNamespaces)){var prefix=node.prefix||"";var uri=node.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix,namespace:uri});}
if(child||isHTML2&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML2&&/^script$/i.test(nodeName)){while(child){if(child.data){buf.push(child.data);}else{serializeToString(child,buf,isHTML2,nodeFilter,visibleNamespaces.slice());}
child=child.nextSibling;}}else{while(child){serializeToString(child,buf,isHTML2,nodeFilter,visibleNamespaces.slice());child=child.nextSibling;}}
buf.push("</",prefixedNodeName,">");}else{buf.push("/>");}
return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf,isHTML2,nodeFilter,visibleNamespaces.slice());child=child.nextSibling;}
return;case ATTRIBUTE_NODE:return addSerializedAttribute(buf,node.name,node.value);case TEXT_NODE:return buf.push(node.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("<!--",node.data,"-->");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(" PUBLIC ",pubid);if(sysid&&sysid!="."){buf.push(" ",sysid);}
buf.push(">");}else if(sysid&&sysid!="."){buf.push(" SYSTEM ",sysid,">");}else{var sub=node.internalSubset;if(sub){buf.push(" [",sub,"]");}
buf.push(">");}
return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName);}}
function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break;}
if(!node2){node2=node.cloneNode(false);}
node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(importNode(doc,child,deep));child=child.nextSibling;}}
return node2;}
function cloneNode(doc,node,deep){var node2=new node.constructor();for(var n2 in node){if(Object.prototype.hasOwnProperty.call(node,n2)){var v2=node[n2];if(typeof v2!="object"){if(v2!=node2[n2]){node2[n2]=v2;}}}}
if(node.childNodes){node2.childNodes=new NodeList2();}
node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap();var len=attrs.length;attrs2._ownerElement=node2;for(var i2=0;i2<len;i2++){node2.setAttributeNode(cloneNode(doc,attrs.item(i2),true));}
break;;case ATTRIBUTE_NODE:deep=true;}
if(deep){var child=node.firstChild;while(child){node2.appendChild(cloneNode(doc,child,deep));child=child.nextSibling;}}
return node2;}
function __set__(object,key,value){object[key]=value;}
try{if(Object.defineProperty){let getTextContent2=function(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8){buf.push(getTextContent2(node));}
node=node.nextSibling;}
return buf.join("");default:return node.nodeValue;}};getTextContent=getTextContent2;Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){_updateLiveList(this);return this.$$length;}});Object.defineProperty(Node2.prototype,"textContent",{get:function(){return getTextContent2(this);},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:while(this.firstChild){this.removeChild(this.firstChild);}
if(data||String(data)){this.appendChild(this.ownerDocument.createTextNode(data));}
break;default:this.data=data;this.value=data;this.nodeValue=data;}}});__set__=function(object,key,value){object["$$"+key]=value;};}}catch(e2){}
var getTextContent;exports.DocumentType=DocumentType;exports.DOMException=DOMException2;exports.DOMImplementation=DOMImplementation;exports.Element=Element2;exports.Node=Node2;exports.NodeList=NodeList2;exports.XMLSerializer=XMLSerializer;}});var require_entities=__commonJS({"node_modules/@xmldom/xmldom/lib/entities.js"(exports){"use strict";var freeze=require_conventions().freeze;exports.XML_ENTITIES=freeze({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});exports.HTML_ENTITIES=freeze({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",c
Error.captureStackTrace(this,ParseError);}
ParseError.prototype=new Error();ParseError.prototype.name=ParseError.name;function XMLReader(){}
XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy(defaultNSMap,defaultNSMap={});parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument();}};function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2);}else{return String.fromCharCode(code);}}
function entityReplacer(a3){var k2=a3.slice(1,-1);if(Object.hasOwnProperty.call(entityMap,k2)){return entityMap[k2];}else if(k2.charAt(0)==="#"){return fixedFromCharCode(parseInt(k2.substr(1).replace("x","0x")));}else{errorHandler.error("entity not found:"+a3);return a3;}}
function appendText(end2){if(end2>start3){var xt2=source.substring(start3,end2).replace(/&#?\w+;/g,entityReplacer);locator&&position(start3);domBuilder.characters(xt2,0,end2-start3);start3=end2;}}
function position(p2,m2){while(p2>=lineEnd&&(m2=linePattern.exec(source))){lineStart=m2.index;lineEnd=lineStart+m2[0].length;locator.lineNumber++;}
locator.columnNumber=p2-lineStart+1;}
var lineStart=0;var lineEnd=0;var linePattern=/.*(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start3=0;while(true){try{var tagStart=source.indexOf("<",start3);if(tagStart<0){if(!source.substr(start3).match(/^\s*$/)){var doc=domBuilder.doc;var text=doc.createTextNode(source.substr(start3));doc.appendChild(text);domBuilder.currentElement=text;}
return;}
if(tagStart>start3){appendText(tagStart);}
switch(source.charAt(tagStart+1)){case "/":var end=source.indexOf(">",tagStart+3);var tagName=source.substring(tagStart+2,end).replace(/[ \t\n\r]+$/g,"");var config=parseStack.pop();if(end<0){tagName=source.substring(tagStart+2).replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName);end=tagStart+1+tagName.length;}else if(tagName.match(/\s</)){tagName=tagName.replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" maybe not complete");end=tagStart+1+tagName.length;}
var localNSMap=config.localNSMap;var endMatch=config.tagName==tagName;var endIgnoreCaseMach=endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){domBuilder.endElement(config.uri,config.localName,tagName);if(localNSMap){for(var prefix in localNSMap){if(Object.prototype.hasOwnProperty.call(localNSMap,prefix)){domBuilder.endPrefixMapping(prefix);}}}
if(!endMatch){errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName);}}else{parseStack.push(config);}
end++;break;case "?":locator&&position(tagStart);end=parseInstruction(source,tagStart,domBuilder);break;case "!":locator&&position(tagStart);end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes();var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);var len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp){errorHandler.warning("unclosed xml attribute");}}
if(locator&&len){var locator2=copyLocator(locator,{});for(var i2=0;i2<len;i2++){var a2=el[i2];position(a2.offset);a2.locator=copyLocator(locator,{});}
domBuilder.locator=locator2;if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el);}
domBuilder.locator=locator;}else{if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el);}}
if(NAMESPACE.isHTML(el.uri)&&!el.closed){end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);}else{end++;}}}catch(e2){if(e2 instanceof ParseError){throw e2;}
errorHandler.error("element parse error: "+e2);end=-1;}
if(end>start3){start3=end;}else{appendText(Math.max(tagStart,start3)+1);}}}
function copyLocator(f2,t2){t2.lineNumber=f2.lineNumber;t2.columnNumber=f2.columnNumber;return t2;}
function parseElementStartPart(source,start3,el,currentNSMap,entityReplacer,errorHandler){function addAttribute(qname,value2,startIndex){if(el.attributeNames.hasOwnProperty(qname)){errorHandler.fatalError("Attribute "+qname+" redefined");}
el.addValue(qname,value2.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,entityReplacer),startIndex);}
var attrName;var value;var p2=++start3;var s2=S_TAG;while(true){var c2=source.charAt(p2);switch(c2){case "=":if(s2===S_ATTR){attrName=source.slice(start3,p2);s2=S_EQ;}else if(s2===S_ATTR_SPACE){s2=S_EQ;}else{throw new Error("attribute equal must after attrName");}
break;case "'":case '"':if(s2===S_EQ||s2===S_ATTR){if(s2===S_ATTR){errorHandler.warning('attribute value must after "="');attrName=source.slice(start3,p2);}
start3=p2+1;p2=source.indexOf(c2,start3);if(p2>0){value=source.slice(start3,p2);addAttribute(attrName,value,start3-1);s2=S_ATTR_END;}else{throw new Error("attribute value no end '"+c2+"' match");}}else if(s2==S_ATTR_NOQUOT_VALUE){value=source.slice(start3,p2);addAttribute(attrName,value,start3);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c2+")!!");start3=p2+1;s2=S_ATTR_END;}else{throw new Error('attribute value must after "="');}
break;case "/":switch(s2){case S_TAG:el.setTagName(source.slice(start3,p2));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s2=S_TAG_CLOSE;el.closed=true;case S_ATTR_NOQUOT_VALUE:case S_ATTR:break;case S_ATTR_SPACE:el.closed=true;break;default:throw new Error("attribute invalid close char('/')");}
break;case "":errorHandler.error("unexpected end of input");if(s2==S_TAG){el.setTagName(source.slice(start3,p2));}
return p2;case ">":switch(s2){case S_TAG:el.setTagName(source.slice(start3,p2));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start3,p2);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1);}
case S_ATTR_SPACE:if(s2===S_ATTR_SPACE){value=attrName;}
if(s2==S_ATTR_NOQUOT_VALUE){errorHandler.warning('attribute "'+value+'" missed quot(")!');addAttribute(attrName,value,start3);}else{if(!NAMESPACE.isHTML(currentNSMap[""])||!value.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!');}
addAttribute(value,value,start3);}
break;case S_EQ:throw new Error("attribute value missed!!");}
return p2;case "\x80":c2=" ";default:if(c2<=" "){switch(s2){case S_TAG:el.setTagName(source.slice(start3,p2));s2=S_TAG_SPACE;break;case S_ATTR:attrName=source.slice(start3,p2);s2=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start3,p2);errorHandler.warning('attribute "'+value+'" missed quot(")!!');addAttribute(attrName,value,start3);case S_ATTR_END:s2=S_TAG_SPACE;break;}}else{switch(s2){case S_ATTR_SPACE:var tagName=el.tagName;if(!NAMESPACE.isHTML(currentNSMap[""])||!attrName.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!');}
addAttribute(attrName,attrName,start3);start3=p2;s2=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s2=S_ATTR;start3=p2;break;case S_EQ:s2=S_ATTR_NOQUOT_VALUE;start3=p2;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to");}}}
p2++;}}
function appendElement(el,domBuilder,currentNSMap){var tagName=el.tagName;var localNSMap=null;var i2=el.length;while(i2--){var a2=el[i2];var qName=a2.qName;var value=a2.value;var nsp=qName.indexOf(":");if(nsp>0){var prefix=a2.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName;}else{localName=qName;prefix=null;nsPrefix=qName==="xmlns"&&"";}
a2.localName=localName;if(nsPrefix!==false){if(localNSMap==null){localNSMap={};_copy(currentNSMap,currentNSMap={});}
currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a2.uri=NAMESPACE.XMLNS;domBuilder.startPrefixMapping(nsPrefix,value);}}
var i2=el.length;while(i2--){a2=el[i2];var prefix=a2.prefix;if(prefix){if(prefix==="xml"){a2.uri=NAMESPACE.XML;}
if(prefix!=="xmlns"){a2.uri=currentNSMap[prefix||""];}}}
var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1);}else{prefix=null;localName=el.localName=tagName;}
var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);if(localNSMap){for(prefix in localNSMap){if(Object.prototype.hasOwnProperty.call(localNSMap,prefix)){domBuilder.endPrefixMapping(prefix);}}}}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;return true;}}
function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart;}
text=text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart;}}
return elStartEnd+1;}
function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=source.lastIndexOf("</"+tagName+">");if(pos<elStartEnd){pos=source.lastIndexOf("</"+tagName);}
closeMap[tagName]=pos;}
return pos<elStartEnd;}
function _copy(source,target){for(var n2 in source){if(Object.prototype.hasOwnProperty.call(source,n2)){target[n2]=source[n2];}}}
function parseDCC(source,start3,domBuilder,errorHandler){var next=source.charAt(start3+2);switch(next){case "-":if(source.charAt(start3+3)==="-"){var end=source.indexOf("-->",start3+4);if(end>start3){domBuilder.comment(source,start3+4,end-start3-4);return end+3;}else{errorHandler.error("Unclosed comment");return-1;}}else{return-1;}
default:if(source.substr(start3+3,6)=="CDATA["){var end=source.indexOf("]]>",start3+9);domBuilder.startCDATA();domBuilder.characters(source,start3+9,end-start3-9);domBuilder.endCDATA();return end+3;}
var matchs=split(source,start3);var len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=false;var sysid=false;if(len>3){if(/^public$/i.test(matchs[2][0])){pubid=matchs[3][0];sysid=len>4&&matchs[4][0];}else if(/^system$/i.test(matchs[2][0])){sysid=matchs[3][0];}}
var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid,sysid);domBuilder.endDTD();return lastMatch.index+lastMatch[0].length;}}
return-1;}
function parseInstruction(source,start3,domBuilder){var end=source.indexOf("?>",start3);if(end){var match=source.substring(start3,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2;}else{return-1;}}
return-1;}
function ElementAttributes(){this.attributeNames={};}
ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName)){throw new Error("invalid tagName:"+tagName);}
this.tagName=tagName;},addValue:function(qName,value,offset){if(!tagNamePattern.test(qName)){throw new Error("invalid attribute:"+qName);}
this.attributeNames[qName]=this.length;this[this.length++]={qName,value,offset};},length:0,getLocalName:function(i2){return this[i2].localName;},getLocator:function(i2){return this[i2].locator;},getQName:function(i2){return this[i2].qName;},getURI:function(i2){return this[i2].uri;},getValue:function(i2){return this[i2].value;}};function split(source,start3){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start3;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])
return buf;}}
exports.XMLReader=XMLReader;exports.ParseError=ParseError;}});var require_dom_parser=__commonJS({"node_modules/@xmldom/xmldom/lib/dom-parser.js"(exports){var conventions=require_conventions();var dom=require_dom();var entities=require_entities();var sax=require_sax();var DOMImplementation=dom.DOMImplementation;var NAMESPACE=conventions.NAMESPACE;var ParseError=sax.ParseError;var XMLReader=sax.XMLReader;function normalizeLineEndings(input){return input.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n");}
function DOMParser2(options){this.options=options||{locator:{}};}
DOMParser2.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax2=new XMLReader();var domBuilder=options.domBuilder||new DOMHandler();var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var isHTML2=/\/x?html?$/.test(mimeType);var entityMap=isHTML2?entities.HTML_ENTITIES:entities.XML_ENTITIES;if(locator){domBuilder.setDocumentLocator(locator);}
sax2.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax2.domBuilder=options.domBuilder||domBuilder;if(isHTML2){defaultNSMap[""]=NAMESPACE.HTML;}
defaultNSMap.xml=defaultNSMap.xml||NAMESPACE.XML;var normalize=options.normalizeLineEndings||normalizeLineEndings;if(source&&typeof source==="string"){sax2.parse(normalize(source),defaultNSMap,entityMap);}else{sax2.errorHandler.error("invalid doc source");}
return domBuilder.doc;};function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler){return domBuilder;}
errorImpl=domBuilder;}
var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn2=errorImpl[key];if(!fn2&&isCallback){fn2=errorImpl.length==2?function(msg){errorImpl(key,msg);}:errorImpl;}
errorHandler[key]=fn2&&function(msg){fn2("[xmldom "+key+"]	"+msg+_locator(locator));}||function(){};}
build("warning");build("error");build("fatalError");return errorHandler;}
function DOMHandler(){this.cdata=false;}
function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber;}
DOMHandler.prototype={startDocument:function(){this.doc=new DOMImplementation().createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId;}},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,el);for(var i2=0;i2<len;i2++){var namespaceURI=attrs.getURI(i2);var value=attrs.getValue(i2);var qName=attrs.getQName(i2);var attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i2),attr);attr.value=attr.nodeValue=value;el.setAttributeNode(attr);}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode;},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins);},ignorableWhitespace:function(ch,start3,length){},characters:function(chars,start3,length){chars=_toString.apply(this,arguments);if(chars){if(this.cdata){var charNode=this.doc.createCDATASection(chars);}else{var charNode=this.doc.createTextNode(chars);}
if(this.currentElement){this.currentElement.appendChild(charNode);}else if(/^\s*$/.test(chars)){this.doc.appendChild(charNode);}
this.locator&&position(this.locator,charNode);}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize();},setDocumentLocator:function(locator){if(this.locator=locator){locator.lineNumber=0;}},comment:function(chars,start3,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm);},startCDATA:function(){this.cdata=true;},endCDATA:function(){this.cdata=false;},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt2=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt2);appendElement(this,dt2);this.doc.doctype=dt2;}},warning:function(error2){console.warn("[xmldom warning]	"+error2,_locator(this.locator));},error:function(error2){console.error("[xmldom error]	"+error2,_locator(this.locator));},fatalError:function(error2){throw new ParseError(error2,this.locator);}};function _locator(l2){if(l2){return "\n@"+(l2.systemId||"")+"#[line:"+l2.lineNumber+",col:"+l2.columnNumber+"]";}}
function _toString(chars,start3,length){if(typeof chars=="string"){return chars.substr(start3,length);}else{if(chars.length>=start3+length||start3){return new java.lang.String(chars,start3,length)+"";}
return chars;}}
"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null;};});function appendElement(hander,node){if(!hander.currentElement){hander.doc.appendChild(node);}else{hander.currentElement.appendChild(node);}}
exports.__DOMHandler=DOMHandler;exports.normalizeLineEndings=normalizeLineEndings;exports.DOMParser=DOMParser2;}});var require_lib2=__commonJS({"node_modules/@xmldom/xmldom/lib/index.js"(exports){var dom=require_dom();exports.DOMImplementation=dom.DOMImplementation;exports.XMLSerializer=dom.XMLSerializer;exports.DOMParser=require_dom_parser().DOMParser;}});var require_mpd_parser_cjs=__commonJS({"node_modules/mpd-parser/dist/mpd-parser.cjs.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var resolveUrl=require_resolve_url();var window2=require_window();var mediaGroups=require_media_groups();var decodeB64ToUint8Array=require_decode_b64_to_uint8_array();var xmldom=require_lib2();function _interopDefaultLegacy(e2){return e2&&typeof e2==="object"&&"default"in e2?e2:{"default":e2};}
var resolveUrl__default=_interopDefaultLegacy(resolveUrl);var window__default=_interopDefaultLegacy(window2);var decodeB64ToUint8Array__default=_interopDefaultLegacy(decodeB64ToUint8Array);var version2="0.22.1";var isObject=function isObject2(obj){return!!obj&&typeof obj==="object";};var merge=function merge2(){for(var _len=arguments.length,objects=new Array(_len),_key=0;_key<_len;_key++){objects[_key]=arguments[_key];}
return objects.reduce(function(result,source){if(typeof source!=="object"){return result;}
Object.keys(source).forEach(function(key){if(Array.isArray(result[key])&&Array.isArray(source[key])){result[key]=result[key].concat(source[key]);}else if(isObject(result[key])&&isObject(source[key])){result[key]=merge2(result[key],source[key]);}else{result[key]=source[key];}});return result;},{});};var values=function values2(o2){return Object.keys(o2).map(function(k2){return o2[k2];});};var range=function range2(start3,end){var result=[];for(var i2=start3;i2<end;i2++){result.push(i2);}
return result;};var flatten=function flatten2(lists){return lists.reduce(function(x2,y2){return x2.concat(y2);},[]);};var from=function from2(list){if(!list.length){return[];}
var result=[];for(var i2=0;i2<list.length;i2++){result.push(list[i2]);}
return result;};var findIndexes=function findIndexes2(l2,key){return l2.reduce(function(a2,e2,i2){if(e2[key]){a2.push(i2);}
return a2;},[]);};var findIndex=function findIndex2(list,matchingFunction){for(var i2=0;i2<list.length;i2++){if(matchingFunction(list[i2])){return i2;}}
return-1;};var union=function union2(lists,keyFunction){return values(lists.reduce(function(acc,list){list.forEach(function(el){acc[keyFunction(el)]=el;});return acc;},{}));};var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var urlTypeToSegment=function urlTypeToSegment2(_ref){var _ref$baseUrl=_ref.baseUrl,baseUrl=_ref$baseUrl===void 0?"":_ref$baseUrl,_ref$source=_ref.source,source=_ref$source===void 0?"":_ref$source,_ref$range=_ref.range,range2=_ref$range===void 0?"":_ref$range,_ref$indexRange=_ref.indexRange,indexRange=_ref$indexRange===void 0?"":_ref$indexRange;var segment={uri:source,resolvedUri:resolveUrl__default["default"](baseUrl||"",source)};if(range2||indexRange){var rangeStr=range2?range2:indexRange;var ranges=rangeStr.split("-");var startRange=window__default["default"].BigInt?window__default["default"].BigInt(ranges[0]):parseInt(ranges[0],10);var endRange=window__default["default"].BigInt?window__default["default"].BigInt(ranges[1]):parseInt(ranges[1],10);if(startRange<Number.MAX_SAFE_INTEGER&&typeof startRange==="bigint"){startRange=Number(startRange);}
if(endRange<Number.MAX_SAFE_INTEGER&&typeof endRange==="bigint"){endRange=Number(endRange);}
var length;if(typeof endRange==="bigint"||typeof startRange==="bigint"){length=window__default["default"].BigInt(endRange)-window__default["default"].BigInt(startRange)+window__default["default"].BigInt(1);}else{length=endRange-startRange+1;}
if(typeof length==="bigint"&&length<Number.MAX_SAFE_INTEGER){length=Number(length);}
segment.byterange={length,offset:startRange};}
return segment;};var byteRangeToString=function byteRangeToString2(byterange){var endRange;if(typeof byterange.offset==="bigint"||typeof byterange.length==="bigint"){endRange=window__default["default"].BigInt(byterange.offset)+window__default["default"].BigInt(byterange.length)-window__default["default"].BigInt(1);}else{endRange=byterange.offset+byterange.length-1;}
return byterange.offset+"-"+endRange;};var parseEndNumber=function parseEndNumber2(endNumber){if(endNumber&&typeof endNumber!=="number"){endNumber=parseInt(endNumber,10);}
if(isNaN(endNumber)){return null;}
return endNumber;};var segmentRange={static:function _static(attributes){var duration=attributes.duration,_attributes$timescale=attributes.timescale,timescale=_attributes$timescale===void 0?1:_attributes$timescale,sourceDuration=attributes.sourceDuration,periodDuration=attributes.periodDuration;var endNumber=parseEndNumber(attributes.endNumber);var segmentDuration=duration/timescale;if(typeof endNumber==="number"){return{start:0,end:endNumber};}
if(typeof periodDuration==="number"){return{start:0,end:periodDuration/segmentDuration};}
return{start:0,end:sourceDuration/segmentDuration};},dynamic:function dynamic(attributes){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime=attributes.availabilityStartTime,_attributes$timescale2=attributes.timescale,timescale=_attributes$timescale2===void 0?1:_attributes$timescale2,duration=attributes.duration,_attributes$periodSta=attributes.periodStart,periodStart=_attributes$periodSta===void 0?0:_attributes$periodSta,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp===void 0?0:_attributes$minimumUp,_attributes$timeShift=attributes.timeShiftBufferDepth,timeShiftBufferDepth=_attributes$timeShift===void 0?Infinity:_attributes$timeShift;var endNumber=parseEndNumber(attributes.endNumber);var now2=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime+periodStart;var periodEndWC=now2+minimumUpdatePeriod;var periodDuration=periodEndWC-periodStartWC;var segmentCount=Math.ceil(periodDuration*timescale/duration);var availableStart=Math.floor((now2-periodStartWC-timeShiftBufferDepth)*timescale/duration);var availableEnd=Math.floor((now2-periodStartWC)*timescale/duration);return{start:Math.max(0,availableStart),end:typeof endNumber==="number"?endNumber:Math.min(segmentCount,availableEnd)};}};var toSegments=function toSegments2(attributes){return function(number){var duration=attributes.duration,_attributes$timescale3=attributes.timescale,timescale=_attributes$timescale3===void 0?1:_attributes$timescale3,periodStart=attributes.periodStart,_attributes$startNumb=attributes.startNumber,startNumber=_attributes$startNumb===void 0?1:_attributes$startNumb;return{number:startNumber+number,duration:duration/timescale,timeline:periodStart,time:number*duration};};};var parseByDuration=function parseByDuration2(attributes){var type=attributes.type,duration=attributes.duration,_attributes$timescale4=attributes.timescale,timescale=_attributes$timescale4===void 0?1:_attributes$timescale4,periodDuration=attributes.periodDuration,sourceDuration=attributes.sourceDuration;var _segmentRange$type=segmentRange[type](attributes),start3=_segmentRange$type.start,end=_segmentRange$type.end;var segments=range(start3,end).map(toSegments(attributes));if(type==="static"){var index=segments.length-1;var sectionDuration=typeof periodDuration==="number"?periodDuration:sourceDuration;segments[index].duration=sectionDuration-duration/timescale*index;}
return segments;};var segmentsFromBase=function segmentsFromBase2(attributes){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ,sourceDuration=attributes.sourceDuration,_attributes$indexRang=attributes.indexRange,indexRange=_attributes$indexRang===void 0?"":_attributes$indexRang,periodStart=attributes.periodStart,presentationTime=attributes.presentationTime,_attributes$number=attributes.number,number=_attributes$number===void 0?0:_attributes$number,duration=attributes.duration;if(!baseUrl){throw new Error(errors.NO_BASE_URL);}
var initSegment=urlTypeToSegment({baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl,source:baseUrl,indexRange});segment.map=initSegment;if(duration){var segmentTimeInfo=parseByDuration(attributes);if(segmentTimeInfo.length){segment.duration=segmentTimeInfo[0].duration;segment.timeline=segmentTimeInfo[0].timeline;}}else if(sourceDuration){segment.duration=sourceDuration;segment.timeline=periodStart;}
segment.presentationTime=presentationTime||periodStart;segment.number=number;return[segment];};var addSidxSegmentsToPlaylist$1=function addSidxSegmentsToPlaylist2(playlist,sidx,baseUrl){var initSegment=playlist.sidx.map?playlist.sidx.map:null;var sourceDuration=playlist.sidx.duration;var timeline=playlist.timeline||0;var sidxByteRange=playlist.sidx.byterange;var sidxEnd=sidxByteRange.offset+sidxByteRange.length;var timescale=sidx.timescale;var mediaReferences=sidx.references.filter(function(r2){return r2.referenceType!==1;});var segments=[];var type=playlist.endList?"static":"dynamic";var periodStart=playlist.sidx.timeline;var presentationTime=periodStart;var number=playlist.mediaSequence||0;var startIndex;if(typeof sidx.firstOffset==="bigint"){startIndex=window__default["default"].BigInt(sidxEnd)+sidx.firstOffset;}else{startIndex=sidxEnd+sidx.firstOffset;}
for(var i2=0;i2<mediaReferences.length;i2++){var reference=sidx.references[i2];var size=reference.referencedSize;var duration=reference.subsegmentDuration;var endIndex=void 0;if(typeof startIndex==="bigint"){endIndex=startIndex+window__default["default"].BigInt(size)-window__default["default"].BigInt(1);}else{endIndex=startIndex+size-1;}
var indexRange=startIndex+"-"+endIndex;var attributes={baseUrl,timescale,timeline,periodStart,presentationTime,number,duration,sourceDuration,indexRange,type};var segment=segmentsFromBase(attributes)[0];if(initSegment){segment.map=initSegment;}
segments.push(segment);if(typeof startIndex==="bigint"){startIndex+=window__default["default"].BigInt(size);}else{startIndex+=size;}
presentationTime+=duration/timescale;number++;}
playlist.segments=segments;return playlist;};var SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"];var TIME_FUDGE=1/60;var getUniqueTimelineStarts=function getUniqueTimelineStarts2(timelineStarts){return union(timelineStarts,function(_ref){var timeline=_ref.timeline;return timeline;}).sort(function(a2,b2){return a2.timeline>b2.timeline?1:-1;});};var findPlaylistWithName=function findPlaylistWithName2(playlists,name){for(var i2=0;i2<playlists.length;i2++){if(playlists[i2].attributes.NAME===name){return playlists[i2];}}
return null;};var getMediaGroupPlaylists=function getMediaGroupPlaylists2(manifest){var mediaGroupPlaylists=[];mediaGroups.forEachMediaGroup(manifest,SUPPORTED_MEDIA_TYPES,function(properties,type,group,label){mediaGroupPlaylists=mediaGroupPlaylists.concat(properties.playlists||[]);});return mediaGroupPlaylists;};var updateMediaSequenceForPlaylist=function updateMediaSequenceForPlaylist2(_ref2){var playlist=_ref2.playlist,mediaSequence=_ref2.mediaSequence;playlist.mediaSequence=mediaSequence;playlist.segments.forEach(function(segment,index){segment.number=playlist.mediaSequence+index;});};var updateSequenceNumbers=function updateSequenceNumbers2(_ref3){var oldPlaylists=_ref3.oldPlaylists,newPlaylists=_ref3.newPlaylists,timelineStarts=_ref3.timelineStarts;newPlaylists.forEach(function(playlist){playlist.discontinuitySequence=findIndex(timelineStarts,function(_ref4){var timeline=_ref4.timeline;return timeline===playlist.timeline;});var oldPlaylist=findPlaylistWithName(oldPlaylists,playlist.attributes.NAME);if(!oldPlaylist){return;}
if(playlist.sidx){return;}
var firstNewSegment=playlist.segments[0];var oldMatchingSegmentIndex=findIndex(oldPlaylist.segments,function(oldSegment){return Math.abs(oldSegment.presentationTime-firstNewSegment.presentationTime)<TIME_FUDGE;});if(oldMatchingSegmentIndex===-1){updateMediaSequenceForPlaylist({playlist,mediaSequence:oldPlaylist.mediaSequence+oldPlaylist.segments.length});playlist.segments[0].discontinuity=true;playlist.discontinuityStarts.unshift(0);if(!oldPlaylist.segments.length&&playlist.timeline>oldPlaylist.timeline||oldPlaylist.segments.length&&playlist.timeline>oldPlaylist.segments[oldPlaylist.segments.length-1].timeline){playlist.discontinuitySequence--;}
return;}
var oldMatchingSegment=oldPlaylist.segments[oldMatchingSegmentIndex];if(oldMatchingSegment.discontinuity&&!firstNewSegment.discontinuity){firstNewSegment.discontinuity=true;playlist.discontinuityStarts.unshift(0);playlist.discontinuitySequence--;}
updateMediaSequenceForPlaylist({playlist,mediaSequence:oldPlaylist.segments[oldMatchingSegmentIndex].number});});};var positionManifestOnTimeline=function positionManifestOnTimeline2(_ref5){var oldManifest=_ref5.oldManifest,newManifest=_ref5.newManifest;var oldPlaylists=oldManifest.playlists.concat(getMediaGroupPlaylists(oldManifest));var newPlaylists=newManifest.playlists.concat(getMediaGroupPlaylists(newManifest));newManifest.timelineStarts=getUniqueTimelineStarts([oldManifest.timelineStarts,newManifest.timelineStarts]);updateSequenceNumbers({oldPlaylists,newPlaylists,timelineStarts:newManifest.timelineStarts});return newManifest;};var generateSidxKey=function generateSidxKey2(sidx){return sidx&&sidx.uri+"-"+byteRangeToString(sidx.byterange);};var mergeDiscontiguousPlaylists=function mergeDiscontiguousPlaylists2(playlists){var mergedPlaylists=values(playlists.reduce(function(acc,playlist){var name=playlist.attributes.id+(playlist.attributes.lang||"");if(!acc[name]){acc[name]=playlist;acc[name].attributes.timelineStarts=[];}else{if(playlist.segments){var _acc$name$segments;if(playlist.segments[0]){playlist.segments[0].discontinuity=true;}
(_acc$name$segments=acc[name].segments).push.apply(_acc$name$segments,playlist.segments);}
if(playlist.attributes.contentProtection){acc[name].attributes.contentProtection=playlist.attributes.contentProtection;}}
acc[name].attributes.timelineStarts.push({start:playlist.attributes.periodStart,timeline:playlist.attributes.periodStart});return acc;},{}));return mergedPlaylists.map(function(playlist){playlist.discontinuityStarts=findIndexes(playlist.segments||[],"discontinuity");return playlist;});};var addSidxSegmentsToPlaylist=function addSidxSegmentsToPlaylist2(playlist,sidxMapping){var sidxKey=generateSidxKey(playlist.sidx);var sidxMatch=sidxKey&&sidxMapping[sidxKey]&&sidxMapping[sidxKey].sidx;if(sidxMatch){addSidxSegmentsToPlaylist$1(playlist,sidxMatch,playlist.sidx.resolvedUri);}
return playlist;};var addSidxSegmentsToPlaylists=function addSidxSegmentsToPlaylists2(playlists,sidxMapping){if(sidxMapping===void 0){sidxMapping={};}
if(!Object.keys(sidxMapping).length){return playlists;}
for(var i2 in playlists){playlists[i2]=addSidxSegmentsToPlaylist(playlists[i2],sidxMapping);}
return playlists;};var formatAudioPlaylist=function formatAudioPlaylist2(_ref,isAudioOnly){var _attributes;var attributes=_ref.attributes,segments=_ref.segments,sidx=_ref.sidx,mediaSequence=_ref.mediaSequence,discontinuitySequence=_ref.discontinuitySequence,discontinuityStarts=_ref.discontinuityStarts;var playlist={attributes:(_attributes={NAME:attributes.id,BANDWIDTH:attributes.bandwidth,CODECS:attributes.codecs},_attributes["PROGRAM-ID"]=1,_attributes),uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:"",targetDuration:attributes.duration,discontinuitySequence,discontinuityStarts,timelineStarts:attributes.timelineStarts,mediaSequence,segments};if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection;}
if(sidx){playlist.sidx=sidx;}
if(isAudioOnly){playlist.attributes.AUDIO="audio";playlist.attributes.SUBTITLES="subs";}
return playlist;};var formatVttPlaylist=function formatVttPlaylist2(_ref2){var _m3u8Attributes;var attributes=_ref2.attributes,segments=_ref2.segments,mediaSequence=_ref2.mediaSequence,discontinuityStarts=_ref2.discontinuityStarts,discontinuitySequence=_ref2.discontinuitySequence;if(typeof segments==="undefined"){segments=[{uri:attributes.baseUrl,timeline:attributes.periodStart,resolvedUri:attributes.baseUrl||"",duration:attributes.sourceDuration,number:0}];attributes.duration=attributes.sourceDuration;}
var m3u8Attributes=(_m3u8Attributes={NAME:attributes.id,BANDWIDTH:attributes.bandwidth},_m3u8Attributes["PROGRAM-ID"]=1,_m3u8Attributes);if(attributes.codecs){m3u8Attributes.CODECS=attributes.codecs;}
return{attributes:m3u8Attributes,uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:attributes.baseUrl||"",targetDuration:attributes.duration,timelineStarts:attributes.timelineStarts,discontinuityStarts,discontinuitySequence,mediaSequence,segments};};var organizeAudioPlaylists=function organizeAudioPlaylists2(playlists,sidxMapping,isAudioOnly){if(sidxMapping===void 0){sidxMapping={};}
if(isAudioOnly===void 0){isAudioOnly=false;}
var mainPlaylist;var formattedPlaylists=playlists.reduce(function(a2,playlist){var role=playlist.attributes.role&&playlist.attributes.role.value||"";var language=playlist.attributes.lang||"";var label=playlist.attributes.label||"main";if(language&&!playlist.attributes.label){var roleLabel=role?" ("+role+")":"";label=""+playlist.attributes.lang+roleLabel;}
if(!a2[label]){a2[label]={language,autoselect:true,default:role==="main",playlists:[],uri:""};}
var formatted=addSidxSegmentsToPlaylist(formatAudioPlaylist(playlist,isAudioOnly),sidxMapping);a2[label].playlists.push(formatted);if(typeof mainPlaylist==="undefined"&&role==="main"){mainPlaylist=playlist;mainPlaylist.default=true;}
return a2;},{});if(!mainPlaylist){var firstLabel=Object.keys(formattedPlaylists)[0];formattedPlaylists[firstLabel].default=true;}
return formattedPlaylists;};var organizeVttPlaylists=function organizeVttPlaylists2(playlists,sidxMapping){if(sidxMapping===void 0){sidxMapping={};}
return playlists.reduce(function(a2,playlist){var label=playlist.attributes.lang||"text";if(!a2[label]){a2[label]={language:label,default:false,autoselect:false,playlists:[],uri:""};}
a2[label].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(playlist),sidxMapping));return a2;},{});};var organizeCaptionServices=function organizeCaptionServices2(captionServices){return captionServices.reduce(function(svcObj,svc){if(!svc){return svcObj;}
svc.forEach(function(service){var channel=service.channel,language=service.language;svcObj[language]={autoselect:false,default:false,instreamId:channel,language};if(service.hasOwnProperty("aspectRatio")){svcObj[language].aspectRatio=service.aspectRatio;}
if(service.hasOwnProperty("easyReader")){svcObj[language].easyReader=service.easyReader;}
if(service.hasOwnProperty("3D")){svcObj[language]["3D"]=service["3D"];}});return svcObj;},{});};var formatVideoPlaylist=function formatVideoPlaylist2(_ref3){var _attributes2;var attributes=_ref3.attributes,segments=_ref3.segments,sidx=_ref3.sidx,discontinuityStarts=_ref3.discontinuityStarts;var playlist={attributes:(_attributes2={NAME:attributes.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:attributes.width,height:attributes.height},CODECS:attributes.codecs,BANDWIDTH:attributes.bandwidth},_attributes2["PROGRAM-ID"]=1,_attributes2),uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:"",targetDuration:attributes.duration,discontinuityStarts,timelineStarts:attributes.timelineStarts,segments};if(attributes.frameRate){playlist.attributes["FRAME-RATE"]=attributes.frameRate;}
if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection;}
if(sidx){playlist.sidx=sidx;}
return playlist;};var videoOnly=function videoOnly2(_ref4){var attributes=_ref4.attributes;return attributes.mimeType==="video/mp4"||attributes.mimeType==="video/webm"||attributes.contentType==="video";};var audioOnly=function audioOnly2(_ref5){var attributes=_ref5.attributes;return attributes.mimeType==="audio/mp4"||attributes.mimeType==="audio/webm"||attributes.contentType==="audio";};var vttOnly=function vttOnly2(_ref6){var attributes=_ref6.attributes;return attributes.mimeType==="text/vtt"||attributes.contentType==="text";};var addMediaSequenceValues=function addMediaSequenceValues2(playlists,timelineStarts){playlists.forEach(function(playlist){playlist.mediaSequence=0;playlist.discontinuitySequence=findIndex(timelineStarts,function(_ref7){var timeline=_ref7.timeline;return timeline===playlist.timeline;});if(!playlist.segments){return;}
playlist.segments.forEach(function(segment,index){segment.number=index;});});};var flattenMediaGroupPlaylists=function flattenMediaGroupPlaylists2(mediaGroupObject){if(!mediaGroupObject){return[];}
return Object.keys(mediaGroupObject).reduce(function(acc,label){var labelContents=mediaGroupObject[label];return acc.concat(labelContents.playlists);},[]);};var toM3u8=function toM3u82(_ref8){var _mediaGroups;var dashPlaylists=_ref8.dashPlaylists,locations=_ref8.locations,_ref8$sidxMapping=_ref8.sidxMapping,sidxMapping=_ref8$sidxMapping===void 0?{}:_ref8$sidxMapping,previousManifest=_ref8.previousManifest;if(!dashPlaylists.length){return{};}
var _dashPlaylists$0$attr=dashPlaylists[0].attributes,duration=_dashPlaylists$0$attr.sourceDuration,type=_dashPlaylists$0$attr.type,suggestedPresentationDelay=_dashPlaylists$0$attr.suggestedPresentationDelay,minimumUpdatePeriod=_dashPlaylists$0$attr.minimumUpdatePeriod;var videoPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);var audioPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));var vttPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(vttOnly));var captions=dashPlaylists.map(function(playlist){return playlist.attributes.captionServices;}).filter(Boolean);var manifest={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(_mediaGroups={AUDIO:{},VIDEO:{}},_mediaGroups["CLOSED-CAPTIONS"]={},_mediaGroups.SUBTITLES={},_mediaGroups),uri:"",duration,playlists:addSidxSegmentsToPlaylists(videoPlaylists,sidxMapping)};if(minimumUpdatePeriod>=0){manifest.minimumUpdatePeriod=minimumUpdatePeriod*1e3;}
if(locations){manifest.locations=locations;}
if(type==="dynamic"){manifest.suggestedPresentationDelay=suggestedPresentationDelay;}
var isAudioOnly=manifest.playlists.length===0;var organizedAudioGroup=audioPlaylists.length?organizeAudioPlaylists(audioPlaylists,sidxMapping,isAudioOnly):null;var organizedVttGroup=vttPlaylists.length?organizeVttPlaylists(vttPlaylists,sidxMapping):null;var formattedPlaylists=videoPlaylists.concat(flattenMediaGroupPlaylists(organizedAudioGroup),flattenMediaGroupPlaylists(organizedVttGroup));var playlistTimelineStarts=formattedPlaylists.map(function(_ref9){var timelineStarts=_ref9.timelineStarts;return timelineStarts;});manifest.timelineStarts=getUniqueTimelineStarts(playlistTimelineStarts);addMediaSequenceValues(formattedPlaylists,manifest.timelineStarts);if(organizedAudioGroup){manifest.mediaGroups.AUDIO.audio=organizedAudioGroup;}
if(organizedVttGroup){manifest.mediaGroups.SUBTITLES.subs=organizedVttGroup;}
if(captions.length){manifest.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(captions);}
if(previousManifest){return positionManifestOnTimeline({oldManifest:previousManifest,newManifest:manifest});}
return manifest;};var getLiveRValue=function getLiveRValue2(attributes,time,duration){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime=attributes.availabilityStartTime,_attributes$timescale=attributes.timescale,timescale=_attributes$timescale===void 0?1:_attributes$timescale,_attributes$periodSta=attributes.periodStart,periodStart=_attributes$periodSta===void 0?0:_attributes$periodSta,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp===void 0?0:_attributes$minimumUp;var now2=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime+periodStart;var periodEndWC=now2+minimumUpdatePeriod;var periodDuration=periodEndWC-periodStartWC;return Math.ceil((periodDuration*timescale-time)/duration);};var parseByTimeline=function parseByTimeline2(attributes,segmentTimeline){var type=attributes.type,_attributes$minimumUp2=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp2===void 0?0:_attributes$minimumUp2,_attributes$media=attributes.media,media=_attributes$media===void 0?"":_attributes$media,sourceDuration=attributes.sourceDuration,_attributes$timescale2=attributes.timescale,timescale=_attributes$timescale2===void 0?1:_attributes$timescale2,_attributes$startNumb=attributes.startNumber,startNumber=_attributes$startNumb===void 0?1:_attributes$startNumb,timeline=attributes.periodStart;var segments=[];var time=-1;for(var sIndex=0;sIndex<segmentTimeline.length;sIndex++){var S2=segmentTimeline[sIndex];var duration=S2.d;var repeat=S2.r||0;var segmentTime=S2.t||0;if(time<0){time=segmentTime;}
if(segmentTime&&segmentTime>time){time=segmentTime;}
var count=void 0;if(repeat<0){var nextS=sIndex+1;if(nextS===segmentTimeline.length){if(type==="dynamic"&&minimumUpdatePeriod>0&&media.indexOf("$Number$")>0){count=getLiveRValue(attributes,time,duration);}else{count=(sourceDuration*timescale-time)/duration;}}else{count=(segmentTimeline[nextS].t-time)/duration;}}else{count=repeat+1;}
var end=startNumber+segments.length+count;var number=startNumber+segments.length;while(number<end){segments.push({number,duration:duration/timescale,time,timeline});time+=duration;number++;}}
return segments;};var identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var identifierReplacement=function identifierReplacement2(values2){return function(match,identifier,format,width){if(match==="$$"){return "$";}
if(typeof values2[identifier]==="undefined"){return match;}
var value=""+values2[identifier];if(identifier==="RepresentationID"){return value;}
if(!format){width=1;}else{width=parseInt(width,10);}
if(value.length>=width){return value;}
return ""+new Array(width-value.length+1).join("0")+value;};};var constructTemplateUrl=function constructTemplateUrl2(url,values2){return url.replace(identifierPattern,identifierReplacement(values2));};var parseTemplateInfo=function parseTemplateInfo2(attributes,segmentTimeline){if(!attributes.duration&&!segmentTimeline){return[{number:attributes.startNumber||1,duration:attributes.sourceDuration,time:0,timeline:attributes.periodStart}];}
if(attributes.duration){return parseByDuration(attributes);}
return parseByTimeline(attributes,segmentTimeline);};var segmentsFromTemplate=function segmentsFromTemplate2(attributes,segmentTimeline){var templateValues={RepresentationID:attributes.id,Bandwidth:attributes.bandwidth||0};var _attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{sourceURL:"",range:""}:_attributes$initializ;var mapSegment=urlTypeToSegment({baseUrl:attributes.baseUrl,source:constructTemplateUrl(initialization.sourceURL,templateValues),range:initialization.range});var segments=parseTemplateInfo(attributes,segmentTimeline);return segments.map(function(segment){templateValues.Number=segment.number;templateValues.Time=segment.time;var uri=constructTemplateUrl(attributes.media||"",templateValues);var timescale=attributes.timescale||1;var presentationTimeOffset=attributes.presentationTimeOffset||0;var presentationTime=attributes.periodStart+(segment.time-presentationTimeOffset)/timescale;var map={uri,timeline:segment.timeline,duration:segment.duration,resolvedUri:resolveUrl__default["default"](attributes.baseUrl||"",uri),map:mapSegment,number:segment.number,presentationTime};return map;});};var SegmentURLToSegmentObject=function SegmentURLToSegmentObject2(attributes,segmentUrl){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ;var initSegment=urlTypeToSegment({baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl,source:segmentUrl.media,range:segmentUrl.mediaRange});segment.map=initSegment;return segment;};var segmentsFromList=function segmentsFromList2(attributes,segmentTimeline){var duration=attributes.duration,_attributes$segmentUr=attributes.segmentUrls,segmentUrls=_attributes$segmentUr===void 0?[]:_attributes$segmentUr,periodStart=attributes.periodStart;if(!duration&&!segmentTimeline||duration&&segmentTimeline){throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);}
var segmentUrlMap=segmentUrls.map(function(segmentUrlObject){return SegmentURLToSegmentObject(attributes,segmentUrlObject);});var segmentTimeInfo;if(duration){segmentTimeInfo=parseByDuration(attributes);}
if(segmentTimeline){segmentTimeInfo=parseByTimeline(attributes,segmentTimeline);}
var segments=segmentTimeInfo.map(function(segmentTime,index){if(segmentUrlMap[index]){var segment=segmentUrlMap[index];var timescale=attributes.timescale||1;var presentationTimeOffset=attributes.presentationTimeOffset||0;segment.timeline=segmentTime.timeline;segment.duration=segmentTime.duration;segment.number=segmentTime.number;segment.presentationTime=periodStart+(segmentTime.time-presentationTimeOffset)/timescale;return segment;}}).filter(function(segment){return segment;});return segments;};var generateSegments=function generateSegments2(_ref){var attributes=_ref.attributes,segmentInfo=_ref.segmentInfo;var segmentAttributes;var segmentsFn;if(segmentInfo.template){segmentsFn=segmentsFromTemplate;segmentAttributes=merge(attributes,segmentInfo.template);}else if(segmentInfo.base){segmentsFn=segmentsFromBase;segmentAttributes=merge(attributes,segmentInfo.base);}else if(segmentInfo.list){segmentsFn=segmentsFromList;segmentAttributes=merge(attributes,segmentInfo.list);}
var segmentsInfo={attributes};if(!segmentsFn){return segmentsInfo;}
var segments=segmentsFn(segmentAttributes,segmentInfo.segmentTimeline);if(segmentAttributes.duration){var _segmentAttributes=segmentAttributes,duration=_segmentAttributes.duration,_segmentAttributes$ti=_segmentAttributes.timescale,timescale=_segmentAttributes$ti===void 0?1:_segmentAttributes$ti;segmentAttributes.duration=duration/timescale;}else if(segments.length){segmentAttributes.duration=segments.reduce(function(max,segment){return Math.max(max,Math.ceil(segment.duration));},0);}else{segmentAttributes.duration=0;}
segmentsInfo.attributes=segmentAttributes;segmentsInfo.segments=segments;if(segmentInfo.base&&segmentAttributes.indexRange){segmentsInfo.sidx=segments[0];segmentsInfo.segments=[];}
return segmentsInfo;};var toPlaylists=function toPlaylists2(representations){return representations.map(generateSegments);};var findChildren=function findChildren2(element,name){return from(element.childNodes).filter(function(_ref){var tagName=_ref.tagName;return tagName===name;});};var getContent=function getContent2(element){return element.textContent.trim();};var parseDivisionValue=function parseDivisionValue2(value){return parseFloat(value.split("/").reduce(function(prev,current){return prev/current;}));};var parseDuration=function parseDuration2(str){var SECONDS_IN_YEAR=365*24*60*60;var SECONDS_IN_MONTH=30*24*60*60;var SECONDS_IN_DAY=24*60*60;var SECONDS_IN_HOUR=60*60;var SECONDS_IN_MIN=60;var durationRegex=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var match=durationRegex.exec(str);if(!match){return 0;}
var _match$slice=match.slice(1),year=_match$slice[0],month=_match$slice[1],day=_match$slice[2],hour=_match$slice[3],minute=_match$slice[4],second=_match$slice[5];return parseFloat(year||0)*SECONDS_IN_YEAR+parseFloat(month||0)*SECONDS_IN_MONTH+parseFloat(day||0)*SECONDS_IN_DAY+parseFloat(hour||0)*SECONDS_IN_HOUR+parseFloat(minute||0)*SECONDS_IN_MIN+parseFloat(second||0);};var parseDate=function parseDate2(str){var dateRegex=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(dateRegex.test(str)){str+="Z";}
return Date.parse(str);};var parsers={mediaPresentationDuration:function mediaPresentationDuration(value){return parseDuration(value);},availabilityStartTime:function availabilityStartTime(value){return parseDate(value)/1e3;},minimumUpdatePeriod:function minimumUpdatePeriod(value){return parseDuration(value);},suggestedPresentationDelay:function suggestedPresentationDelay(value){return parseDuration(value);},type:function type(value){return value;},timeShiftBufferDepth:function timeShiftBufferDepth(value){return parseDuration(value);},start:function start3(value){return parseDuration(value);},width:function width(value){return parseInt(value,10);},height:function height(value){return parseInt(value,10);},bandwidth:function bandwidth(value){return parseInt(value,10);},frameRate:function frameRate(value){return parseDivisionValue(value);},startNumber:function startNumber(value){return parseInt(value,10);},timescale:function timescale(value){return parseInt(value,10);},presentationTimeOffset:function presentationTimeOffset(value){return parseInt(value,10);},duration:function duration(value){var parsedValue=parseInt(value,10);if(isNaN(parsedValue)){return parseDuration(value);}
return parsedValue;},d:function d2(value){return parseInt(value,10);},t:function t2(value){return parseInt(value,10);},r:function r2(value){return parseInt(value,10);},DEFAULT:function DEFAULT(value){return value;}};var parseAttributes=function parseAttributes2(el){if(!(el&&el.attributes)){return{};}
return from(el.attributes).reduce(function(a2,e2){var parseFn=parsers[e2.name]||parsers.DEFAULT;a2[e2.name]=parseFn(e2.value);return a2;},{});};var keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var buildBaseUrls=function buildBaseUrls2(referenceUrls,baseUrlElements){if(!baseUrlElements.length){return referenceUrls;}
return flatten(referenceUrls.map(function(reference){return baseUrlElements.map(function(baseUrlElement){return resolveUrl__default["default"](reference,getContent(baseUrlElement));});}));};var getSegmentInformation=function getSegmentInformation2(adaptationSet){var segmentTemplate=findChildren(adaptationSet,"SegmentTemplate")[0];var segmentList=findChildren(adaptationSet,"SegmentList")[0];var segmentUrls=segmentList&&findChildren(segmentList,"SegmentURL").map(function(s2){return merge({tag:"SegmentURL"},parseAttributes(s2));});var segmentBase=findChildren(adaptationSet,"SegmentBase")[0];var segmentTimelineParentNode=segmentList||segmentTemplate;var segmentTimeline=segmentTimelineParentNode&&findChildren(segmentTimelineParentNode,"SegmentTimeline")[0];var segmentInitializationParentNode=segmentList||segmentBase||segmentTemplate;var segmentInitialization=segmentInitializationParentNode&&findChildren(segmentInitializationParentNode,"Initialization")[0];var template=segmentTemplate&&parseAttributes(segmentTemplate);if(template&&segmentInitialization){template.initialization=segmentInitialization&&parseAttributes(segmentInitialization);}else if(template&&template.initialization){template.initialization={sourceURL:template.initialization};}
var segmentInfo={template,segmentTimeline:segmentTimeline&&findChildren(segmentTimeline,"S").map(function(s2){return parseAttributes(s2);}),list:segmentList&&merge(parseAttributes(segmentList),{segmentUrls,initialization:parseAttributes(segmentInitialization)}),base:segmentBase&&merge(parseAttributes(segmentBase),{initialization:parseAttributes(segmentInitialization)})};Object.keys(segmentInfo).forEach(function(key){if(!segmentInfo[key]){delete segmentInfo[key];}});return segmentInfo;};var inheritBaseUrls=function inheritBaseUrls2(adaptationSetAttributes,adaptationSetBaseUrls,adaptationSetSegmentInfo){return function(representation){var repBaseUrlElements=findChildren(representation,"BaseURL");var repBaseUrls=buildBaseUrls(adaptationSetBaseUrls,repBaseUrlElements);var attributes=merge(adaptationSetAttributes,parseAttributes(representation));var representationSegmentInfo=getSegmentInformation(representation);return repBaseUrls.map(function(baseUrl){return{segmentInfo:merge(adaptationSetSegmentInfo,representationSegmentInfo),attributes:merge(attributes,{baseUrl})};});};};var generateKeySystemInformation=function generateKeySystemInformation2(contentProtectionNodes){return contentProtectionNodes.reduce(function(acc,node){var attributes=parseAttributes(node);if(attributes.schemeIdUri){attributes.schemeIdUri=attributes.schemeIdUri.toLowerCase();}
var keySystem=keySystemsMap[attributes.schemeIdUri];if(keySystem){acc[keySystem]={attributes};var psshNode=findChildren(node,"cenc:pssh")[0];if(psshNode){var pssh=getContent(psshNode);acc[keySystem].pssh=pssh&&decodeB64ToUint8Array__default["default"](pssh);}}
return acc;},{});};var parseCaptionServiceMetadata=function parseCaptionServiceMetadata2(service){if(service.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var values2=typeof service.value!=="string"?[]:service.value.split(";");return values2.map(function(value){var channel;var language;language=value;if(/^CC\d=/.test(value)){var _value$split=value.split("=");channel=_value$split[0];language=_value$split[1];}else if(/^CC\d$/.test(value)){channel=value;}
return{channel,language};});}else if(service.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var _values=typeof service.value!=="string"?[]:service.value.split(";");return _values.map(function(value){var flags={"channel":void 0,"language":void 0,"aspectRatio":1,"easyReader":0,"3D":0};if(/=/.test(value)){var _value$split2=value.split("="),channel=_value$split2[0],_value$split2$=_value$split2[1],opts=_value$split2$===void 0?"":_value$split2$;flags.channel=channel;flags.language=value;opts.split(",").forEach(function(opt){var _opt$split=opt.split(":"),name=_opt$split[0],val=_opt$split[1];if(name==="lang"){flags.language=val;}else if(name==="er"){flags.easyReader=Number(val);}else if(name==="war"){flags.aspectRatio=Number(val);}else if(name==="3D"){flags["3D"]=Number(val);}});}else{flags.language=value;}
if(flags.channel){flags.channel="SERVICE"+flags.channel;}
return flags;});}};var toRepresentations=function toRepresentations2(periodAttributes,periodBaseUrls,periodSegmentInfo){return function(adaptationSet){var adaptationSetAttributes=parseAttributes(adaptationSet);var adaptationSetBaseUrls=buildBaseUrls(periodBaseUrls,findChildren(adaptationSet,"BaseURL"));var role=findChildren(adaptationSet,"Role")[0];var roleAttributes={role:parseAttributes(role)};var attrs=merge(periodAttributes,adaptationSetAttributes,roleAttributes);var accessibility=findChildren(adaptationSet,"Accessibility")[0];var captionServices=parseCaptionServiceMetadata(parseAttributes(accessibility));if(captionServices){attrs=merge(attrs,{captionServices});}
var label=findChildren(adaptationSet,"Label")[0];if(label&&label.childNodes.length){var labelVal=label.childNodes[0].nodeValue.trim();attrs=merge(attrs,{label:labelVal});}
var contentProtection=generateKeySystemInformation(findChildren(adaptationSet,"ContentProtection"));if(Object.keys(contentProtection).length){attrs=merge(attrs,{contentProtection});}
var segmentInfo=getSegmentInformation(adaptationSet);var representations=findChildren(adaptationSet,"Representation");var adaptationSetSegmentInfo=merge(periodSegmentInfo,segmentInfo);return flatten(representations.map(inheritBaseUrls(attrs,adaptationSetBaseUrls,adaptationSetSegmentInfo)));};};var toAdaptationSets=function toAdaptationSets2(mpdAttributes,mpdBaseUrls){return function(period,index){var periodBaseUrls=buildBaseUrls(mpdBaseUrls,findChildren(period.node,"BaseURL"));var periodAttributes=merge(mpdAttributes,{periodStart:period.attributes.start});if(typeof period.attributes.duration==="number"){periodAttributes.periodDuration=period.attributes.duration;}
var adaptationSets=findChildren(period.node,"AdaptationSet");var periodSegmentInfo=getSegmentInformation(period.node);return flatten(adaptationSets.map(toRepresentations(periodAttributes,periodBaseUrls,periodSegmentInfo)));};};var getPeriodStart=function getPeriodStart2(_ref){var attributes=_ref.attributes,priorPeriodAttributes=_ref.priorPeriodAttributes,mpdType=_ref.mpdType;if(typeof attributes.start==="number"){return attributes.start;}
if(priorPeriodAttributes&&typeof priorPeriodAttributes.start==="number"&&typeof priorPeriodAttributes.duration==="number"){return priorPeriodAttributes.start+priorPeriodAttributes.duration;}
if(!priorPeriodAttributes&&mpdType==="static"){return 0;}
return null;};var inheritAttributes=function inheritAttributes2(mpd,options){if(options===void 0){options={};}
var _options=options,_options$manifestUri=_options.manifestUri,manifestUri=_options$manifestUri===void 0?"":_options$manifestUri,_options$NOW=_options.NOW,NOW=_options$NOW===void 0?Date.now():_options$NOW,_options$clientOffset=_options.clientOffset,clientOffset=_options$clientOffset===void 0?0:_options$clientOffset;var periodNodes=findChildren(mpd,"Period");if(!periodNodes.length){throw new Error(errors.INVALID_NUMBER_OF_PERIOD);}
var locations=findChildren(mpd,"Location");var mpdAttributes=parseAttributes(mpd);var mpdBaseUrls=buildBaseUrls([manifestUri],findChildren(mpd,"BaseURL"));mpdAttributes.type=mpdAttributes.type||"static";mpdAttributes.sourceDuration=mpdAttributes.mediaPresentationDuration||0;mpdAttributes.NOW=NOW;mpdAttributes.clientOffset=clientOffset;if(locations.length){mpdAttributes.locations=locations.map(getContent);}
var periods=[];periodNodes.forEach(function(node,index){var attributes=parseAttributes(node);var priorPeriod=periods[index-1];attributes.start=getPeriodStart({attributes,priorPeriodAttributes:priorPeriod?priorPeriod.attributes:null,mpdType:mpdAttributes.type});periods.push({node,attributes});});return{locations:mpdAttributes.locations,representationInfo:flatten(periods.map(toAdaptationSets(mpdAttributes,mpdBaseUrls)))};};var stringToMpdXml=function stringToMpdXml2(manifestString){if(manifestString===""){throw new Error(errors.DASH_EMPTY_MANIFEST);}
var parser=new xmldom.DOMParser();var xml;var mpd;try{xml=parser.parseFromString(manifestString,"application/xml");mpd=xml&&xml.documentElement.tagName==="MPD"?xml.documentElement:null;}catch(e2){}
if(!mpd||mpd&&mpd.getElementsByTagName("parsererror").length>0){throw new Error(errors.DASH_INVALID_XML);}
return mpd;};var parseUTCTimingScheme=function parseUTCTimingScheme2(mpd){var UTCTimingNode=findChildren(mpd,"UTCTiming")[0];if(!UTCTimingNode){return null;}
var attributes=parseAttributes(UTCTimingNode);switch(attributes.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":attributes.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":attributes.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":attributes.method="DIRECT";attributes.value=Date.parse(attributes.value);break;case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);}
return attributes;};var VERSION=version2;var parse=function parse2(manifestString,options){if(options===void 0){options={};}
var parsedManifestInfo=inheritAttributes(stringToMpdXml(manifestString),options);var playlists=toPlaylists(parsedManifestInfo.representationInfo);return toM3u8({dashPlaylists:playlists,locations:parsedManifestInfo.locations,sidxMapping:options.sidxMapping,previousManifest:options.previousManifest});};var parseUTCTiming=function parseUTCTiming2(manifestString){return parseUTCTimingScheme(stringToMpdXml(manifestString));};exports.VERSION=VERSION;exports.addSidxSegmentsToPlaylist=addSidxSegmentsToPlaylist$1;exports.generateSidxKey=generateSidxKey;exports.inheritAttributes=inheritAttributes;exports.parse=parse;exports.parseUTCTiming=parseUTCTiming;exports.stringToMpdXml=stringToMpdXml;exports.toM3u8=toM3u8;exports.toPlaylists=toPlaylists;}});var require_numbers=__commonJS({"node_modules/mux.js/lib/utils/numbers.js"(exports,module){var MAX_UINT32=Math.pow(2,32);var getUint64=function(uint8){var dv=new DataView(uint8.buffer,uint8.byteOffset,uint8.byteLength);var value;if(dv.getBigUint64){value=dv.getBigUint64(0);if(value<Number.MAX_SAFE_INTEGER){return Number(value);}
return value;}
return dv.getUint32(0)*MAX_UINT32+dv.getUint32(4);};module.exports={getUint64,MAX_UINT32};}});var require_parse_sidx=__commonJS({"node_modules/mux.js/lib/tools/parse-sidx.js"(exports,module){var getUint64=require_numbers().getUint64;var parseSidx=function(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8)},i2=12;if(result.version===0){result.earliestPresentationTime=view.getUint32(i2);result.firstOffset=view.getUint32(i2+4);i2+=8;}else{result.earliestPresentationTime=getUint64(data.subarray(i2));result.firstOffset=getUint64(data.subarray(i2+8));i2+=16;}
i2+=2;var referenceCount=view.getUint16(i2);i2+=2;for(;referenceCount>0;i2+=12,referenceCount--){result.references.push({referenceType:(data[i2]&128)>>>7,referencedSize:view.getUint32(i2)&2147483647,subsegmentDuration:view.getUint32(i2+4),startsWithSap:!!(data[i2+8]&128),sapType:(data[i2+8]&112)>>>4,sapDeltaTime:view.getUint32(i2+8)&268435455});}
return result;};module.exports=parseSidx;}});var require_id3_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/id3-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getId3Offset=exports.getId3Size=void 0;var _byteHelpers=require_byte_helpers();var ID3=(0,_byteHelpers.toUint8)([73,68,51]);var getId3Size=function getId3Size2(bytes,offset){if(offset===void 0){offset=0;}
bytes=(0,_byteHelpers.toUint8)(bytes);var flags=bytes[offset+5];var returnSize=bytes[offset+6]<<21|bytes[offset+7]<<14|bytes[offset+8]<<7|bytes[offset+9];var footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20;}
return returnSize+10;};exports.getId3Size=getId3Size;var getId3Offset=function getId3Offset2(bytes,offset){if(offset===void 0){offset=0;}
bytes=(0,_byteHelpers.toUint8)(bytes);if(bytes.length-offset<10||!(0,_byteHelpers.bytesMatch)(bytes,ID3,{offset})){return offset;}
offset+=getId3Size(bytes,offset);return getId3Offset2(bytes,offset);};exports.getId3Offset=getId3Offset;}});var require_codec_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/codec-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHvcCodec=exports.getAvcCodec=exports.getAv1Codec=void 0;var _byteHelpers=require_byte_helpers();var getAv1Codec=function getAv1Codec2(bytes){var codec="";var profile=bytes[1]>>>3;var level=bytes[1]&31;var tier=bytes[2]>>>7;var highBitDepth=(bytes[2]&64)>>6;var twelveBit=(bytes[2]&32)>>5;var monochrome=(bytes[2]&16)>>4;var chromaSubsamplingX=(bytes[2]&8)>>3;var chromaSubsamplingY=(bytes[2]&4)>>2;var chromaSamplePosition=bytes[2]&3;codec+=profile+"."+(0,_byteHelpers.padStart)(level,2,"0");if(tier===0){codec+="M";}else if(tier===1){codec+="H";}
var bitDepth;if(profile===2&&highBitDepth){bitDepth=twelveBit?12:10;}else{bitDepth=highBitDepth?10:8;}
codec+="."+(0,_byteHelpers.padStart)(bitDepth,2,"0");codec+="."+monochrome;codec+="."+chromaSubsamplingX+chromaSubsamplingY+chromaSamplePosition;return codec;};exports.getAv1Codec=getAv1Codec;var getAvcCodec=function getAvcCodec2(bytes){var profileId=(0,_byteHelpers.toHexString)(bytes[1]);var constraintFlags=(0,_byteHelpers.toHexString)(bytes[2]&252);var levelId=(0,_byteHelpers.toHexString)(bytes[3]);return ""+profileId+constraintFlags+levelId;};exports.getAvcCodec=getAvcCodec;var getHvcCodec=function getHvcCodec2(bytes){var codec="";var profileSpace=bytes[1]>>6;var profileId=bytes[1]&31;var tierFlag=(bytes[1]&32)>>5;var profileCompat=bytes.subarray(2,6);var constraintIds=bytes.subarray(6,12);var levelId=bytes[12];if(profileSpace===1){codec+="A";}else if(profileSpace===2){codec+="B";}else if(profileSpace===3){codec+="C";}
codec+=profileId+".";var profileCompatVal=parseInt((0,_byteHelpers.toBinaryString)(profileCompat).split("").reverse().join(""),2);if(profileCompatVal>255){profileCompatVal=parseInt((0,_byteHelpers.toBinaryString)(profileCompat),2);}
codec+=profileCompatVal.toString(16)+".";if(tierFlag===0){codec+="L";}else{codec+="H";}
codec+=levelId;var constraints="";for(var i2=0;i2<constraintIds.length;i2++){var v2=constraintIds[i2];if(v2){if(constraints){constraints+=".";}
constraints+=v2.toString(16);}}
if(constraints){codec+="."+constraints;}
return codec;};exports.getHvcCodec=getHvcCodec;}});var require_opus_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/opus-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setOpusHead=exports.parseOpusHead=exports.OPUS_HEAD=void 0;var OPUS_HEAD=new Uint8Array([79,112,117,115,72,101,97,100]);exports.OPUS_HEAD=OPUS_HEAD;var parseOpusHead=function parseOpusHead2(bytes){var view=new DataView(bytes.buffer,bytes.byteOffset,bytes.byteLength);var version2=view.getUint8(0);var littleEndian=version2!==0;var config={version:version2,channels:view.getUint8(1),preSkip:view.getUint16(2,littleEndian),sampleRate:view.getUint32(4,littleEndian),outputGain:view.getUint16(8,littleEndian),channelMappingFamily:view.getUint8(10)};if(config.channelMappingFamily>0&&bytes.length>10){config.streamCount=view.getUint8(11);config.twoChannelStreamCount=view.getUint8(12);config.channelMapping=[];for(var c2=0;c2<config.channels;c2++){config.channelMapping.push(view.getUint8(13+c2));}}
return config;};exports.parseOpusHead=parseOpusHead;var setOpusHead=function setOpusHead2(config){var size=config.channelMappingFamily<=0?11:12+config.channels;var view=new DataView(new ArrayBuffer(size));var littleEndian=config.version!==0;view.setUint8(0,config.version);view.setUint8(1,config.channels);view.setUint16(2,config.preSkip,littleEndian);view.setUint32(4,config.sampleRate,littleEndian);view.setUint16(8,config.outputGain,littleEndian);view.setUint8(10,config.channelMappingFamily);if(config.channelMappingFamily>0){view.setUint8(11,config.streamCount);config.channelMapping.foreach(function(cm,i2){view.setUint8(12+i2,cm);});}
return new Uint8Array(view.buffer);};exports.setOpusHead=setOpusHead;}});var require_mp4_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/mp4-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseMediaInfo=exports.parseTracks=exports.addSampleDescription=exports.buildFrameTable=exports.findNamedBox=exports.findBox=exports.parseDescriptors=void 0;var _byteHelpers=require_byte_helpers();var _codecHelpers=require_codec_helpers();var _opusHelpers=require_opus_helpers();var normalizePath=function normalizePath2(path){if(typeof path==="string"){return(0,_byteHelpers.stringToBytes)(path);}
if(typeof path==="number"){return path;}
return path;};var normalizePaths=function normalizePaths2(paths){if(!Array.isArray(paths)){return[normalizePath(paths)];}
return paths.map(function(p2){return normalizePath(p2);});};var DESCRIPTORS;var parseDescriptors=function parseDescriptors2(bytes){bytes=(0,_byteHelpers.toUint8)(bytes);var results=[];var i2=0;while(bytes.length>i2){var tag=bytes[i2];var size=0;var headerSize=0;headerSize++;var byte=bytes[headerSize];headerSize++;while(byte&128){size=(byte&127)<<7;byte=bytes[headerSize];headerSize++;}
size+=byte&127;for(var z2=0;z2<DESCRIPTORS.length;z2++){var _DESCRIPTORS$z=DESCRIPTORS[z2],id2=_DESCRIPTORS$z.id,parser=_DESCRIPTORS$z.parser;if(tag===id2){results.push(parser(bytes.subarray(headerSize,headerSize+size)));break;}}
i2+=size+headerSize;}
return results;};exports.parseDescriptors=parseDescriptors;DESCRIPTORS=[{id:3,parser:function parser(bytes){var desc={tag:3,id:bytes[0]<<8|bytes[1],flags:bytes[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(desc.flags&128){desc.dependsOnEsId=bytes[desc.size]<<8|bytes[desc.size+1];desc.size+=2;}
if(desc.flags&64){var len=bytes[desc.size];desc.url=(0,_byteHelpers.bytesToString)(bytes.subarray(desc.size+1,desc.size+1+len));desc.size+=len;}
if(desc.flags&32){desc.ocrEsId=bytes[desc.size]<<8|bytes[desc.size+1];desc.size+=2;}
desc.descriptors=parseDescriptors(bytes.subarray(desc.size))||[];return desc;}},{id:4,parser:function parser(bytes){var desc={tag:4,oti:bytes[0],streamType:bytes[1],bufferSize:bytes[2]<<16|bytes[3]<<8|bytes[4],maxBitrate:bytes[5]<<24|bytes[6]<<16|bytes[7]<<8|bytes[8],avgBitrate:bytes[9]<<24|bytes[10]<<16|bytes[11]<<8|bytes[12],descriptors:parseDescriptors(bytes.subarray(13))};return desc;}},{id:5,parser:function parser(bytes){return{tag:5,bytes};}},{id:6,parser:function parser(bytes){return{tag:6,bytes};}}];var findBox=function findBox2(bytes,paths,complete){if(complete===void 0){complete=false;}
paths=normalizePaths(paths);bytes=(0,_byteHelpers.toUint8)(bytes);var results=[];if(!paths.length){return results;}
var i2=0;while(i2<bytes.length){var size=(bytes[i2]<<24|bytes[i2+1]<<16|bytes[i2+2]<<8|bytes[i2+3])>>>0;var type=bytes.subarray(i2+4,i2+8);if(size===0){break;}
var end=i2+size;if(end>bytes.length){if(complete){break;}
end=bytes.length;}
var data=bytes.subarray(i2+8,end);if((0,_byteHelpers.bytesMatch)(type,paths[0])){if(paths.length===1){results.push(data);}else{results.push.apply(results,findBox2(data,paths.slice(1),complete));}}
i2=end;}
return results;};exports.findBox=findBox;var findNamedBox=function findNamedBox2(bytes,name){name=normalizePath(name);if(!name.length){return bytes.subarray(bytes.length);}
var i2=0;while(i2<bytes.length){if((0,_byteHelpers.bytesMatch)(bytes.subarray(i2,i2+name.length),name)){var size=(bytes[i2-4]<<24|bytes[i2-3]<<16|bytes[i2-2]<<8|bytes[i2-1])>>>0;var end=size>1?i2+size:bytes.byteLength;return bytes.subarray(i2+4,end);}
i2++;}
return bytes.subarray(bytes.length);};exports.findNamedBox=findNamedBox;var parseSamples=function parseSamples2(data,entrySize,parseEntry){if(entrySize===void 0){entrySize=4;}
if(parseEntry===void 0){parseEntry=function parseEntry2(d2){return(0,_byteHelpers.bytesToNumber)(d2);};}
var entries=[];if(!data||!data.length){return entries;}
var entryCount=(0,_byteHelpers.bytesToNumber)(data.subarray(4,8));for(var i2=8;entryCount;i2+=entrySize,entryCount--){entries.push(parseEntry(data.subarray(i2,i2+entrySize)));}
return entries;};var buildFrameTable=function buildFrameTable2(stbl,timescale){var keySamples=parseSamples(findBox(stbl,["stss"])[0]);var chunkOffsets=parseSamples(findBox(stbl,["stco"])[0]);var timeToSamples=parseSamples(findBox(stbl,["stts"])[0],8,function(entry){return{sampleCount:(0,_byteHelpers.bytesToNumber)(entry.subarray(0,4)),sampleDelta:(0,_byteHelpers.bytesToNumber)(entry.subarray(4,8))};});var samplesToChunks=parseSamples(findBox(stbl,["stsc"])[0],12,function(entry){return{firstChunk:(0,_byteHelpers.bytesToNumber)(entry.subarray(0,4)),samplesPerChunk:(0,_byteHelpers.bytesToNumber)(entry.subarray(4,8)),sampleDescriptionIndex:(0,_byteHelpers.bytesToNumber)(entry.subarray(8,12))};});var stsz=findBox(stbl,["stsz"])[0];var sampleSizes=parseSamples(stsz&&stsz.length&&stsz.subarray(4)||null);var frames=[];for(var chunkIndex=0;chunkIndex<chunkOffsets.length;chunkIndex++){var samplesInChunk=void 0;for(var i2=0;i2<samplesToChunks.length;i2++){var sampleToChunk=samplesToChunks[i2];var isThisOne=chunkIndex+1>=sampleToChunk.firstChunk&&(i2+1>=samplesToChunks.length||chunkIndex+1<samplesToChunks[i2+1].firstChunk);if(isThisOne){samplesInChunk=sampleToChunk.samplesPerChunk;break;}}
var chunkOffset=chunkOffsets[chunkIndex];for(var _i2=0;_i2<samplesInChunk;_i2++){var frameEnd=sampleSizes[frames.length];var keyframe=!keySamples.length;if(keySamples.length&&keySamples.indexOf(frames.length+1)!==-1){keyframe=true;}
var frame={keyframe,start:chunkOffset,end:chunkOffset+frameEnd};for(var k2=0;k2<timeToSamples.length;k2++){var _timeToSamples$k=timeToSamples[k2],sampleCount=_timeToSamples$k.sampleCount,sampleDelta=_timeToSamples$k.sampleDelta;if(frames.length<=sampleCount){var lastTimestamp=frames.length?frames[frames.length-1].timestamp:0;frame.timestamp=lastTimestamp+sampleDelta/timescale*1e3;frame.duration=sampleDelta;break;}}
frames.push(frame);chunkOffset+=frameEnd;}}
return frames;};exports.buildFrameTable=buildFrameTable;var addSampleDescription=function addSampleDescription2(track,bytes){var codec=(0,_byteHelpers.bytesToString)(bytes.subarray(0,4));if(track.type==="video"){track.info=track.info||{};track.info.width=bytes[28]<<8|bytes[29];track.info.height=bytes[30]<<8|bytes[31];}else if(track.type==="audio"){track.info=track.info||{};track.info.channels=bytes[20]<<8|bytes[21];track.info.bitDepth=bytes[22]<<8|bytes[23];track.info.sampleRate=bytes[28]<<8|bytes[29];}
if(codec==="avc1"){var avcC=findNamedBox(bytes,"avcC");codec+="."+(0,_codecHelpers.getAvcCodec)(avcC);track.info.avcC=avcC;}else if(codec==="hvc1"||codec==="hev1"){codec+="."+(0,_codecHelpers.getHvcCodec)(findNamedBox(bytes,"hvcC"));}else if(codec==="mp4a"||codec==="mp4v"){var esds=findNamedBox(bytes,"esds");var esDescriptor=parseDescriptors(esds.subarray(4))[0];var decoderConfig=esDescriptor&&esDescriptor.descriptors.filter(function(_ref){var tag=_ref.tag;return tag===4;})[0];if(decoderConfig){codec+="."+(0,_byteHelpers.toHexString)(decoderConfig.oti);if(decoderConfig.oti===64){codec+="."+(decoderConfig.descriptors[0].bytes[0]>>3).toString();}else if(decoderConfig.oti===32){codec+="."+decoderConfig.descriptors[0].bytes[4].toString();}else if(decoderConfig.oti===221){codec="vorbis";}}else if(track.type==="audio"){codec+=".40.2";}else{codec+=".20.9";}}else if(codec==="av01"){codec+="."+(0,_codecHelpers.getAv1Codec)(findNamedBox(bytes,"av1C"));}else if(codec==="vp09"){var vpcC=findNamedBox(bytes,"vpcC");var profile=vpcC[0];var level=vpcC[1];var bitDepth=vpcC[2]>>4;var chromaSubsampling=(vpcC[2]&15)>>1;var videoFullRangeFlag=(vpcC[2]&15)>>3;var colourPrimaries=vpcC[3];var transferCharacteristics=vpcC[4];var matrixCoefficients=vpcC[5];codec+="."+(0,_byteHelpers.padStart)(profile,2,"0");codec+="."+(0,_byteHelpers.padStart)(level,2,"0");codec+="."+(0,_byteHelpers.padStart)(bitDepth,2,"0");codec+="."+(0,_byteHelpers.padStart)(chromaSubsampling,2,"0");codec+="."+(0,_byteHelpers.padStart)(colourPrimaries,2,"0");codec+="."+(0,_byteHelpers.padStart)(transferCharacteristics,2,"0");codec+="."+(0,_byteHelpers.padStart)(matrixCoefficients,2,"0");codec+="."+(0,_byteHelpers.padStart)(videoFullRangeFlag,2,"0");}else if(codec==="theo"){codec="theora";}else if(codec==="spex"){codec="speex";}else if(codec===".mp3"){codec="mp4a.40.34";}else if(codec==="msVo"){codec="vorbis";}else if(codec==="Opus"){codec="opus";var dOps=findNamedBox(bytes,"dOps");track.info.opus=(0,_opusHelpers.parseOpusHead)(dOps);track.info.codecDelay=65e5;}else{codec=codec.toLowerCase();}
track.codec=codec;};exports.addSampleDescription=addSampleDescription;var parseTracks=function parseTracks2(bytes,frameTable){if(frameTable===void 0){frameTable=true;}
bytes=(0,_byteHelpers.toUint8)(bytes);var traks=findBox(bytes,["moov","trak"],true);var tracks=[];traks.forEach(function(trak){var track={bytes:trak};var mdia=findBox(trak,["mdia"])[0];var hdlr=findBox(mdia,["hdlr"])[0];var trakType=(0,_byteHelpers.bytesToString)(hdlr.subarray(8,12));if(trakType==="soun"){track.type="audio";}else if(trakType==="vide"){track.type="video";}else{track.type=trakType;}
var tkhd=findBox(trak,["tkhd"])[0];if(tkhd){var view=new DataView(tkhd.buffer,tkhd.byteOffset,tkhd.byteLength);var tkhdVersion=view.getUint8(0);track.number=tkhdVersion===0?view.getUint32(12):view.getUint32(20);}
var mdhd=findBox(mdia,["mdhd"])[0];if(mdhd){var version2=mdhd[0];var index=version2===0?12:20;track.timescale=(mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3])>>>0;}
var stbl=findBox(mdia,["minf","stbl"])[0];var stsd=findBox(stbl,["stsd"])[0];var descriptionCount=(0,_byteHelpers.bytesToNumber)(stsd.subarray(4,8));var offset=8;while(descriptionCount--){var len=(0,_byteHelpers.bytesToNumber)(stsd.subarray(offset,offset+4));var sampleDescriptor=stsd.subarray(offset+4,offset+4+len);addSampleDescription(track,sampleDescriptor);offset+=4+len;}
if(frameTable){track.frameTable=buildFrameTable(stbl,track.timescale);}
tracks.push(track);});return tracks;};exports.parseTracks=parseTracks;var parseMediaInfo=function parseMediaInfo2(bytes){var mvhd=findBox(bytes,["moov","mvhd"],true)[0];if(!mvhd||!mvhd.length){return;}
var info={};if(mvhd[0]===1){info.timestampScale=(0,_byteHelpers.bytesToNumber)(mvhd.subarray(20,24));info.duration=(0,_byteHelpers.bytesToNumber)(mvhd.subarray(24,32));}else{info.timestampScale=(0,_byteHelpers.bytesToNumber)(mvhd.subarray(12,16));info.duration=(0,_byteHelpers.bytesToNumber)(mvhd.subarray(16,20));}
info.bytes=mvhd;return info;};exports.parseMediaInfo=parseMediaInfo;}});var require_ebml_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/ebml-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseData=exports.parseTracks=exports.decodeBlock=exports.findEbml=exports.EBML_TAGS=void 0;var _byteHelpers=require_byte_helpers();var _codecHelpers=require_codec_helpers();var EBML_TAGS={EBML:(0,_byteHelpers.toUint8)([26,69,223,163]),DocType:(0,_byteHelpers.toUint8)([66,130]),Segment:(0,_byteHelpers.toUint8)([24,83,128,103]),SegmentInfo:(0,_byteHelpers.toUint8)([21,73,169,102]),Tracks:(0,_byteHelpers.toUint8)([22,84,174,107]),Track:(0,_byteHelpers.toUint8)([174]),TrackNumber:(0,_byteHelpers.toUint8)([215]),DefaultDuration:(0,_byteHelpers.toUint8)([35,227,131]),TrackEntry:(0,_byteHelpers.toUint8)([174]),TrackType:(0,_byteHelpers.toUint8)([131]),FlagDefault:(0,_byteHelpers.toUint8)([136]),CodecID:(0,_byteHelpers.toUint8)([134]),CodecPrivate:(0,_byteHelpers.toUint8)([99,162]),VideoTrack:(0,_byteHelpers.toUint8)([224]),AudioTrack:(0,_byteHelpers.toUint8)([225]),Cluster:(0,_byteHelpers.toUint8)([31,67,182,117]),Timestamp:(0,_byteHelpers.toUint8)([231]),TimestampScale:(0,_byteHelpers.toUint8)([42,215,177]),BlockGroup:(0,_byteHelpers.toUint8)([160]),BlockDuration:(0,_byteHelpers.toUint8)([155]),Block:(0,_byteHelpers.toUint8)([161]),SimpleBlock:(0,_byteHelpers.toUint8)([163])};exports.EBML_TAGS=EBML_TAGS;var LENGTH_TABLE=[128,64,32,16,8,4,2,1];var getLength=function getLength2(byte){var len=1;for(var i2=0;i2<LENGTH_TABLE.length;i2++){if(byte&LENGTH_TABLE[i2]){break;}
len++;}
return len;};var getvint=function getvint2(bytes,offset,removeLength,signed){if(removeLength===void 0){removeLength=true;}
if(signed===void 0){signed=false;}
var length=getLength(bytes[offset]);var valueBytes=bytes.subarray(offset,offset+length);if(removeLength){valueBytes=Array.prototype.slice.call(bytes,offset,offset+length);valueBytes[0]^=LENGTH_TABLE[length-1];}
return{length,value:(0,_byteHelpers.bytesToNumber)(valueBytes,{signed}),bytes:valueBytes};};var normalizePath=function normalizePath2(path){if(typeof path==="string"){return path.match(/.{1,2}/g).map(function(p2){return normalizePath2(p2);});}
if(typeof path==="number"){return(0,_byteHelpers.numberToBytes)(path);}
return path;};var normalizePaths=function normalizePaths2(paths){if(!Array.isArray(paths)){return[normalizePath(paths)];}
return paths.map(function(p2){return normalizePath(p2);});};var getInfinityDataSize=function getInfinityDataSize2(id2,bytes,offset){if(offset>=bytes.length){return bytes.length;}
var innerid=getvint(bytes,offset,false);if((0,_byteHelpers.bytesMatch)(id2.bytes,innerid.bytes)){return offset;}
var dataHeader=getvint(bytes,offset+innerid.length);return getInfinityDataSize2(id2,bytes,offset+dataHeader.length+dataHeader.value+innerid.length);};var findEbml=function findEbml2(bytes,paths){paths=normalizePaths(paths);bytes=(0,_byteHelpers.toUint8)(bytes);var results=[];if(!paths.length){return results;}
var i2=0;while(i2<bytes.length){var id2=getvint(bytes,i2,false);var dataHeader=getvint(bytes,i2+id2.length);var dataStart=i2+id2.length+dataHeader.length;if(dataHeader.value===127){dataHeader.value=getInfinityDataSize(id2,bytes,dataStart);if(dataHeader.value!==bytes.length){dataHeader.value-=dataStart;}}
var dataEnd=dataStart+dataHeader.value>bytes.length?bytes.length:dataStart+dataHeader.value;var data=bytes.subarray(dataStart,dataEnd);if((0,_byteHelpers.bytesMatch)(paths[0],id2.bytes)){if(paths.length===1){results.push(data);}else{results=results.concat(findEbml2(data,paths.slice(1)));}}
var totalLength=id2.length+dataHeader.length+data.length;i2+=totalLength;}
return results;};exports.findEbml=findEbml;var decodeBlock=function decodeBlock2(block,type,timestampScale,clusterTimestamp){var duration;if(type==="group"){duration=findEbml(block,[EBML_TAGS.BlockDuration])[0];if(duration){duration=(0,_byteHelpers.bytesToNumber)(duration);duration=1/timestampScale*duration*timestampScale/1e3;}
block=findEbml(block,[EBML_TAGS.Block])[0];type="block";}
var dv=new DataView(block.buffer,block.byteOffset,block.byteLength);var trackNumber=getvint(block,0);var timestamp=dv.getInt16(trackNumber.length,false);var flags=block[trackNumber.length+2];var data=block.subarray(trackNumber.length+3);var ptsdts=1/timestampScale*(clusterTimestamp+timestamp)*timestampScale/1e3;var parsed={duration,trackNumber:trackNumber.value,keyframe:type==="simple"&&flags>>7===1,invisible:(flags&8)>>3===1,lacing:(flags&6)>>1,discardable:type==="simple"&&(flags&1)===1,frames:[],pts:ptsdts,dts:ptsdts,timestamp};if(!parsed.lacing){parsed.frames.push(data);return parsed;}
var numberOfFrames=data[0]+1;var frameSizes=[];var offset=1;if(parsed.lacing===2){var sizeOfFrame=(data.length-offset)/numberOfFrames;for(var i2=0;i2<numberOfFrames;i2++){frameSizes.push(sizeOfFrame);}}
if(parsed.lacing===1){for(var _i2=0;_i2<numberOfFrames-1;_i2++){var size=0;do{size+=data[offset];offset++;}while(data[offset-1]===255);frameSizes.push(size);}}
if(parsed.lacing===3){var _size=0;for(var _i22=0;_i22<numberOfFrames-1;_i22++){var vint=_i22===0?getvint(data,offset):getvint(data,offset,true,true);_size+=vint.value;frameSizes.push(_size);offset+=vint.length;}}
frameSizes.forEach(function(size2){parsed.frames.push(data.subarray(offset,offset+size2));offset+=size2;});return parsed;};exports.decodeBlock=decodeBlock;var parseVp9Private=function parseVp9Private2(bytes){var i2=0;var params2={};while(i2<bytes.length){var id2=bytes[i2]&127;var len=bytes[i2+1];var val=void 0;if(len===1){val=bytes[i2+2];}else{val=bytes.subarray(i2+2,i2+2+len);}
if(id2===1){params2.profile=val;}else if(id2===2){params2.level=val;}else if(id2===3){params2.bitDepth=val;}else if(id2===4){params2.chromaSubsampling=val;}else{params2[id2]=val;}
i2+=2+len;}
return params2;};var parseTracks=function parseTracks2(bytes){bytes=(0,_byteHelpers.toUint8)(bytes);var decodedTracks=[];var tracks=findEbml(bytes,[EBML_TAGS.Segment,EBML_TAGS.Tracks,EBML_TAGS.Track]);if(!tracks.length){tracks=findEbml(bytes,[EBML_TAGS.Tracks,EBML_TAGS.Track]);}
if(!tracks.length){tracks=findEbml(bytes,[EBML_TAGS.Track]);}
if(!tracks.length){return decodedTracks;}
tracks.forEach(function(track){var trackType=findEbml(track,EBML_TAGS.TrackType)[0];if(!trackType||!trackType.length){return;}
if(trackType[0]===1){trackType="video";}else if(trackType[0]===2){trackType="audio";}else if(trackType[0]===17){trackType="subtitle";}else{return;}
var decodedTrack={rawCodec:(0,_byteHelpers.bytesToString)(findEbml(track,[EBML_TAGS.CodecID])[0]),type:trackType,codecPrivate:findEbml(track,[EBML_TAGS.CodecPrivate])[0],number:(0,_byteHelpers.bytesToNumber)(findEbml(track,[EBML_TAGS.TrackNumber])[0]),defaultDuration:(0,_byteHelpers.bytesToNumber)(findEbml(track,[EBML_TAGS.DefaultDuration])[0]),default:findEbml(track,[EBML_TAGS.FlagDefault])[0],rawData:track};var codec="";if(/V_MPEG4\/ISO\/AVC/.test(decodedTrack.rawCodec)){codec="avc1."+(0,_codecHelpers.getAvcCodec)(decodedTrack.codecPrivate);}else if(/V_MPEGH\/ISO\/HEVC/.test(decodedTrack.rawCodec)){codec="hev1."+(0,_codecHelpers.getHvcCodec)(decodedTrack.codecPrivate);}else if(/V_MPEG4\/ISO\/ASP/.test(decodedTrack.rawCodec)){if(decodedTrack.codecPrivate){codec="mp4v.20."+decodedTrack.codecPrivate[4].toString();}else{codec="mp4v.20.9";}}else if(/^V_THEORA/.test(decodedTrack.rawCodec)){codec="theora";}else if(/^V_VP8/.test(decodedTrack.rawCodec)){codec="vp8";}else if(/^V_VP9/.test(decodedTrack.rawCodec)){if(decodedTrack.codecPrivate){var _parseVp9Private=parseVp9Private(decodedTrack.codecPrivate),profile=_parseVp9Private.profile,level=_parseVp9Private.level,bitDepth=_parseVp9Private.bitDepth,chromaSubsampling=_parseVp9Private.chromaSubsampling;codec="vp09.";codec+=(0,_byteHelpers.padStart)(profile,2,"0")+".";codec+=(0,_byteHelpers.padStart)(level,2,"0")+".";codec+=(0,_byteHelpers.padStart)(bitDepth,2,"0")+".";codec+=""+(0,_byteHelpers.padStart)(chromaSubsampling,2,"0");var matrixCoefficients=findEbml(track,[224,[85,176],[85,177]])[0]||[];var videoFullRangeFlag=findEbml(track,[224,[85,176],[85,185]])[0]||[];var transferCharacteristics=findEbml(track,[224,[85,176],[85,186]])[0]||[];var colourPrimaries=findEbml(track,[224,[85,176],[85,187]])[0]||[];if(matrixCoefficients.length||videoFullRangeFlag.length||transferCharacteristics.length||colourPrimaries.length){codec+="."+(0,_byteHelpers.padStart)(colourPrimaries[0],2,"0");codec+="."+(0,_byteHelpers.padStart)(transferCharacteristics[0],2,"0");codec+="."+(0,_byteHelpers.padStart)(matrixCoefficients[0],2,"0");codec+="."+(0,_byteHelpers.padStart)(videoFullRangeFlag[0],2,"0");}}else{codec="vp9";}}else if(/^V_AV1/.test(decodedTrack.rawCodec)){codec="av01."+(0,_codecHelpers.getAv1Codec)(decodedTrack.codecPrivate);}else if(/A_ALAC/.test(decodedTrack.rawCodec)){codec="alac";}else if(/A_MPEG\/L2/.test(decodedTrack.rawCodec)){codec="mp2";}else if(/A_MPEG\/L3/.test(decodedTrack.rawCodec)){codec="mp3";}else if(/^A_AAC/.test(decodedTrack.rawCodec)){if(decodedTrack.codecPrivate){codec="mp4a.40."+(decodedTrack.codecPrivate[0]>>>3).toString();}else{codec="mp4a.40.2";}}else if(/^A_AC3/.test(decodedTrack.rawCodec)){codec="ac-3";}else if(/^A_PCM/.test(decodedTrack.rawCodec)){codec="pcm";}else if(/^A_MS\/ACM/.test(decodedTrack.rawCodec)){codec="speex";}else if(/^A_EAC3/.test(decodedTrack.rawCodec)){codec="ec-3";}else if(/^A_VORBIS/.test(decodedTrack.rawCodec)){codec="vorbis";}else if(/^A_FLAC/.test(decodedTrack.rawCodec)){codec="flac";}else if(/^A_OPUS/.test(decodedTrack.rawCodec)){codec="opus";}
decodedTrack.codec=codec;decodedTracks.push(decodedTrack);});return decodedTracks.sort(function(a2,b2){return a2.number-b2.number;});};exports.parseTracks=parseTracks;var parseData=function parseData2(data,tracks){var allBlocks=[];var segment=findEbml(data,[EBML_TAGS.Segment])[0];var timestampScale=findEbml(segment,[EBML_TAGS.SegmentInfo,EBML_TAGS.TimestampScale])[0];if(timestampScale&&timestampScale.length){timestampScale=(0,_byteHelpers.bytesToNumber)(timestampScale);}else{timestampScale=1e6;}
var clusters=findEbml(segment,[EBML_TAGS.Cluster]);if(!tracks){tracks=parseTracks(segment);}
clusters.forEach(function(cluster,ci2){var simpleBlocks=findEbml(cluster,[EBML_TAGS.SimpleBlock]).map(function(b2){return{type:"simple",data:b2};});var blockGroups=findEbml(cluster,[EBML_TAGS.BlockGroup]).map(function(b2){return{type:"group",data:b2};});var timestamp=findEbml(cluster,[EBML_TAGS.Timestamp])[0]||0;if(timestamp&&timestamp.length){timestamp=(0,_byteHelpers.bytesToNumber)(timestamp);}
var blocks=simpleBlocks.concat(blockGroups).sort(function(a2,b2){return a2.data.byteOffset-b2.data.byteOffset;});blocks.forEach(function(block,bi2){var decoded=decodeBlock(block.data,block.type,timestampScale,timestamp);allBlocks.push(decoded);});});return{tracks,blocks:allBlocks};};exports.parseData=parseData;}});var require_nal_helpers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/nal-helpers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findH265Nal=exports.findH264Nal=exports.findNal=exports.discardEmulationPreventionBytes=exports.EMULATION_PREVENTION=exports.NAL_TYPE_TWO=exports.NAL_TYPE_ONE=void 0;var _byteHelpers=require_byte_helpers();var NAL_TYPE_ONE=(0,_byteHelpers.toUint8)([0,0,0,1]);exports.NAL_TYPE_ONE=NAL_TYPE_ONE;var NAL_TYPE_TWO=(0,_byteHelpers.toUint8)([0,0,1]);exports.NAL_TYPE_TWO=NAL_TYPE_TWO;var EMULATION_PREVENTION=(0,_byteHelpers.toUint8)([0,0,3]);exports.EMULATION_PREVENTION=EMULATION_PREVENTION;var discardEmulationPreventionBytes=function discardEmulationPreventionBytes2(bytes){var positions=[];var i2=1;while(i2<bytes.length-2){if((0,_byteHelpers.bytesMatch)(bytes.subarray(i2,i2+3),EMULATION_PREVENTION)){positions.push(i2+2);i2++;}
i2++;}
if(positions.length===0){return bytes;}
var newLength=bytes.length-positions.length;var newData=new Uint8Array(newLength);var sourceIndex=0;for(i2=0;i2<newLength;sourceIndex++,i2++){if(sourceIndex===positions[0]){sourceIndex++;positions.shift();}
newData[i2]=bytes[sourceIndex];}
return newData;};exports.discardEmulationPreventionBytes=discardEmulationPreventionBytes;var findNal=function findNal2(bytes,dataType,types,nalLimit){if(nalLimit===void 0){nalLimit=Infinity;}
bytes=(0,_byteHelpers.toUint8)(bytes);types=[].concat(types);var i2=0;var nalStart;var nalsFound=0;while(i2<bytes.length&&(nalsFound<nalLimit||nalStart)){var nalOffset=void 0;if((0,_byteHelpers.bytesMatch)(bytes.subarray(i2),NAL_TYPE_ONE)){nalOffset=4;}else if((0,_byteHelpers.bytesMatch)(bytes.subarray(i2),NAL_TYPE_TWO)){nalOffset=3;}
if(!nalOffset){i2++;continue;}
nalsFound++;if(nalStart){return discardEmulationPreventionBytes(bytes.subarray(nalStart,i2));}
var nalType=void 0;if(dataType==="h264"){nalType=bytes[i2+nalOffset]&31;}else if(dataType==="h265"){nalType=bytes[i2+nalOffset]>>1&63;}
if(types.indexOf(nalType)!==-1){nalStart=i2+nalOffset;}
i2+=nalOffset+(dataType==="h264"?1:2);}
return bytes.subarray(0,0);};exports.findNal=findNal;var findH264Nal=function findH264Nal2(bytes,type,nalLimit){return findNal(bytes,"h264",type,nalLimit);};exports.findH264Nal=findH264Nal;var findH265Nal=function findH265Nal2(bytes,type,nalLimit){return findNal(bytes,"h265",type,nalLimit);};exports.findH265Nal=findH265Nal;}});var require_containers=__commonJS({"node_modules/@videojs/vhs-utils/cjs/containers.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isLikelyFmp4MediaSegment=exports.detectContainerForBytes=exports.isLikely=void 0;var _byteHelpers=require_byte_helpers();var _mp4Helpers=require_mp4_helpers();var _ebmlHelpers=require_ebml_helpers();var _id3Helpers=require_id3_helpers();var _nalHelpers=require_nal_helpers();var CONSTANTS={"webm":(0,_byteHelpers.toUint8)([119,101,98,109]),"matroska":(0,_byteHelpers.toUint8)([109,97,116,114,111,115,107,97]),"flac":(0,_byteHelpers.toUint8)([102,76,97,67]),"ogg":(0,_byteHelpers.toUint8)([79,103,103,83]),"ac3":(0,_byteHelpers.toUint8)([11,119]),"riff":(0,_byteHelpers.toUint8)([82,73,70,70]),"avi":(0,_byteHelpers.toUint8)([65,86,73]),"wav":(0,_byteHelpers.toUint8)([87,65,86,69]),"3gp":(0,_byteHelpers.toUint8)([102,116,121,112,51,103]),"mp4":(0,_byteHelpers.toUint8)([102,116,121,112]),"fmp4":(0,_byteHelpers.toUint8)([115,116,121,112]),"mov":(0,_byteHelpers.toUint8)([102,116,121,112,113,116]),"moov":(0,_byteHelpers.toUint8)([109,111,111,118]),"moof":(0,_byteHelpers.toUint8)([109,111,111,102])};var _isLikely={aac:function aac(bytes){var offset=(0,_id3Helpers.getId3Offset)(bytes);return(0,_byteHelpers.bytesMatch)(bytes,[255,16],{offset,mask:[255,22]});},mp3:function mp3(bytes){var offset=(0,_id3Helpers.getId3Offset)(bytes);return(0,_byteHelpers.bytesMatch)(bytes,[255,2],{offset,mask:[255,6]});},webm:function webm(bytes){var docType=(0,_ebmlHelpers.findEbml)(bytes,[_ebmlHelpers.EBML_TAGS.EBML,_ebmlHelpers.EBML_TAGS.DocType])[0];return(0,_byteHelpers.bytesMatch)(docType,CONSTANTS.webm);},mkv:function mkv(bytes){var docType=(0,_ebmlHelpers.findEbml)(bytes,[_ebmlHelpers.EBML_TAGS.EBML,_ebmlHelpers.EBML_TAGS.DocType])[0];return(0,_byteHelpers.bytesMatch)(docType,CONSTANTS.matroska);},mp4:function mp4(bytes){if(_isLikely["3gp"](bytes)||_isLikely.mov(bytes)){return false;}
if((0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.mp4,{offset:4})||(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.fmp4,{offset:4})){return true;}
if((0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.moof,{offset:4})||(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.moov,{offset:4})){return true;}},mov:function mov(bytes){return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.mov,{offset:4});},"3gp":function gp(bytes){return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS["3gp"],{offset:4});},ac3:function ac3(bytes){var offset=(0,_id3Helpers.getId3Offset)(bytes);return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.ac3,{offset});},ts:function ts(bytes){if(bytes.length<189&&bytes.length>=1){return bytes[0]===71;}
var i2=0;while(i2+188<bytes.length&&i2<188){if(bytes[i2]===71&&bytes[i2+188]===71){return true;}
i2+=1;}
return false;},flac:function flac(bytes){var offset=(0,_id3Helpers.getId3Offset)(bytes);return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.flac,{offset});},ogg:function ogg(bytes){return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.ogg);},avi:function avi(bytes){return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.riff)&&(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.avi,{offset:8});},wav:function wav(bytes){return(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.riff)&&(0,_byteHelpers.bytesMatch)(bytes,CONSTANTS.wav,{offset:8});},"h264":function h264(bytes){return(0,_nalHelpers.findH264Nal)(bytes,7,3).length;},"h265":function h265(bytes){return(0,_nalHelpers.findH265Nal)(bytes,[32,33],3).length;}};var isLikelyTypes=Object.keys(_isLikely).filter(function(t2){return t2!=="ts"&&t2!=="h264"&&t2!=="h265";}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(type){var isLikelyFn=_isLikely[type];_isLikely[type]=function(bytes){return isLikelyFn((0,_byteHelpers.toUint8)(bytes));};});var isLikely=_isLikely;exports.isLikely=isLikely;var detectContainerForBytes=function detectContainerForBytes2(bytes){bytes=(0,_byteHelpers.toUint8)(bytes);for(var i2=0;i2<isLikelyTypes.length;i2++){var type=isLikelyTypes[i2];if(isLikely[type](bytes)){return type;}}
return "";};exports.detectContainerForBytes=detectContainerForBytes;var isLikelyFmp4MediaSegment=function isLikelyFmp4MediaSegment2(bytes){return(0,_mp4Helpers.findBox)(bytes,["moof"]).length>0;};exports.isLikelyFmp4MediaSegment=isLikelyFmp4MediaSegment;}});var require_clock=__commonJS({"node_modules/mux.js/lib/utils/clock.js"(exports,module){var ONE_SECOND_IN_TS=9e4;var secondsToVideoTs;var secondsToAudioTs;var videoTsToSeconds;var audioTsToSeconds;var audioTsToVideoTs;var videoTsToAudioTs;var metadataTsToSeconds;secondsToVideoTs=function(seconds){return seconds*ONE_SECOND_IN_TS;};secondsToAudioTs=function(seconds,sampleRate){return seconds*sampleRate;};videoTsToSeconds=function(timestamp){return timestamp/ONE_SECOND_IN_TS;};audioTsToSeconds=function(timestamp,sampleRate){return timestamp/sampleRate;};audioTsToVideoTs=function(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate));};videoTsToAudioTs=function(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate);};metadataTsToSeconds=function(timestamp,timelineStartPts,keepOriginalTimestamps){return videoTsToSeconds(keepOriginalTimestamps?timestamp:timestamp-timelineStartPts);};module.exports={ONE_SECOND_IN_TS,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds};}});var require_getPrototypeOf=__commonJS({"node_modules/@babel/runtime/helpers/getPrototypeOf.js"(exports,module){function _getPrototypeOf(o2){module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf2(o3){return o3.__proto__||Object.getPrototypeOf(o3);},module.exports.__esModule=true,module.exports["default"]=module.exports;return _getPrototypeOf(o2);}
module.exports=_getPrototypeOf,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_isNativeFunction=__commonJS({"node_modules/@babel/runtime/helpers/isNativeFunction.js"(exports,module){function _isNativeFunction(fn2){return Function.toString.call(fn2).indexOf("[native code]")!==-1;}
module.exports=_isNativeFunction,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_wrapNativeSuper=__commonJS({"node_modules/@babel/runtime/helpers/wrapNativeSuper.js"(exports,module){var getPrototypeOf=require_getPrototypeOf();var setPrototypeOf=require_setPrototypeOf();var isNativeFunction=require_isNativeFunction();var construct=require_construct();function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():void 0;module.exports=_wrapNativeSuper=function _wrapNativeSuper2(Class2){if(Class2===null||!isNativeFunction(Class2))
return Class2;if(typeof Class2!=="function"){throw new TypeError("Super expression must either be null or a function");}
if(typeof _cache!=="undefined"){if(_cache.has(Class2))
return _cache.get(Class2);_cache.set(Class2,Wrapper);}
function Wrapper(){return construct(Class2,arguments,getPrototypeOf(this).constructor);}
Wrapper.prototype=Object.create(Class2.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return setPrototypeOf(Wrapper,Class2);},module.exports.__esModule=true,module.exports["default"]=module.exports;return _wrapNativeSuper(Class);}
module.exports=_wrapNativeSuper,module.exports.__esModule=true,module.exports["default"]=module.exports;}});var require_video_cjs=__commonJS({"node_modules/video.js/dist/video.cjs.js"(exports,module){"use strict";var window$1=require_window();var document2=require_document();var _extends=require_extends();var keycode=require_keycode();var _assertThisInitialized=require_assertThisInitialized();var _inheritsLoose=require_inheritsLoose();var safeParseTuple=require_tuple();var XHR=require_lib();var vtt=require_browser_index();var _construct=require_construct();var _inherits=require_inherits();var _resolveUrl=require_resolve_url();var m3u8Parser=require_m3u8_parser_cjs();var codecs_js=require_codecs();var mediaTypes_js=require_media_types();var byteHelpers=require_byte_helpers();var mpdParser=require_mpd_parser_cjs();var parseSidx=require_parse_sidx();var id3Helpers=require_id3_helpers();var containers=require_containers();var clock=require_clock();var _wrapNativeSuper=require_wrapNativeSuper();function _interopDefaultLegacy(e2){return e2&&typeof e2==="object"&&"default"in e2?e2:{"default":e2};}
var window__default=_interopDefaultLegacy(window$1);var document__default=_interopDefaultLegacy(document2);var _extends__default=_interopDefaultLegacy(_extends);var keycode__default=_interopDefaultLegacy(keycode);var _assertThisInitialized__default=_interopDefaultLegacy(_assertThisInitialized);var _inheritsLoose__default=_interopDefaultLegacy(_inheritsLoose);var safeParseTuple__default=_interopDefaultLegacy(safeParseTuple);var XHR__default=_interopDefaultLegacy(XHR);var vtt__default=_interopDefaultLegacy(vtt);var _construct__default=_interopDefaultLegacy(_construct);var _inherits__default=_interopDefaultLegacy(_inherits);var _resolveUrl__default=_interopDefaultLegacy(_resolveUrl);var parseSidx__default=_interopDefaultLegacy(parseSidx);var _wrapNativeSuper__default=_interopDefaultLegacy(_wrapNativeSuper);var version$5="7.21.4";var hooks_={};var hooks=function hooks2(type,fn2){hooks_[type]=hooks_[type]||[];if(fn2){hooks_[type]=hooks_[type].concat(fn2);}
return hooks_[type];};var hook=function hook2(type,fn2){hooks(type,fn2);};var removeHook=function removeHook2(type,fn2){var index=hooks(type).indexOf(fn2);if(index<=-1){return false;}
hooks_[type]=hooks_[type].slice();hooks_[type].splice(index,1);return true;};var hookOnce=function hookOnce2(type,fn2){hooks(type,[].concat(fn2).map(function(original){var wrapper=function wrapper2(){removeHook(type,wrapper2);return original.apply(void 0,arguments);};return wrapper;}));};var FullscreenApi={prefixed:true};var apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var specApi=apiMap[0];var browserApi;for(i2=0;i2<apiMap.length;i2++){if(apiMap[i2][1]in document__default["default"]){browserApi=apiMap[i2];break;}}
var i2;if(browserApi){for(_i2=0;_i2<browserApi.length;_i2++){FullscreenApi[specApi[_i2]]=browserApi[_i2];}
FullscreenApi.prefixed=browserApi[0]!==specApi[0];}
var _i2;var history2=[];var LogByTypeFactory=function LogByTypeFactory2(name,log2){return function(type,level,args){var lvl=log2.levels[level];var lvlRegExp=new RegExp("^("+lvl+")$");if(type!=="log"){args.unshift(type.toUpperCase()+":");}
args.unshift(name+":");if(history2){history2.push([].concat(args));var splice=history2.length-1e3;history2.splice(0,splice>0?splice:0);}
if(!window__default["default"].console){return;}
var fn2=window__default["default"].console[type];if(!fn2&&type==="debug"){fn2=window__default["default"].console.info||window__default["default"].console.log;}
if(!fn2||!lvl||!lvlRegExp.test(type)){return;}
fn2[Array.isArray(args)?"apply":"call"](window__default["default"].console,args);};};function createLogger$1(name){var level="info";var logByType;var log2=function log3(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
logByType("log",level,args);};logByType=LogByTypeFactory(name,log2);log2.createLogger=function(subname){return createLogger$1(name+": "+subname);};log2.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:level};log2.level=function(lvl){if(typeof lvl==="string"){if(!log2.levels.hasOwnProperty(lvl)){throw new Error('"'+lvl+'" in not a valid log level');}
level=lvl;}
return level;};log2.history=function(){return history2?[].concat(history2):[];};log2.history.filter=function(fname){return(history2||[]).filter(function(historyItem){return new RegExp(".*"+fname+".*").test(historyItem[0]);});};log2.history.clear=function(){if(history2){history2.length=0;}};log2.history.disable=function(){if(history2!==null){history2.length=0;history2=null;}};log2.history.enable=function(){if(history2===null){history2=[];}};log2.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
return logByType("error",level,args);};log2.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}
return logByType("warn",level,args);};log2.debug=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}
return logByType("debug",level,args);};return log2;}
var log$1=createLogger$1("VIDEOJS");var createLogger=log$1.createLogger;var toString=Object.prototype.toString;var keys=function keys2(object){return isObject(object)?Object.keys(object):[];};function each(object,fn2){keys(object).forEach(function(key){return fn2(object[key],key);});}
function reduce(object,fn2,initial){if(initial===void 0){initial=0;}
return keys(object).reduce(function(accum,key){return fn2(accum,object[key],key);},initial);}
function assign(target){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}
if(Object.assign){return _extends__default["default"].apply(void 0,[target].concat(sources));}
sources.forEach(function(source){if(!source){return;}
each(source,function(value,key){target[key]=value;});});return target;}
function isObject(value){return!!value&&typeof value==="object";}
function isPlain(value){return isObject(value)&&toString.call(value)==="[object Object]"&&value.constructor===Object;}
function computedStyle(el,prop){if(!el||!prop){return "";}
if(typeof window__default["default"].getComputedStyle==="function"){var computedStyleValue;try{computedStyleValue=window__default["default"].getComputedStyle(el);}catch(e2){return "";}
return computedStyleValue?computedStyleValue.getPropertyValue(prop)||computedStyleValue[prop]:"";}
return "";}
var USER_AGENT=window__default["default"].navigator&&window__default["default"].navigator.userAgent||"";var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;var IS_IPOD=/iPod/i.test(USER_AGENT);var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1];}
return null;}();var IS_ANDROID=/Android/i.test(USER_AGENT);var ANDROID_VERSION=function(){var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null;}
var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+"."+match[2]);}else if(major){return major;}
return null;}();var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;var IS_FIREFOX=/Firefox/i.test(USER_AGENT);var IS_EDGE=/Edg/i.test(USER_AGENT);var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2]);}
return null;}();var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version3=result&&parseFloat(result[1]);if(!version3&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){version3=11;}
return version3;}();var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;var IS_WINDOWS=/Windows/i.test(USER_AGENT);var TOUCH_ENABLED=Boolean(isReal()&&("ontouchstart"in window__default["default"]||window__default["default"].navigator.maxTouchPoints||window__default["default"].DocumentTouch&&window__default["default"].document instanceof window__default["default"].DocumentTouch));var IS_IPAD=/iPad/i.test(USER_AGENT)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(USER_AGENT);var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,IS_IPOD,IOS_VERSION,IS_ANDROID,ANDROID_VERSION,IS_NATIVE_ANDROID,IS_FIREFOX,IS_EDGE,IS_CHROME,CHROME_VERSION,IE_VERSION,IS_SAFARI,IS_WINDOWS,TOUCH_ENABLED,IS_IPAD,IS_IPHONE,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(str){return typeof str==="string"&&Boolean(str.trim());}
function throwIfWhitespace(str){if(str.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters");}}
function classRegExp(className){return new RegExp("(^|\\s)"+className+"($|\\s)");}
function isReal(){return document__default["default"]===window__default["default"].document;}
function isEl(value){return isObject(value)&&value.nodeType===1;}
function isInFrame(){try{return window__default["default"].parent!==window__default["default"].self;}catch(x2){return true;}}
function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return document__default["default"][method](null);}
if(isNonBlankString(context)){context=document__default["default"].querySelector(context);}
var ctx=isEl(context)?context:document__default["default"];return ctx[method]&&ctx[method](selector);};}
function createEl(tagName,properties,attributes,content){if(tagName===void 0){tagName="div";}
if(properties===void 0){properties={};}
if(attributes===void 0){attributes={};}
var el=document__default["default"].createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];if(propName.indexOf("aria-")!==-1||propName==="role"||propName==="type"){log$1.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+propName+" to "+val+"."));el.setAttribute(propName,val);}else if(propName==="textContent"){textContent(el,val);}else if(el[propName]!==val||propName==="tabIndex"){el[propName]=val;}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName]);});if(content){appendContent(el,content);}
return el;}
function textContent(el,text){if(typeof el.textContent==="undefined"){el.innerText=text;}else{el.textContent=text;}
return el;}
function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild);}else{parent.appendChild(child);}}
function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck);}
return classRegExp(classToCheck).test(element.className);}
function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd);}else if(!hasClass(element,classToAdd)){element.className=(element.className+" "+classToAdd).trim();}
return element;}
function removeClass(element,classToRemove){if(!element){log$1.warn("removeClass was called with an element that doesn't exist");return null;}
if(element.classList){element.classList.remove(classToRemove);}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c2){return c2!==classToRemove;}).join(" ");}
return element;}
function toggleClass(element,classToToggle,predicate){var has=hasClass(element,classToToggle);if(typeof predicate==="function"){predicate=predicate(element,classToToggle);}
if(typeof predicate!=="boolean"){predicate=!has;}
if(predicate===has){return;}
if(predicate){addClass(element,classToToggle);}else{removeClass(element,classToToggle);}
return element;}
function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==="undefined"||attrValue===false){el.removeAttribute(attrName);}else{el.setAttribute(attrName,attrValue===true?"":attrValue);}});}
function getAttributes(tag){var obj={};var knownBooleans=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i3=attrs.length-1;i3>=0;i3--){var attrName=attrs[i3].name;var attrVal=attrs[i3].value;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1){attrVal=attrVal!==null?true:false;}
obj[attrName]=attrVal;}}
return obj;}
function getAttribute2(el,attribute){return el.getAttribute(attribute);}
function setAttribute(el,attribute,value){el.setAttribute(attribute,value);}
function removeAttribute(el,attribute){el.removeAttribute(attribute);}
function blockTextSelection(){document__default["default"].body.focus();document__default["default"].onselectstart=function(){return false;};}
function unblockTextSelection(){document__default["default"].onselectstart=function(){return true;};}
function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};["bottom","height","left","right","top","width"].forEach(function(k2){if(rect[k2]!==void 0){result[k2]=rect[k2];}});if(!result.height){result.height=parseFloat(computedStyle(el,"height"));}
if(!result.width){result.width=parseFloat(computedStyle(el,"width"));}
return result;}}
function findPosition(el){if(!el||el&&!el.offsetParent){return{left:0,top:0,width:0,height:0};}
var width=el.offsetWidth;var height=el.offsetHeight;var left=0;var top=0;while(el.offsetParent&&el!==document__default["default"][FullscreenApi.fullscreenElement]){left+=el.offsetLeft;top+=el.offsetTop;el=el.offsetParent;}
return{left,top,width,height};}
function getPointerPosition(el,event3){var translated={x:0,y:0};if(IS_IOS){var item=el;while(item&&item.nodeName.toLowerCase()!=="html"){var transform2=computedStyle(item,"transform");if(/^matrix/.test(transform2)){var values=transform2.slice(7,-1).split(/,\s/).map(Number);translated.x+=values[4];translated.y+=values[5];}else if(/^matrix3d/.test(transform2)){var _values=transform2.slice(9,-1).split(/,\s/).map(Number);translated.x+=_values[12];translated.y+=_values[13];}
item=item.parentNode;}}
var position={};var boxTarget=findPosition(event3.target);var box=findPosition(el);var boxW=box.width;var boxH=box.height;var offsetY=event3.offsetY-(box.top-boxTarget.top);var offsetX=event3.offsetX-(box.left-boxTarget.left);if(event3.changedTouches){offsetX=event3.changedTouches[0].pageX-box.left;offsetY=event3.changedTouches[0].pageY+box.top;if(IS_IOS){offsetX-=translated.x;offsetY-=translated.y;}}
position.y=1-Math.max(0,Math.min(1,offsetY/boxH));position.x=Math.max(0,Math.min(1,offsetX/boxW));return position;}
function isTextNode(value){return isObject(value)&&value.nodeType===3;}
function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild);}
return el;}
function normalizeContent(content){if(typeof content==="function"){content=content();}
return(Array.isArray(content)?content:[content]).map(function(value){if(typeof value==="function"){value=value();}
if(isEl(value)||isTextNode(value)){return value;}
if(typeof value==="string"&&/\S/.test(value)){return document__default["default"].createTextNode(value);}}).filter(function(value){return value;});}
function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node);});return el;}
function insertContent(el,content){return appendContent(emptyEl(el),content);}
function isSingleLeftClick(event3){if(event3.button===void 0&&event3.buttons===void 0){return true;}
if(event3.button===0&&event3.buttons===void 0){return true;}
if(event3.type==="mouseup"&&event3.button===0&&event3.buttons===0){return true;}
if(event3.button!==0||event3.buttons!==1){return false;}
return true;}
var $2=createQuerier("querySelector");var $$=createQuerier("querySelectorAll");var Dom2=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass,setAttributes,getAttributes,getAttribute:getAttribute2,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$:$2,$$});var _windowLoaded=false;var videojs$1;var autoSetup=function autoSetup2(){if(videojs$1.options.autoSetup===false){return;}
var vids=Array.prototype.slice.call(document__default["default"].getElementsByTagName("video"));var audios=Array.prototype.slice.call(document__default["default"].getElementsByTagName("audio"));var divs=Array.prototype.slice.call(document__default["default"].getElementsByTagName("video-js"));var mediaEls=vids.concat(audios,divs);if(mediaEls&&mediaEls.length>0){for(var i3=0,e2=mediaEls.length;i3<e2;i3++){var mediaEl=mediaEls[i3];if(mediaEl&&mediaEl.getAttribute){if(mediaEl.player===void 0){var options=mediaEl.getAttribute("data-setup");if(options!==null){videojs$1(mediaEl);}}}else{autoSetupTimeout(1);break;}}}else if(!_windowLoaded){autoSetupTimeout(1);}};function autoSetupTimeout(wait,vjs){if(!isReal()){return;}
if(vjs){videojs$1=vjs;}
window__default["default"].setTimeout(autoSetup,wait);}
function setWindowLoaded(){_windowLoaded=true;window__default["default"].removeEventListener("load",setWindowLoaded);}
if(isReal()){if(document__default["default"].readyState==="complete"){setWindowLoaded();}else{window__default["default"].addEventListener("load",setWindowLoaded);}}
var createStyleElement=function createStyleElement2(className){var style2=document__default["default"].createElement("style");style2.className=className;return style2;};var setTextContent=function setTextContent2(el,content){if(el.styleSheet){el.styleSheet.cssText=content;}else{el.textContent=content;}};var _initialGuid=3;var _guid=_initialGuid;function newGUID(){return _guid++;}
var FakeWeakMap;if(!window__default["default"].WeakMap){FakeWeakMap=function(){function FakeWeakMap2(){this.vdata="vdata"+Math.floor(window__default["default"].performance&&window__default["default"].performance.now()||Date.now());this.data={};}
var _proto=FakeWeakMap2.prototype;_proto.set=function set2(key,value){var access=key[this.vdata]||newGUID();if(!key[this.vdata]){key[this.vdata]=access;}
this.data[access]=value;return this;};_proto.get=function get2(key){var access=key[this.vdata];if(access){return this.data[access];}
log$1("We have no data for this element",key);return void 0;};_proto.has=function has(key){var access=key[this.vdata];return access in this.data;};_proto["delete"]=function _delete(key){var access=key[this.vdata];if(access){delete this.data[access];delete key[this.vdata];}};return FakeWeakMap2;}();}
var DomData=window__default["default"].WeakMap?new WeakMap():new FakeWeakMap();function _cleanUpEvents(elem,type){if(!DomData.has(elem)){return;}
var data=DomData.get(elem);if(data.handlers[type].length===0){delete data.handlers[type];if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false);}else if(elem.detachEvent){elem.detachEvent("on"+type,data.dispatcher);}}
if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled;}
if(Object.getOwnPropertyNames(data).length===0){DomData["delete"](elem);}}
function _handleMultipleEvents(fn2,elem,types,callback){types.forEach(function(type){fn2(elem,type,callback);});}
function fixEvent(event3){if(event3.fixed_){return event3;}
function returnTrue(){return true;}
function returnFalse(){return false;}
if(!event3||!event3.isPropagationStopped||!event3.isImmediatePropagationStopped){var old=event3||window__default["default"].event;event3={};for(var key in old){if(key!=="layerX"&&key!=="layerY"&&key!=="keyLocation"&&key!=="webkitMovementX"&&key!=="webkitMovementY"&&key!=="path"){if(!(key==="returnValue"&&old.preventDefault)){event3[key]=old[key];}}}
if(!event3.target){event3.target=event3.srcElement||document__default["default"];}
if(!event3.relatedTarget){event3.relatedTarget=event3.fromElement===event3.target?event3.toElement:event3.fromElement;}
event3.preventDefault=function(){if(old.preventDefault){old.preventDefault();}
event3.returnValue=false;old.returnValue=false;event3.defaultPrevented=true;};event3.defaultPrevented=false;event3.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation();}
event3.cancelBubble=true;old.cancelBubble=true;event3.isPropagationStopped=returnTrue;};event3.isPropagationStopped=returnFalse;event3.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation();}
event3.isImmediatePropagationStopped=returnTrue;event3.stopPropagation();};event3.isImmediatePropagationStopped=returnFalse;if(event3.clientX!==null&&event3.clientX!==void 0){var doc=document__default["default"].documentElement;var body=document__default["default"].body;event3.pageX=event3.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event3.pageY=event3.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
event3.which=event3.charCode||event3.keyCode;if(event3.button!==null&&event3.button!==void 0){event3.button=event3.button&1?0:event3.button&4?1:event3.button&2?2:0;}}
event3.fixed_=true;return event3;}
var _supportsPassive;var supportsPassive=function supportsPassive2(){if(typeof _supportsPassive!=="boolean"){_supportsPassive=false;try{var opts=Object.defineProperty({},"passive",{get:function get2(){_supportsPassive=true;}});window__default["default"].addEventListener("test",null,opts);window__default["default"].removeEventListener("test",null,opts);}catch(e2){}}
return _supportsPassive;};var passiveEvents=["touchstart","touchmove"];function on2(elem,type,fn2){if(Array.isArray(type)){return _handleMultipleEvents(on2,elem,type,fn2);}
if(!DomData.has(elem)){DomData.set(elem,{});}
var data=DomData.get(elem);if(!data.handlers){data.handlers={};}
if(!data.handlers[type]){data.handlers[type]=[];}
if(!fn2.guid){fn2.guid=newGUID();}
data.handlers[type].push(fn2);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event3,hash){if(data.disabled){return;}
event3=fixEvent(event3);var handlers=data.handlers[event3.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m2=0,n2=handlersCopy.length;m2<n2;m2++){if(event3.isImmediatePropagationStopped()){break;}else{try{handlersCopy[m2].call(elem,event3,hash);}catch(e2){log$1.error(e2);}}}}};}
if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(supportsPassive()&&passiveEvents.indexOf(type)>-1){options={passive:true};}
elem.addEventListener(type,data.dispatcher,options);}else if(elem.attachEvent){elem.attachEvent("on"+type,data.dispatcher);}}}
function off(elem,type,fn2){if(!DomData.has(elem)){return;}
var data=DomData.get(elem);if(!data.handlers){return;}
if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn2);}
var removeType=function removeType2(el,t3){data.handlers[t3]=[];_cleanUpEvents(el,t3);};if(type===void 0){for(var t2 in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t2)){removeType(elem,t2);}}
return;}
var handlers=data.handlers[type];if(!handlers){return;}
if(!fn2){removeType(elem,type);return;}
if(fn2.guid){for(var n2=0;n2<handlers.length;n2++){if(handlers[n2].guid===fn2.guid){handlers.splice(n2--,1);}}}
_cleanUpEvents(elem,type);}
function trigger(elem,event3,hash){var elemData=DomData.has(elem)?DomData.get(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event3==="string"){event3={type:event3,target:elem};}else if(!event3.target){event3.target=elem;}
event3=fixEvent(event3);if(elemData.dispatcher){elemData.dispatcher.call(elem,event3,hash);}
if(parent&&!event3.isPropagationStopped()&&event3.bubbles===true){trigger.call(null,parent,event3,hash);}else if(!parent&&!event3.defaultPrevented&&event3.target&&event3.target[event3.type]){if(!DomData.has(event3.target)){DomData.set(event3.target,{});}
var targetData=DomData.get(event3.target);if(event3.target[event3.type]){targetData.disabled=true;if(typeof event3.target[event3.type]==="function"){event3.target[event3.type]();}
targetData.disabled=false;}}
return!event3.defaultPrevented;}
function one(elem,type,fn2){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn2);}
var func=function func2(){off(elem,type,func2);fn2.apply(this,arguments);};func.guid=fn2.guid=fn2.guid||newGUID();on2(elem,type,func);}
function any(elem,type,fn2){var func=function func2(){off(elem,type,func2);fn2.apply(this,arguments);};func.guid=fn2.guid=fn2.guid||newGUID();on2(elem,type,func);}
var Events=Object.freeze({__proto__:null,fixEvent,on:on2,off,trigger,one,any});var UPDATE_REFRESH_INTERVAL=30;var bind=function bind2(context,fn2,uid){if(!fn2.guid){fn2.guid=newGUID();}
var bound=fn2.bind(context);bound.guid=uid?uid+"_"+fn2.guid:fn2.guid;return bound;};var throttle=function throttle2(fn2,wait){var last=window__default["default"].performance.now();var throttled=function throttled2(){var now2=window__default["default"].performance.now();if(now2-last>=wait){fn2.apply(void 0,arguments);last=now2;}};return throttled;};var debounce=function debounce2(func,wait,immediate,context){if(context===void 0){context=window__default["default"];}
var timeout;var cancel=function cancel2(){context.clearTimeout(timeout);timeout=null;};var debounced=function debounced2(){var self2=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self2,args);}};if(!timeout&&immediate){func.apply(self2,args);}
context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait);};debounced.cancel=cancel;return debounced;};var EventTarget$2=function EventTarget2(){};EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.on=function(type,fn2){var ael=this.addEventListener;this.addEventListener=function(){};on2(this,type,fn2);this.addEventListener=ael;};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.off=function(type,fn2){off(this,type,fn2);};EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.one=function(type,fn2){var ael=this.addEventListener;this.addEventListener=function(){};one(this,type,fn2);this.addEventListener=ael;};EventTarget$2.prototype.any=function(type,fn2){var ael=this.addEventListener;this.addEventListener=function(){};any(this,type,fn2);this.addEventListener=ael;};EventTarget$2.prototype.trigger=function(event3){var type=event3.type||event3;if(typeof event3==="string"){event3={type};}
event3=fixEvent(event3);if(this.allowedEvents_[type]&&this["on"+type]){this["on"+type](event3);}
trigger(this,event3);};EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;var EVENT_MAP;EventTarget$2.prototype.queueTrigger=function(event3){var _this=this;if(!EVENT_MAP){EVENT_MAP=new Map();}
var type=event3.type||event3;var map=EVENT_MAP.get(this);if(!map){map=new Map();EVENT_MAP.set(this,map);}
var oldTimeout=map.get(type);map["delete"](type);window__default["default"].clearTimeout(oldTimeout);var timeout=window__default["default"].setTimeout(function(){map["delete"](type);if(map.size===0){map=null;EVENT_MAP["delete"](_this);}
_this.trigger(event3);},0);map.set(type,timeout);};var objName=function objName2(obj){if(typeof obj.name==="function"){return obj.name();}
if(typeof obj.name==="string"){return obj.name;}
if(obj.name_){return obj.name_;}
if(obj.constructor&&obj.constructor.name){return obj.constructor.name;}
return typeof obj;};var isEvented=function isEvented2(object){return object instanceof EventTarget$2||!!object.eventBusEl_&&["on","one","off","trigger"].every(function(k2){return typeof object[k2]==="function";});};var addEventedCallback=function addEventedCallback2(target,callback){if(isEvented(target)){callback();}else{if(!target.eventedCallbacks){target.eventedCallbacks=[];}
target.eventedCallbacks.push(callback);}};var isValidEventType=function isValidEventType2(type){return typeof type==="string"&&/\S/.test(type)||Array.isArray(type)&&!!type.length;};var validateTarget=function validateTarget2(target,obj,fnName){if(!target||!target.nodeName&&!isEvented(target)){throw new Error("Invalid target for "+objName(obj)+"#"+fnName+"; must be a DOM node or evented object.");}};var validateEventType=function validateEventType2(type,obj,fnName){if(!isValidEventType(type)){throw new Error("Invalid event type for "+objName(obj)+"#"+fnName+"; must be a non-empty string or array.");}};var validateListener=function validateListener2(listener,obj,fnName){if(typeof listener!=="function"){throw new Error("Invalid listener for "+objName(obj)+"#"+fnName+"; must be a function.");}};var normalizeListenArgs=function normalizeListenArgs2(self2,args,fnName){var isTargetingSelf=args.length<3||args[0]===self2||args[0]===self2.eventBusEl_;var target;var type;var listener;if(isTargetingSelf){target=self2.eventBusEl_;if(args.length>=3){args.shift();}
type=args[0];listener=args[1];}else{target=args[0];type=args[1];listener=args[2];}
validateTarget(target,self2,fnName);validateEventType(type,self2,fnName);validateListener(listener,self2,fnName);listener=bind(self2,listener);return{isTargetingSelf,target,type,listener};};var listen=function listen2(target,method,type,listener){validateTarget(target,target,method);if(target.nodeName){Events[method](target,type,listener);}else{target[method](type,listener);}};var EventedMixin={on:function on3(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var _normalizeListenArgs=normalizeListenArgs(this,args,"on"),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,"on",type,listener);if(!isTargetingSelf){var removeListenerOnDispose=function removeListenerOnDispose2(){return _this.off(target,type,listener);};removeListenerOnDispose.guid=listener.guid;var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose2(){return _this.off("dispose",removeListenerOnDispose);};removeRemoverOnTargetDispose.guid=listener.guid;listen(this,"on","dispose",removeListenerOnDispose);listen(target,"on","dispose",removeRemoverOnTargetDispose);}},one:function one2(){var _this2=this;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
var _normalizeListenArgs2=normalizeListenArgs(this,args,"one"),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;if(isTargetingSelf){listen(target,"one",type,listener);}else{var wrapper=function wrapper2(){_this2.off(target,type,wrapper2);for(var _len3=arguments.length,largs=new Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3];}
listener.apply(null,largs);};wrapper.guid=listener.guid;listen(target,"one",type,wrapper);}},any:function any2(){var _this3=this;for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}
var _normalizeListenArgs3=normalizeListenArgs(this,args,"any"),isTargetingSelf=_normalizeListenArgs3.isTargetingSelf,target=_normalizeListenArgs3.target,type=_normalizeListenArgs3.type,listener=_normalizeListenArgs3.listener;if(isTargetingSelf){listen(target,"any",type,listener);}else{var wrapper=function wrapper2(){_this3.off(target,type,wrapper2);for(var _len5=arguments.length,largs=new Array(_len5),_key5=0;_key5<_len5;_key5++){largs[_key5]=arguments[_key5];}
listener.apply(null,largs);};wrapper.guid=listener.guid;listen(target,"any",type,wrapper);}},off:function off$1(targetOrType,typeOrListener,listener){if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener);}else{var target=targetOrType;var type=typeOrListener;validateTarget(target,this,"off");validateEventType(type,this,"off");validateListener(listener,this,"off");listener=bind(this,listener);this.off("dispose",listener);if(target.nodeName){off(target,type,listener);off(target,"dispose",listener);}else if(isEvented(target)){target.off(type,listener);target.off("dispose",listener);}}},trigger:function trigger$1(event3,hash){validateTarget(this.eventBusEl_,this,"trigger");var type=event3&&typeof event3!=="string"?event3.type:event3;if(!isValidEventType(type)){var error2="Invalid event type for "+objName(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(event3){(this.log||log$1).error(error2);}else{throw new Error(error2);}}
return trigger(this.eventBusEl_,event3,hash);}};function evented(target,options){if(options===void 0){options={};}
var _options=options,eventBusKey=_options.eventBusKey;if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error('The eventBusKey "'+eventBusKey+'" does not refer to an element.');}
target.eventBusEl_=target[eventBusKey];}else{target.eventBusEl_=createEl("span",{className:"vjs-event-bus"});}
assign(target,EventedMixin);if(target.eventedCallbacks){target.eventedCallbacks.forEach(function(callback){callback();});}
target.on("dispose",function(){target.off();[target,target.el_,target.eventBusEl_].forEach(function(val){if(val&&DomData.has(val)){DomData["delete"](val);}});window__default["default"].setTimeout(function(){target.eventBusEl_=null;},0);});return target;}
var StatefulMixin={state:{},setState:function setState(stateUpdates){var _this=this;if(typeof stateUpdates==="function"){stateUpdates=stateUpdates();}
var changes;each(stateUpdates,function(value,key){if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value};}
_this.state[key]=value;});if(changes&&isEvented(this)){this.trigger({changes,type:"statechanged"});}
return changes;}};function stateful(target,defaultState){assign(target,StatefulMixin);target.state=assign({},target.state,defaultState);if(typeof target.handleStateChanged==="function"&&isEvented(target)){target.on("statechanged",target.handleStateChanged);}
return target;}
var toLowerCase=function toLowerCase2(string){if(typeof string!=="string"){return string;}
return string.replace(/./,function(w2){return w2.toLowerCase();});};var toTitleCase$1=function toTitleCase3(string){if(typeof string!=="string"){return string;}
return string.replace(/./,function(w2){return w2.toUpperCase();});};var titleCaseEquals=function titleCaseEquals2(str1,str2){return toTitleCase$1(str1)===toTitleCase$1(str2);};function mergeOptions$3(){var result={};for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key];}
sources.forEach(function(source){if(!source){return;}
each(source,function(value,key){if(!isPlain(value)){result[key]=value;return;}
if(!isPlain(result[key])){result[key]={};}
result[key]=mergeOptions$3(result[key],value);});});return result;}
var MapSham=function(){function MapSham2(){this.map_={};}
var _proto=MapSham2.prototype;_proto.has=function has(key){return key in this.map_;};_proto["delete"]=function _delete(key){var has=this.has(key);delete this.map_[key];return has;};_proto.set=function set2(key,value){this.map_[key]=value;return this;};_proto.forEach=function forEach(callback,thisArg){for(var key in this.map_){callback.call(thisArg,this.map_[key],key,this);}};return MapSham2;}();var Map$1=window__default["default"].Map?window__default["default"].Map:MapSham;var SetSham=function(){function SetSham2(){this.set_={};}
var _proto=SetSham2.prototype;_proto.has=function has(key){return key in this.set_;};_proto["delete"]=function _delete(key){var has=this.has(key);delete this.set_[key];return has;};_proto.add=function add2(key){this.set_[key]=1;return this;};_proto.forEach=function forEach(callback,thisArg){for(var key in this.set_){callback.call(thisArg,key,key,this);}};return SetSham2;}();var Set$1=window__default["default"].Set?window__default["default"].Set:SetSham;var Component$1=function(){function Component2(player,options,ready){var _this=this;if(!player&&this.play){this.player_=player=this;}else{this.player_=player;}
this.isDisposed_=false;this.parentComponent_=null;this.options_=mergeOptions$3({},this.options_);options=this.options_=mergeOptions$3(this.options_,options);this.id_=options.id||options.el&&options.el.id;if(!this.id_){var id2=player&&player.id&&player.id()||"no_player";this.id_=id2+"_component_"+newGUID();}
this.name_=options.name||null;if(options.el){this.el_=options.el;}else if(options.createEl!==false){this.el_=this.createEl();}
if(options.className&&this.el_){options.className.split(" ").forEach(function(c2){return _this.addClass(c2);});}
if(options.evented!==false){evented(this,{eventBusKey:this.el_?"el_":null});this.handleLanguagechange=this.handleLanguagechange.bind(this);this.on(this.player_,"languagechange",this.handleLanguagechange);}
stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new Set$1();this.setIntervalIds_=new Set$1();this.rafIds_=new Set$1();this.namedRafs_=new Map$1();this.clearingTimersOnDispose_=false;if(options.initChildren!==false){this.initChildren();}
this.ready(ready);if(options.reportTouchActivity!==false){this.enableTouchActivity();}}
var _proto=Component2.prototype;_proto.dispose=function dispose(options){if(options===void 0){options={};}
if(this.isDisposed_){return;}
if(this.readyQueue_){this.readyQueue_.length=0;}
this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var i3=this.children_.length-1;i3>=0;i3--){if(this.children_[i3].dispose){this.children_[i3].dispose();}}}
this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){if(options.restoreEl){this.el_.parentNode.replaceChild(options.restoreEl,this.el_);}else{this.el_.parentNode.removeChild(this.el_);}}
this.el_=null;}
this.player_=null;};_proto.isDisposed=function isDisposed(){return Boolean(this.isDisposed_);};_proto.player=function player(){return this.player_;};_proto.options=function options(obj){if(!obj){return this.options_;}
this.options_=mergeOptions$3(this.options_,obj);return this.options_;};_proto.el=function el(){return this.el_;};_proto.createEl=function createEl$1(tagName,properties,attributes){return createEl(tagName,properties,attributes);};_proto.localize=function localize(string,tokens,defaultValue){if(defaultValue===void 0){defaultValue=string;}
var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split("-")[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string];}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string];}
if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==="undefined"){ret=match;}
return ret;});}
return localizedString;};_proto.handleLanguagechange=function handleLanguagechange(){};_proto.contentEl=function contentEl(){return this.contentEl_||this.el_;};_proto.id=function id2(){return this.id_;};_proto.name=function name(){return this.name_;};_proto.children=function children(){return this.children_;};_proto.getChildById=function getChildById(id2){return this.childIndex_[id2];};_proto.getChild=function getChild(name){if(!name){return;}
return this.childNameIndex_[name];};_proto.getDescendant=function getDescendant(){for(var _len=arguments.length,names=new Array(_len),_key=0;_key<_len;_key++){names[_key]=arguments[_key];}
names=names.reduce(function(acc,n2){return acc.concat(n2);},[]);var currentChild=this;for(var i3=0;i3<names.length;i3++){currentChild=currentChild.getChild(names[i3]);if(!currentChild||!currentChild.getChild){return;}}
return currentChild;};_proto.addChild=function addChild(child,options,index){if(options===void 0){options={};}
if(index===void 0){index=this.children_.length;}
var component;var componentName;if(typeof child==="string"){componentName=toTitleCase$1(child);var componentClassName=options.componentClass||componentName;options.name=componentName;var ComponentClass=Component2.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist");}
if(typeof ComponentClass!=="function"){return null;}
component=new ComponentClass(this.player_||this,options);}else{component=child;}
if(component.parentComponent_){component.parentComponent_.removeChild(component);}
this.children_.splice(index,0,component);component.parentComponent_=this;if(typeof component.id==="function"){this.childIndex_[component.id()]=component;}
componentName=componentName||component.name&&toTitleCase$1(component.name());if(componentName){this.childNameIndex_[componentName]=component;this.childNameIndex_[toLowerCase(componentName)]=component;}
if(typeof component.el==="function"&&component.el()){var refNode=null;if(this.children_[index+1]){if(this.children_[index+1].el_){refNode=this.children_[index+1].el_;}else if(isEl(this.children_[index+1])){refNode=this.children_[index+1];}}
this.contentEl().insertBefore(component.el(),refNode);}
return component;};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component);}
if(!component||!this.children_){return;}
var childFound=false;for(var i3=this.children_.length-1;i3>=0;i3--){if(this.children_[i3]===component){childFound=true;this.children_.splice(i3,1);break;}}
if(!childFound){return;}
component.parentComponent_=null;this.childIndex_[component.id()]=null;this.childNameIndex_[toTitleCase$1(component.name())]=null;this.childNameIndex_[toLowerCase(component.name())]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el());}};_proto.initChildren=function initChildren(){var _this2=this;var children=this.options_.children;if(children){var parentOptions=this.options_;var handleAdd=function handleAdd2(child){var name=child.name;var opts=child.opts;if(parentOptions[name]!==void 0){opts=parentOptions[name];}
if(opts===false){return;}
if(opts===true){opts={};}
opts.playerOptions=_this2.options_.playerOptions;var newChild=_this2.addChild(name,opts);if(newChild){_this2[name]=newChild;}};var workingChildren;var Tech2=Component2.getComponent("Tech");if(Array.isArray(children)){workingChildren=children;}else{workingChildren=Object.keys(children);}
workingChildren.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==="string"){return child===wchild;}
return child===wchild.name;});})).map(function(child){var name;var opts;if(typeof child==="string"){name=child;opts=children[name]||_this2.options_[name]||{};}else{name=child.name;opts=child;}
return{name,opts};}).filter(function(child){var c2=Component2.getComponent(child.opts.componentClass||toTitleCase$1(child.name));return c2&&!Tech2.isTech(c2);}).forEach(handleAdd);}};_proto.buildCSSClass=function buildCSSClass(){return "";};_proto.ready=function ready(fn2,sync){if(sync===void 0){sync=false;}
if(!fn2){return;}
if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn2);return;}
if(sync){fn2.call(this);}else{this.setTimeout(fn2,1);}};_proto.triggerReady=function triggerReady(){this.isReady_=true;this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn2){fn2.call(this);},this);}
this.trigger("ready");},1);};_proto.$=function $$1(selector,context){return $2(selector,context||this.contentEl());};_proto.$$=function $$$1(selector,context){return $$(selector,context||this.contentEl());};_proto.hasClass=function hasClass$1(classToCheck){return hasClass(this.el_,classToCheck);};_proto.addClass=function addClass$1(classToAdd){addClass(this.el_,classToAdd);};_proto.removeClass=function removeClass$1(classToRemove){removeClass(this.el_,classToRemove);};_proto.toggleClass=function toggleClass$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate);};_proto.show=function show(){this.removeClass("vjs-hidden");};_proto.hide=function hide(){this.addClass("vjs-hidden");};_proto.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing");};_proto.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing");};_proto.getAttribute=function getAttribute$1(attribute){return getAttribute2(this.el_,attribute);};_proto.setAttribute=function setAttribute$1(attribute,value){setAttribute(this.el_,attribute,value);};_proto.removeAttribute=function removeAttribute$1(attribute){removeAttribute(this.el_,attribute);};_proto.width=function width(num,skipListeners){return this.dimension("width",num,skipListeners);};_proto.height=function height(num,skipListeners){return this.dimension("height",num,skipListeners);};_proto.dimensions=function dimensions(width,height){this.width(width,true);this.height(height);};_proto.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==void 0){if(num===null||num!==num){num=0;}
if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1){this.el_.style[widthOrHeight]=num;}else if(num==="auto"){this.el_.style[widthOrHeight]="";}else{this.el_.style[widthOrHeight]=num+"px";}
if(!skipListeners){this.trigger("componentresize");}
return;}
if(!this.el_){return 0;}
var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10);}
return parseInt(this.el_["offset"+toTitleCase$1(widthOrHeight)],10);};_proto.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=="width"&&widthOrHeight!=="height"){throw new Error("currentDimension only accepts width or height value");}
computedWidthOrHeight=computedStyle(this.el_,widthOrHeight);computedWidthOrHeight=parseFloat(computedWidthOrHeight);if(computedWidthOrHeight===0||isNaN(computedWidthOrHeight)){var rule="offset"+toTitleCase$1(widthOrHeight);computedWidthOrHeight=this.el_[rule];}
return computedWidthOrHeight;};_proto.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")};};_proto.currentWidth=function currentWidth(){return this.currentDimension("width");};_proto.currentHeight=function currentHeight(){return this.currentDimension("height");};_proto.focus=function focus(){this.el_.focus();};_proto.blur=function blur(){this.el_.blur();};_proto.handleKeyDown=function handleKeyDown(event3){if(this.player_){if(!keycode__default["default"].isEventKey(event3,"Tab")){event3.stopPropagation();}
this.player_.handleKeyDown(event3);}};_proto.handleKeyPress=function handleKeyPress(event3){this.handleKeyDown(event3);};_proto.emitTapEvents=function emitTapEvents(){var touchStart=0;var firstTouch=null;var tapMovementThreshold=10;var touchTimeThreshold=200;var couldBeTap;this.on("touchstart",function(event3){if(event3.touches.length===1){firstTouch={pageX:event3.touches[0].pageX,pageY:event3.touches[0].pageY};touchStart=window__default["default"].performance.now();couldBeTap=true;}});this.on("touchmove",function(event3){if(event3.touches.length>1){couldBeTap=false;}else if(firstTouch){var xdiff=event3.touches[0].pageX-firstTouch.pageX;var ydiff=event3.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false;}}});var noTap=function noTap2(){couldBeTap=false;};this.on("touchleave",noTap);this.on("touchcancel",noTap);this.on("touchend",function(event3){firstTouch=null;if(couldBeTap===true){var touchTime=window__default["default"].performance.now()-touchStart;if(touchTime<touchTimeThreshold){event3.preventDefault();this.trigger("tap");}}});};_proto.enableTouchActivity=function enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity){return;}
var report=bind(this.player(),this.player().reportUserActivity);var touchHolding;this.on("touchstart",function(){report();this.clearInterval(touchHolding);touchHolding=this.setInterval(report,250);});var touchEnd=function touchEnd2(event3){report();this.clearInterval(touchHolding);};this.on("touchmove",report);this.on("touchend",touchEnd);this.on("touchcancel",touchEnd);};_proto.setTimeout=function setTimeout2(fn2,timeout){var _this3=this;var timeoutId;fn2=bind(this,fn2);this.clearTimersOnDispose_();timeoutId=window__default["default"].setTimeout(function(){if(_this3.setTimeoutIds_.has(timeoutId)){_this3.setTimeoutIds_["delete"](timeoutId);}
fn2();},timeout);this.setTimeoutIds_.add(timeoutId);return timeoutId;};_proto.clearTimeout=function clearTimeout2(timeoutId){if(this.setTimeoutIds_.has(timeoutId)){this.setTimeoutIds_["delete"](timeoutId);window__default["default"].clearTimeout(timeoutId);}
return timeoutId;};_proto.setInterval=function setInterval2(fn2,interval){fn2=bind(this,fn2);this.clearTimersOnDispose_();var intervalId=window__default["default"].setInterval(fn2,interval);this.setIntervalIds_.add(intervalId);return intervalId;};_proto.clearInterval=function clearInterval2(intervalId){if(this.setIntervalIds_.has(intervalId)){this.setIntervalIds_["delete"](intervalId);window__default["default"].clearInterval(intervalId);}
return intervalId;};_proto.requestAnimationFrame=function requestAnimationFrame2(fn2){var _this4=this;if(!this.supportsRaf_){return this.setTimeout(fn2,1e3/60);}
this.clearTimersOnDispose_();var id2;fn2=bind(this,fn2);id2=window__default["default"].requestAnimationFrame(function(){if(_this4.rafIds_.has(id2)){_this4.rafIds_["delete"](id2);}
fn2();});this.rafIds_.add(id2);return id2;};_proto.requestNamedAnimationFrame=function requestNamedAnimationFrame(name,fn2){var _this5=this;if(this.namedRafs_.has(name)){return;}
this.clearTimersOnDispose_();fn2=bind(this,fn2);var id2=this.requestAnimationFrame(function(){fn2();if(_this5.namedRafs_.has(name)){_this5.namedRafs_["delete"](name);}});this.namedRafs_.set(name,id2);return name;};_proto.cancelNamedAnimationFrame=function cancelNamedAnimationFrame(name){if(!this.namedRafs_.has(name)){return;}
this.cancelAnimationFrame(this.namedRafs_.get(name));this.namedRafs_["delete"](name);};_proto.cancelAnimationFrame=function cancelAnimationFrame2(id2){if(!this.supportsRaf_){return this.clearTimeout(id2);}
if(this.rafIds_.has(id2)){this.rafIds_["delete"](id2);window__default["default"].cancelAnimationFrame(id2);}
return id2;};_proto.clearTimersOnDispose_=function clearTimersOnDispose_(){var _this6=this;if(this.clearingTimersOnDispose_){return;}
this.clearingTimersOnDispose_=true;this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(_ref){var idName=_ref[0],cancelName=_ref[1];_this6[idName].forEach(function(val,key){return _this6[cancelName](key);});});_this6.clearingTimersOnDispose_=false;});};Component2.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=="string"||!name){throw new Error('Illegal component name, "'+name+'"; must be a non-empty string.');}
var Tech2=Component2.getComponent("Tech");var isTech=Tech2&&Tech2.isTech(ComponentToRegister);var isComp=Component2===ComponentToRegister||Component2.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason;if(isTech){reason="techs must be registered using Tech.registerTech()";}else{reason="must be a Component subclass";}
throw new Error('Illegal component, "'+name+'"; '+reason+".");}
name=toTitleCase$1(name);if(!Component2.components_){Component2.components_={};}
var Player2=Component2.getComponent("Player");if(name==="Player"&&Player2&&Player2.players){var players=Player2.players;var playerNames=Object.keys(players);if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname];}).every(Boolean)){throw new Error("Can not register Player component after player has been created.");}}
Component2.components_[name]=ComponentToRegister;Component2.components_[toLowerCase(name)]=ComponentToRegister;return ComponentToRegister;};Component2.getComponent=function getComponent(name){if(!name||!Component2.components_){return;}
return Component2.components_[name];};return Component2;}();Component$1.prototype.supportsRaf_=typeof window__default["default"].requestAnimationFrame==="function"&&typeof window__default["default"].cancelAnimationFrame==="function";Component$1.registerComponent("Component",Component$1);function rangeCheck(fnName,index,maxIndex){if(typeof index!=="number"||index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is non-numeric or out of bounds (0-"+maxIndex+").");}}
function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex];}
function createTimeRangesObj(ranges){var timeRangesObj;if(ranges===void 0||ranges.length===0){timeRangesObj={length:0,start:function start3(){throw new Error("This TimeRanges object is empty");},end:function end(){throw new Error("This TimeRanges object is empty");}};}else{timeRangesObj={length:ranges.length,start:getRange.bind(null,"start",0,ranges),end:getRange.bind(null,"end",1,ranges)};}
if(window__default["default"].Symbol&&window__default["default"].Symbol.iterator){timeRangesObj[window__default["default"].Symbol.iterator]=function(){return(ranges||[]).values();};}
return timeRangesObj;}
function createTimeRanges(start3,end){if(Array.isArray(start3)){return createTimeRangesObj(start3);}else if(start3===void 0||end===void 0){return createTimeRangesObj();}
return createTimeRangesObj([[start3,end]]);}
function bufferedPercent(buffered,duration2){var bufferedDuration=0;var start3;var end;if(!duration2){return 0;}
if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}
for(var i3=0;i3<buffered.length;i3++){start3=buffered.start(i3);end=buffered.end(i3);if(end>duration2){end=duration2;}
bufferedDuration+=end-start3;}
return bufferedDuration/duration2;}
function MediaError(value){if(value instanceof MediaError){return value;}
if(typeof value==="number"){this.code=value;}else if(typeof value==="string"){this.message=value;}else if(isObject(value)){if(typeof value.code==="number"){this.code=value.code;}
assign(this,value);}
if(!this.message){this.message=MediaError.defaultMessages[this.code]||"";}}
MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;}
var errNum;function isPromise(value){return value!==void 0&&value!==null&&typeof value.then==="function";}
function silencePromise(value){if(isPromise(value)){value.then(null,function(e2){});}}
var trackToJson_=function trackToJson_2(track){var ret=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(acc,prop,i3){if(track[prop]){acc[prop]=track[prop];}
return acc;},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id};})});return ret;};var textTracksToJson=function textTracksToJson2(tech){var trackEls=tech.$$("track");var trackObjs=Array.prototype.map.call(trackEls,function(t2){return t2.track;});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src;}
return json;});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1;}).map(trackToJson_));};var jsonToTextTracks=function jsonToTextTracks2(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue);});}});return tech.textTracks();};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};var MODAL_CLASS_NAME="vjs-modal-dialog";var ModalDialog=function(_Component){_inheritsLoose__default["default"](ModalDialog2,_Component);function ModalDialog2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleKeyDown_=function(e2){return _this.handleKeyDown(e2);};_this.close_=function(e2){return _this.close(e2);};_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);_this.contentEl_=createEl("div",{className:MODAL_CLASS_NAME+"-content"},{role:"document"});_this.descEl_=createEl("p",{className:MODAL_CLASS_NAME+"-description vjs-control-text",id:_this.el().getAttribute("aria-describedby")});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this;}
var _proto=ModalDialog2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),"role":"dialog"});};_proto.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this);};_proto.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this);};_proto.label=function label(){return this.localize(this.options_.label||"Modal Window");};_proto.description=function description(){var desc=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){desc+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.");}
return desc;};_proto.open=function open(){if(!this.opened_){var player=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}
this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause();}
this.on("keydown",this.handleKeyDown_);this.hadControls_=player.controls();player.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true;}};_proto.opened=function opened(value){if(typeof value==="boolean"){this[value?"open":"close"]();}
return this.opened_;};_proto.close=function close(){if(!this.opened_){return;}
var player=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play();}
this.off("keydown",this.handleKeyDown_);if(this.hadControls_){player.controls(true);}
this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose();}};_proto.closeable=function closeable(value){if(typeof value==="boolean"){var closeable2=this.closeable_=!!value;var close=this.getChild("closeButton");if(closeable2&&!close){var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=temp;this.on(close,"close",this.close_);}
if(!closeable2&&close){this.off(close,"close",this.close_);this.removeChild(close);close.dispose();}}
return this.closeable_;};_proto.fill=function fill(){this.fillWith(this.content());};_proto.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);this.trigger("modalfill");if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl);}else{parentEl.appendChild(contentEl);}
var closeButton=this.getChild("closeButton");if(closeButton){parentEl.appendChild(closeButton.el_);}};_proto.empty=function empty(){this.trigger("beforemodalempty");emptyEl(this.contentEl());this.trigger("modalempty");};_proto.content=function content(value){if(typeof value!=="undefined"){this.content_=value;}
return this.content_;};_proto.conditionalFocus_=function conditionalFocus_(){var activeEl=document__default["default"].activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();}};_proto.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null;}};_proto.handleKeyDown=function handleKeyDown(event3){event3.stopPropagation();if(keycode__default["default"].isEventKey(event3,"Escape")&&this.closeable()){event3.preventDefault();this.close();return;}
if(!keycode__default["default"].isEventKey(event3,"Tab")){return;}
var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(":focus");var focusIndex;for(var i3=0;i3<focusableEls.length;i3++){if(activeEl===focusableEls[i3]){focusIndex=i3;break;}}
if(document__default["default"].activeElement===this.el_){focusIndex=0;}
if(event3.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event3.preventDefault();}else if(!event3.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event3.preventDefault();}};_proto.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll("*");return Array.prototype.filter.call(allChildren,function(child){return(child instanceof window__default["default"].HTMLAnchorElement||child instanceof window__default["default"].HTMLAreaElement)&&child.hasAttribute("href")||(child instanceof window__default["default"].HTMLInputElement||child instanceof window__default["default"].HTMLSelectElement||child instanceof window__default["default"].HTMLTextAreaElement||child instanceof window__default["default"].HTMLButtonElement)&&!child.hasAttribute("disabled")||child instanceof window__default["default"].HTMLIFrameElement||child instanceof window__default["default"].HTMLObjectElement||child instanceof window__default["default"].HTMLEmbedElement||child.hasAttribute("tabindex")&&child.getAttribute("tabindex")!==-1||child.hasAttribute("contenteditable");});};return ModalDialog2;}(Component$1);ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component$1.registerComponent("ModalDialog",ModalDialog);var TrackList=function(_EventTarget){_inheritsLoose__default["default"](TrackList2,_EventTarget);function TrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}
_this=_EventTarget.call(this)||this;_this.tracks_=[];Object.defineProperty(_assertThisInitialized__default["default"](_this),"length",{get:function get2(){return this.tracks_.length;}});for(var i3=0;i3<tracks.length;i3++){_this.addTrack(tracks[i3]);}
return _this;}
var _proto=TrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;var index=this.tracks_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get2(){return this.tracks_[index];}});}
if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);this.trigger({track,type:"addtrack",target:this});}
track.labelchange_=function(){_this2.trigger({track,type:"labelchange",target:_this2});};if(isEvented(track)){track.addEventListener("labelchange",track.labelchange_);}};_proto.removeTrack=function removeTrack(rtrack){var track;for(var i3=0,l2=this.length;i3<l2;i3++){if(this[i3]===rtrack){track=this[i3];if(track.off){track.off();}
this.tracks_.splice(i3,1);break;}}
if(!track){return;}
this.trigger({track,type:"removetrack",target:this});};_proto.getTrackById=function getTrackById(id2){var result=null;for(var i3=0,l2=this.length;i3<l2;i3++){var track=this[i3];if(track.id===id2){result=track;break;}}
return result;};return TrackList2;}(EventTarget$2);TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(event2 in TrackList.prototype.allowedEvents_){TrackList.prototype["on"+event2]=null;}
var event2;var disableOthers$1=function disableOthers2(list,track){for(var i3=0;i3<list.length;i3++){if(!Object.keys(list[i3]).length||track.id===list[i3].id){continue;}
list[i3].enabled=false;}};var AudioTrackList=function(_TrackList){_inheritsLoose__default["default"](AudioTrackList2,_TrackList);function AudioTrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}
for(var i3=tracks.length-1;i3>=0;i3--){if(tracks[i3].enabled){disableOthers$1(tracks,tracks[i3]);break;}}
_this=_TrackList.call(this,tracks)||this;_this.changing_=false;return _this;}
var _proto=AudioTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers$1(this,track);}
_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}
track.enabledChange_=function(){if(_this2.changing_){return;}
_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger("change");};track.addEventListener("enabledchange",track.enabledChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.enabledChange_){rtrack.removeEventListener("enabledchange",rtrack.enabledChange_);rtrack.enabledChange_=null;}};return AudioTrackList2;}(TrackList);var disableOthers=function disableOthers2(list,track){for(var i3=0;i3<list.length;i3++){if(!Object.keys(list[i3]).length||track.id===list[i3].id){continue;}
list[i3].selected=false;}};var VideoTrackList=function(_TrackList){_inheritsLoose__default["default"](VideoTrackList2,_TrackList);function VideoTrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}
for(var i3=tracks.length-1;i3>=0;i3--){if(tracks[i3].selected){disableOthers(tracks,tracks[i3]);break;}}
_this=_TrackList.call(this,tracks)||this;_this.changing_=false;Object.defineProperty(_assertThisInitialized__default["default"](_this),"selectedIndex",{get:function get2(){for(var _i3=0;_i3<this.length;_i3++){if(this[_i3].selected){return _i3;}}
return-1;},set:function set2(){}});return _this;}
var _proto=VideoTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers(this,track);}
_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}
track.selectedChange_=function(){if(_this2.changing_){return;}
_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger("change");};track.addEventListener("selectedchange",track.selectedChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.selectedChange_){rtrack.removeEventListener("selectedchange",rtrack.selectedChange_);rtrack.selectedChange_=null;}};return VideoTrackList2;}(TrackList);var TextTrackList=function(_TrackList){_inheritsLoose__default["default"](TextTrackList2,_TrackList);function TextTrackList2(){return _TrackList.apply(this,arguments)||this;}
var _proto=TextTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this=this;_TrackList.prototype.addTrack.call(this,track);if(!this.queueChange_){this.queueChange_=function(){return _this.queueTrigger("change");};}
if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return _this.trigger("selectedlanguagechange");};}
track.addEventListener("modechange",this.queueChange_);var nonLanguageTextTrackKind=["metadata","chapters"];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener("modechange",this.triggerSelectedlanguagechange_);}};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener){if(this.queueChange_){rtrack.removeEventListener("modechange",this.queueChange_);}
if(this.selectedlanguagechange_){rtrack.removeEventListener("modechange",this.triggerSelectedlanguagechange_);}}};return TextTrackList2;}(TrackList);var HtmlTrackElementList=function(){function HtmlTrackElementList2(trackElements){if(trackElements===void 0){trackElements=[];}
this.trackElements_=[];Object.defineProperty(this,"length",{get:function get2(){return this.trackElements_.length;}});for(var i3=0,length=trackElements.length;i3<length;i3++){this.addTrackElement_(trackElements[i3]);}}
var _proto=HtmlTrackElementList2.prototype;_proto.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get2(){return this.trackElements_[index];}});}
if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement);}};_proto.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_;for(var i3=0,length=this.trackElements_.length;i3<length;i3++){if(track===this.trackElements_[i3].track){trackElement_=this.trackElements_[i3];break;}}
return trackElement_;};_proto.removeTrackElement_=function removeTrackElement_(trackElement){for(var i3=0,length=this.trackElements_.length;i3<length;i3++){if(trackElement===this.trackElements_[i3]){if(this.trackElements_[i3].track&&typeof this.trackElements_[i3].track.off==="function"){this.trackElements_[i3].track.off();}
if(typeof this.trackElements_[i3].off==="function"){this.trackElements_[i3].off();}
this.trackElements_.splice(i3,1);break;}}};return HtmlTrackElementList2;}();var TextTrackCueList=function(){function TextTrackCueList2(cues){TextTrackCueList2.prototype.setCues_.call(this,cues);Object.defineProperty(this,"length",{get:function get2(){return this.length_;}});}
var _proto=TextTrackCueList2.prototype;_proto.setCues_=function setCues_(cues){var oldLength=this.length||0;var i3=0;var l2=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp2(index){if(!(""+index in this)){Object.defineProperty(this,""+index,{get:function get2(){return this.cues_[index];}});}};if(oldLength<l2){i3=oldLength;for(;i3<l2;i3++){defineProp.call(this,i3);}}};_proto.getCueById=function getCueById(id2){var result=null;for(var i3=0,l2=this.length;i3<l2;i3++){var cue=this[i3];if(cue.id===id2){result=cue;break;}}
return result;};return TextTrackCueList2;}();var VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var AudioTrackKind={"alternative":"alternative","descriptions":"descriptions","main":"main","main-desc":"main-desc","translation":"translation","commentary":"commentary"};var TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};var Track=function(_EventTarget){_inheritsLoose__default["default"](Track2,_EventTarget);function Track2(options){var _this;if(options===void 0){options={};}
_this=_EventTarget.call(this)||this;var trackProps={id:options.id||"vjs_track_"+newGUID(),kind:options.kind||"",language:options.language||""};var label=options.label||"";var _loop=function _loop2(key2){Object.defineProperty(_assertThisInitialized__default["default"](_this),key2,{get:function get2(){return trackProps[key2];},set:function set2(){}});};for(var key in trackProps){_loop(key);}
Object.defineProperty(_assertThisInitialized__default["default"](_this),"label",{get:function get2(){return label;},set:function set2(newLabel){if(newLabel!==label){label=newLabel;this.trigger("labelchange");}}});return _this;}
return Track2;}(EventTarget$2);var parseUrl=function parseUrl2(url){var props=["protocol","hostname","port","pathname","search","hash","host"];var a2=document__default["default"].createElement("a");a2.href=url;var details={};for(var i3=0;i3<props.length;i3++){details[props[i3]]=a2[props[i3]];}
if(details.protocol==="http:"){details.host=details.host.replace(/:80$/,"");}
if(details.protocol==="https:"){details.host=details.host.replace(/:443$/,"");}
if(!details.protocol){details.protocol=window__default["default"].location.protocol;}
if(!details.host){details.host=window__default["default"].location.host;}
return details;};var getAbsoluteURL=function getAbsoluteURL2(url){if(!url.match(/^https?:\/\//)){var a2=document__default["default"].createElement("a");a2.href=url;url=a2.href;}
return url;};var getFileExtension=function getFileExtension2(path){if(typeof path==="string"){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase();}}
return "";};var isCrossOrigin=function isCrossOrigin2(url,winLoc){if(winLoc===void 0){winLoc=window__default["default"].location;}
var urlInfo=parseUrl(url);var srcProtocol=urlInfo.protocol===":"?winLoc.protocol:urlInfo.protocol;var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin;};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});var parseCues=function parseCues2(srcContent,track){var parser=new window__default["default"].WebVTT.Parser(window__default["default"],window__default["default"].vttjs,window__default["default"].WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue);};parser.onparsingerror=function(error2){errors.push(error2);};parser.onflush=function(){track.trigger({type:"loadeddata",target:track});};parser.parse(srcContent);if(errors.length>0){if(window__default["default"].console&&window__default["default"].console.groupCollapsed){window__default["default"].console.groupCollapsed("Text Track parsing errors for "+track.src);}
errors.forEach(function(error2){return log$1.error(error2);});if(window__default["default"].console&&window__default["default"].console.groupEnd){window__default["default"].console.groupEnd();}}
parser.flush();};var loadTrack=function loadTrack2(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin;}
var withCredentials=track.tech_.crossOrigin()==="use-credentials";if(withCredentials){opts.withCredentials=withCredentials;}
XHR__default["default"](opts,bind(this,function(err,response,responseBody){if(err){return log$1.error(err,response);}
track.loaded_=true;if(typeof window__default["default"].WebVTT!=="function"){if(track.tech_){track.tech_.any(["vttjsloaded","vttjserror"],function(event3){if(event3.type==="vttjserror"){log$1.error("vttjs failed to load, stopping trying to process "+track.src);return;}
return parseCues(responseBody,track);});}}else{parseCues(responseBody,track);}}));};var TextTrack=function(_Track){_inheritsLoose__default["default"](TextTrack2,_Track);function TextTrack2(options){var _this;if(options===void 0){options={};}
if(!options.tech){throw new Error("A tech was not provided.");}
var settings=mergeOptions$3(options,{kind:TextTrackKind[options.kind]||"subtitles",language:options.language||options.srclang||""});var mode=TextTrackMode[settings.mode]||"disabled";var default_=settings["default"];if(settings.kind==="metadata"||settings.kind==="chapters"){mode="hidden";}
_this=_Track.call(this,settings)||this;_this.tech_=settings.tech;_this.cues_=[];_this.activeCues_=[];_this.preload_=_this.tech_.preloadTextTracks!==false;var cues=new TextTrackCueList(_this.cues_);var activeCues=new TextTrackCueList(_this.activeCues_);var changed=false;_this.timeupdateHandler=bind(_assertThisInitialized__default["default"](_this),function(event3){if(event3===void 0){event3={};}
if(this.tech_.isDisposed()){return;}
if(!this.tech_.isReady_){if(event3.type!=="timeupdate"){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);}
return;}
this.activeCues=this.activeCues;if(changed){this.trigger("cuechange");changed=false;}
if(event3.type!=="timeupdate"){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);}});var disposeHandler=function disposeHandler2(){_this.stopTracking();};_this.tech_.one("dispose",disposeHandler);if(mode!=="disabled"){_this.startTracking();}
Object.defineProperties(_assertThisInitialized__default["default"](_this),{"default":{get:function get2(){return default_;},set:function set2(){}},mode:{get:function get2(){return mode;},set:function set2(newMode){if(!TextTrackMode[newMode]){return;}
if(mode===newMode){return;}
mode=newMode;if(!this.preload_&&mode!=="disabled"&&this.cues.length===0){loadTrack(this.src,this);}
this.stopTracking();if(mode!=="disabled"){this.startTracking();}
this.trigger("modechange");}},cues:{get:function get2(){if(!this.loaded_){return null;}
return cues;},set:function set2(){}},activeCues:{get:function get2(){if(!this.loaded_){return null;}
if(this.cues.length===0){return activeCues;}
var ct2=this.tech_.currentTime();var active=[];for(var i3=0,l2=this.cues.length;i3<l2;i3++){var cue=this.cues[i3];if(cue.startTime<=ct2&&cue.endTime>=ct2){active.push(cue);}else if(cue.startTime===cue.endTime&&cue.startTime<=ct2&&cue.startTime+0.5>=ct2){active.push(cue);}}
changed=false;if(active.length!==this.activeCues_.length){changed=true;}else{for(var _i3=0;_i3<active.length;_i3++){if(this.activeCues_.indexOf(active[_i3])===-1){changed=true;}}}
this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues;},set:function set2(){}}});if(settings.src){_this.src=settings.src;if(!_this.preload_){_this.loaded_=true;}
if(_this.preload_||settings.kind!=="subtitles"&&settings.kind!=="captions"){loadTrack(_this.src,_assertThisInitialized__default["default"](_this));}}else{_this.loaded_=true;}
return _this;}
var _proto=TextTrack2.prototype;_proto.startTracking=function startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);this.tech_.on("timeupdate",this.timeupdateHandler);};_proto.stopTracking=function stopTracking(){if(this.rvf_){this.tech_.cancelVideoFrameCallback(this.rvf_);this.rvf_=void 0;}
this.tech_.off("timeupdate",this.timeupdateHandler);};_proto.addCue=function addCue(originalCue){var cue=originalCue;if(window__default["default"].vttjs&&!(originalCue instanceof window__default["default"].vttjs.VTTCue)){cue=new window__default["default"].vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop];}}
cue.id=originalCue.id;cue.originalCue_=originalCue;}
var tracks=this.tech_.textTracks();for(var i3=0;i3<tracks.length;i3++){if(tracks[i3]!==this){tracks[i3].removeCue(cue);}}
this.cues_.push(cue);this.cues.setCues_(this.cues_);};_proto.removeCue=function removeCue(_removeCue){var i3=this.cues_.length;while(i3--){var cue=this.cues_[i3];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i3,1);this.cues.setCues_(this.cues_);break;}}};return TextTrack2;}(Track);TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};var AudioTrack=function(_Track){_inheritsLoose__default["default"](AudioTrack2,_Track);function AudioTrack2(options){var _this;if(options===void 0){options={};}
var settings=mergeOptions$3(options,{kind:AudioTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var enabled=false;Object.defineProperty(_assertThisInitialized__default["default"](_this),"enabled",{get:function get2(){return enabled;},set:function set2(newEnabled){if(typeof newEnabled!=="boolean"||newEnabled===enabled){return;}
enabled=newEnabled;this.trigger("enabledchange");}});if(settings.enabled){_this.enabled=settings.enabled;}
_this.loaded_=true;return _this;}
return AudioTrack2;}(Track);var VideoTrack=function(_Track){_inheritsLoose__default["default"](VideoTrack2,_Track);function VideoTrack2(options){var _this;if(options===void 0){options={};}
var settings=mergeOptions$3(options,{kind:VideoTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var selected=false;Object.defineProperty(_assertThisInitialized__default["default"](_this),"selected",{get:function get2(){return selected;},set:function set2(newSelected){if(typeof newSelected!=="boolean"||newSelected===selected){return;}
selected=newSelected;this.trigger("selectedchange");}});if(settings.selected){_this.selected=settings.selected;}
return _this;}
return VideoTrack2;}(Track);var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;var HTMLTrackElement=function(_EventTarget){_inheritsLoose__default["default"](HTMLTrackElement2,_EventTarget);function HTMLTrackElement2(options){var _this;if(options===void 0){options={};}
_this=_EventTarget.call(this)||this;var readyState;var track=new TextTrack(options);_this.kind=track.kind;_this.src=track.src;_this.srclang=track.language;_this.label=track.label;_this["default"]=track["default"];Object.defineProperties(_assertThisInitialized__default["default"](_this),{readyState:{get:function get2(){return readyState;}},track:{get:function get2(){return track;}}});readyState=NONE;track.addEventListener("loadeddata",function(){readyState=LOADED;_this.trigger({type:"load",target:_assertThisInitialized__default["default"](_this)});});return _this;}
return HTMLTrackElement2;}(EventTarget$2);HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(type){NORMAL[type].getterName=type+"Tracks";NORMAL[type].privateName=type+"Tracks_";});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var ALL=_extends__default["default"]({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(self2,kind,label,language,options){if(options===void 0){options={};}
var tracks=self2.textTracks();options.kind=kind;if(label){options.label=label;}
if(language){options.language=language;}
options.tech=self2;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track;}
var Tech=function(_Component){_inheritsLoose__default["default"](Tech2,_Component);function Tech2(options,ready){var _this;if(options===void 0){options={};}
if(ready===void 0){ready=function ready2(){};}
options.reportTouchActivity=false;_this=_Component.call(this,null,options,ready)||this;_this.onDurationChange_=function(e2){return _this.onDurationChange(e2);};_this.trackProgress_=function(e2){return _this.trackProgress(e2);};_this.trackCurrentTime_=function(e2){return _this.trackCurrentTime(e2);};_this.stopTrackingCurrentTime_=function(e2){return _this.stopTrackingCurrentTime(e2);};_this.disposeSourceHandler_=function(e2){return _this.disposeSourceHandler(e2);};_this.queuedHanders_=new Set();_this.hasStarted_=false;_this.on("playing",function(){this.hasStarted_=true;});_this.on("loadstart",function(){this.hasStarted_=false;});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName];}});if(!_this.featuresProgressEvents){_this.manualProgressOn();}
if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn();}
["Text","Audio","Video"].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false;}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false;}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true;}
if(!_this.featuresNativeTextTracks){_this.emulateTextTracks();}
_this.preloadTextTracks=options.preloadTextTracks!==false;_this.autoRemoteTextTracks_=new ALL.text.ListClass();_this.initTrackListeners();if(!options.nativeControlsForTouch){_this.emitTapEvents();}
if(_this.constructor){_this.name_=_this.constructor.name||"Unknown Tech";}
return _this;}
var _proto=Tech2.prototype;_proto.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){this.one("ready",function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src);},1);});}
this.trigger({src,type:"sourceset"});};_proto.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange_);this.manualProgress=true;this.one("ready",this.trackProgress_);};_proto.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange_);};_proto.trackProgress=function trackProgress(event3){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){this.trigger("progress");}
this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress();}}),500);};_proto.onDurationChange=function onDurationChange(event3){this.duration_=this.duration();};_proto.buffered=function buffered(){return createTimeRanges(0,0);};_proto.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration_);};_proto.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval);};_proto.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime_);this.on("pause",this.stopTrackingCurrentTime_);};_proto.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime_);this.off("pause",this.stopTrackingCurrentTime_);};_proto.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}
this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});},250);};_proto.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});};_proto.dispose=function dispose(){this.clearTracks(NORMAL.names);if(this.manualProgress){this.manualProgressOff();}
if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}
_Component.prototype.dispose.call(this);};_proto.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);types.forEach(function(type){var list=_this3[type+"Tracks"]()||[];var i3=list.length;while(i3--){var track=list[i3];if(type==="text"){_this3.removeRemoteTextTrack(track);}
list.removeTrack(track);}});};_proto.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i3=list.length;while(i3--){var track=list[i3];this.removeRemoteTextTrack(track);}};_proto.reset=function reset2(){};_proto.crossOrigin=function crossOrigin(){};_proto.setCrossOrigin=function setCrossOrigin(){};_proto.error=function error2(err){if(err!==void 0){this.error_=new MediaError(err);this.trigger("error");}
return this.error_;};_proto.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0);}
return createTimeRanges();};_proto.play=function play(){};_proto.setScrubbing=function setScrubbing(){};_proto.scrubbing=function scrubbing(){};_proto.setCurrentTime=function setCurrentTime(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});}};_proto.initTrackListeners=function initTrackListeners(){var _this4=this;NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges2(){_this4.trigger(name+"trackchange");};var tracks=_this4[props.getterName]();tracks.addEventListener("removetrack",trackListChanges);tracks.addEventListener("addtrack",trackListChanges);_this4.on("dispose",function(){tracks.removeEventListener("removetrack",trackListChanges);tracks.removeEventListener("addtrack",trackListChanges);});});};_proto.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(window__default["default"].WebVTT){return;}
if(document__default["default"].body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt__default["default"])&&Object.keys(vtt__default["default"]).length>0){this.trigger("vttjsloaded");return;}
var script=document__default["default"].createElement("script");script.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";script.onload=function(){_this5.trigger("vttjsloaded");};script.onerror=function(){_this5.trigger("vttjserror");};this.on("dispose",function(){script.onload=null;script.onerror=null;});window__default["default"].WebVTT=true;this.el().parentNode.appendChild(script);}else{this.ready(this.addWebVttScript_);}};_proto.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack2(e2){return tracks.addTrack(e2.track);};var handleRemoveTrack=function handleRemoveTrack2(e2){return tracks.removeTrack(e2.track);};remoteTracks.on("addtrack",handleAddTrack);remoteTracks.on("removetrack",handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay2(){return _this6.trigger("texttrackchange");};var textTracksChanges=function textTracksChanges2(){updateDisplay();for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];track.removeEventListener("cuechange",updateDisplay);if(track.mode==="showing"){track.addEventListener("cuechange",updateDisplay);}}};textTracksChanges();tracks.addEventListener("change",textTracksChanges);tracks.addEventListener("addtrack",textTracksChanges);tracks.addEventListener("removetrack",textTracksChanges);this.on("dispose",function(){remoteTracks.off("addtrack",handleAddTrack);remoteTracks.off("removetrack",handleRemoveTrack);tracks.removeEventListener("change",textTracksChanges);tracks.removeEventListener("addtrack",textTracksChanges);tracks.removeEventListener("removetrack",textTracksChanges);for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];track.removeEventListener("cuechange",updateDisplay);}});};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error("TextTrack kind is required but was not provided");}
return createTrackHelper(this,kind,label,language);};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions$3(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track);};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var _this7=this;if(options===void 0){options={};}
var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){log$1.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true;}
this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);});}
return htmlTrackElement;};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track);};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{};};_proto.requestPictureInPicture=function requestPictureInPicture(){var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){return PromiseClass.reject();}};_proto.disablePictureInPicture=function disablePictureInPicture(){return true;};_proto.setDisablePictureInPicture=function setDisablePictureInPicture(){};_proto.requestVideoFrameCallback=function requestVideoFrameCallback(cb){var _this8=this;var id2=newGUID();if(!this.isReady_||this.paused()){this.queuedHanders_.add(id2);this.one("playing",function(){if(_this8.queuedHanders_.has(id2)){_this8.queuedHanders_["delete"](id2);cb();}});}else{this.requestNamedAnimationFrame(id2,cb);}
return id2;};_proto.cancelVideoFrameCallback=function cancelVideoFrameCallback(id2){if(this.queuedHanders_.has(id2)){this.queuedHanders_["delete"](id2);}else{this.cancelNamedAnimationFrame(id2);}};_proto.setPoster=function setPoster(){};_proto.playsinline=function playsinline(){};_proto.setPlaysinline=function setPlaysinline(){};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(){};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(){};_proto.canPlayType=function canPlayType2(){return "";};Tech2.canPlayType=function canPlayType2(){return "";};Tech2.canPlaySource=function canPlaySource(srcObj,options){return Tech2.canPlayType(srcObj.type);};Tech2.isTech=function isTech(component){return component.prototype instanceof Tech2||component instanceof Tech2||component===Tech2;};Tech2.registerTech=function registerTech(name,tech){if(!Tech2.techs_){Tech2.techs_={};}
if(!Tech2.isTech(tech)){throw new Error("Tech "+name+" must be a Tech");}
if(!Tech2.canPlayType){throw new Error("Techs must have a static canPlayType method on them");}
if(!Tech2.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them");}
name=toTitleCase$1(name);Tech2.techs_[name]=tech;Tech2.techs_[toLowerCase(name)]=tech;if(name!=="Tech"){Tech2.defaultTechOrder_.push(name);}
return tech;};Tech2.getTech=function getTech(name){if(!name){return;}
if(Tech2.techs_&&Tech2.techs_[name]){return Tech2.techs_[name];}
name=toTitleCase$1(name);if(window__default["default"]&&window__default["default"].videojs&&window__default["default"].videojs[name]){log$1.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return window__default["default"].videojs[name];}};return Tech2;}(Component$1);ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Tech.prototype.featuresVolumeControl=true;Tech.prototype.featuresMuteControl=true;Tech.prototype.featuresFullscreenResize=false;Tech.prototype.featuresPlaybackRate=false;Tech.prototype.featuresProgressEvents=false;Tech.prototype.featuresSourceset=false;Tech.prototype.featuresTimeupdateEvents=false;Tech.prototype.featuresNativeTextTracks=false;Tech.prototype.featuresVideoFrameCallback=false;Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[];}
if(index===void 0){index=handlers.length;}
handlers.splice(index,0,handler);};_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can;for(var i3=0;i3<handlers.length;i3++){can=handlers[i3].canPlayType(type);if(can){return can;}}
return "";};_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can;for(var i3=0;i3<handlers.length;i3++){can=handlers[i3].canHandleSource(source,options);if(can){return handlers[i3];}}
return null;};_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options);}
return "";};var deferrable=["seekable","seeking","duration"];deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=="function"){return;}
this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments);}
return originalFn.apply(this,arguments);};},_Tech.prototype);_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler;}else{log$1.error("No source handler found for the current source.");}}
this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler_);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;}
this.sourceHandler_=sh.handleSource(source,this,this.options_);this.one("dispose",this.disposeSourceHandler_);};_Tech.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null;}
this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}
this.sourceHandler_=null;}};};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];var middlewares={};var middlewareInstances={};var TERMINATOR={};function use(type,middleware){middlewares[type]=middlewares[type]||[];middlewares[type].push(middleware);}
function setSource(player,src,next){player.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player);},1);}
function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech);});}
function get(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]());}
function set(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg));}
function mediate(middleware,tech,method,arg){if(arg===void 0){arg=null;}
var callMethod="call"+toTitleCase$1(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue;}
var allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1};var allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1};var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){if(value===TERMINATOR){return TERMINATOR;}
if(mw[method]){return mw[method](value);}
return value;};}
function executeRight(mws,method,value,terminated){for(var i3=mws.length-1;i3>=0;i3--){var mw=mws[i3];if(mw[method]){mw[method](terminated,value);}}}
function clearCacheForPlayer(player){middlewareInstances[player.id()]=null;}
function getOrCreateFactory(player,mwFactory){var mws=middlewareInstances[player.id()];var mw=null;if(mws===void 0||mws===null){mw=mwFactory(player);middlewareInstances[player.id()]=[[mwFactory,mw]];return mw;}
for(var i3=0;i3<mws.length;i3++){var _mws$i=mws[i3],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue;}
mw=mwi;}
if(mw===null){mw=mwFactory(player);mws.push([mwFactory,mw]);}
return mw;}
function setSourceHelper(src,middleware,next,player,acc,lastRun){if(src===void 0){src={};}
if(middleware===void 0){middleware=[];}
if(acc===void 0){acc=[];}
if(lastRun===void 0){lastRun=false;}
var _middleware=middleware,mwFactory=_middleware[0],mwrest=_middleware.slice(1);if(typeof mwFactory==="string"){setSourceHelper(src,middlewares[mwFactory],next,player,acc,lastRun);}else if(mwFactory){var mw=getOrCreateFactory(player,mwFactory);if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player,acc,lastRun);}
mw.setSource(assign({},src),function(err,_src){if(err){return setSourceHelper(src,mwrest,next,player,acc,lastRun);}
acc.push(mw);setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player,acc,lastRun);});}else if(mwrest.length){setSourceHelper(src,mwrest,next,player,acc,lastRun);}else if(lastRun){next(src,acc);}else{setSourceHelper(src,middlewares["*"],next,player,acc,true);}}
var MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var getMimetype=function getMimetype2(src){if(src===void 0){src="";}
var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||"";};var findMimetype=function findMimetype2(player,src){if(!src){return "";}
if(player.cache_.source.src===src&&player.cache_.source.type){return player.cache_.source.type;}
var matchingSources=player.cache_.sources.filter(function(s3){return s3.src===src;});if(matchingSources.length){return matchingSources[0].type;}
var sources=player.$$("source");for(var i3=0;i3<sources.length;i3++){var s2=sources[i3];if(s2.type&&s2.src&&s2.src===src){return s2.type;}}
return getMimetype(src);};var filterSource=function filterSource2(src){if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource2(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj);}else if(isObject(srcobj)){newsrc.push(srcobj);}});src=newsrc;}else if(typeof src==="string"&&src.trim()){src=[fixSource({src})];}else if(isObject(src)&&typeof src.src==="string"&&src.src&&src.src.trim()){src=[fixSource(src)];}else{src=[];}
return src;};function fixSource(src){if(!src.type){var mimetype=getMimetype(src.src);if(mimetype){src.type=mimetype;}}
return src;}
var MediaLoader=function(_Component){_inheritsLoose__default["default"](MediaLoader2,_Component);function MediaLoader2(player,options,ready){var _this;var options_=mergeOptions$3({createEl:false},options);_this=_Component.call(this,player,options_,ready)||this;if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i3=0,j2=options.playerOptions.techOrder;i3<j2.length;i3++){var techName=toTitleCase$1(j2[i3]);var tech=Tech.getTech(techName);if(!techName){tech=Component$1.getComponent(techName);}
if(tech&&tech.isSupported()){player.loadTech_(techName);break;}}}else{player.src(options.playerOptions.sources);}
return _this;}
return MediaLoader2;}(Component$1);Component$1.registerComponent("MediaLoader",MediaLoader);var ClickableComponent=function(_Component){_inheritsLoose__default["default"](ClickableComponent2,_Component);function ClickableComponent2(player,options){var _this;_this=_Component.call(this,player,options)||this;if(_this.options_.controlText){_this.controlText(_this.options_.controlText);}
_this.handleMouseOver_=function(e2){return _this.handleMouseOver(e2);};_this.handleMouseOut_=function(e2){return _this.handleMouseOut(e2);};_this.handleClick_=function(e2){return _this.handleClick(e2);};_this.handleKeyDown_=function(e2){return _this.handleKeyDown(e2);};_this.emitTapEvents();_this.enable();return _this;}
var _proto=ClickableComponent2.prototype;_proto.createEl=function createEl$1(tag,props,attributes){if(tag===void 0){tag="div";}
if(props===void 0){props={};}
if(attributes===void 0){attributes={};}
props=assign({className:this.buildCSSClass(),tabIndex:0},props);if(tag==="button"){log$1.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.");}
attributes=assign({role:"button"},attributes);this.tabIndex_=props.tabIndex;var el=createEl(tag,props,attributes);el.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));this.createControlTextEl(el);return el;};_proto.dispose=function dispose(){this.controlTextEl_=null;_Component.prototype.dispose.call(this);};_proto.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(el){el.appendChild(this.controlTextEl_);}
this.controlText(this.controlText_,el);return this.controlTextEl_;};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.el();}
if(text===void 0){return this.controlText_||"Need Text";}
var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl&&!this.player_.options_.noUITitleAttributes){el.setAttribute("title",localizedText);}};_proto.buildCSSClass=function buildCSSClass(){return "vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this);};_proto.enable=function enable2(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_);}
this.on(["tap","click"],this.handleClick_);this.on("keydown",this.handleKeyDown_);}};_proto.disable=function disable2(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex");}
this.off("mouseover",this.handleMouseOver_);this.off("mouseout",this.handleMouseOut_);this.off(["tap","click"],this.handleClick_);this.off("keydown",this.handleKeyDown_);};_proto.handleLanguagechange=function handleLanguagechange(){this.controlText(this.controlText_);};_proto.handleClick=function handleClick(event3){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments);}};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Space")||keycode__default["default"].isEventKey(event3,"Enter")){event3.preventDefault();event3.stopPropagation();this.trigger("click");}else{_Component.prototype.handleKeyDown.call(this,event3);}};return ClickableComponent2;}(Component$1);Component$1.registerComponent("ClickableComponent",ClickableComponent);var PosterImage=function(_ClickableComponent){_inheritsLoose__default["default"](PosterImage2,_ClickableComponent);function PosterImage2(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.update();_this.update_=function(e2){return _this.update(e2);};player.on("posterchange",_this.update_);return _this;}
var _proto=PosterImage2.prototype;_proto.dispose=function dispose(){this.player().off("posterchange",this.update_);_ClickableComponent.prototype.dispose.call(this);};_proto.createEl=function createEl$1(){var el=createEl("div",{className:"vjs-poster",tabIndex:-1});return el;};_proto.update=function update(event3){var url=this.player().poster();this.setSrc(url);if(url){this.show();}else{this.hide();}};_proto.setSrc=function setSrc(url){var backgroundImage="";if(url){backgroundImage='url("'+url+'")';}
this.el_.style.backgroundImage=backgroundImage;};_proto.handleClick=function handleClick(event3){if(!this.player_.controls()){return;}
var sourceIsEncrypted=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((IE_VERSION||IS_EDGE)&&sourceIsEncrypted)){this.player_.tech(true).focus();}
if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}};return PosterImage2;}(ClickableComponent);Component$1.registerComponent("PosterImage",PosterImage);var darkGray="#222";var lightGray="#ccc";var fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(color,opacity){var hex;if(color.length===4){hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3];}else if(color.length===7){hex=color.slice(1);}else{throw new Error("Invalid color code provided, "+color+"; must be formatted as e.g. #f0e or #f604e2.");}
return "rgba("+parseInt(hex.slice(0,2),16)+","+parseInt(hex.slice(2,4),16)+","+parseInt(hex.slice(4,6),16)+","+opacity+")";}
function tryUpdateStyle(el,style2,rule){try{el.style[style2]=rule;}catch(e2){return;}}
var TextTrackDisplay=function(_Component){_inheritsLoose__default["default"](TextTrackDisplay2,_Component);function TextTrackDisplay2(player,options,ready){var _this;_this=_Component.call(this,player,options,ready)||this;var updateDisplayHandler=function updateDisplayHandler2(e2){return _this.updateDisplay(e2);};player.on("loadstart",function(e2){return _this.toggleDisplay(e2);});player.on("texttrackchange",updateDisplayHandler);player.on("loadedmetadata",function(e2){return _this.preselectTrack(e2);});player.ready(bind(_assertThisInitialized__default["default"](_this),function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return;}
player.on("fullscreenchange",updateDisplayHandler);player.on("playerresize",updateDisplayHandler);window__default["default"].addEventListener("orientationchange",updateDisplayHandler);player.on("dispose",function(){return window__default["default"].removeEventListener("orientationchange",updateDisplayHandler);});var tracks=this.options_.playerOptions.tracks||[];for(var i3=0;i3<tracks.length;i3++){this.player_.addRemoteTextTrack(tracks[i3],true);}
this.preselectTrack();}));return _this;}
var _proto=TextTrackDisplay2.prototype;_proto.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc;var firstCaptions;var preferredTrack;for(var i3=0;i3<trackList.length;i3++){var track=trackList[i3];if(userPref&&userPref.enabled&&userPref.language&&userPref.language===track.language&&track.kind in modes){if(track.kind===userPref.kind){preferredTrack=track;}else if(!preferredTrack){preferredTrack=track;}}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null;}else if(track["default"]){if(track.kind==="descriptions"&&!firstDesc){firstDesc=track;}else if(track.kind in modes&&!firstCaptions){firstCaptions=track;}}}
if(preferredTrack){preferredTrack.mode="showing";}else if(firstCaptions){firstCaptions.mode="showing";}else if(firstDesc){firstDesc.mode="showing";}};_proto.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}};_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"translate":"yes","aria-live":"off","aria-atomic":"true"});};_proto.clearDisplay=function clearDisplay(){if(typeof window__default["default"].WebVTT==="function"){window__default["default"].WebVTT.processCues(window__default["default"],[],this.el_);}};_proto.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();var allowMultipleShowingTracks=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(allowMultipleShowingTracks){var showingTracks=[];for(var _i3=0;_i3<tracks.length;++_i3){var track=tracks[_i3];if(track.mode!=="showing"){continue;}
showingTracks.push(track);}
this.updateForTrack(showingTracks);return;}
var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i3=tracks.length;while(i3--){var _track=tracks[i3];if(_track.mode==="showing"){if(_track.kind==="descriptions"){descriptionsTrack=_track;}else{captionsSubtitlesTrack=_track;}}}
if(captionsSubtitlesTrack){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off");}
this.updateForTrack(captionsSubtitlesTrack);}else if(descriptionsTrack){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive");}
this.updateForTrack(descriptionsTrack);}};_proto.updateDisplayState=function updateDisplayState(track){var overrides=this.player_.textTrackSettings.getValues();var cues=track.activeCues;var i3=cues.length;while(i3--){var cue=cues[i3];if(!cue){continue;}
var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color;}
if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,"color",constructColor(overrides.color||"#fff",overrides.textOpacity));}
if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor;}
if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,"backgroundColor",constructColor(overrides.backgroundColor||"#000",overrides.backgroundOpacity));}
if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,"backgroundColor",constructColor(overrides.windowColor,overrides.windowOpacity));}else{cueDiv.style.backgroundColor=overrides.windowColor;}}
if(overrides.edgeStyle){if(overrides.edgeStyle==="dropshadow"){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray;}else if(overrides.edgeStyle==="raised"){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray;}else if(overrides.edgeStyle==="depressed"){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray;}else if(overrides.edgeStyle==="uniform"){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray;}}
if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=window__default["default"].parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+"px";cueDiv.style.height="auto";cueDiv.style.top="auto";}
if(overrides.fontFamily&&overrides.fontFamily!=="default"){if(overrides.fontFamily==="small-caps"){cueDiv.firstChild.style.fontVariant="small-caps";}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily];}}}};_proto.updateForTrack=function updateForTrack(tracks){if(!Array.isArray(tracks)){tracks=[tracks];}
if(typeof window__default["default"].WebVTT!=="function"||tracks.every(function(track2){return!track2.activeCues;})){return;}
var cues=[];for(var i3=0;i3<tracks.length;++i3){var track=tracks[i3];for(var j2=0;j2<track.activeCues.length;++j2){cues.push(track.activeCues[j2]);}}
window__default["default"].WebVTT.processCues(window__default["default"],cues,this.el_);for(var _i22=0;_i22<tracks.length;++_i22){var _track2=tracks[_i22];for(var _j=0;_j<_track2.activeCues.length;++_j){var cueEl=_track2.activeCues[_j].displayState;addClass(cueEl,"vjs-text-track-cue");addClass(cueEl,"vjs-text-track-cue-"+(_track2.language?_track2.language:_i22));if(_track2.language){setAttribute(cueEl,"lang",_track2.language);}}
if(this.player_.textTrackSettings){this.updateDisplayState(_track2);}}};return TextTrackDisplay2;}(Component$1);Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);var LoadingSpinner=function(_Component){_inheritsLoose__default["default"](LoadingSpinner2,_Component);function LoadingSpinner2(){return _Component.apply(this,arguments)||this;}
var _proto=LoadingSpinner2.prototype;_proto.createEl=function createEl$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?"Audio Player":"Video Player");var controlText=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[playerType])});var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});el.appendChild(controlText);return el;};return LoadingSpinner2;}(Component$1);Component$1.registerComponent("LoadingSpinner",LoadingSpinner);var Button=function(_ClickableComponent){_inheritsLoose__default["default"](Button2,_ClickableComponent);function Button2(){return _ClickableComponent.apply(this,arguments)||this;}
var _proto=Button2.prototype;_proto.createEl=function createEl$1(tag,props,attributes){if(props===void 0){props={};}
if(attributes===void 0){attributes={};}
tag="button";props=assign({className:this.buildCSSClass()},props);attributes=assign({type:"button"},attributes);var el=createEl(tag,props,attributes);el.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));this.createControlTextEl(el);return el;};_proto.addChild=function addChild(child,options){if(options===void 0){options={};}
var className=this.constructor.name;log$1.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");return Component$1.prototype.addChild.call(this,child,options);};_proto.enable=function enable2(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute("disabled");};_proto.disable=function disable2(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled");};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Space")||keycode__default["default"].isEventKey(event3,"Enter")){event3.stopPropagation();return;}
_ClickableComponent.prototype.handleKeyDown.call(this,event3);};return Button2;}(ClickableComponent);Component$1.registerComponent("Button",Button);var BigPlayButton=function(_Button){_inheritsLoose__default["default"](BigPlayButton2,_Button);function BigPlayButton2(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.mouseused_=false;_this.on("mousedown",function(e2){return _this.handleMouseDown(e2);});return _this;}
var _proto=BigPlayButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-big-play-button";};_proto.handleClick=function handleClick(event3){var playPromise=this.player_.play();if(this.mouseused_&&event3.clientX&&event3.clientY){var sourceIsEncrypted=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;silencePromise(playPromise);if(this.player_.tech(true)&&!((IE_VERSION||IS_EDGE)&&sourceIsEncrypted)){this.player_.tech(true).focus();}
return;}
var cb=this.player_.getChild("controlBar");var playToggle=cb&&cb.getChild("playToggle");if(!playToggle){this.player_.tech(true).focus();return;}
var playFocus=function playFocus2(){return playToggle.focus();};if(isPromise(playPromise)){playPromise.then(playFocus,function(){});}else{this.setTimeout(playFocus,1);}};_proto.handleKeyDown=function handleKeyDown(event3){this.mouseused_=false;_Button.prototype.handleKeyDown.call(this,event3);};_proto.handleMouseDown=function handleMouseDown(event3){this.mouseused_=true;};return BigPlayButton2;}(Button);BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);var CloseButton=function(_Button){_inheritsLoose__default["default"](CloseButton2,_Button);function CloseButton2(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.controlText(options&&options.controlText||_this.localize("Close"));return _this;}
var _proto=CloseButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-close-button "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event3){this.trigger({type:"close",bubbles:false});};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Esc")){event3.preventDefault();event3.stopPropagation();this.trigger("click");}else{_Button.prototype.handleKeyDown.call(this,event3);}};return CloseButton2;}(Button);Component$1.registerComponent("CloseButton",CloseButton);var PlayToggle=function(_Button){_inheritsLoose__default["default"](PlayToggle2,_Button);function PlayToggle2(player,options){var _this;if(options===void 0){options={};}
_this=_Button.call(this,player,options)||this;options.replay=options.replay===void 0||options.replay;_this.on(player,"play",function(e2){return _this.handlePlay(e2);});_this.on(player,"pause",function(e2){return _this.handlePause(e2);});if(options.replay){_this.on(player,"ended",function(e2){return _this.handleEnded(e2);});}
return _this;}
var _proto=PlayToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-play-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event3){if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}};_proto.handleSeeked=function handleSeeked(event3){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(event3);}else{this.handlePlay(event3);}};_proto.handlePlay=function handlePlay(event3){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause");};_proto.handlePause=function handlePause(event3){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play");};_proto.handleEnded=function handleEnded(event3){var _this2=this;this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",function(e2){return _this2.handleSeeked(e2);});};return PlayToggle2;}(Button);PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);var defaultImplementation=function defaultImplementation2(seconds,guide){seconds=seconds<0?0:seconds;var s2=Math.floor(seconds%60);var m2=Math.floor(seconds/60%60);var h2=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity){h2=m2=s2="-";}
h2=h2>0||gh>0?h2+":":"";m2=((h2||gm>=10)&&m2<10?"0"+m2:m2)+":";s2=s2<10?"0"+s2:s2;return h2+m2+s2;};var implementation=defaultImplementation;function setFormatTime(customImplementation){implementation=customImplementation;}
function resetFormatTime(){implementation=defaultImplementation;}
function formatTime(seconds,guide){if(guide===void 0){guide=seconds;}
return implementation(seconds,guide);}
var TimeDisplay=function(_Component){_inheritsLoose__default["default"](TimeDisplay2,_Component);function TimeDisplay2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.on(player,["timeupdate","ended"],function(e2){return _this.updateContent(e2);});_this.updateTextNode_();return _this;}
var _proto=TimeDisplay2.prototype;_proto.createEl=function createEl$1(){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,"div",{className:className+" vjs-time-control vjs-control"});var span=createEl("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});el.appendChild(span);this.contentEl_=createEl("span",{className:className+"-display"},{"aria-live":"off","role":"presentation"});el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this);};_proto.updateTextNode_=function updateTextNode_(time){var _this2=this;if(time===void 0){time=0;}
time=formatTime(time);if(this.formattedTime_===time){return;}
this.formattedTime_=time;this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!_this2.contentEl_){return;}
var oldNode=_this2.textNode_;if(oldNode&&_this2.contentEl_.firstChild!==oldNode){oldNode=null;log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.");}
_this2.textNode_=document__default["default"].createTextNode(_this2.formattedTime_);if(!_this2.textNode_){return;}
if(oldNode){_this2.contentEl_.replaceChild(_this2.textNode_,oldNode);}else{_this2.contentEl_.appendChild(_this2.textNode_);}});};_proto.updateContent=function updateContent(event3){};return TimeDisplay2;}(Component$1);TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);var CurrentTimeDisplay=function(_TimeDisplay){_inheritsLoose__default["default"](CurrentTimeDisplay2,_TimeDisplay);function CurrentTimeDisplay2(){return _TimeDisplay.apply(this,arguments)||this;}
var _proto=CurrentTimeDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-current-time";};_proto.updateContent=function updateContent(event3){var time;if(this.player_.ended()){time=this.player_.duration();}else{time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();}
this.updateTextNode_(time);};return CurrentTimeDisplay2;}(TimeDisplay);CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);var DurationDisplay=function(_TimeDisplay){_inheritsLoose__default["default"](DurationDisplay2,_TimeDisplay);function DurationDisplay2(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;var updateContent=function updateContent2(e2){return _this.updateContent(e2);};_this.on(player,"durationchange",updateContent);_this.on(player,"loadstart",updateContent);_this.on(player,"loadedmetadata",updateContent);return _this;}
var _proto=DurationDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-duration";};_proto.updateContent=function updateContent(event3){var duration2=this.player_.duration();this.updateTextNode_(duration2);};return DurationDisplay2;}(TimeDisplay);DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);var TimeDivider=function(_Component){_inheritsLoose__default["default"](TimeDivider2,_Component);function TimeDivider2(){return _Component.apply(this,arguments)||this;}
var _proto=TimeDivider2.prototype;_proto.createEl=function createEl2(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":true});var div=_Component.prototype.createEl.call(this,"div");var span=_Component.prototype.createEl.call(this,"span",{textContent:"/"});div.appendChild(span);el.appendChild(div);return el;};return TimeDivider2;}(Component$1);Component$1.registerComponent("TimeDivider",TimeDivider);var RemainingTimeDisplay=function(_TimeDisplay){_inheritsLoose__default["default"](RemainingTimeDisplay2,_TimeDisplay);function RemainingTimeDisplay2(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,"durationchange",function(e2){return _this.updateContent(e2);});return _this;}
var _proto=RemainingTimeDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-remaining-time";};_proto.createEl=function createEl$1(){var el=_TimeDisplay.prototype.createEl.call(this);if(this.options_.displayNegative!==false){el.insertBefore(createEl("span",{},{"aria-hidden":true},"-"),this.contentEl_);}
return el;};_proto.updateContent=function updateContent(event3){if(typeof this.player_.duration()!=="number"){return;}
var time;if(this.player_.ended()){time=0;}else if(this.player_.remainingTimeDisplay){time=this.player_.remainingTimeDisplay();}else{time=this.player_.remainingTime();}
this.updateTextNode_(time);};return RemainingTimeDisplay2;}(TimeDisplay);RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);var LiveDisplay=function(_Component){_inheritsLoose__default["default"](LiveDisplay2,_Component);function LiveDisplay2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.updateShowing();_this.on(_this.player(),"durationchange",function(e2){return _this.updateShowing(e2);});return _this;}
var _proto=LiveDisplay2.prototype;_proto.createEl=function createEl$1(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"});this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"}));this.contentEl_.appendChild(document__default["default"].createTextNode(this.localize("LIVE")));el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);};_proto.updateShowing=function updateShowing(event3){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return LiveDisplay2;}(Component$1);Component$1.registerComponent("LiveDisplay",LiveDisplay);var SeekToLive=function(_Button){_inheritsLoose__default["default"](SeekToLive2,_Button);function SeekToLive2(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.updateLiveEdgeStatus();if(_this.player_.liveTracker){_this.updateLiveEdgeStatusHandler_=function(e2){return _this.updateLiveEdgeStatus(e2);};_this.on(_this.player_.liveTracker,"liveedgechange",_this.updateLiveEdgeStatusHandler_);}
return _this;}
var _proto=SeekToLive2.prototype;_proto.createEl=function createEl$1(){var el=_Button.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"});el.appendChild(this.textEl_);return el;};_proto.updateLiveEdgeStatus=function updateLiveEdgeStatus(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live");}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live");}};_proto.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge();};_proto.dispose=function dispose(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_);}
this.textEl_=null;_Button.prototype.dispose.call(this);};return SeekToLive2;}(Button);SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);var clamp=function clamp2(number,min,max){number=Number(number);return Math.min(max,Math.max(min,isNaN(number)?min:number));};var Slider=function(_Component){_inheritsLoose__default["default"](Slider2,_Component);function Slider2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleMouseDown_=function(e2){return _this.handleMouseDown(e2);};_this.handleMouseUp_=function(e2){return _this.handleMouseUp(e2);};_this.handleKeyDown_=function(e2){return _this.handleKeyDown(e2);};_this.handleClick_=function(e2){return _this.handleClick(e2);};_this.handleMouseMove_=function(e2){return _this.handleMouseMove(e2);};_this.update_=function(e2){return _this.update(e2);};_this.bar=_this.getChild(_this.options_.barName);_this.vertical(!!_this.options_.vertical);_this.enable();return _this;}
var _proto=Slider2.prototype;_proto.enabled=function enabled(){return this.enabled_;};_proto.enable=function enable2(){if(this.enabled()){return;}
this.on("mousedown",this.handleMouseDown_);this.on("touchstart",this.handleMouseDown_);this.on("keydown",this.handleKeyDown_);this.on("click",this.handleClick_);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update);}
this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true;};_proto.disable=function disable2(){if(!this.enabled()){return;}
var doc=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_);this.off("touchstart",this.handleMouseDown_);this.off("keydown",this.handleKeyDown_);this.off("click",this.handleClick_);this.off(this.player_,"controlsvisible",this.update_);this.off(doc,"mousemove",this.handleMouseMove_);this.off(doc,"mouseup",this.handleMouseUp_);this.off(doc,"touchmove",this.handleMouseMove_);this.off(doc,"touchend",this.handleMouseUp_);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update);}
this.enabled_=false;};_proto.createEl=function createEl2(type,props,attributes){if(props===void 0){props={};}
if(attributes===void 0){attributes={};}
props.className=props.className+" vjs-slider";props=assign({tabIndex:0},props);attributes=assign({"role":"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,"tabIndex":0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes);};_proto.handleMouseDown=function handleMouseDown(event3){var doc=this.bar.el_.ownerDocument;if(event3.type==="mousedown"){event3.preventDefault();}
if(event3.type==="touchstart"&&!IS_CHROME){event3.preventDefault();}
blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(doc,"mousemove",this.handleMouseMove_);this.on(doc,"mouseup",this.handleMouseUp_);this.on(doc,"touchmove",this.handleMouseMove_);this.on(doc,"touchend",this.handleMouseUp_);this.handleMouseMove(event3,true);};_proto.handleMouseMove=function handleMouseMove(event3){};_proto.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(doc,"mousemove",this.handleMouseMove_);this.off(doc,"mouseup",this.handleMouseUp_);this.off(doc,"touchmove",this.handleMouseMove_);this.off(doc,"touchend",this.handleMouseUp_);this.update();};_proto.update=function update(){var _this2=this;if(!this.el_||!this.bar){return;}
var progress=this.getProgress();if(progress===this.progress_){return progress;}
this.progress_=progress;this.requestNamedAnimationFrame("Slider#update",function(){var sizeKey=_this2.vertical()?"height":"width";_this2.bar.el().style[sizeKey]=(progress*100).toFixed(2)+"%";});return progress;};_proto.getProgress=function getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4));};_proto.calculateDistance=function calculateDistance(event3){var position=getPointerPosition(this.el_,event3);if(this.vertical()){return position.y;}
return position.x;};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Left")||keycode__default["default"].isEventKey(event3,"Down")){event3.preventDefault();event3.stopPropagation();this.stepBack();}else if(keycode__default["default"].isEventKey(event3,"Right")||keycode__default["default"].isEventKey(event3,"Up")){event3.preventDefault();event3.stopPropagation();this.stepForward();}else{_Component.prototype.handleKeyDown.call(this,event3);}};_proto.handleClick=function handleClick(event3){event3.stopPropagation();event3.preventDefault();};_proto.vertical=function vertical(bool){if(bool===void 0){return this.vertical_||false;}
this.vertical_=!!bool;if(this.vertical_){this.addClass("vjs-slider-vertical");}else{this.addClass("vjs-slider-horizontal");}};return Slider2;}(Component$1);Component$1.registerComponent("Slider",Slider);var percentify=function percentify2(time,end){return clamp(time/end*100,0,100).toFixed(2)+"%";};var LoadProgressBar=function(_Component){_inheritsLoose__default["default"](LoadProgressBar2,_Component);function LoadProgressBar2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.partEls_=[];_this.on(player,"progress",function(e2){return _this.update(e2);});return _this;}
var _proto=LoadProgressBar2.prototype;_proto.createEl=function createEl$1(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var wrapper=createEl("span",{className:"vjs-control-text"});var loadedText=createEl("span",{textContent:this.localize("Loaded")});var separator=document__default["default"].createTextNode(": ");this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});el.appendChild(wrapper);wrapper.appendChild(loadedText);wrapper.appendChild(separator);wrapper.appendChild(this.percentageEl_);return el;};_proto.dispose=function dispose(){this.partEls_=null;this.percentageEl_=null;_Component.prototype.dispose.call(this);};_proto.update=function update(event3){var _this2=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var liveTracker=_this2.player_.liveTracker;var buffered=_this2.player_.buffered();var duration2=liveTracker&&liveTracker.isLive()?liveTracker.seekableEnd():_this2.player_.duration();var bufferedEnd=_this2.player_.bufferedEnd();var children=_this2.partEls_;var percent=percentify(bufferedEnd,duration2);if(_this2.percent_!==percent){_this2.el_.style.width=percent;textContent(_this2.percentageEl_,percent);_this2.percent_=percent;}
for(var i3=0;i3<buffered.length;i3++){var start3=buffered.start(i3);var end=buffered.end(i3);var part=children[i3];if(!part){part=_this2.el_.appendChild(createEl());children[i3]=part;}
if(part.dataset.start===start3&&part.dataset.end===end){continue;}
part.dataset.start=start3;part.dataset.end=end;part.style.left=percentify(start3,bufferedEnd);part.style.width=percentify(end-start3,bufferedEnd);}
for(var _i3=children.length;_i3>buffered.length;_i3--){_this2.el_.removeChild(children[_i3-1]);}
children.length=buffered.length;});};return LoadProgressBar2;}(Component$1);Component$1.registerComponent("LoadProgressBar",LoadProgressBar);var TimeTooltip=function(_Component){_inheritsLoose__default["default"](TimeTooltip2,_Component);function TimeTooltip2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized__default["default"](_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}
var _proto=TimeTooltip2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"});};_proto.update=function update(seekBarRect,seekBarPoint,content){var tooltipRect=findPosition(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;if(!playerRect||!tooltipRect){return;}
var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}
if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}
pullTooltipBy=Math.round(pullTooltipBy);this.el_.style.right="-"+pullTooltipBy+"px";this.write(content);};_proto.write=function write(content){textContent(this.el_,content);};_proto.updateTime=function updateTime(seekBarRect,seekBarPoint,time,cb){var _this2=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var content;var duration2=_this2.player_.duration();if(_this2.player_.liveTracker&&_this2.player_.liveTracker.isLive()){var liveWindow=_this2.player_.liveTracker.liveWindow();var secondsBehind=liveWindow-seekBarPoint*liveWindow;content=(secondsBehind<1?"":"-")+formatTime(secondsBehind,liveWindow);}else{content=formatTime(time,duration2);}
_this2.update(seekBarRect,seekBarPoint,content);if(cb){cb();}});};return TimeTooltip2;}(Component$1);Component$1.registerComponent("TimeTooltip",TimeTooltip);var PlayProgressBar=function(_Component){_inheritsLoose__default["default"](PlayProgressBar2,_Component);function PlayProgressBar2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized__default["default"](_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}
var _proto=PlayProgressBar2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"});};_proto.update=function update(seekBarRect,seekBarPoint){var timeTooltip=this.getChild("timeTooltip");if(!timeTooltip){return;}
var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();timeTooltip.updateTime(seekBarRect,seekBarPoint,time);};return PlayProgressBar2;}(Component$1);PlayProgressBar.prototype.options_={children:[]};if(!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push("timeTooltip");}
Component$1.registerComponent("PlayProgressBar",PlayProgressBar);var MouseTimeDisplay=function(_Component){_inheritsLoose__default["default"](MouseTimeDisplay2,_Component);function MouseTimeDisplay2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized__default["default"](_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}
var _proto=MouseTimeDisplay2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};_proto.update=function update(seekBarRect,seekBarPoint){var _this2=this;var time=seekBarPoint*this.player_.duration();this.getChild("timeTooltip").updateTime(seekBarRect,seekBarPoint,time,function(){_this2.el_.style.left=seekBarRect.width*seekBarPoint+"px";});};return MouseTimeDisplay2;}(Component$1);MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);var STEP_SECONDS=5;var PAGE_KEY_MULTIPLIER=12;var SeekBar=function(_Slider){_inheritsLoose__default["default"](SeekBar2,_Slider);function SeekBar2(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.setEventHandlers_();return _this;}
var _proto=SeekBar2.prototype;_proto.setEventHandlers_=function setEventHandlers_(){var _this2=this;this.update_=bind(this,this.update);this.update=throttle(this.update_,UPDATE_REFRESH_INTERVAL);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update);}
this.updateInterval=null;this.enableIntervalHandler_=function(e2){return _this2.enableInterval_(e2);};this.disableIntervalHandler_=function(e2){return _this2.disableInterval_(e2);};this.on(this.player_,["playing"],this.enableIntervalHandler_);this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in document__default["default"]&&"visibilityState"in document__default["default"]){this.on(document__default["default"],"visibilitychange",this.toggleVisibility_);}};_proto.toggleVisibility_=function toggleVisibility_(e2){if(document__default["default"].visibilityState==="hidden"){this.cancelNamedAnimationFrame("SeekBar#update");this.cancelNamedAnimationFrame("Slider#update");this.disableInterval_(e2);}else{if(!this.player_.ended()&&!this.player_.paused()){this.enableInterval_();}
this.update();}};_proto.enableInterval_=function enableInterval_(){if(this.updateInterval){return;}
this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL);};_proto.disableInterval_=function disableInterval_(e2){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e2&&e2.type!=="ended"){return;}
if(!this.updateInterval){return;}
this.clearInterval(this.updateInterval);this.updateInterval=null;};_proto.createEl=function createEl2(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")});};_proto.update=function update(event3){var _this3=this;if(document__default["default"].visibilityState==="hidden"){return;}
var percent=_Slider.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var currentTime=_this3.player_.ended()?_this3.player_.duration():_this3.getCurrentTime_();var liveTracker=_this3.player_.liveTracker;var duration2=_this3.player_.duration();if(liveTracker&&liveTracker.isLive()){duration2=_this3.player_.liveTracker.liveCurrentTime();}
if(_this3.percent_!==percent){_this3.el_.setAttribute("aria-valuenow",(percent*100).toFixed(2));_this3.percent_=percent;}
if(_this3.currentTime_!==currentTime||_this3.duration_!==duration2){_this3.el_.setAttribute("aria-valuetext",_this3.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(currentTime,duration2),formatTime(duration2,duration2)],"{1} of {2}"));_this3.currentTime_=currentTime;_this3.duration_=duration2;}
if(_this3.bar){_this3.bar.update(getBoundingClientRect(_this3.el()),_this3.getProgress());}});return percent;};_proto.userSeek_=function userSeek_(ct2){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){this.player_.liveTracker.nextSeekedFromUser();}
this.player_.currentTime(ct2);};_proto.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();};_proto.getPercent=function getPercent(){var currentTime=this.getCurrentTime_();var percent;var liveTracker=this.player_.liveTracker;if(liveTracker&&liveTracker.isLive()){percent=(currentTime-liveTracker.seekableStart())/liveTracker.liveWindow();if(liveTracker.atLiveEdge()){percent=1;}}else{percent=currentTime/this.player_.duration();}
return percent;};_proto.handleMouseDown=function handleMouseDown(event3){if(!isSingleLeftClick(event3)){return;}
event3.stopPropagation();this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event3);};_proto.handleMouseMove=function handleMouseMove(event3,mouseDown){if(mouseDown===void 0){mouseDown=false;}
if(!isSingleLeftClick(event3)){return;}
if(!mouseDown&&!this.player_.scrubbing()){this.player_.scrubbing(true);}
var newTime;var distance=this.calculateDistance(event3);var liveTracker=this.player_.liveTracker;if(!liveTracker||!liveTracker.isLive()){newTime=distance*this.player_.duration();if(newTime===this.player_.duration()){newTime=newTime-0.1;}}else{if(distance>=0.99){liveTracker.seekToLiveEdge();return;}
var seekableStart=liveTracker.seekableStart();var seekableEnd=liveTracker.liveCurrentTime();newTime=seekableStart+distance*liveTracker.liveWindow();if(newTime>=seekableEnd){newTime=seekableEnd;}
if(newTime<=seekableStart){newTime=seekableStart+0.1;}
if(newTime===Infinity){return;}}
this.userSeek_(newTime);};_proto.enable=function enable2(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return;}
mouseTimeDisplay.show();};_proto.disable=function disable2(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return;}
mouseTimeDisplay.hide();};_proto.handleMouseUp=function handleMouseUp(event3){_Slider.prototype.handleMouseUp.call(this,event3);if(event3){event3.stopPropagation();}
this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play());}else{this.update_();}};_proto.stepForward=function stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS);};_proto.stepBack=function stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS);};_proto.handleAction=function handleAction(event3){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};_proto.handleKeyDown=function handleKeyDown(event3){var liveTracker=this.player_.liveTracker;if(keycode__default["default"].isEventKey(event3,"Space")||keycode__default["default"].isEventKey(event3,"Enter")){event3.preventDefault();event3.stopPropagation();this.handleAction(event3);}else if(keycode__default["default"].isEventKey(event3,"Home")){event3.preventDefault();event3.stopPropagation();this.userSeek_(0);}else if(keycode__default["default"].isEventKey(event3,"End")){event3.preventDefault();event3.stopPropagation();if(liveTracker&&liveTracker.isLive()){this.userSeek_(liveTracker.liveCurrentTime());}else{this.userSeek_(this.player_.duration());}}else if(/^[0-9]$/.test(keycode__default["default"](event3))){event3.preventDefault();event3.stopPropagation();var gotoFraction=(keycode__default["default"].codes[keycode__default["default"](event3)]-keycode__default["default"].codes["0"])*10/100;if(liveTracker&&liveTracker.isLive()){this.userSeek_(liveTracker.seekableStart()+liveTracker.liveWindow()*gotoFraction);}else{this.userSeek_(this.player_.duration()*gotoFraction);}}else if(keycode__default["default"].isEventKey(event3,"PgDn")){event3.preventDefault();event3.stopPropagation();this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else if(keycode__default["default"].isEventKey(event3,"PgUp")){event3.preventDefault();event3.stopPropagation();this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else{_Slider.prototype.handleKeyDown.call(this,event3);}};_proto.dispose=function dispose(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.update);}
this.off(this.player_,["playing"],this.enableIntervalHandler_);this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in document__default["default"]&&"visibilityState"in document__default["default"]){this.off(document__default["default"],"visibilitychange",this.toggleVisibility_);}
_Slider.prototype.dispose.call(this);};return SeekBar2;}(Slider);SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");}
Component$1.registerComponent("SeekBar",SeekBar);var ProgressControl=function(_Component){_inheritsLoose__default["default"](ProgressControl2,_Component);function ProgressControl2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleMouseMove=throttle(bind(_assertThisInitialized__default["default"](_this),_this.handleMouseMove),UPDATE_REFRESH_INTERVAL);_this.throttledHandleMouseSeek=throttle(bind(_assertThisInitialized__default["default"](_this),_this.handleMouseSeek),UPDATE_REFRESH_INTERVAL);_this.handleMouseUpHandler_=function(e2){return _this.handleMouseUp(e2);};_this.handleMouseDownHandler_=function(e2){return _this.handleMouseDown(e2);};_this.enable();return _this;}
var _proto=ProgressControl2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"});};_proto.handleMouseMove=function handleMouseMove(event3){var seekBar=this.getChild("seekBar");if(!seekBar){return;}
var playProgressBar=seekBar.getChild("playProgressBar");var mouseTimeDisplay=seekBar.getChild("mouseTimeDisplay");if(!playProgressBar&&!mouseTimeDisplay){return;}
var seekBarEl=seekBar.el();var seekBarRect=findPosition(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event3).x;seekBarPoint=clamp(seekBarPoint,0,1);if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint);}
if(playProgressBar){playProgressBar.update(seekBarRect,seekBar.getProgress());}};_proto.handleMouseSeek=function handleMouseSeek(event3){var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseMove(event3);}};_proto.enabled=function enabled(){return this.enabled_;};_proto.disable=function disable2(){this.children().forEach(function(child){return child.disable&&child.disable();});if(!this.enabled()){return;}
this.off(["mousedown","touchstart"],this.handleMouseDownHandler_);this.off(this.el_,"mousemove",this.handleMouseMove);this.removeListenersAddedOnMousedownAndTouchstart();this.addClass("disabled");this.enabled_=false;if(this.player_.scrubbing()){var seekBar=this.getChild("seekBar");this.player_.scrubbing(false);if(seekBar.videoWasPlaying){silencePromise(this.player_.play());}}};_proto.enable=function enable2(){this.children().forEach(function(child){return child.enable&&child.enable();});if(this.enabled()){return;}
this.on(["mousedown","touchstart"],this.handleMouseDownHandler_);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true;};_proto.removeListenersAddedOnMousedownAndTouchstart=function removeListenersAddedOnMousedownAndTouchstart(){var doc=this.el_.ownerDocument;this.off(doc,"mousemove",this.throttledHandleMouseSeek);this.off(doc,"touchmove",this.throttledHandleMouseSeek);this.off(doc,"mouseup",this.handleMouseUpHandler_);this.off(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseDown=function handleMouseDown(event3){var doc=this.el_.ownerDocument;var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseDown(event3);}
this.on(doc,"mousemove",this.throttledHandleMouseSeek);this.on(doc,"touchmove",this.throttledHandleMouseSeek);this.on(doc,"mouseup",this.handleMouseUpHandler_);this.on(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseUp=function handleMouseUp(event3){var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseUp(event3);}
this.removeListenersAddedOnMousedownAndTouchstart();};return ProgressControl2;}(Component$1);ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);var PictureInPictureToggle=function(_Button){_inheritsLoose__default["default"](PictureInPictureToggle2,_Button);function PictureInPictureToggle2(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.on(player,["enterpictureinpicture","leavepictureinpicture"],function(e2){return _this.handlePictureInPictureChange(e2);});_this.on(player,["disablepictureinpicturechanged","loadedmetadata"],function(e2){return _this.handlePictureInPictureEnabledChange(e2);});_this.on(player,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var isSourceAudio=player.currentType().substring(0,5)==="audio";if(isSourceAudio||player.audioPosterMode()||player.audioOnlyMode()){if(player.isInPictureInPicture()){player.exitPictureInPicture();}
_this.hide();}else{_this.show();}});_this.disable();return _this;}
var _proto=PictureInPictureToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-picture-in-picture-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handlePictureInPictureEnabledChange=function handlePictureInPictureEnabledChange(){if(document__default["default"].pictureInPictureEnabled&&this.player_.disablePictureInPicture()===false){this.enable();}else{this.disable();}};_proto.handlePictureInPictureChange=function handlePictureInPictureChange(event3){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture");}else{this.controlText("Picture-in-Picture");}
this.handlePictureInPictureEnabledChange();};_proto.handleClick=function handleClick(event3){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture();}else{this.player_.exitPictureInPicture();}};return PictureInPictureToggle2;}(Button);PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);var FullscreenToggle=function(_Button){_inheritsLoose__default["default"](FullscreenToggle2,_Button);function FullscreenToggle2(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.on(player,"fullscreenchange",function(e2){return _this.handleFullscreenChange(e2);});if(document__default["default"][player.fsApi_.fullscreenEnabled]===false){_this.disable();}
return _this;}
var _proto=FullscreenToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleFullscreenChange=function handleFullscreenChange(event3){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen");}else{this.controlText("Fullscreen");}};_proto.handleClick=function handleClick(event3){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return FullscreenToggle2;}(Button);FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);var checkVolumeSupport=function checkVolumeSupport2(self2,player){if(player.tech_&&!player.tech_.featuresVolumeControl){self2.addClass("vjs-hidden");}
self2.on(player,"loadstart",function(){if(!player.tech_.featuresVolumeControl){self2.addClass("vjs-hidden");}else{self2.removeClass("vjs-hidden");}});};var VolumeLevel=function(_Component){_inheritsLoose__default["default"](VolumeLevel2,_Component);function VolumeLevel2(){return _Component.apply(this,arguments)||this;}
var _proto=VolumeLevel2.prototype;_proto.createEl=function createEl2(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});el.appendChild(_Component.prototype.createEl.call(this,"span",{className:"vjs-control-text"}));return el;};return VolumeLevel2;}(Component$1);Component$1.registerComponent("VolumeLevel",VolumeLevel);var VolumeLevelTooltip=function(_Component){_inheritsLoose__default["default"](VolumeLevelTooltip2,_Component);function VolumeLevelTooltip2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized__default["default"](_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}
var _proto=VolumeLevelTooltip2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"});};_proto.update=function update(rangeBarRect,rangeBarPoint,vertical,content){if(!vertical){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var volumeBarPointPx=rangeBarRect.width*rangeBarPoint;if(!playerRect||!tooltipRect){return;}
var spaceLeftOfPoint=rangeBarRect.left-playerRect.left+volumeBarPointPx;var spaceRightOfPoint=rangeBarRect.width-volumeBarPointPx+(playerRect.right-rangeBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}
if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}
this.el_.style.right="-"+pullTooltipBy+"px";}
this.write(content+"%");};_proto.write=function write(content){textContent(this.el_,content);};_proto.updateVolume=function updateVolume(rangeBarRect,rangeBarPoint,vertical,volume,cb){var _this2=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){_this2.update(rangeBarRect,rangeBarPoint,vertical,volume.toFixed(0));if(cb){cb();}});};return VolumeLevelTooltip2;}(Component$1);Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);var MouseVolumeLevelDisplay=function(_Component){_inheritsLoose__default["default"](MouseVolumeLevelDisplay2,_Component);function MouseVolumeLevelDisplay2(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized__default["default"](_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}
var _proto=MouseVolumeLevelDisplay2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};_proto.update=function update(rangeBarRect,rangeBarPoint,vertical){var _this2=this;var volume=100*rangeBarPoint;this.getChild("volumeLevelTooltip").updateVolume(rangeBarRect,rangeBarPoint,vertical,volume,function(){if(vertical){_this2.el_.style.bottom=rangeBarRect.height*rangeBarPoint+"px";}else{_this2.el_.style.left=rangeBarRect.width*rangeBarPoint+"px";}});};return MouseVolumeLevelDisplay2;}(Component$1);MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);var VolumeBar=function(_Slider){_inheritsLoose__default["default"](VolumeBar2,_Slider);function VolumeBar2(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.on("slideractive",function(e2){return _this.updateLastVolume_(e2);});_this.on(player,"volumechange",function(e2){return _this.updateARIAAttributes(e2);});player.ready(function(){return _this.updateARIAAttributes();});return _this;}
var _proto=VolumeBar2.prototype;_proto.createEl=function createEl2(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"});};_proto.handleMouseDown=function handleMouseDown(event3){if(!isSingleLeftClick(event3)){return;}
_Slider.prototype.handleMouseDown.call(this,event3);};_proto.handleMouseMove=function handleMouseMove(event3){var mouseVolumeLevelDisplay=this.getChild("mouseVolumeLevelDisplay");if(mouseVolumeLevelDisplay){var volumeBarEl=this.el();var volumeBarRect=getBoundingClientRect(volumeBarEl);var vertical=this.vertical();var volumeBarPoint=getPointerPosition(volumeBarEl,event3);volumeBarPoint=vertical?volumeBarPoint.y:volumeBarPoint.x;volumeBarPoint=clamp(volumeBarPoint,0,1);mouseVolumeLevelDisplay.update(volumeBarRect,volumeBarPoint,vertical);}
if(!isSingleLeftClick(event3)){return;}
this.checkMuted();this.player_.volume(this.calculateDistance(event3));};_proto.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false);}};_proto.getPercent=function getPercent(){if(this.player_.muted()){return 0;}
return this.player_.volume();};_proto.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1);};_proto.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1);};_proto.updateARIAAttributes=function updateARIAAttributes(event3){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",ariaValue);this.el_.setAttribute("aria-valuetext",ariaValue+"%");};_proto.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100);};_proto.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one("sliderinactive",function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag);}});};return VolumeBar2;}(Slider);VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};if(!IS_IOS&&!IS_ANDROID){VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");}
VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);var VolumeControl=function(_Component){_inheritsLoose__default["default"](VolumeControl2,_Component);function VolumeControl2(player,options){var _this;if(options===void 0){options={};}
options.vertical=options.vertical||false;if(typeof options.volumeBar==="undefined"||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical;}
_this=_Component.call(this,player,options)||this;checkVolumeSupport(_assertThisInitialized__default["default"](_this),player);_this.throttledHandleMouseMove=throttle(bind(_assertThisInitialized__default["default"](_this),_this.handleMouseMove),UPDATE_REFRESH_INTERVAL);_this.handleMouseUpHandler_=function(e2){return _this.handleMouseUp(e2);};_this.on("mousedown",function(e2){return _this.handleMouseDown(e2);});_this.on("touchstart",function(e2){return _this.handleMouseDown(e2);});_this.on("mousemove",function(e2){return _this.handleMouseMove(e2);});_this.on(_this.volumeBar,["focus","slideractive"],function(){_this.volumeBar.addClass("vjs-slider-active");_this.addClass("vjs-slider-active");_this.trigger("slideractive");});_this.on(_this.volumeBar,["blur","sliderinactive"],function(){_this.volumeBar.removeClass("vjs-slider-active");_this.removeClass("vjs-slider-active");_this.trigger("sliderinactive");});return _this;}
var _proto=VolumeControl2.prototype;_proto.createEl=function createEl2(){var orientationClass="vjs-volume-horizontal";if(this.options_.vertical){orientationClass="vjs-volume-vertical";}
return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+orientationClass});};_proto.handleMouseDown=function handleMouseDown(event3){var doc=this.el_.ownerDocument;this.on(doc,"mousemove",this.throttledHandleMouseMove);this.on(doc,"touchmove",this.throttledHandleMouseMove);this.on(doc,"mouseup",this.handleMouseUpHandler_);this.on(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseUp=function handleMouseUp(event3){var doc=this.el_.ownerDocument;this.off(doc,"mousemove",this.throttledHandleMouseMove);this.off(doc,"touchmove",this.throttledHandleMouseMove);this.off(doc,"mouseup",this.handleMouseUpHandler_);this.off(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseMove=function handleMouseMove(event3){this.volumeBar.handleMouseMove(event3);};return VolumeControl2;}(Component$1);VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);var checkMuteSupport=function checkMuteSupport2(self2,player){if(player.tech_&&!player.tech_.featuresMuteControl){self2.addClass("vjs-hidden");}
self2.on(player,"loadstart",function(){if(!player.tech_.featuresMuteControl){self2.addClass("vjs-hidden");}else{self2.removeClass("vjs-hidden");}});};var MuteToggle=function(_Button){_inheritsLoose__default["default"](MuteToggle2,_Button);function MuteToggle2(player,options){var _this;_this=_Button.call(this,player,options)||this;checkMuteSupport(_assertThisInitialized__default["default"](_this),player);_this.on(player,["loadstart","volumechange"],function(e2){return _this.update(e2);});return _this;}
var _proto=MuteToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-mute-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event3){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<0.1?0.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false);}else{this.player_.muted(this.player_.muted()?false:true);}};_proto.update=function update(event3){this.updateIcon_();this.updateControlText_();};_proto.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;if(IS_IOS&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted);}
if(vol===0||this.player_.muted()){level=0;}else if(vol<0.33){level=1;}else if(vol<0.67){level=2;}
for(var i3=0;i3<4;i3++){removeClass(this.el_,"vjs-vol-"+i3);}
addClass(this.el_,"vjs-vol-"+level);};_proto.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?"Unmute":"Mute";if(this.controlText()!==text){this.controlText(text);}};return MuteToggle2;}(Button);MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);var VolumePanel=function(_Component){_inheritsLoose__default["default"](VolumePanel2,_Component);function VolumePanel2(player,options){var _this;if(options===void 0){options={};}
if(typeof options.inline!=="undefined"){options.inline=options.inline;}else{options.inline=true;}
if(typeof options.volumeControl==="undefined"||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline;}
_this=_Component.call(this,player,options)||this;_this.handleKeyPressHandler_=function(e2){return _this.handleKeyPress(e2);};_this.on(player,["loadstart"],function(e2){return _this.volumePanelState_(e2);});_this.on(_this.muteToggle,"keyup",function(e2){return _this.handleKeyPress(e2);});_this.on(_this.volumeControl,"keyup",function(e2){return _this.handleVolumeControlKeyUp(e2);});_this.on("keydown",function(e2){return _this.handleKeyPress(e2);});_this.on("mouseover",function(e2){return _this.handleMouseOver(e2);});_this.on("mouseout",function(e2){return _this.handleMouseOut(e2);});_this.on(_this.volumeControl,["slideractive"],_this.sliderActive_);_this.on(_this.volumeControl,["sliderinactive"],_this.sliderInactive_);return _this;}
var _proto=VolumePanel2.prototype;_proto.sliderActive_=function sliderActive_(){this.addClass("vjs-slider-active");};_proto.sliderInactive_=function sliderInactive_(){this.removeClass("vjs-slider-active");};_proto.volumePanelState_=function volumePanelState_(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden");}
if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only");}};_proto.createEl=function createEl2(){var orientationClass="vjs-volume-panel-horizontal";if(!this.options_.inline){orientationClass="vjs-volume-panel-vertical";}
return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+orientationClass});};_proto.dispose=function dispose(){this.handleMouseOut();_Component.prototype.dispose.call(this);};_proto.handleVolumeControlKeyUp=function handleVolumeControlKeyUp(event3){if(keycode__default["default"].isEventKey(event3,"Esc")){this.muteToggle.focus();}};_proto.handleMouseOver=function handleMouseOver(event3){this.addClass("vjs-hover");on2(document__default["default"],"keyup",this.handleKeyPressHandler_);};_proto.handleMouseOut=function handleMouseOut(event3){this.removeClass("vjs-hover");off(document__default["default"],"keyup",this.handleKeyPressHandler_);};_proto.handleKeyPress=function handleKeyPress(event3){if(keycode__default["default"].isEventKey(event3,"Esc")){this.handleMouseOut();}};return VolumePanel2;}(Component$1);VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);var Menu=function(_Component){_inheritsLoose__default["default"](Menu2,_Component);function Menu2(player,options){var _this;_this=_Component.call(this,player,options)||this;if(options){_this.menuButton_=options.menuButton;}
_this.focusedChild_=-1;_this.on("keydown",function(e2){return _this.handleKeyDown(e2);});_this.boundHandleBlur_=function(e2){return _this.handleBlur(e2);};_this.boundHandleTapClick_=function(e2){return _this.handleTapClick(e2);};return _this;}
var _proto=Menu2.prototype;_proto.addEventListenerForItem=function addEventListenerForItem(component){if(!(component instanceof Component$1)){return;}
this.on(component,"blur",this.boundHandleBlur_);this.on(component,["tap","click"],this.boundHandleTapClick_);};_proto.removeEventListenerForItem=function removeEventListenerForItem(component){if(!(component instanceof Component$1)){return;}
this.off(component,"blur",this.boundHandleBlur_);this.off(component,["tap","click"],this.boundHandleTapClick_);};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component);}
this.removeEventListenerForItem(component);_Component.prototype.removeChild.call(this,component);};_proto.addItem=function addItem(component){var childComponent=this.addChild(component);if(childComponent){this.addEventListenerForItem(childComponent);}};_proto.createEl=function createEl$1(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=createEl(contentElType,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_);on2(el,"click",function(event3){event3.preventDefault();event3.stopImmediatePropagation();});return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;_Component.prototype.dispose.call(this);};_proto.handleBlur=function handleBlur(event3){var relatedTarget=event3.relatedTarget||document__default["default"].activeElement;if(!this.children().some(function(element){return element.el()===relatedTarget;})){var btn=this.menuButton_;if(btn&&btn.buttonPressed_&&relatedTarget!==btn.el().firstChild){btn.unpressButton();}}};_proto.handleTapClick=function handleTapClick(event3){if(this.menuButton_){this.menuButton_.unpressButton();var childComponents=this.children();if(!Array.isArray(childComponents)){return;}
var foundComponent=childComponents.filter(function(component){return component.el()===event3.target;})[0];if(!foundComponent){return;}
if(foundComponent.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus();}}};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Left")||keycode__default["default"].isEventKey(event3,"Down")){event3.preventDefault();event3.stopPropagation();this.stepForward();}else if(keycode__default["default"].isEventKey(event3,"Right")||keycode__default["default"].isEventKey(event3,"Up")){event3.preventDefault();event3.stopPropagation();this.stepBack();}};_proto.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==void 0){stepChild=this.focusedChild_+1;}
this.focus(stepChild);};_proto.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==void 0){stepChild=this.focusedChild_-1;}
this.focus(stepChild);};_proto.focus=function focus(item){if(item===void 0){item=0;}
var children=this.children().slice();var haveTitle=children.length&&children[0].hasClass("vjs-menu-title");if(haveTitle){children.shift();}
if(children.length>0){if(item<0){item=0;}else if(item>=children.length){item=children.length-1;}
this.focusedChild_=item;children[item].el_.focus();}};return Menu2;}(Component$1);Component$1.registerComponent("Menu",Menu);var MenuButton=function(_Component){_inheritsLoose__default["default"](MenuButton2,_Component);function MenuButton2(player,options){var _this;if(options===void 0){options={};}
_this=_Component.call(this,player,options)||this;_this.menuButton_=new Button(player,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute("aria-haspopup","true");var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+" "+buttonClass;_this.menuButton_.removeClass("vjs-control");_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;var handleClick=function handleClick2(e2){return _this.handleClick(e2);};_this.handleMenuKeyUp_=function(e2){return _this.handleMenuKeyUp(e2);};_this.on(_this.menuButton_,"tap",handleClick);_this.on(_this.menuButton_,"click",handleClick);_this.on(_this.menuButton_,"keydown",function(e2){return _this.handleKeyDown(e2);});_this.on(_this.menuButton_,"mouseenter",function(){_this.addClass("vjs-hover");_this.menu.show();on2(document__default["default"],"keyup",_this.handleMenuKeyUp_);});_this.on("mouseleave",function(e2){return _this.handleMouseLeave(e2);});_this.on("keydown",function(e2){return _this.handleSubmenuKeyDown(e2);});return _this;}
var _proto=MenuButton2.prototype;_proto.update=function update(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu);}
this.menu=menu;this.addChild(menu);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide();this.menu.contentEl_.removeAttribute("role");}else{this.show();this.menu.contentEl_.setAttribute("role","menu");}};_proto.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var titleEl=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1});var titleComponent=new Component$1(this.player_,{el:titleEl});menu.addItem(titleComponent);}
this.items=this.createItems();if(this.items){for(var i3=0;i3<this.items.length;i3++){menu.addItem(this.items[i3]);}}
return menu;};_proto.createItems=function createItems(){};_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{});};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline";}else{menuButtonClass+="-popup";}
var buttonClass=Button.prototype.buildCSSClass();return "vjs-menu-button "+menuButtonClass+" "+buttonClass+" "+_Component.prototype.buildCSSClass.call(this);};_proto.buildCSSClass=function buildCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline";}else{menuButtonClass+="-popup";}
return "vjs-menu-button "+menuButtonClass+" "+_Component.prototype.buildCSSClass.call(this);};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.menuButton_.el();}
return this.menuButton_.controlText(text,el);};_proto.dispose=function dispose(){this.handleMouseLeave();_Component.prototype.dispose.call(this);};_proto.handleClick=function handleClick(event3){if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}};_proto.handleMouseLeave=function handleMouseLeave(event3){this.removeClass("vjs-hover");off(document__default["default"],"keyup",this.handleMenuKeyUp_);};_proto.focus=function focus(){this.menuButton_.focus();};_proto.blur=function blur(){this.menuButton_.blur();};_proto.handleKeyDown=function handleKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Esc")||keycode__default["default"].isEventKey(event3,"Tab")){if(this.buttonPressed_){this.unpressButton();}
if(!keycode__default["default"].isEventKey(event3,"Tab")){event3.preventDefault();this.menuButton_.focus();}}else if(keycode__default["default"].isEventKey(event3,"Up")||keycode__default["default"].isEventKey(event3,"Down")){if(!this.buttonPressed_){event3.preventDefault();this.pressButton();}}};_proto.handleMenuKeyUp=function handleMenuKeyUp(event3){if(keycode__default["default"].isEventKey(event3,"Esc")||keycode__default["default"].isEventKey(event3,"Tab")){this.removeClass("vjs-hover");}};_proto.handleSubmenuKeyPress=function handleSubmenuKeyPress(event3){this.handleSubmenuKeyDown(event3);};_proto.handleSubmenuKeyDown=function handleSubmenuKeyDown(event3){if(keycode__default["default"].isEventKey(event3,"Esc")||keycode__default["default"].isEventKey(event3,"Tab")){if(this.buttonPressed_){this.unpressButton();}
if(!keycode__default["default"].isEventKey(event3,"Tab")){event3.preventDefault();this.menuButton_.focus();}}};_proto.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(IS_IOS&&isInFrame()){return;}
this.menu.focus();}};_proto.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false");}};_proto.disable=function disable2(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable();};_proto.enable=function enable2(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable();};return MenuButton2;}(Component$1);Component$1.registerComponent("MenuButton",MenuButton);var TrackButton=function(_MenuButton){_inheritsLoose__default["default"](TrackButton2,_MenuButton);function TrackButton2(player,options){var _this;var tracks=options.tracks;_this=_MenuButton.call(this,player,options)||this;if(_this.items.length<=1){_this.hide();}
if(!tracks){return _assertThisInitialized__default["default"](_this);}
var updateHandler=bind(_assertThisInitialized__default["default"](_this),_this.update);tracks.addEventListener("removetrack",updateHandler);tracks.addEventListener("addtrack",updateHandler);tracks.addEventListener("labelchange",updateHandler);_this.player_.on("ready",updateHandler);_this.player_.on("dispose",function(){tracks.removeEventListener("removetrack",updateHandler);tracks.removeEventListener("addtrack",updateHandler);tracks.removeEventListener("labelchange",updateHandler);});return _this;}
return TrackButton2;}(MenuButton);Component$1.registerComponent("TrackButton",TrackButton);var MenuKeys=["Tab","Esc","Up","Down","Right","Left"];var MenuItem=function(_ClickableComponent){_inheritsLoose__default["default"](MenuItem2,_ClickableComponent);function MenuItem2(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute("role","menuitemcheckbox");}else{_this.el_.setAttribute("role","menuitemradio");}}else{_this.el_.setAttribute("role","menuitem");}
return _this;}
var _proto=MenuItem2.prototype;_proto.createEl=function createEl$1(type,props,attrs){this.nonIconControl=true;var el=_ClickableComponent.prototype.createEl.call(this,"li",assign({className:"vjs-menu-item",tabIndex:-1},props),attrs);el.replaceChild(createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),el.querySelector(".vjs-icon-placeholder"));return el;};_proto.handleKeyDown=function handleKeyDown(event3){if(!MenuKeys.some(function(key){return keycode__default["default"].isEventKey(event3,key);})){_ClickableComponent.prototype.handleKeyDown.call(this,event3);}};_proto.handleClick=function handleClick(event3){this.selected(true);};_proto.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true;}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false;}}};return MenuItem2;}(ClickableComponent);Component$1.registerComponent("MenuItem",MenuItem);var TextTrackMenuItem=function(_MenuItem){_inheritsLoose__default["default"](TextTrackMenuItem2,_MenuItem);function TextTrackMenuItem2(player,options){var _this;var track=options.track;var tracks=player.textTracks();options.label=track.label||track.language||"Unknown";options.selected=track.mode==="showing";_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.kinds=(options.kinds||[options.kind||_this.track.kind]).filter(Boolean);var changeHandler=function changeHandler2(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this.handleTracksChange.apply(_assertThisInitialized__default["default"](_this),args);};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler2(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
_this.handleSelectedLanguageChange.apply(_assertThisInitialized__default["default"](_this),args);};player.on(["loadstart","texttrackchange"],changeHandler);tracks.addEventListener("change",changeHandler);tracks.addEventListener("selectedlanguagechange",selectedLanguageChangeHandler);_this.on("dispose",function(){player.off(["loadstart","texttrackchange"],changeHandler);tracks.removeEventListener("change",changeHandler);tracks.removeEventListener("selectedlanguagechange",selectedLanguageChangeHandler);});if(tracks.onchange===void 0){var event3;_this.on(["tap","click"],function(){if(typeof window__default["default"].Event!=="object"){try{event3=new window__default["default"].Event("change");}catch(err){}}
if(!event3){event3=document__default["default"].createEvent("Event");event3.initEvent("change",true,true);}
tracks.dispatchEvent(event3);});}
_this.handleTracksChange();return _this;}
var _proto=TextTrackMenuItem2.prototype;_proto.handleClick=function handleClick(event3){var referenceTrack=this.track;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event3);if(!tracks){return;}
for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];if(this.kinds.indexOf(track.kind)===-1){continue;}
if(track===referenceTrack){if(track.mode!=="showing"){track.mode="showing";}}else if(track.mode!=="disabled"){track.mode="disabled";}}};_proto.handleTracksChange=function handleTracksChange(event3){var shouldBeSelected=this.track.mode==="showing";if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event3){if(this.track.mode==="showing"){var selectedLanguage=this.player_.cache_.selectedLanguage;if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return;}
this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind};}};_proto.dispose=function dispose(){this.track=null;_MenuItem.prototype.dispose.call(this);};return TextTrackMenuItem2;}(MenuItem);Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);var OffTextTrackMenuItem=function(_TextTrackMenuItem){_inheritsLoose__default["default"](OffTextTrackMenuItem2,_TextTrackMenuItem);function OffTextTrackMenuItem2(player,options){options.track={player,kind:options.kind,kinds:options.kinds,"default":false,mode:"disabled"};if(!options.kinds){options.kinds=[options.kind];}
if(options.label){options.track.label=options.label;}else{options.track.label=options.kinds.join(" and ")+" off";}
options.selectable=true;options.multiSelectable=false;return _TextTrackMenuItem.call(this,player,options)||this;}
var _proto=OffTextTrackMenuItem2.prototype;_proto.handleTracksChange=function handleTracksChange(event3){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i3=0,l2=tracks.length;i3<l2;i3++){var track=tracks[i3];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==="showing"){shouldBeSelected=false;break;}}
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event3){var tracks=this.player().textTracks();var allHidden=true;for(var i3=0,l2=tracks.length;i3<l2;i3++){var track=tracks[i3];if(["captions","descriptions","subtitles"].indexOf(track.kind)>-1&&track.mode==="showing"){allHidden=false;break;}}
if(allHidden){this.player_.cache_.selectedLanguage={enabled:false};}};return OffTextTrackMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);var TextTrackButton=function(_TrackButton){_inheritsLoose__default["default"](TextTrackButton2,_TrackButton);function TextTrackButton2(player,options){if(options===void 0){options={};}
options.tracks=player.textTracks();return _TrackButton.call(this,player,options)||this;}
var _proto=TextTrackButton2.prototype;_proto.createItems=function createItems(items,TrackMenuItem){if(items===void 0){items=[];}
if(TrackMenuItem===void 0){TrackMenuItem=TextTrackMenuItem;}
var label;if(this.label_){label=this.label_+" off";}
items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_];}
for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});item.addClass("vjs-"+track.kind+"-menu-item");items.push(item);}}
return items;};return TextTrackButton2;}(TrackButton);Component$1.registerComponent("TextTrackButton",TextTrackButton);var ChaptersTrackMenuItem=function(_MenuItem){_inheritsLoose__default["default"](ChaptersTrackMenuItem2,_MenuItem);function ChaptersTrackMenuItem2(player,options){var _this;var track=options.track;var cue=options.cue;var currentTime=player.currentTime();options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.cue=cue;return _this;}
var _proto=ChaptersTrackMenuItem2.prototype;_proto.handleClick=function handleClick(event3){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);};return ChaptersTrackMenuItem2;}(MenuItem);Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);var ChaptersButton=function(_TextTrackButton){_inheritsLoose__default["default"](ChaptersButton2,_TextTrackButton);function ChaptersButton2(player,options,ready){var _this;_this=_TextTrackButton.call(this,player,options,ready)||this;_this.selectCurrentItem_=function(){_this.items.forEach(function(item){item.selected(_this.track_.activeCues[0]===item.cue);});};return _this;}
var _proto=ChaptersButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-chapters-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.update=function update(event3){if(event3&&event3.track&&event3.track.kind!=="chapters"){return;}
var track=this.findChaptersTrack();if(track!==this.track_){this.setTrack(track);_TextTrackButton.prototype.update.call(this);}else if(!this.items||track&&track.cues&&track.cues.length!==this.items.length){_TextTrackButton.prototype.update.call(this);}};_proto.setTrack=function setTrack(track){if(this.track_===track){return;}
if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}
if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener("load",this.updateHandler_);}
this.track_.removeEventListener("cuechange",this.selectCurrentItem_);this.track_=null;}
this.track_=track;if(this.track_){this.track_.mode="hidden";var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener("load",this.updateHandler_);}
this.track_.addEventListener("cuechange",this.selectCurrentItem_);}};_proto.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i3=tracks.length-1;i3>=0;i3--){var track=tracks[i3];if(track.kind===this.kind_){return track;}}};_proto.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label;}
return this.localize(toTitleCase$1(this.kind_));};_proto.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this);};_proto.createItems=function createItems(){var items=[];if(!this.track_){return items;}
var cues=this.track_.cues;if(!cues){return items;}
for(var i3=0,l2=cues.length;i3<l2;i3++){var cue=cues[i3];var mi2=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue});items.push(mi2);}
return items;};return ChaptersButton2;}(TextTrackButton);ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);var DescriptionsButton=function(_TextTrackButton){_inheritsLoose__default["default"](DescriptionsButton2,_TextTrackButton);function DescriptionsButton2(player,options,ready){var _this;_this=_TextTrackButton.call(this,player,options,ready)||this;var tracks=player.textTracks();var changeHandler=bind(_assertThisInitialized__default["default"](_this),_this.handleTracksChange);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler);});return _this;}
var _proto=DescriptionsButton2.prototype;_proto.handleTracksChange=function handleTracksChange(event3){var tracks=this.player().textTracks();var disabled=false;for(var i3=0,l2=tracks.length;i3<l2;i3++){var track=tracks[i3];if(track.kind!==this.kind_&&track.mode==="showing"){disabled=true;break;}}
if(disabled){this.disable();}else{this.enable();}};_proto.buildCSSClass=function buildCSSClass(){return "vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-descriptions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return DescriptionsButton2;}(TextTrackButton);DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);var SubtitlesButton=function(_TextTrackButton){_inheritsLoose__default["default"](SubtitlesButton2,_TextTrackButton);function SubtitlesButton2(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}
var _proto=SubtitlesButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-subtitles-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return SubtitlesButton2;}(TextTrackButton);SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);var CaptionSettingsMenuItem=function(_TextTrackMenuItem){_inheritsLoose__default["default"](CaptionSettingsMenuItem2,_TextTrackMenuItem);function CaptionSettingsMenuItem2(player,options){var _this;options.track={player,kind:options.kind,label:options.kind+" settings",selectable:false,"default":false,mode:"disabled"};options.selectable=false;options.name="CaptionSettingsMenuItem";_this=_TextTrackMenuItem.call(this,player,options)||this;_this.addClass("vjs-texttrack-settings");_this.controlText(", opens "+options.kind+" settings dialog");return _this;}
var _proto=CaptionSettingsMenuItem2.prototype;_proto.handleClick=function handleClick(event3){this.player().getChild("textTrackSettings").open();};return CaptionSettingsMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);var CaptionsButton=function(_TextTrackButton){_inheritsLoose__default["default"](CaptionsButton2,_TextTrackButton);function CaptionsButton2(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}
var _proto=CaptionsButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-captions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}
return _TextTrackButton.prototype.createItems.call(this,items);};return CaptionsButton2;}(TextTrackButton);CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);var SubsCapsMenuItem=function(_TextTrackMenuItem){_inheritsLoose__default["default"](SubsCapsMenuItem2,_TextTrackMenuItem);function SubsCapsMenuItem2(){return _TextTrackMenuItem.apply(this,arguments)||this;}
var _proto=SubsCapsMenuItem2.prototype;_proto.createEl=function createEl$1(type,props,attrs){var el=_TextTrackMenuItem.prototype.createEl.call(this,type,props,attrs);var parentSpan=el.querySelector(".vjs-menu-item-text");if(this.options_.track.kind==="captions"){parentSpan.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));parentSpan.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}));}
return el;};return SubsCapsMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);var SubsCapsButton=function(_TextTrackButton){_inheritsLoose__default["default"](SubsCapsButton2,_TextTrackButton);function SubsCapsButton2(player,options){var _this;if(options===void 0){options={};}
_this=_TextTrackButton.call(this,player,options)||this;_this.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(_this.player_.language_)>-1){_this.label_="captions";}
_this.menuButton_.controlText(toTitleCase$1(_this.label_));return _this;}
var _proto=SubsCapsButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-subs-caps-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-subs-caps-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1;}
items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items;};return SubsCapsButton2;}(TextTrackButton);SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);var AudioTrackMenuItem=function(_MenuItem){_inheritsLoose__default["default"](AudioTrackMenuItem2,_MenuItem);function AudioTrackMenuItem2(player,options){var _this;var track=options.track;var tracks=player.audioTracks();options.label=track.label||track.language||"Unknown";options.selected=track.enabled;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.addClass("vjs-"+track.kind+"-menu-item");var changeHandler=function changeHandler2(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this.handleTracksChange.apply(_assertThisInitialized__default["default"](_this),args);};tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler);});return _this;}
var _proto=AudioTrackMenuItem2.prototype;_proto.createEl=function createEl$1(type,props,attrs){var el=_MenuItem.prototype.createEl.call(this,type,props,attrs);var parentSpan=el.querySelector(".vjs-menu-item-text");if(this.options_.track.kind==="main-desc"){parentSpan.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));parentSpan.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}));}
return el;};_proto.handleClick=function handleClick(event3){_MenuItem.prototype.handleClick.call(this,event3);this.track.enabled=true;if(this.player_.tech_.featuresNativeAudioTracks){var tracks=this.player_.audioTracks();for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];if(track===this.track){continue;}
track.enabled=track===this.track;}}};_proto.handleTracksChange=function handleTracksChange(event3){this.selected(this.track.enabled);};return AudioTrackMenuItem2;}(MenuItem);Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);var AudioTrackButton=function(_TrackButton){_inheritsLoose__default["default"](AudioTrackButton2,_TrackButton);function AudioTrackButton2(player,options){if(options===void 0){options={};}
options.tracks=player.audioTracks();return _TrackButton.call(this,player,options)||this;}
var _proto=AudioTrackButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-audio-button "+_TrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(items){if(items===void 0){items=[];}
this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];items.push(new AudioTrackMenuItem(this.player_,{track,selectable:true,multiSelectable:false}));}
return items;};return AudioTrackButton2;}(TrackButton);AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);var PlaybackRateMenuItem=function(_MenuItem){_inheritsLoose__default["default"](PlaybackRateMenuItem2,_MenuItem);function PlaybackRateMenuItem2(player,options){var _this;var label=options.rate;var rate=parseFloat(label,10);options.label=label;options.selected=rate===player.playbackRate();options.selectable=true;options.multiSelectable=false;_this=_MenuItem.call(this,player,options)||this;_this.label=label;_this.rate=rate;_this.on(player,"ratechange",function(e2){return _this.update(e2);});return _this;}
var _proto=PlaybackRateMenuItem2.prototype;_proto.handleClick=function handleClick(event3){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate);};_proto.update=function update(event3){this.selected(this.player().playbackRate()===this.rate);};return PlaybackRateMenuItem2;}(MenuItem);PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);var PlaybackRateMenuButton=function(_MenuButton){_inheritsLoose__default["default"](PlaybackRateMenuButton2,_MenuButton);function PlaybackRateMenuButton2(player,options){var _this;_this=_MenuButton.call(this,player,options)||this;_this.menuButton_.el_.setAttribute("aria-describedby",_this.labelElId_);_this.updateVisibility();_this.updateLabel();_this.on(player,"loadstart",function(e2){return _this.updateVisibility(e2);});_this.on(player,"ratechange",function(e2){return _this.updateLabel(e2);});_this.on(player,"playbackrateschange",function(e2){return _this.handlePlaybackRateschange(e2);});return _this;}
var _proto=PlaybackRateMenuButton2.prototype;_proto.createEl=function createEl$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelElId_="vjs-playback-rate-value-label-"+this.id_;this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"});el.appendChild(this.labelEl_);return el;};_proto.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this);};_proto.buildCSSClass=function buildCSSClass(){return "vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return "vjs-playback-rate "+_MenuButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var rates=this.playbackRates();var items=[];for(var i3=rates.length-1;i3>=0;i3--){items.push(new PlaybackRateMenuItem(this.player(),{rate:rates[i3]+"x"}));}
return items;};_proto.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate());};_proto.handleClick=function handleClick(event3){var currentRate=this.player().playbackRate();var rates=this.playbackRates();var currentIndex=rates.indexOf(currentRate);var newIndex=(currentIndex+1)%rates.length;this.player().playbackRate(rates[newIndex]);};_proto.handlePlaybackRateschange=function handlePlaybackRateschange(event3){this.update();};_proto.playbackRates=function playbackRates(){var player=this.player();return player.playbackRates&&player.playbackRates()||[];};_proto.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;};_proto.updateVisibility=function updateVisibility(event3){if(this.playbackRateSupported()){this.removeClass("vjs-hidden");}else{this.addClass("vjs-hidden");}};_proto.updateLabel=function updateLabel(event3){if(this.playbackRateSupported()){this.labelEl_.textContent=this.player().playbackRate()+"x";}};return PlaybackRateMenuButton2;}(MenuButton);PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);var Spacer=function(_Component){_inheritsLoose__default["default"](Spacer2,_Component);function Spacer2(){return _Component.apply(this,arguments)||this;}
var _proto=Spacer2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-spacer "+_Component.prototype.buildCSSClass.call(this);};_proto.createEl=function createEl2(tag,props,attributes){if(tag===void 0){tag="div";}
if(props===void 0){props={};}
if(attributes===void 0){attributes={};}
if(!props.className){props.className=this.buildCSSClass();}
return _Component.prototype.createEl.call(this,tag,props,attributes);};return Spacer2;}(Component$1);Component$1.registerComponent("Spacer",Spacer);var CustomControlSpacer=function(_Spacer){_inheritsLoose__default["default"](CustomControlSpacer2,_Spacer);function CustomControlSpacer2(){return _Spacer.apply(this,arguments)||this;}
var _proto=CustomControlSpacer2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this);};_proto.createEl=function createEl2(){return _Spacer.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"});};return CustomControlSpacer2;}(Spacer);Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);var ControlBar=function(_Component){_inheritsLoose__default["default"](ControlBar2,_Component);function ControlBar2(){return _Component.apply(this,arguments)||this;}
var _proto=ControlBar2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"});};return ControlBar2;}(Component$1);ControlBar.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture"in document__default["default"]){ControlBar.prototype.options_.children.splice(ControlBar.prototype.options_.children.length-1,0,"pictureInPictureToggle");}
Component$1.registerComponent("ControlBar",ControlBar);var ErrorDisplay=function(_ModalDialog){_inheritsLoose__default["default"](ErrorDisplay2,_ModalDialog);function ErrorDisplay2(player,options){var _this;_this=_ModalDialog.call(this,player,options)||this;_this.on(player,"error",function(e2){return _this.open(e2);});return _this;}
var _proto=ErrorDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return "vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this);};_proto.content=function content(){var error2=this.player().error();return error2?this.localize(error2.message):"";};return ErrorDisplay2;}(ModalDialog);ErrorDisplay.prototype.options_=_extends__default["default"]({},ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);var LOCAL_STORAGE_KEY$1="vjs-text-track-settings";var COLOR_BLACK=["#000","Black"];var COLOR_BLUE=["#00F","Blue"];var COLOR_CYAN=["#0FF","Cyan"];var COLOR_GREEN=["#0F0","Green"];var COLOR_MAGENTA=["#F0F","Magenta"];var COLOR_RED=["#F00","Red"];var COLOR_WHITE=["#FFF","White"];var COLOR_YELLOW=["#FF0","Yellow"];var OPACITY_OPAQUE=["1","Opaque"];var OPACITY_SEMI=["0.5","Semi-Transparent"];var OPACITY_TRANS=["0","Transparent"];var selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function parser(v2){return v2==="1.00"?null:Number(v2);}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(value,parser){if(parser){value=parser(value);}
if(value&&value!=="none"){return value;}}
function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser);}
function setSelectedOption(el,value,parser){if(!value){return;}
for(var i3=0;i3<el.options.length;i3++){if(parseOptionValue(el.options[i3].value,parser)===value){el.selectedIndex=i3;break;}}}
var TextTrackSettings=function(_ModalDialog){_inheritsLoose__default["default"](TextTrackSettings2,_ModalDialog);function TextTrackSettings2(player,options){var _this;options.temporary=false;_this=_ModalDialog.call(this,player,options)||this;_this.updateDisplay=_this.updateDisplay.bind(_assertThisInitialized__default["default"](_this));_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl("p",{className:"vjs-control-text",textContent:_this.localize("End of dialog window.")});_this.el().appendChild(_this.endDialog);_this.setDefaults();if(options.persistTextTrackSettings===void 0){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings;}
_this.on(_this.$(".vjs-done-button"),"click",function(){_this.saveSettings();_this.close();});_this.on(_this.$(".vjs-default-button"),"click",function(){_this.setDefaults();_this.updateDisplay();});each(selectConfigs,function(config){_this.on(_this.$(config.selector),"change",_this.updateDisplay);});if(_this.options_.persistTextTrackSettings){_this.restoreSettings();}
return _this;}
var _proto=TextTrackSettings2.prototype;_proto.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this);};_proto.createElSelect_=function createElSelect_(key,legendId,type){var _this2=this;if(legendId===void 0){legendId="";}
if(type===void 0){type="label";}
var config=selectConfigs[key];var id2=config.id.replace("%s",this.id_);var selectLabelledbyIds=[legendId,id2].join(" ").trim();return["<"+type+' id="'+id2+'" class="'+(type==="label"?"vjs-label":"")+'">',this.localize(config.label),"</"+type+">",'<select aria-labelledby="'+selectLabelledbyIds+'">'].concat(config.options.map(function(o2){var optionId=id2+"-"+o2[1].replace(/\W+/g,"");return['<option id="'+optionId+'" value="'+o2[0]+'" ','aria-labelledby="'+selectLabelledbyIds+" "+optionId+'">',_this2.localize(o2[1]),"</option>"].join("");})).concat("</select>").join("");};_proto.createElFgColor_=function createElFgColor_(){var legendId="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElBgColor_=function createElBgColor_(){var legendId="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElWinColor_=function createElWinColor_(){var legendId="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElColors_=function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")});};_proto.createElFont_=function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")});};_proto.createElControls_=function createElControls_(){var defaultsDescription=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+defaultsDescription+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+defaultsDescription+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")});};_proto.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()];};_proto.label=function label(){return this.localize("Caption Settings Dialog");};_proto.description=function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.");};_proto.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+" vjs-text-track-settings";};_proto.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==void 0){accum[key]=value;}
return accum;},{});};_proto.setValues=function setValues(values){var _this4=this;each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser);});};_proto.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config){var index=config.hasOwnProperty("default")?config["default"]:0;_this5.$(config.selector).selectedIndex=index;});};_proto.restoreSettings=function restoreSettings(){var values;try{values=JSON.parse(window__default["default"].localStorage.getItem(LOCAL_STORAGE_KEY$1));}catch(err){log$1.warn(err);}
if(values){this.setValues(values);}};_proto.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return;}
var values=this.getValues();try{if(Object.keys(values).length){window__default["default"].localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(values));}else{window__default["default"].localStorage.removeItem(LOCAL_STORAGE_KEY$1);}}catch(err){log$1.warn(err);}};_proto.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild("textTrackDisplay");if(ttDisplay){ttDisplay.updateDisplay();}};_proto.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus();}else if(ccBtn){ccBtn.focus();}};return TextTrackSettings2;}(ModalDialog);Component$1.registerComponent("TextTrackSettings",TextTrackSettings);var ResizeManager=function(_Component){_inheritsLoose__default["default"](ResizeManager2,_Component);function ResizeManager2(player,options){var _this;var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||window__default["default"].ResizeObserver;if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false;}
var options_=mergeOptions$3({createEl:!RESIZE_OBSERVER_AVAILABLE,reportTouchActivity:false},options);_this=_Component.call(this,player,options_)||this;_this.ResizeObserver=options.ResizeObserver||window__default["default"].ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce(function(){_this.resizeHandler();},100,false,_assertThisInitialized__default["default"](_this));if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player.el());}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return;}
var debouncedHandler_=_this.debouncedHandler_;var unloadListener_=_this.unloadListener_=function(){off(this,"resize",debouncedHandler_);off(this,"unload",unloadListener_);unloadListener_=null;};on2(_this.el_.contentWindow,"unload",unloadListener_);on2(_this.el_.contentWindow,"resize",debouncedHandler_);};_this.one("load",_this.loadListener_);}
return _this;}
var _proto=ResizeManager2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"});};_proto.resizeHandler=function resizeHandler(){if(!this.player_||!this.player_.trigger){return;}
this.player_.trigger("playerresize");};_proto.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel();}
if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el());}
this.resizeObserver_.disconnect();}
if(this.loadListener_){this.off("load",this.loadListener_);}
if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow);}
this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;_Component.prototype.dispose.call(this);};return ResizeManager2;}(Component$1);Component$1.registerComponent("ResizeManager",ResizeManager);var defaults2={trackingThreshold:20,liveTolerance:15};var LiveTracker=function(_Component){_inheritsLoose__default["default"](LiveTracker2,_Component);function LiveTracker2(player,options){var _this;var options_=mergeOptions$3(defaults2,options,{createEl:false});_this=_Component.call(this,player,options_)||this;_this.handleVisibilityChange_=function(e2){return _this.handleVisibilityChange(e2);};_this.trackLiveHandler_=function(){return _this.trackLive_();};_this.handlePlay_=function(e2){return _this.handlePlay(e2);};_this.handleFirstTimeupdate_=function(e2){return _this.handleFirstTimeupdate(e2);};_this.handleSeeked_=function(e2){return _this.handleSeeked(e2);};_this.seekToLiveEdge_=function(e2){return _this.seekToLiveEdge(e2);};_this.reset_();_this.on(_this.player_,"durationchange",function(e2){return _this.handleDurationchange(e2);});_this.on(_this.player_,"canplay",function(){return _this.toggleTracking();});if(IE_VERSION&&"hidden"in document__default["default"]&&"visibilityState"in document__default["default"]){_this.on(document__default["default"],"visibilitychange",_this.handleVisibilityChange_);}
return _this;}
var _proto=LiveTracker2.prototype;_proto.handleVisibilityChange=function handleVisibilityChange(){if(this.player_.duration()!==Infinity){return;}
if(document__default["default"].hidden){this.stopTracking();}else{this.startTracking();}};_proto.trackLive_=function trackLive_(){var seekable2=this.player_.seekable();if(!seekable2||!seekable2.length){return;}
var newTime=Number(window__default["default"].performance.now().toFixed(4));var deltaTime=this.lastTime_===-1?0:(newTime-this.lastTime_)/1e3;this.lastTime_=newTime;this.pastSeekEnd_=this.pastSeekEnd()+deltaTime;var liveCurrentTime=this.liveCurrentTime();var currentTime=this.player_.currentTime();var isBehind=this.player_.paused()||this.seekedBehindLive_||Math.abs(liveCurrentTime-currentTime)>this.options_.liveTolerance;if(!this.timeupdateSeen_||liveCurrentTime===Infinity){isBehind=false;}
if(isBehind!==this.behindLiveEdge_){this.behindLiveEdge_=isBehind;this.trigger("liveedgechange");}};_proto.handleDurationchange=function handleDurationchange(){this.toggleTracking();};_proto.toggleTracking=function toggleTracking(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui");}
this.startTracking();}else{this.player_.removeClass("vjs-liveui");this.stopTracking();}};_proto.startTracking=function startTracking(){if(this.isTracking()){return;}
if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted();}
this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLiveHandler_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay_);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_);}else{this.on(this.player_,"seeked",this.handleSeeked_);}};_proto.handleFirstTimeupdate=function handleFirstTimeupdate(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked_);};_proto.handleSeeked=function handleSeeked(){var timeDiff=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&timeDiff>2;this.nextSeekedFromUser_=false;this.trackLive_();};_proto.handlePlay=function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_);};_proto.reset_=function reset_(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.nextSeekedFromUser_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLiveHandler_);this.off(this.player_,"seeked",this.handleSeeked_);this.off(this.player_,"play",this.handlePlay_);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_);this.off(this.player_,"timeupdate",this.seekToLiveEdge_);};_proto.nextSeekedFromUser=function nextSeekedFromUser(){this.nextSeekedFromUser_=true;};_proto.stopTracking=function stopTracking(){if(!this.isTracking()){return;}
this.reset_();this.trigger("liveedgechange");};_proto.seekableEnd=function seekableEnd(){var seekable2=this.player_.seekable();var seekableEnds=[];var i3=seekable2?seekable2.length:0;while(i3--){seekableEnds.push(seekable2.end(i3));}
return seekableEnds.length?seekableEnds.sort()[seekableEnds.length-1]:Infinity;};_proto.seekableStart=function seekableStart(){var seekable2=this.player_.seekable();var seekableStarts=[];var i3=seekable2?seekable2.length:0;while(i3--){seekableStarts.push(seekable2.start(i3));}
return seekableStarts.length?seekableStarts.sort()[0]:0;};_proto.liveWindow=function liveWindow(){var liveCurrentTime=this.liveCurrentTime();if(liveCurrentTime===Infinity){return 0;}
return liveCurrentTime-this.seekableStart();};_proto.isLive=function isLive(){return this.isTracking();};_proto.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge();};_proto.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd();};_proto.pastSeekEnd=function pastSeekEnd(){var seekableEnd=this.seekableEnd();if(this.lastSeekEnd_!==-1&&seekableEnd!==this.lastSeekEnd_){this.pastSeekEnd_=0;}
this.lastSeekEnd_=seekableEnd;return this.pastSeekEnd_;};_proto.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_;};_proto.isTracking=function isTracking(){return typeof this.trackingInterval_==="number";};_proto.seekToLiveEdge=function seekToLiveEdge(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return;}
this.nextSeekedFromUser_=false;this.player_.currentTime(this.liveCurrentTime());};_proto.dispose=function dispose(){this.off(document__default["default"],"visibilitychange",this.handleVisibilityChange_);this.stopTracking();_Component.prototype.dispose.call(this);};return LiveTracker2;}(Component$1);Component$1.registerComponent("LiveTracker",LiveTracker);var sourcesetLoad=function sourcesetLoad2(tech){var el=tech.el();if(el.hasAttribute("src")){tech.triggerSourceset(el.src);return true;}
var sources=tech.$$("source");var srcUrls=[];var src="";if(!sources.length){return false;}
for(var i3=0;i3<sources.length;i3++){var url=sources[i3].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url);}}
if(!srcUrls.length){return false;}
if(srcUrls.length===1){src=srcUrls[0];}
tech.triggerSourceset(src);return true;};var innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get:function get2(){return this.cloneNode(true).innerHTML;},set:function set2(v2){var dummy=document__default["default"].createElement(this.nodeName.toLowerCase());dummy.innerHTML=v2;var docFrag=document__default["default"].createDocumentFragment();while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0]);}
this.innerText="";window__default["default"].Element.prototype.appendChild.call(this,docFrag);return this.innerHTML;}});var getDescriptor=function getDescriptor2(priority,prop){var descriptor={};for(var i3=0;i3<priority.length;i3++){descriptor=Object.getOwnPropertyDescriptor(priority[i3],prop);if(descriptor&&descriptor.set&&descriptor.get){break;}}
descriptor.enumerable=true;descriptor.configurable=true;return descriptor;};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor2(tech){return getDescriptor([tech.el(),window__default["default"].HTMLMediaElement.prototype,window__default["default"].Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML");};var firstSourceWatch=function firstSourceWatch2(tech){var el=tech.el();if(el.resetSourceWatch_){return;}
var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper2(appendFn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval;};};["append","appendChild","insertAdjacentHTML"].forEach(function(k2){if(!el[k2]){return;}
old[k2]=el[k2];el[k2]=appendWrapper(old[k2]);});Object.defineProperty(el,"innerHTML",mergeOptions$3(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k2){el[k2]=old[k2];});Object.defineProperty(el,"innerHTML",innerDescriptor);};tech.one("sourceset",el.resetSourceWatch_);};var srcDescriptorPolyfill=Object.defineProperty({},"src",{get:function get2(){if(this.hasAttribute("src")){return getAbsoluteURL(window__default["default"].Element.prototype.getAttribute.call(this,"src"));}
return "";},set:function set2(v2){window__default["default"].Element.prototype.setAttribute.call(this,"src",v2);return v2;}});var getSrcDescriptor=function getSrcDescriptor2(tech){return getDescriptor([tech.el(),window__default["default"].HTMLMediaElement.prototype,srcDescriptorPolyfill],"src");};var setupSourceset=function setupSourceset2(tech){if(!tech.featuresSourceset){return;}
var el=tech.el();if(el.resetSourceset_){return;}
var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,"src",mergeOptions$3(srcDescriptor,{set:function set2(v2){var retval=srcDescriptor.set.call(el,v2);tech.triggerSourceset(el.src);return retval;}}));el.setAttribute=function(n2,v2){var retval=oldSetAttribute.call(el,n2,v2);if(/src/i.test(n2)){tech.triggerSourceset(el.src);}
return retval;};el.load=function(){var retval=oldLoad.call(el);if(!sourcesetLoad(tech)){tech.triggerSourceset("");firstSourceWatch(tech);}
return retval;};if(el.currentSrc){tech.triggerSourceset(el.currentSrc);}else if(!sourcesetLoad(tech)){firstSourceWatch(tech);}
el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,"src",srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_();}};};var defineLazyProperty=function defineLazyProperty2(obj,key,getValue,setter){if(setter===void 0){setter=true;}
var set2=function set3(value){return Object.defineProperty(obj,key,{value,enumerable:true,writable:true});};var options={configurable:true,enumerable:true,get:function get2(){var value=getValue();set2(value);return value;}};if(setter){options.set=set2;}
return Object.defineProperty(obj,key,options);};var Html5=function(_Tech){_inheritsLoose__default["default"](Html52,_Tech);function Html52(options,ready){var _this;_this=_Tech.call(this,options,ready)||this;var source=options.source;var crossoriginTracks=false;_this.featuresVideoFrameCallback=_this.featuresVideoFrameCallback&&_this.el_.tagName==="VIDEO";if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source);}else{_this.handleLateInit_(_this.el_);}
if(options.enableSourceset){_this.setupSourcesetHandling_();}
_this.isScrubbing_=false;if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==="track"){if(!_this.featuresNativeTextTracks){removeNodes.push(node);}else{_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute("crossorigin")&&isCrossOrigin(node.src)){crossoriginTracks=true;}}}}
for(var i3=0;i3<removeNodes.length;i3++){_this.el_.removeChild(removeNodes[i3]);}}
_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log$1.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");}
_this.restoreMetadataTracksInIOSNativePlayer_();if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true);}
_this.proxyWebkitFullscreen_();_this.triggerReady();return _this;}
var _proto=Html52.prototype;_proto.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_();}
Html52.disposeMediaElement(this.el_);this.options_=null;_Tech.prototype.dispose.call(this);};_proto.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this);};_proto.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState;var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot2(){metadataTracksPreFullscreenState=[];for(var i3=0;i3<textTracks.length;i3++){var track=textTracks[i3];if(track.kind==="metadata"){metadataTracksPreFullscreenState.push({track,storedMode:track.mode});}}};takeMetadataTrackSnapshot();textTracks.addEventListener("change",takeMetadataTrackSnapshot);this.on("dispose",function(){return textTracks.removeEventListener("change",takeMetadataTrackSnapshot);});var restoreTrackMode=function restoreTrackMode2(){for(var i3=0;i3<metadataTracksPreFullscreenState.length;i3++){var storedTrack=metadataTracksPreFullscreenState[i3];if(storedTrack.track.mode==="disabled"&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode;}}
textTracks.removeEventListener("change",restoreTrackMode2);};this.on("webkitbeginfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);textTracks.addEventListener("change",restoreTrackMode);});this.on("webkitendfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.addEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);});};_proto.overrideNative_=function overrideNative_(type,override){var _this2=this;if(override!==this["featuresNative"+type+"Tracks"]){return;}
var lowerCaseType=type.toLowerCase();if(this[lowerCaseType+"TracksListeners_"]){Object.keys(this[lowerCaseType+"TracksListeners_"]).forEach(function(eventName){var elTracks=_this2.el()[lowerCaseType+"Tracks"];elTracks.removeEventListener(eventName,_this2[lowerCaseType+"TracksListeners_"][eventName]);});}
this["featuresNative"+type+"Tracks"]=!override;this[lowerCaseType+"TracksListeners_"]=null;this.proxyNativeTracksForType_(lowerCaseType);};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(override){this.overrideNative_("Audio",override);};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(override){this.overrideNative_("Video",override);};_proto.proxyNativeTracksForType_=function proxyNativeTracksForType_(name){var _this3=this;var props=NORMAL[name];var elTracks=this.el()[props.getterName];var techTracks=this[props.getterName]();if(!this["featuresNative"+props.capitalName+"Tracks"]||!elTracks||!elTracks.addEventListener){return;}
var listeners={change:function change(e2){var event3={type:"change",target:techTracks,currentTarget:techTracks,srcElement:techTracks};techTracks.trigger(event3);if(name==="text"){_this3[REMOTE.remoteText.getterName]().trigger(event3);}},addtrack:function addtrack(e2){techTracks.addTrack(e2.track);},removetrack:function removetrack(e2){techTracks.removeTrack(e2.track);}};var removeOldTracks=function removeOldTracks2(){var removeTracks=[];for(var i3=0;i3<techTracks.length;i3++){var found=false;for(var j2=0;j2<elTracks.length;j2++){if(elTracks[j2]===techTracks[i3]){found=true;break;}}
if(!found){removeTracks.push(techTracks[i3]);}}
while(removeTracks.length){techTracks.removeTrack(removeTracks.shift());}};this[props.getterName+"Listeners_"]=listeners;Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this3.on("dispose",function(e2){return elTracks.removeEventListener(eventName,listener);});});this.on("loadstart",removeOldTracks);this.on("dispose",function(e2){return _this3.off("loadstart",removeOldTracks);});};_proto.proxyNativeTracks_=function proxyNativeTracks_(){var _this4=this;NORMAL.names.forEach(function(name){_this4.proxyNativeTracksForType_(name);});};_proto.createEl=function createEl2(){var el=this.options_.tag;if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el);}
Html52.disposeMediaElement(el);el=clone;}else{el=document__default["default"].createElement("video");var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions$3({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls;}
setAttributes(el,assign(attributes,{id:this.options_.techId,"class":"vjs-tech"}));}
el.playerId=this.options_.playerId;}
if(typeof this.options_.preload!=="undefined"){setAttribute(el,"preload",this.options_.preload);}
if(this.options_.disablePictureInPicture!==void 0){el.disablePictureInPicture=this.options_.disablePictureInPicture;}
var settingsAttrs=["loop","muted","playsinline","autoplay"];for(var i3=0;i3<settingsAttrs.length;i3++){var attr=settingsAttrs[i3];var value=this.options_[attr];if(typeof value!=="undefined"){if(value){setAttribute(el,attr,attr);}else{removeAttribute(el,attr);}
el[attr]=value;}}
return el;};_proto.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){return;}
if(el.readyState===0){var loadstartFired=false;var setLoadstartFired=function setLoadstartFired2(){loadstartFired=true;};this.on("loadstart",setLoadstartFired);var triggerLoadstart=function triggerLoadstart2(){if(!loadstartFired){this.trigger("loadstart");}};this.on("loadedmetadata",triggerLoadstart);this.ready(function(){this.off("loadstart",setLoadstartFired);this.off("loadedmetadata",triggerLoadstart);if(!loadstartFired){this.trigger("loadstart");}});return;}
var eventsToTrigger=["loadstart"];eventsToTrigger.push("loadedmetadata");if(el.readyState>=2){eventsToTrigger.push("loadeddata");}
if(el.readyState>=3){eventsToTrigger.push("canplay");}
if(el.readyState>=4){eventsToTrigger.push("canplaythrough");}
this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type);},this);});};_proto.setScrubbing=function setScrubbing(isScrubbing){this.isScrubbing_=isScrubbing;};_proto.scrubbing=function scrubbing(){return this.isScrubbing_;};_proto.setCurrentTime=function setCurrentTime(seconds){try{if(this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI){this.el_.fastSeek(seconds);}else{this.el_.currentTime=seconds;}}catch(e2){log$1(e2,"Video is not ready. (Video.js)");}};_proto.duration=function duration2(){var _this5=this;if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){var checkProgress=function checkProgress2(){if(_this5.el_.currentTime>0){if(_this5.el_.duration===Infinity){_this5.trigger("durationchange");}
_this5.off("timeupdate",checkProgress2);}};this.on("timeupdate",checkProgress);return NaN;}
return this.el_.duration||NaN;};_proto.width=function width(){return this.el_.offsetWidth;};_proto.height=function height(){return this.el_.offsetHeight;};_proto.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this6=this;if(!("webkitDisplayingFullscreen"in this.el_)){return;}
var endFn=function endFn2(){this.trigger("fullscreenchange",{isFullscreen:false});if(this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()){this.el_.controls=false;}};var beginFn=function beginFn2(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",endFn);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true});}};this.on("webkitbeginfullscreen",beginFn);this.on("dispose",function(){_this6.off("webkitbeginfullscreen",beginFn);_this6.off("webkitendfullscreen",endFn);});};_proto.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==="function"){var userAgent=window__default["default"].navigator&&window__default["default"].navigator.userAgent||"";if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true;}}
return false;};_proto.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){silencePromise(this.el_.play());this.setTimeout(function(){video.pause();try{video.webkitEnterFullScreen();}catch(e2){this.trigger("fullscreenerror",e2);}},0);}else{try{video.webkitEnterFullScreen();}catch(e2){this.trigger("fullscreenerror",e2);}}};_proto.exitFullScreen=function exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return;}
this.el_.webkitExitFullScreen();};_proto.requestPictureInPicture=function requestPictureInPicture(){return this.el_.requestPictureInPicture();};_proto.requestVideoFrameCallback=function requestVideoFrameCallback(cb){if(this.featuresVideoFrameCallback&&!this.el_.webkitKeys){return this.el_.requestVideoFrameCallback(cb);}
return _Tech.prototype.requestVideoFrameCallback.call(this,cb);};_proto.cancelVideoFrameCallback=function cancelVideoFrameCallback(id2){if(this.featuresVideoFrameCallback&&!this.el_.webkitKeys){this.el_.cancelVideoFrameCallback(id2);}else{_Tech.prototype.cancelVideoFrameCallback.call(this,id2);}};_proto.src=function src(_src){if(_src===void 0){return this.el_.src;}
this.setSrc(_src);};_proto.reset=function reset2(){Html52.resetMediaElement(this.el_);};_proto.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}
return this.el_.currentSrc;};_proto.setControls=function setControls(val){this.el_.controls=!!val;};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language);}
return this.el_.addTextTrack(kind,label,language);};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options);}
var htmlTrackElement=document__default["default"].createElement("track");if(options.kind){htmlTrackElement.kind=options.kind;}
if(options.label){htmlTrackElement.label=options.label;}
if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang;}
if(options["default"]){htmlTrackElement["default"]=options["default"];}
if(options.id){htmlTrackElement.id=options.id;}
if(options.src){htmlTrackElement.src=options.src;}
return htmlTrackElement;};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement);}
return htmlTrackElement;};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$("track");var i3=tracks.length;while(i3--){if(track===tracks[i3]||track===tracks[i3].track){this.el().removeChild(tracks[i3]);}}}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality();}
var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount;}
if(window__default["default"].performance&&typeof window__default["default"].performance.now==="function"){videoPlaybackQuality.creationTime=window__default["default"].performance.now();}else if(window__default["default"].performance&&window__default["default"].performance.timing&&typeof window__default["default"].performance.timing.navigationStart==="number"){videoPlaybackQuality.creationTime=window__default["default"].Date.now()-window__default["default"].performance.timing.navigationStart;}
return videoPlaybackQuality;};return Html52;}(Tech);defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal()){return;}
var video=document__default["default"].createElement("video");var track=document__default["default"].createElement("track");track.kind="captions";track.srclang="en";track.label="English";video.appendChild(track);return video;});Html5.isSupported=function(){try{Html5.TEST_VID.volume=0.5;}catch(e2){return false;}
return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType);};Html5.canPlayType=function(type){return Html5.TEST_VID.canPlayType(type);};Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type);};Html5.canControlVolume=function(){try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+0.1;var canControl=volume!==Html5.TEST_VID.volume;if(canControl&&IS_IOS){window__default["default"].setTimeout(function(){if(Html5&&Html5.prototype){Html5.prototype.featuresVolumeControl=volume!==Html5.TEST_VID.volume;}});return false;}
return canControl;}catch(e2){return false;}};Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,"muted","muted");}else{removeAttribute(Html5.TEST_VID,"muted","muted");}
return muted!==Html5.TEST_VID.muted;}catch(e2){return false;}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false;}
try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+0.1;return playbackRate!==Html5.TEST_VID.playbackRate;}catch(e2){return false;}};Html5.canOverrideAttributes=function(){try{var noop2=function noop3(){};Object.defineProperty(document__default["default"].createElement("video"),"src",{get:noop2,set:noop2});Object.defineProperty(document__default["default"].createElement("audio"),"src",{get:noop2,set:noop2});Object.defineProperty(document__default["default"].createElement("video"),"innerHTML",{get:noop2,set:noop2});Object.defineProperty(document__default["default"].createElement("audio"),"innerHTML",{get:noop2,set:noop2});}catch(e2){return false;}
return true;};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME;};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks);};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks);};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(_ref){var key=_ref[0],fn2=_ref[1];defineLazyProperty(Html5.prototype,key,function(){return Html5[fn2]();},true);});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=true;Html5.prototype.featuresProgressEvents=true;Html5.prototype.featuresTimeupdateEvents=true;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);var canPlayType;Html5.patchCanPlayType=function(){if(ANDROID_VERSION>=4&&!IS_FIREFOX&&!IS_CHROME){canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=function(type){var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(type&&mpegurlRE.test(type)){return "maybe";}
return canPlayType.call(this,type);};}};Html5.unpatchCanPlayType=function(){var r2=Html5.TEST_VID.constructor.prototype.canPlayType;if(canPlayType){Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;}
return r2;};Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return;}
if(el.parentNode){el.parentNode.removeChild(el);}
while(el.hasChildNodes()){el.removeChild(el.firstChild);}
el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load();}catch(e2){}})();}};Html5.resetMediaElement=function(el){if(!el){return;}
var sources=el.querySelectorAll("source");var i3=sources.length;while(i3--){el.removeChild(sources[i3]);}
el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load();}catch(e2){}})();}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop);};});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(prop){Html5.prototype["set"+toTitleCase$1(prop)]=function(v2){this.el_[prop]=v2;if(v2){this.el_.setAttribute(prop,prop);}else{this.el_.removeAttribute(prop);}};});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop];};});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(prop){Html5.prototype["set"+toTitleCase$1(prop)]=function(v2){this.el_[prop]=v2;};});["pause","load","play"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]();};});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(type){try{return Html5.TEST_VID.canPlayType(type);}catch(e2){return "";}};Html5.nativeSourceHandler.canHandleSource=function(source,options){if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext);}
return "";};Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);var TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"];var BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(function(k2){var v2=k2.charAt(0)==="x"?"x-"+k2.substring(1):k2;BREAKPOINT_CLASSES[k2]="vjs-layout-"+v2;});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var Player=function(_Component){_inheritsLoose__default["default"](Player2,_Component);function Player2(tag,options,ready){var _this;tag.id=tag.id||options.id||"vjs_video_"+newGUID();options=assign(Player2.getTagSettings(tag),options);options.initChildren=false;options.createEl=false;options.evented=false;options.reportTouchActivity=false;if(!options.language){if(typeof tag.closest==="function"){var closest=tag.closest("[lang]");if(closest&&closest.getAttribute){options.language=closest.getAttribute("lang");}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty("lang")){options.language=element.getAttribute("lang");break;}
element=element.parentNode;}}}
_this=_Component.call(this,null,options,ready)||this;_this.boundDocumentFullscreenChange_=function(e2){return _this.documentFullscreenChange_(e2);};_this.boundFullWindowOnEscKey_=function(e2){return _this.fullWindowOnEscKey(e2);};_this.boundUpdateStyleEl_=function(e2){return _this.updateStyleEl_(e2);};_this.boundApplyInitTime_=function(e2){return _this.applyInitTime_(e2);};_this.boundUpdateCurrentBreakpoint_=function(e2){return _this.updateCurrentBreakpoint_(e2);};_this.boundHandleTechClick_=function(e2){return _this.handleTechClick_(e2);};_this.boundHandleTechDoubleClick_=function(e2){return _this.handleTechDoubleClick_(e2);};_this.boundHandleTechTouchStart_=function(e2){return _this.handleTechTouchStart_(e2);};_this.boundHandleTechTouchMove_=function(e2){return _this.handleTechTouchMove_(e2);};_this.boundHandleTechTouchEnd_=function(e2){return _this.handleTechTouchEnd_(e2);};_this.boundHandleTechTap_=function(e2){return _this.handleTechTap_(e2);};_this.isFullscreen_=false;_this.log=createLogger(_this.id_);_this.fsApi_=FullscreenApi;_this.isPosterFromTech_=false;_this.queuedCallbacks_=[];_this.isReady_=false;_this.hasStarted_=false;_this.userActive_=false;_this.debugEnabled_=false;_this.audioOnlyMode_=false;_this.audioPosterMode_=false;_this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]};if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");}
_this.tag=tag;_this.tagAttributes=tag&&getAttributes(tag);_this.language(_this.options_.language);if(options.languages){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name){languagesToLower[name.toLowerCase()]=options.languages[name];});_this.languages_=languagesToLower;}else{_this.languages_=Player2.prototype.options_.languages;}
_this.resetCache_();_this.poster_=options.poster||"";_this.controls_=!!options.controls;tag.controls=false;tag.removeAttribute("controls");_this.changingSrc_=false;_this.playCallbacks_=[];_this.playTerminatedQueue_=[];if(tag.hasAttribute("autoplay")){_this.autoplay(true);}else{_this.autoplay(_this.options_.autoplay);}
if(options.plugins){Object.keys(options.plugins).forEach(function(name){if(typeof _this[name]!=="function"){throw new Error('plugin "'+name+'" does not exist');}});}
_this.scrubbing_=false;_this.el_=_this.createEl();evented(_assertThisInitialized__default["default"](_this),{eventBusKey:"el_"});if(_this.fsApi_.requestFullscreen){on2(document__default["default"],_this.fsApi_.fullscreenchange,_this.boundDocumentFullscreenChange_);_this.on(_this.fsApi_.fullscreenchange,_this.boundDocumentFullscreenChange_);}
if(_this.fluid_){_this.on(["playerreset","resize"],_this.boundUpdateStyleEl_);}
var playerOptionsCopy=mergeOptions$3(_this.options_);if(options.plugins){Object.keys(options.plugins).forEach(function(name){_this[name](options.plugins[name]);});}
if(options.debug){_this.debug(true);}
_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.playbackRates(options.playbackRates);_this.initChildren();_this.isAudio(tag.nodeName.toLowerCase()==="audio");if(_this.controls()){_this.addClass("vjs-controls-enabled");}else{_this.addClass("vjs-controls-disabled");}
_this.el_.setAttribute("role","region");if(_this.isAudio()){_this.el_.setAttribute("aria-label",_this.localize("Audio Player"));}else{_this.el_.setAttribute("aria-label",_this.localize("Video Player"));}
if(_this.isAudio()){_this.addClass("vjs-audio");}
if(_this.flexNotSupported_()){_this.addClass("vjs-no-flex");}
if(TOUCH_ENABLED){_this.addClass("vjs-touch-enabled");}
if(!IS_IOS){_this.addClass("vjs-workinghover");}
Player2.players[_this.id_]=_assertThisInitialized__default["default"](_this);var majorVersion=version$5.split(".")[0];_this.addClass("vjs-v"+majorVersion);_this.userActive(true);_this.reportUserActivity();_this.one("play",function(e2){return _this.listenForUserActivity_(e2);});_this.on("stageclick",function(e2){return _this.handleStageClick_(e2);});_this.on("keydown",function(e2){return _this.handleKeyDown(e2);});_this.on("languagechange",function(e2){return _this.handleLanguagechange(e2);});_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);_this.on("ready",function(){_this.audioPosterMode(_this.options_.audioPosterMode);_this.audioOnlyMode(_this.options_.audioOnlyMode);});return _this;}
var _proto=Player2.prototype;_proto.dispose=function dispose(){var _this2=this;this.trigger("dispose");this.off("dispose");off(document__default["default"],this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);off(document__default["default"],"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null;}
Player2.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}
if(this.el_&&this.el_.player){this.el_.player=null;}
if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_="";}
if(this.playerElIngest_){this.playerElIngest_=null;}
if(this.tag){this.tag=null;}
clearCacheForPlayer(this);ALL.names.forEach(function(name){var props=ALL[name];var list=_this2[props.getterName]();if(list&&list.off){list.off();}});_Component.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl});};_proto.createEl=function createEl2(){var tag=this.tag;var el;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute("data-vjs-player");var divEmbed=this.tag.tagName.toLowerCase()==="video-js";if(playerElIngest){el=this.el_=tag.parentNode;}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,"div");}
var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=document__default["default"].createElement("video");while(el.children.length){tag.appendChild(el.firstChild);}
if(!hasClass(el,"video-js")){addClass(el,"video-js");}
el.appendChild(tag);playerElIngest=this.playerElIngest_=el;Object.keys(el).forEach(function(k2){try{tag[k2]=el[k2];}catch(e2){}});}
tag.setAttribute("tabindex","-1");attrs.tabindex="-1";if(IE_VERSION||IS_CHROME&&IS_WINDOWS){tag.setAttribute("role","application");attrs.role="application";}
tag.removeAttribute("width");tag.removeAttribute("height");if("width"in attrs){delete attrs.width;}
if("height"in attrs){delete attrs.height;}
Object.getOwnPropertyNames(attrs).forEach(function(attr){if(!(divEmbed&&attr==="class")){el.setAttribute(attr,attrs[attr]);}
if(divEmbed){tag.setAttribute(attr,attrs[attr]);}});tag.playerId=tag.id;tag.id+="_html5_api";tag.className="vjs-tech";tag.player=el.player=this;this.addClass("vjs-paused");if(window__default["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement("vjs-styles-dimensions");var defaultsStyleEl=$2(".vjs-styles-defaults");var head2=$2("head");head2.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head2.firstChild);}
this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var links=tag.getElementsByTagName("a");for(var i3=0;i3<links.length;i3++){var linkEl=links.item(i3);addClass(linkEl,"vjs-hidden");linkEl.setAttribute("hidden","hidden");}
tag.initNetworkState_=tag.networkState;if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag);}
prependTo(tag,el);this.children_.unshift(tag);this.el_.setAttribute("lang",this.language_);this.el_.setAttribute("translate","no");this.el_=el;return el;};_proto.crossOrigin=function crossOrigin(value){if(!value){return this.techGet_("crossOrigin");}
if(value!=="anonymous"&&value!=="use-credentials"){log$1.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+value+'"');return;}
this.techCall_("setCrossOrigin",value);return;};_proto.width=function width(value){return this.dimension("width",value);};_proto.height=function height(value){return this.dimension("height",value);};_proto.dimension=function dimension(_dimension,value){var privDimension=_dimension+"_";if(value===void 0){return this[privDimension]||0;}
if(value===""||value==="auto"){this[privDimension]=void 0;this.updateStyleEl_();return;}
var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log$1.error('Improper value "'+value+'" supplied for for '+_dimension);return;}
this[privDimension]=parsedVal;this.updateStyleEl_();};_proto.fluid=function fluid(bool){var _this3=this;if(bool===void 0){return!!this.fluid_;}
this.fluid_=!!bool;if(isEvented(this)){this.off(["playerreset","resize"],this.boundUpdateStyleEl_);}
if(bool){this.addClass("vjs-fluid");this.fill(false);addEventedCallback(this,function(){_this3.on(["playerreset","resize"],_this3.boundUpdateStyleEl_);});}else{this.removeClass("vjs-fluid");}
this.updateStyleEl_();};_proto.fill=function fill(bool){if(bool===void 0){return!!this.fill_;}
this.fill_=!!bool;if(bool){this.addClass("vjs-fill");this.fluid(false);}else{this.removeClass("vjs-fill");}};_proto.aspectRatio=function aspectRatio(ratio){if(ratio===void 0){return this.aspectRatio_;}
if(!/^\d+\:\d+$/.test(ratio)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");}
this.aspectRatio_=ratio;this.fluid(true);this.updateStyleEl_();};_proto.updateStyleEl_=function updateStyleEl_(){if(window__default["default"].VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==="number"?this.width_:this.options_.width;var _height=typeof this.height_==="number"?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width;}
if(_height>=0){techEl.height=_height;}}
return;}
var width;var height;var aspectRatio;var idClass;if(this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"){aspectRatio=this.aspectRatio_;}else if(this.videoWidth()>0){aspectRatio=this.videoWidth()+":"+this.videoHeight();}else{aspectRatio="16:9";}
var ratioParts=aspectRatio.split(":");var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==void 0){width=this.width_;}else if(this.height_!==void 0){width=this.height_/ratioMultiplier;}else{width=this.videoWidth()||300;}
if(this.height_!==void 0){height=this.height_;}else{height=width*ratioMultiplier;}
if(/^[^a-zA-Z]/.test(this.id())){idClass="dimensions-"+this.id();}else{idClass=this.id()+"-dimensions";}
this.addClass(idClass);setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ");};_proto.loadTech_=function loadTech_(techName,source){var _this4=this;if(this.tech_){this.unloadTech_();}
var titleTechName=toTitleCase$1(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);if(titleTechName!=="Html5"&&this.tag){Tech.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}
this.techName_=titleTechName;this.isReady_=false;var autoplay=this.autoplay();if(typeof this.autoplay()==="string"||this.autoplay()===true&&this.options_.normalizeAutoplay){autoplay=false;}
var techOptions={source,autoplay,"nativeControlsForTouch":this.options_.nativeControlsForTouch,"playerId":this.id(),"techId":this.id()+"_"+camelTechName+"_api","playsinline":this.options_.playsinline,"preload":this.options_.preload,"loop":this.options_.loop,"disablePictureInPicture":this.options_.disablePictureInPicture,"muted":this.options_.muted,"poster":this.poster(),"language":this.language(),"playerElIngest":this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],"canOverridePoster":!!this.options_.techCanOverridePoster,"enableSourceset":this.options_.enableSourceset,"Promise":this.options_.Promise};ALL.names.forEach(function(name){var props=ALL[name];techOptions[props.getterName]=_this4[props.privateName];});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag;}
if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime;}
var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error("No Tech named '"+titleTechName+"' exists! '"+titleTechName+"' should be registered using videojs.registerTech()'");}
this.tech_=new TechClass(techOptions);this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);TECH_EVENTS_RETRIGGER.forEach(function(event3){_this4.on(_this4.tech_,event3,function(e2){return _this4["handleTech"+toTitleCase$1(event3)+"_"](e2);});});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event3){_this4.on(_this4.tech_,event3,function(eventObj){if(_this4.tech_.playbackRate()===0&&_this4.tech_.seeking()){_this4.queuedCallbacks_.push({callback:_this4["handleTech"+TECH_EVENTS_QUEUE[event3]+"_"].bind(_this4),event:eventObj});return;}
_this4["handleTech"+TECH_EVENTS_QUEUE[event3]+"_"](eventObj);});});this.on(this.tech_,"loadstart",function(e2){return _this4.handleTechLoadStart_(e2);});this.on(this.tech_,"sourceset",function(e2){return _this4.handleTechSourceset_(e2);});this.on(this.tech_,"waiting",function(e2){return _this4.handleTechWaiting_(e2);});this.on(this.tech_,"ended",function(e2){return _this4.handleTechEnded_(e2);});this.on(this.tech_,"seeking",function(e2){return _this4.handleTechSeeking_(e2);});this.on(this.tech_,"play",function(e2){return _this4.handleTechPlay_(e2);});this.on(this.tech_,"firstplay",function(e2){return _this4.handleTechFirstPlay_(e2);});this.on(this.tech_,"pause",function(e2){return _this4.handleTechPause_(e2);});this.on(this.tech_,"durationchange",function(e2){return _this4.handleTechDurationChange_(e2);});this.on(this.tech_,"fullscreenchange",function(e2,data){return _this4.handleTechFullscreenChange_(e2,data);});this.on(this.tech_,"fullscreenerror",function(e2,err){return _this4.handleTechFullscreenError_(e2,err);});this.on(this.tech_,"enterpictureinpicture",function(e2){return _this4.handleTechEnterPictureInPicture_(e2);});this.on(this.tech_,"leavepictureinpicture",function(e2){return _this4.handleTechLeavePictureInPicture_(e2);});this.on(this.tech_,"error",function(e2){return _this4.handleTechError_(e2);});this.on(this.tech_,"posterchange",function(e2){return _this4.handleTechPosterChange_(e2);});this.on(this.tech_,"textdata",function(e2){return _this4.handleTechTextData_(e2);});this.on(this.tech_,"ratechange",function(e2){return _this4.handleTechRateChange_(e2);});this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}
if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=="Html5"||!this.tag)){prependTo(this.tech_.el(),this.el());}
if(this.tag){this.tag.player=null;this.tag=null;}};_proto.unloadTech_=function unloadTech_(){var _this5=this;ALL.names.forEach(function(name){var props=ALL[name];_this5[props.privateName]=_this5[props.getterName]();});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange");}
this.isPosterFromTech_=false;};_proto.tech=function tech(safety){if(safety===void 0){log$1.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");}
return this.tech_;};_proto.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,"click",this.boundHandleTechClick_);this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.on(this.tech_,"tap",this.boundHandleTechTap_);};_proto.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_);this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.off(this.tech_,"click",this.boundHandleTechClick_);this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);};_proto.handleTechReady_=function handleTechReady_(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume);}
this.handleTechPosterChange_();this.handleTechDurationChange_();};_proto.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay");}else{this.hasStarted(false);this.trigger("loadstart");}
this.manualAutoplay_(this.autoplay()===true&&this.options_.normalizeAutoplay?"play":this.autoplay());};_proto.manualAutoplay_=function manualAutoplay_(type){var _this6=this;if(!this.tech_||typeof type!=="string"){return;}
var resolveMuted=function resolveMuted2(){var previouslyMuted=_this6.muted();_this6.muted(true);var restoreMuted=function restoreMuted2(){_this6.muted(previouslyMuted);};_this6.playTerminatedQueue_.push(restoreMuted);var mutedPromise=_this6.play();if(!isPromise(mutedPromise)){return;}
return mutedPromise["catch"](function(err){restoreMuted();throw new Error("Rejection at manualAutoplay. Restoring muted value. "+(err?err:""));});};var promise;if(type==="any"&&!this.muted()){promise=this.play();if(isPromise(promise)){promise=promise["catch"](resolveMuted);}}else if(type==="muted"&&!this.muted()){promise=resolveMuted();}else{promise=this.play();}
if(!isPromise(promise)){return;}
return promise.then(function(){_this6.trigger({type:"autoplay-success",autoplay:type});})["catch"](function(){_this6.trigger({type:"autoplay-failure",autoplay:type});});};_proto.updateSourceCaches_=function updateSourceCaches_(srcObj){if(srcObj===void 0){srcObj="";}
var src=srcObj;var type="";if(typeof src!=="string"){src=srcObj.src;type=srcObj.type;}
this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(src&&!type){type=findMimetype(this,src);}
this.cache_.source=mergeOptions$3({},srcObj,{src,type});var matchingSources=this.cache_.sources.filter(function(s2){return s2.src&&s2.src===src;});var sourceElSources=[];var sourceEls=this.$$("source");var matchingSourceEls=[];for(var i3=0;i3<sourceEls.length;i3++){var sourceObj=getAttributes(sourceEls[i3]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src);}}
if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources;}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source];}
this.cache_.src=src;};_proto.handleTechSourceset_=function handleTechSourceset_(event3){var _this7=this;if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches2(src){return _this7.updateSourceCaches_(src);};var playerSrc=this.currentSource().src;var eventSrc=event3.src;if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches2(){};}}
updateSourceCaches(eventSrc);if(!event3.src){this.tech_.any(["sourceset","loadstart"],function(e2){if(e2.type==="sourceset"){return;}
var techSrc=_this7.techGet("currentSrc");_this7.lastSource_.tech=techSrc;_this7.updateSourceCaches_(techSrc);});}}
this.lastSource_={player:this.currentSource().src,tech:event3.src};this.trigger({src:event3.src,type:"sourceset"});};_proto.hasStarted=function hasStarted(request){if(request===void 0){return this.hasStarted_;}
if(request===this.hasStarted_){return;}
this.hasStarted_=request;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay");}else{this.removeClass("vjs-has-started");}};_proto.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play");};_proto.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event);});this.queuedCallbacks_=[];}
this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange");};_proto.handleTechWaiting_=function handleTechWaiting_(){var _this8=this;this.addClass("vjs-waiting");this.trigger("waiting");var timeWhenWaiting=this.currentTime();var timeUpdateListener=function timeUpdateListener2(){if(timeWhenWaiting!==_this8.currentTime()){_this8.removeClass("vjs-waiting");_this8.off("timeupdate",timeUpdateListener2);}};this.on("timeupdate",timeUpdateListener);};_proto.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay");};_proto.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough");};_proto.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing");};_proto.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking");};_proto.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked");};_proto.handleTechFirstPlay_=function handleTechFirstPlay_(){if(this.options_.starttime){log$1.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime);}
this.addClass("vjs-has-started");this.trigger("firstplay");};_proto.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause");};_proto.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended");this.removeClass("vjs-waiting");if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}
this.trigger("ended");};_proto.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"));};_proto.handleTechClick_=function handleTechClick_(event3){if(!this.controls_){return;}
if(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==false){if(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click==="function"){this.options_.userActions.click.call(this,event3);}else if(this.paused()){silencePromise(this.play());}else{this.pause();}}};_proto.handleTechDoubleClick_=function handleTechDoubleClick_(event3){if(!this.controls_){return;}
var inAllowedEls=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(el){return el.contains(event3.target);});if(!inAllowedEls){if(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==false){if(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,event3);}else if(this.isFullscreen()){this.exitFullscreen();}else{this.requestFullscreen();}}}};_proto.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive());};_proto.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive();};_proto.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity();}};_proto.handleTechTouchEnd_=function handleTechTouchEnd_(event3){if(event3.cancelable){event3.preventDefault();}};_proto.handleStageClick_=function handleStageClick_(){this.reportUserActivity();};_proto.toggleFullscreenClass_=function toggleFullscreenClass_(){if(this.isFullscreen()){this.addClass("vjs-fullscreen");}else{this.removeClass("vjs-fullscreen");}};_proto.documentFullscreenChange_=function documentFullscreenChange_(e2){var targetPlayer=e2.target.player;if(targetPlayer&&targetPlayer!==this){return;}
var el=this.el();var isFs=document__default["default"][this.fsApi_.fullscreenElement]===el;if(!isFs&&el.matches){isFs=el.matches(":"+this.fsApi_.fullscreen);}else if(!isFs&&el.msMatchesSelector){isFs=el.msMatchesSelector(":"+this.fsApi_.fullscreen);}
this.isFullscreen(isFs);};_proto.handleTechFullscreenChange_=function handleTechFullscreenChange_(event3,data){var _this9=this;if(data){if(data.nativeIOSFullscreen){this.addClass("vjs-ios-native-fs");this.tech_.one("webkitendfullscreen",function(){_this9.removeClass("vjs-ios-native-fs");});}
this.isFullscreen(data.isFullscreen);}};_proto.handleTechFullscreenError_=function handleTechFullscreenError_(event3,err){this.trigger("fullscreenerror",err);};_proto.togglePictureInPictureClass_=function togglePictureInPictureClass_(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture");}else{this.removeClass("vjs-picture-in-picture");}};_proto.handleTechEnterPictureInPicture_=function handleTechEnterPictureInPicture_(event3){this.isInPictureInPicture(true);};_proto.handleTechLeavePictureInPicture_=function handleTechLeavePictureInPicture_(event3){this.isInPictureInPicture(false);};_proto.handleTechError_=function handleTechError_(){var error2=this.tech_.error();this.error(error2);};_proto.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1];}
this.trigger("textdata",data);};_proto.getCache=function getCache(){return this.cache_;};_proto.resetCache_=function resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1};};_proto.techCall_=function techCall_(method,arg){this.ready(function(){if(method in allowedSetters){return set(this.middleware_,this.tech_,method,arg);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg);}
try{if(this.tech_){this.tech_[method](arg);}}catch(e2){log$1(e2);throw e2;}},true);};_proto.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return;}
if(method in allowedGetters){return get(this.middleware_,this.tech_,method);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method);}
try{return this.tech_[method]();}catch(e2){if(this.tech_[method]===void 0){log$1("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e2);throw e2;}
if(e2.name==="TypeError"){log$1("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e2);this.tech_.isReady_=false;throw e2;}
log$1(e2);throw e2;}};_proto.play=function play(){var _this10=this;var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this10.play_(resolve);});}
return this.play_();};_proto.play_=function play_(callback){var _this11=this;if(callback===void 0){callback=silencePromise;}
this.playCallbacks_.push(callback);var isSrcReady=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));var isSafariOrIOS=Boolean(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null;}
if(!this.isReady_||!isSrcReady){this.waitToPlay_=function(e2){_this11.play_();};this.one(["ready","loadstart"],this.waitToPlay_);if(!isSrcReady&&isSafariOrIOS){this.load();}
return;}
var val=this.techGet_("play");var isNativeReplay=isSafariOrIOS&&this.hasClass("vjs-ended");if(isNativeReplay){this.resetProgressBar_();}
if(val===null){this.runPlayTerminatedQueue_();}else{this.runPlayCallbacks_(val);}};_proto.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var queue=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];queue.forEach(function(q2){q2();});};_proto.runPlayCallbacks_=function runPlayCallbacks_(val){var callbacks=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];callbacks.forEach(function(cb){cb(val);});};_proto.pause=function pause(){this.techCall_("pause");};_proto.paused=function paused(){return this.techGet_("paused")===false?false:true;};_proto.played=function played(){return this.techGet_("played")||createTimeRanges(0,0);};_proto.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==="undefined"){return this.scrubbing_;}
this.scrubbing_=!!isScrubbing;this.techCall_("setScrubbing",this.scrubbing_);if(isScrubbing){this.addClass("vjs-scrubbing");}else{this.removeClass("vjs-scrubbing");}};_proto.currentTime=function currentTime(seconds){if(typeof seconds!=="undefined"){if(seconds<0){seconds=0;}
if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=seconds;this.off("canplay",this.boundApplyInitTime_);this.one("canplay",this.boundApplyInitTime_);return;}
this.techCall_("setCurrentTime",seconds);this.cache_.initTime=0;return;}
this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime;};_proto.applyInitTime_=function applyInitTime_(){this.currentTime(this.cache_.initTime);};_proto.duration=function duration2(seconds){if(seconds===void 0){return this.cache_.duration!==void 0?this.cache_.duration:NaN;}
seconds=parseFloat(seconds);if(seconds<0){seconds=Infinity;}
if(seconds!==this.cache_.duration){this.cache_.duration=seconds;if(seconds===Infinity){this.addClass("vjs-live");}else{this.removeClass("vjs-live");}
if(!isNaN(seconds)){this.trigger("durationchange");}}};_proto.remainingTime=function remainingTime(){return this.duration()-this.currentTime();};_proto.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime());};_proto.buffered=function buffered(){var buffered2=this.techGet_("buffered");if(!buffered2||!buffered2.length){buffered2=createTimeRanges(0,0);}
return buffered2;};_proto.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration());};_proto.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration2=this.duration();var end=buffered.end(buffered.length-1);if(end>duration2){end=duration2;}
return end;};_proto.volume=function volume(percentAsDecimal){var vol;if(percentAsDecimal!==void 0){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_("setVolume",vol);if(vol>0){this.lastVolume_(vol);}
return;}
vol=parseFloat(this.techGet_("volume"));return isNaN(vol)?1:vol;};_proto.muted=function muted(_muted){if(_muted!==void 0){this.techCall_("setMuted",_muted);return;}
return this.techGet_("muted")||false;};_proto.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==void 0){return this.techCall_("setDefaultMuted",_defaultMuted);}
return this.techGet_("defaultMuted")||false;};_proto.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==void 0&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return;}
return this.cache_.lastVolume;};_proto.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||false;};_proto.isFullscreen=function isFullscreen(isFS){if(isFS!==void 0){var oldValue=this.isFullscreen_;this.isFullscreen_=Boolean(isFS);if(this.isFullscreen_!==oldValue&&this.fsApi_.prefixed){this.trigger("fullscreenchange");}
this.toggleFullscreenClass_();return;}
return this.isFullscreen_;};_proto.requestFullscreen=function requestFullscreen(fullscreenOptions){var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){var self2=this;return new PromiseClass(function(resolve,reject){function offHandler(){self2.off("fullscreenerror",errorHandler);self2.off("fullscreenchange",changeHandler);}
function changeHandler(){offHandler();resolve();}
function errorHandler(e2,err){offHandler();reject(err);}
self2.one("fullscreenchange",changeHandler);self2.one("fullscreenerror",errorHandler);var promise=self2.requestFullscreenHelper_(fullscreenOptions);if(promise){promise.then(offHandler,offHandler);promise.then(resolve,reject);}});}
return this.requestFullscreenHelper_();};_proto.requestFullscreenHelper_=function requestFullscreenHelper_(fullscreenOptions){var _this12=this;var fsOptions;if(!this.fsApi_.prefixed){fsOptions=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(fullscreenOptions!==void 0){fsOptions=fullscreenOptions;}}
if(this.fsApi_.requestFullscreen){var promise=this.el_[this.fsApi_.requestFullscreen](fsOptions);if(promise){promise.then(function(){return _this12.isFullscreen(true);},function(){return _this12.isFullscreen(false);});}
return promise;}else if(this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow===true){this.techCall_("enterFullScreen");}else{this.enterFullWindow();}};_proto.exitFullscreen=function exitFullscreen(){var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){var self2=this;return new PromiseClass(function(resolve,reject){function offHandler(){self2.off("fullscreenerror",errorHandler);self2.off("fullscreenchange",changeHandler);}
function changeHandler(){offHandler();resolve();}
function errorHandler(e2,err){offHandler();reject(err);}
self2.one("fullscreenchange",changeHandler);self2.one("fullscreenerror",errorHandler);var promise=self2.exitFullscreenHelper_();if(promise){promise.then(offHandler,offHandler);promise.then(resolve,reject);}});}
return this.exitFullscreenHelper_();};_proto.exitFullscreenHelper_=function exitFullscreenHelper_(){var _this13=this;if(this.fsApi_.requestFullscreen){var promise=document__default["default"][this.fsApi_.exitFullscreen]();if(promise){silencePromise(promise.then(function(){return _this13.isFullscreen(false);}));}
return promise;}else if(this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow===true){this.techCall_("exitFullScreen");}else{this.exitFullWindow();}};_proto.enterFullWindow=function enterFullWindow(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=document__default["default"].documentElement.style.overflow;on2(document__default["default"],"keydown",this.boundFullWindowOnEscKey_);document__default["default"].documentElement.style.overflow="hidden";addClass(document__default["default"].body,"vjs-full-window");this.trigger("enterFullWindow");};_proto.fullWindowOnEscKey=function fullWindowOnEscKey(event3){if(keycode__default["default"].isEventKey(event3,"Esc")){if(this.isFullscreen()===true){if(!this.isFullWindow){this.exitFullscreen();}else{this.exitFullWindow();}}}};_proto.exitFullWindow=function exitFullWindow(){this.isFullscreen(false);this.isFullWindow=false;off(document__default["default"],"keydown",this.boundFullWindowOnEscKey_);document__default["default"].documentElement.style.overflow=this.docOrigOverflow;removeClass(document__default["default"].body,"vjs-full-window");this.trigger("exitFullWindow");};_proto.disablePictureInPicture=function disablePictureInPicture(value){if(value===void 0){return this.techGet_("disablePictureInPicture");}
this.techCall_("setDisablePictureInPicture",value);this.options_.disablePictureInPicture=value;this.trigger("disablepictureinpicturechanged");};_proto.isInPictureInPicture=function isInPictureInPicture(isPiP){if(isPiP!==void 0){this.isInPictureInPicture_=!!isPiP;this.togglePictureInPictureClass_();return;}
return!!this.isInPictureInPicture_;};_proto.requestPictureInPicture=function requestPictureInPicture(){if("pictureInPictureEnabled"in document__default["default"]&&this.disablePictureInPicture()===false){return this.techGet_("requestPictureInPicture");}};_proto.exitPictureInPicture=function exitPictureInPicture(){if("pictureInPictureEnabled"in document__default["default"]){return document__default["default"].exitPictureInPicture();}};_proto.handleKeyDown=function handleKeyDown(event3){var userActions=this.options_.userActions;if(!userActions||!userActions.hotkeys){return;}
var excludeElement=function excludeElement2(el){var tagName=el.tagName.toLowerCase();if(el.isContentEditable){return true;}
var allowedInputTypes=["button","checkbox","hidden","radio","reset","submit"];if(tagName==="input"){return allowedInputTypes.indexOf(el.type)===-1;}
var excludedTags=["textarea"];return excludedTags.indexOf(tagName)!==-1;};if(excludeElement(this.el_.ownerDocument.activeElement)){return;}
if(typeof userActions.hotkeys==="function"){userActions.hotkeys.call(this,event3);}else{this.handleHotkeys(event3);}};_proto.handleHotkeys=function handleHotkeys(event3){var hotkeys=this.options_.userActions?this.options_.userActions.hotkeys:{};var _hotkeys$fullscreenKe=hotkeys.fullscreenKey,fullscreenKey=_hotkeys$fullscreenKe===void 0?function(keydownEvent){return keycode__default["default"].isEventKey(keydownEvent,"f");}:_hotkeys$fullscreenKe,_hotkeys$muteKey=hotkeys.muteKey,muteKey=_hotkeys$muteKey===void 0?function(keydownEvent){return keycode__default["default"].isEventKey(keydownEvent,"m");}:_hotkeys$muteKey,_hotkeys$playPauseKey=hotkeys.playPauseKey,playPauseKey=_hotkeys$playPauseKey===void 0?function(keydownEvent){return keycode__default["default"].isEventKey(keydownEvent,"k")||keycode__default["default"].isEventKey(keydownEvent,"Space");}:_hotkeys$playPauseKey;if(fullscreenKey.call(this,event3)){event3.preventDefault();event3.stopPropagation();var FSToggle=Component$1.getComponent("FullscreenToggle");if(document__default["default"][this.fsApi_.fullscreenEnabled]!==false){FSToggle.prototype.handleClick.call(this,event3);}}else if(muteKey.call(this,event3)){event3.preventDefault();event3.stopPropagation();var MuteToggle2=Component$1.getComponent("MuteToggle");MuteToggle2.prototype.handleClick.call(this,event3);}else if(playPauseKey.call(this,event3)){event3.preventDefault();event3.stopPropagation();var PlayToggle2=Component$1.getComponent("PlayToggle");PlayToggle2.prototype.handleClick.call(this,event3);}};_proto.canPlayType=function canPlayType2(type){var can;for(var i3=0,j2=this.options_.techOrder;i3<j2.length;i3++){var techName=j2[i3];var tech=Tech.getTech(techName);if(!tech){tech=Component$1.getComponent(techName);}
if(!tech){log$1.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue;}
if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can;}}}
return "";};_proto.selectSource=function selectSource(sources){var _this14=this;var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)];}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];if(tech){return tech.isSupported();}
log$1.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');return false;});var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair2(outerArray,innerArray,tester){var found;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true;}});});return found;};var foundSourceAndTech;var flip=function flip2(fn2){return function(a2,b2){return fn2(b2,a2);};};var finder=function finder2(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this14.options_[techName.toLowerCase()])){return{source,tech:techName};}};if(this.options_.sourceOrder){foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder));}else{foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder);}
return foundSourceAndTech||false;};_proto.handleSrc_=function handleSrc_(source,isRetry){var _this15=this;if(typeof source==="undefined"){return this.cache_.src||"";}
if(this.resetRetryOnError_){this.resetRetryOnError_();}
var sources=filterSource(source);if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage});},0);return;}
this.changingSrc_=true;if(!isRetry){this.cache_.sources=sources;}
this.updateSourceCaches_(sources[0]);setSource(this,sources[0],function(middlewareSource,mws){_this15.middleware_=mws;if(!isRetry){_this15.cache_.sources=sources;}
_this15.updateSourceCaches_(middlewareSource);var err=_this15.src_(middlewareSource);if(err){if(sources.length>1){return _this15.handleSrc_(sources.slice(1));}
_this15.changingSrc_=false;_this15.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage});},0);_this15.triggerReady();return;}
setTech(mws,_this15.tech_);});if(this.options_.retryOnError&&sources.length>1){var retry=function retry2(){_this15.error(null);_this15.handleSrc_(sources.slice(1),true);};var stopListeningForErrors=function stopListeningForErrors2(){_this15.off("error",retry);};this.one("error",retry);this.one("playing",stopListeningForErrors);this.resetRetryOnError_=function(){_this15.off("error",retry);_this15.off("playing",stopListeningForErrors);};}};_proto.src=function src(source){return this.handleSrc_(source,false);};_proto.src_=function src_(source){var _this16=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true;}
if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this16.changingSrc_=false;});return false;}
this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",source);}else{this.techCall_("src",source.src);}
this.changingSrc_=false;},true);return false;};_proto.load=function load(){this.techCall_("load");};_proto.reset=function reset2(){var _this17=this;var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(this.paused()||!PromiseClass){this.doReset_();}else{var playPromise=this.play();silencePromise(playPromise.then(function(){return _this17.doReset_();}));}};_proto.doReset_=function doReset_(){if(this.tech_){this.tech_.clearTracks("text");}
this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(isEvented(this)){this.trigger("playerreset");}};_proto.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_();};_proto.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var _ref3=this.controlBar||{},durationDisplay=_ref3.durationDisplay,remainingTimeDisplay=_ref3.remainingTimeDisplay;if(durationDisplay){durationDisplay.updateContent();}
if(remainingTimeDisplay){remainingTimeDisplay.updateContent();}};_proto.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_();};_proto.resetVolumeBar_=function resetVolumeBar_(){this.volume(1);this.trigger("volumechange");};_proto.currentSources=function currentSources(){var source=this.currentSource();var sources=[];if(Object.keys(source).length!==0){sources.push(source);}
return this.cache_.sources||sources;};_proto.currentSource=function currentSource(){return this.cache_.source||{};};_proto.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||"";};_proto.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||"";};_proto.preload=function preload(value){if(value!==void 0){this.techCall_("setPreload",value);this.options_.preload=value;return;}
return this.techGet_("preload");};_proto.autoplay=function autoplay(value){if(value===void 0){return this.options_.autoplay||false;}
var techAutoplay;if(typeof value==="string"&&/(any|play|muted)/.test(value)||value===true&&this.options_.normalizeAutoplay){this.options_.autoplay=value;this.manualAutoplay_(typeof value==="string"?value:"play");techAutoplay=false;}else if(!value){this.options_.autoplay=false;}else{this.options_.autoplay=true;}
techAutoplay=typeof techAutoplay==="undefined"?this.options_.autoplay:techAutoplay;if(this.tech_){this.techCall_("setAutoplay",techAutoplay);}};_proto.playsinline=function playsinline(value){if(value!==void 0){this.techCall_("setPlaysinline",value);this.options_.playsinline=value;return this;}
return this.techGet_("playsinline");};_proto.loop=function loop(value){if(value!==void 0){this.techCall_("setLoop",value);this.options_.loop=value;return;}
return this.techGet_("loop");};_proto.poster=function poster(src){if(src===void 0){return this.poster_;}
if(!src){src="";}
if(src===this.poster_){return;}
this.poster_=src;this.techCall_("setPoster",src);this.isPosterFromTech_=false;this.trigger("posterchange");};_proto.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||"";if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;this.trigger("posterchange");}}};_proto.controls=function controls(bool){if(bool===void 0){return!!this.controls_;}
bool=!!bool;if(this.controls_===bool){return;}
this.controls_=bool;if(this.usingNativeControls()){this.techCall_("setControls",bool);}
if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}};_proto.usingNativeControls=function usingNativeControls(bool){if(bool===void 0){return!!this.usingNativeControls_;}
bool=!!bool;if(this.usingNativeControls_===bool){return;}
this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols");}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols");}};_proto.error=function error2(err){var _this18=this;if(err===void 0){return this.error_||null;}
hooks("beforeerror").forEach(function(hookFunction){var newErr=hookFunction(_this18,err);if(!(isObject(newErr)&&!Array.isArray(newErr)||typeof newErr==="string"||typeof newErr==="number"||newErr===null)){_this18.log.error("please return a value that MediaError expects in beforeerror hooks");return;}
err=newErr;});if(this.options_.suppressNotSupportedError&&err&&err.code===4){var triggerSuppressedError=function triggerSuppressedError2(){this.error(err);};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],triggerSuppressedError);this.one("loadstart",function(){this.off(["click","touchstart"],triggerSuppressedError);});return;}
if(err===null){this.error_=err;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close();}
return;}
this.error_=new MediaError(err);this.addClass("vjs-error");log$1.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");hooks("error").forEach(function(hookFunction){return hookFunction(_this18,_this18.error_);});return;};_proto.reportUserActivity=function reportUserActivity(event3){this.userActivity_=true;};_proto.userActive=function userActive(bool){if(bool===void 0){return this.userActive_;}
bool=!!bool;if(bool===this.userActive_){return;}
this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return;}
if(this.tech_){this.tech_.one("mousemove",function(e2){e2.stopPropagation();e2.preventDefault();});}
this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive");};_proto.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress;var lastMoveX;var lastMoveY;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove2(e2){if(e2.screenX!==lastMoveX||e2.screenY!==lastMoveY){lastMoveX=e2.screenX;lastMoveY=e2.screenY;handleActivity();}};var handleMouseDown=function handleMouseDown2(){handleActivity();this.clearInterval(mouseInProgress);mouseInProgress=this.setInterval(handleActivity,250);};var handleMouseUpAndMouseLeave=function handleMouseUpAndMouseLeave2(event3){handleActivity();this.clearInterval(mouseInProgress);};this.on("mousedown",handleMouseDown);this.on("mousemove",handleMouseMove);this.on("mouseup",handleMouseUpAndMouseLeave);this.on("mouseleave",handleMouseUpAndMouseLeave);var controlBar=this.getChild("controlBar");if(controlBar&&!IS_IOS&&!IS_ANDROID){controlBar.on("mouseenter",function(event3){if(this.player().options_.inactivityTimeout!==0){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;}
this.player().options_.inactivityTimeout=0;});controlBar.on("mouseleave",function(event3){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout;});}
this.on("keydown",handleActivity);this.on("keyup",handleActivity);var inactivityTimeout;this.setInterval(function(){if(!this.userActivity_){return;}
this.userActivity_=false;this.userActive(true);this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return;}
inactivityTimeout=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false);}},timeout);},250);};_proto.playbackRate=function playbackRate(rate){if(rate!==void 0){this.techCall_("setPlaybackRate",rate);return;}
if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate");}
return 1;};_proto.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==void 0){return this.techCall_("setDefaultPlaybackRate",rate);}
if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate");}
return 1;};_proto.isAudio=function isAudio(bool){if(bool!==void 0){this.isAudio_=!!bool;return;}
return!!this.isAudio_;};_proto.enableAudioOnlyUI_=function enableAudioOnlyUI_(){var _this19=this;this.addClass("vjs-audio-only-mode");var playerChildren=this.children();var controlBar=this.getChild("ControlBar");var controlBarHeight=controlBar&&controlBar.currentHeight();playerChildren.forEach(function(child){if(child===controlBar){return;}
if(child.el_&&!child.hasClass("vjs-hidden")){child.hide();_this19.audioOnlyCache_.hiddenChildren.push(child);}});this.audioOnlyCache_.playerHeight=this.currentHeight();this.height(controlBarHeight);this.trigger("audioonlymodechange");};_proto.disableAudioOnlyUI_=function disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode");this.audioOnlyCache_.hiddenChildren.forEach(function(child){return child.show();});this.height(this.audioOnlyCache_.playerHeight);this.trigger("audioonlymodechange");};_proto.audioOnlyMode=function audioOnlyMode(value){var _this20=this;if(typeof value!=="boolean"||value===this.audioOnlyMode_){return this.audioOnlyMode_;}
this.audioOnlyMode_=value;var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){if(value){var exitPromises=[];if(this.isInPictureInPicture()){exitPromises.push(this.exitPictureInPicture());}
if(this.isFullscreen()){exitPromises.push(this.exitFullscreen());}
if(this.audioPosterMode()){exitPromises.push(this.audioPosterMode(false));}
return PromiseClass.all(exitPromises).then(function(){return _this20.enableAudioOnlyUI_();});}
return PromiseClass.resolve().then(function(){return _this20.disableAudioOnlyUI_();});}
if(value){if(this.isInPictureInPicture()){this.exitPictureInPicture();}
if(this.isFullscreen()){this.exitFullscreen();}
this.enableAudioOnlyUI_();}else{this.disableAudioOnlyUI_();}};_proto.enablePosterModeUI_=function enablePosterModeUI_(){var tech=this.tech_&&this.tech_;tech.hide();this.addClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange");};_proto.disablePosterModeUI_=function disablePosterModeUI_(){var tech=this.tech_&&this.tech_;tech.show();this.removeClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange");};_proto.audioPosterMode=function audioPosterMode(value){var _this21=this;if(typeof value!=="boolean"||value===this.audioPosterMode_){return this.audioPosterMode_;}
this.audioPosterMode_=value;var PromiseClass=this.options_.Promise||window__default["default"].Promise;if(PromiseClass){if(value){if(this.audioOnlyMode()){var audioOnlyModePromise=this.audioOnlyMode(false);return audioOnlyModePromise.then(function(){_this21.enablePosterModeUI_();});}
return PromiseClass.resolve().then(function(){_this21.enablePosterModeUI_();});}
return PromiseClass.resolve().then(function(){_this21.disablePosterModeUI_();});}
if(value){if(this.audioOnlyMode()){this.audioOnlyMode(false);}
this.enablePosterModeUI_();return;}
this.disablePosterModeUI_();};_proto.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language);}};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup);}};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(obj){if(obj===void 0){obj={};}
var _obj=obj,track=_obj.track;if(!track){track=obj;}
if(this.tech_){return this.tech_.removeRemoteTextTrack(track);}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality");};_proto.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;};_proto.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;};_proto.language=function language(code){if(code===void 0){return this.language_;}
if(this.language_!==String(code).toLowerCase()){this.language_=String(code).toLowerCase();if(isEvented(this)){this.trigger("languagechange");}}};_proto.languages=function languages(){return mergeOptions$3(Player2.prototype.options_.languages,this.languages_);};_proto.toJSON=function toJSON(){var options=mergeOptions$3(this.options_);var tracks=options.tracks;options.tracks=[];for(var i3=0;i3<tracks.length;i3++){var track=tracks[i3];track=mergeOptions$3(track);track.player=void 0;options.tracks[i3]=track;}
return options;};_proto.createModal=function createModal(content,options){var _this22=this;options=options||{};options.content=content||"";var modal=new ModalDialog(this,options);this.addChild(modal);modal.on("dispose",function(){_this22.removeChild(modal);});modal.open();return modal;};_proto.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return;}
var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i3=0;i3<BREAKPOINT_ORDER.length;i3++){var candidateBreakpoint=BREAKPOINT_ORDER[i3];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){if(currentBreakpoint===candidateBreakpoint){return;}
if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);}
this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break;}}};_proto.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_="";if(className){this.removeClass(className);}};_proto.breakpoints=function breakpoints(_breakpoints){if(_breakpoints===void 0){return assign(this.breakpoints_);}
this.breakpoint_="";this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);this.updateCurrentBreakpoint_();return assign(this.breakpoints_);};_proto.responsive=function responsive(value){if(value===void 0){return this.responsive_;}
value=Boolean(value);var current=this.responsive_;if(value===current){return;}
this.responsive_=value;if(value){this.on("playerresize",this.boundUpdateCurrentBreakpoint_);this.updateCurrentBreakpoint_();}else{this.off("playerresize",this.boundUpdateCurrentBreakpoint_);this.removeCurrentBreakpoint_();}
return value;};_proto.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_;};_proto.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||"";};_proto.loadMedia=function loadMedia(media,ready){var _this23=this;if(!media||typeof media!=="object"){return;}
this.reset();this.cache_.media=mergeOptions$3(media);var _this$cache_$media=this.cache_.media,artwork=_this$cache_$media.artwork,poster=_this$cache_$media.poster,src=_this$cache_$media.src,textTracks=_this$cache_$media.textTracks;if(!artwork&&poster){this.cache_.media.artwork=[{src:poster,type:getMimetype(poster)}];}
if(src){this.src(src);}
if(poster){this.poster(poster);}
if(Array.isArray(textTracks)){textTracks.forEach(function(tt2){return _this23.addRemoteTextTrack(tt2,false);});}
this.ready(ready);};_proto.getMedia=function getMedia(){if(!this.cache_.media){var poster=this.poster();var src=this.currentSources();var textTracks=Array.prototype.map.call(this.remoteTextTracks(),function(tt2){return{kind:tt2.kind,label:tt2.label,language:tt2.language,src:tt2.src};});var media={src,textTracks};if(poster){media.poster=poster;media.artwork=[{src:media.poster,type:getMimetype(media.poster)}];}
return media;}
return mergeOptions$3(this.cache_.media);};Player2.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions["data-setup"];if(hasClass(tag,"vjs-fill")){tagOptions.fill=true;}
if(hasClass(tag,"vjs-fluid")){tagOptions.fluid=true;}
if(dataSetup!==null){var _safeParseTuple=safeParseTuple__default["default"](dataSetup||"{}"),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log$1.error(err);}
assign(tagOptions,data);}
assign(baseOptions,tagOptions);if(tag.hasChildNodes()){var children=tag.childNodes;for(var i3=0,j2=children.length;i3<j2;i3++){var child=children[i3];var childName=child.nodeName.toLowerCase();if(childName==="source"){baseOptions.sources.push(getAttributes(child));}else if(childName==="track"){baseOptions.tracks.push(getAttributes(child));}}}
return baseOptions;};_proto.flexNotSupported_=function flexNotSupported_(){var elem=document__default["default"].createElement("i");return!("flexBasis"in elem.style||"webkitFlexBasis"in elem.style||"mozFlexBasis"in elem.style||"msFlexBasis"in elem.style||"msFlexOrder"in elem.style);};_proto.debug=function debug(enabled){if(enabled===void 0){return this.debugEnabled_;}
if(enabled){this.trigger("debugon");this.previousLogLevel_=this.log.level;this.log.level("debug");this.debugEnabled_=true;}else{this.trigger("debugoff");this.log.level(this.previousLogLevel_);this.previousLogLevel_=void 0;this.debugEnabled_=false;}};_proto.playbackRates=function playbackRates(newRates){if(newRates===void 0){return this.cache_.playbackRates;}
if(!Array.isArray(newRates)){return;}
if(!newRates.every(function(rate){return typeof rate==="number";})){return;}
this.cache_.playbackRates=newRates;this.trigger("playbackrateschange");};return Player2;}(Component$1);ALL.names.forEach(function(name){var props=ALL[name];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]();}
this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};var navigator2=window__default["default"].navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator2&&(navigator2.languages&&navigator2.languages[0]||navigator2.userLanguage||navigator2.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:false,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false,audioOnlyMode:false,audioPosterMode:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(fn2){Player.prototype[fn2]=function(){return this.techGet_(fn2);};});TECH_EVENTS_RETRIGGER.forEach(function(event3){Player.prototype["handleTech"+toTitleCase$1(event3)+"_"]=function(){return this.trigger(event3);};});Component$1.registerComponent("Player",Player);var BASE_PLUGIN_NAME="plugin";var PLUGIN_CACHE_KEY="activePlugins_";var pluginStorage={};var pluginExists=function pluginExists2(name){return pluginStorage.hasOwnProperty(name);};var getPlugin=function getPlugin2(name){return pluginExists(name)?pluginStorage[name]:void 0;};var markPluginAsActive=function markPluginAsActive2(player,name){player[PLUGIN_CACHE_KEY]=player[PLUGIN_CACHE_KEY]||{};player[PLUGIN_CACHE_KEY][name]=true;};var triggerSetupEvent=function triggerSetupEvent2(player,hash,before){var eventName=(before?"before":"")+"pluginsetup";player.trigger(eventName,hash);player.trigger(eventName+":"+hash.name,hash);};var createBasicPlugin=function createBasicPlugin2(name,plugin){var basicPluginWrapper=function basicPluginWrapper2(){triggerSetupEvent(this,{name,plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name,plugin,instance});return instance;};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop];});return basicPluginWrapper;};var createPluginFactory=function createPluginFactory2(name,PluginSubClass){PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var instance=_construct__default["default"](PluginSubClass,[this].concat(args));this[name]=function(){return instance;};triggerSetupEvent(this,instance.getEventHash());return instance;};};var Plugin=function(){function Plugin2(player){if(this.constructor===Plugin2){throw new Error("Plugin must be sub-classed; not directly instantiated.");}
this.player=player;if(!this.log){this.log=this.player.log.createLogger(this.name);}
evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player,this.name);this.dispose=this.dispose.bind(this);player.on("dispose",this.dispose);}
var _proto=Plugin2.prototype;_proto.version=function version3(){return this.constructor.VERSION;};_proto.getEventHash=function getEventHash(hash){if(hash===void 0){hash={};}
hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash;};_proto.trigger=function trigger$1(event3,hash){if(hash===void 0){hash={};}
return trigger(this.eventBusEl_,event3,this.getEventHash(hash));};_proto.handleStateChanged=function handleStateChanged(e2){};_proto.dispose=function dispose(){var name=this.name,player=this.player;this.trigger("dispose");this.off();player.off("dispose",this.dispose);player[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;player[name]=createPluginFactory(name,pluginStorage[name]);};Plugin2.isBasic=function isBasic(plugin){var p2=typeof plugin==="string"?getPlugin(plugin):plugin;return typeof p2==="function"&&!Plugin2.prototype.isPrototypeOf(p2.prototype);};Plugin2.registerPlugin=function registerPlugin3(name,plugin){if(typeof name!=="string"){throw new Error('Illegal plugin name, "'+name+'", must be a string, was '+typeof name+".");}
if(pluginExists(name)){log$1.warn('A plugin named "'+name+'" already exists. You may want to avoid re-registering plugins!');}else if(Player.prototype.hasOwnProperty(name)){throw new Error('Illegal plugin name, "'+name+'", cannot share a name with an existing player method!');}
if(typeof plugin!=="function"){throw new Error('Illegal plugin for "'+name+'", must be a function, was '+typeof plugin+".");}
pluginStorage[name]=plugin;if(name!==BASE_PLUGIN_NAME){if(Plugin2.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin);}else{Player.prototype[name]=createPluginFactory(name,plugin);}}
return plugin;};Plugin2.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error("Cannot de-register base plugin.");}
if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name];}};Plugin2.getPlugins=function getPlugins(names){if(names===void 0){names=Object.keys(pluginStorage);}
var result;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin;}});return result;};Plugin2.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||"";};return Plugin2;}();Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true;};Player.prototype.hasPlugin=function(name){return!!pluginExists(name);};var hasLogged=false;var extend3=function extend4(superClass,subClassMethods){if(subClassMethods===void 0){subClassMethods={};}
if(!hasLogged){log$1.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0");hasLogged=true;}
var subClass=function subClass2(){superClass.apply(this,arguments);};var methods={};if(typeof subClassMethods==="object"){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor;}
methods=subClassMethods;}else if(typeof subClassMethods==="function"){subClass=subClassMethods;}
_inherits__default["default"](subClass,superClass);if(superClass){subClass.super_=superClass;}
for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name];}}
return subClass;};var normalizeId=function normalizeId2(id2){return id2.indexOf("#")===0?id2.slice(1):id2;};function videojs3(id2,options,ready){var player=videojs3.getPlayer(id2);if(player){if(options){log$1.warn('Player "'+id2+'" is already initialised. Options will not be applied.');}
if(ready){player.ready(ready);}
return player;}
var el=typeof id2==="string"?$2("#"+normalizeId(id2)):id2;if(!isEl(el)){throw new TypeError("The element or ID supplied is not valid. (videojs)");}
if(!el.ownerDocument.defaultView||!el.ownerDocument.body.contains(el)){log$1.warn("The element supplied is not included in the DOM");}
options=options||{};if(options.restoreEl===true){options.restoreEl=(el.parentNode&&el.parentNode.hasAttribute("data-vjs-player")?el.parentNode:el).cloneNode(true);}
hooks("beforesetup").forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions$3(options));if(!isObject(opts)||Array.isArray(opts)){log$1.error("please return an object in beforesetup hooks");return;}
options=mergeOptions$3(options,opts);});var PlayerComponent=Component$1.getComponent("Player");player=new PlayerComponent(el,options,ready);hooks("setup").forEach(function(hookFunction){return hookFunction(player);});return player;}
videojs3.hooks_=hooks_;videojs3.hooks=hooks;videojs3.hook=hook;videojs3.hookOnce=hookOnce;videojs3.removeHook=removeHook;if(window__default["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){style=$2(".vjs-styles-defaults");if(!style){style=createStyleElement("vjs-styles-defaults");head=$2("head");if(head){head.insertBefore(style,head.firstChild);}
setTextContent(style,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ");}}
var style;var head;autoSetupTimeout(1,videojs3);videojs3.VERSION=version$5;videojs3.options=Player.prototype.options_;videojs3.getPlayers=function(){return Player.players;};videojs3.getPlayer=function(id2){var players=Player.players;var tag;if(typeof id2==="string"){var nId=normalizeId(id2);var player=players[nId];if(player){return player;}
tag=$2("#"+nId);}else{tag=id2;}
if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;if(_player||players[playerId]){return _player||players[playerId];}}};videojs3.getAllPlayers=function(){return Object.keys(Player.players).map(function(k2){return Player.players[k2];}).filter(Boolean);};videojs3.players=Player.players;videojs3.getComponent=Component$1.getComponent;videojs3.registerComponent=function(name,comp){if(Tech.isTech(comp)){log$1.warn("The "+name+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}
Component$1.registerComponent.call(Component$1,name,comp);};videojs3.getTech=Tech.getTech;videojs3.registerTech=Tech.registerTech;videojs3.use=use;Object.defineProperty(videojs3,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs3.middleware,"TERMINATOR",{value:TERMINATOR,writeable:false,enumerable:true});videojs3.browser=browser;videojs3.TOUCH_ENABLED=TOUCH_ENABLED;videojs3.extend=extend3;videojs3.mergeOptions=mergeOptions$3;videojs3.bind=bind;videojs3.registerPlugin=Plugin.registerPlugin;videojs3.deregisterPlugin=Plugin.deregisterPlugin;videojs3.plugin=function(name,plugin){log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Plugin.registerPlugin(name,plugin);};videojs3.getPlugins=Plugin.getPlugins;videojs3.getPlugin=Plugin.getPlugin;videojs3.getPluginVersion=Plugin.getPluginVersion;videojs3.addLanguage=function(code,data){var _mergeOptions;code=(""+code).toLowerCase();videojs3.options.languages=mergeOptions$3(videojs3.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs3.options.languages[code];};videojs3.log=log$1;videojs3.createLogger=createLogger;videojs3.createTimeRange=videojs3.createTimeRanges=createTimeRanges;videojs3.formatTime=formatTime;videojs3.setFormatTime=setFormatTime;videojs3.resetFormatTime=resetFormatTime;videojs3.parseUrl=parseUrl;videojs3.isCrossOrigin=isCrossOrigin;videojs3.EventTarget=EventTarget$2;videojs3.on=on2;videojs3.one=one;videojs3.off=off;videojs3.trigger=trigger;videojs3.xhr=XHR__default["default"];videojs3.TextTrack=TextTrack;videojs3.AudioTrack=AudioTrack;videojs3.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(k2){videojs3[k2]=function(){log$1.warn("videojs."+k2+"() is deprecated; use videojs.dom."+k2+"() instead");return Dom2[k2].apply(null,arguments);};});videojs3.computedStyle=computedStyle;videojs3.dom=Dom2;videojs3.url=Url;videojs3.defineLazyProperty=defineLazyProperty;videojs3.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var resolveUrl=_resolveUrl__default["default"];var resolveManifestRedirect=function resolveManifestRedirect2(handleManifestRedirect,url,req){if(handleManifestRedirect&&req&&req.responseURL&&url!==req.responseURL){return req.responseURL;}
return url;};var logger=function logger2(source){if(videojs3.log.debug){return videojs3.log.debug.bind(videojs3,"VHS:",source+" >");}
return function(){};};var TIME_FUDGE_FACTOR=1/30;var SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3;var filterRanges=function filterRanges2(timeRanges,predicate){var results=[];var i3;if(timeRanges&&timeRanges.length){for(i3=0;i3<timeRanges.length;i3++){if(predicate(timeRanges.start(i3),timeRanges.end(i3))){results.push([timeRanges.start(i3),timeRanges.end(i3)]);}}}
return videojs3.createTimeRanges(results);};var findRange=function findRange2(buffered,time){return filterRanges(buffered,function(start3,end){return start3-SAFE_TIME_DELTA<=time&&end+SAFE_TIME_DELTA>=time;});};var findNextRange=function findNextRange2(timeRanges,time){return filterRanges(timeRanges,function(start3){return start3-TIME_FUDGE_FACTOR>=time;});};var findGaps=function findGaps2(buffered){if(buffered.length<2){return videojs3.createTimeRanges();}
var ranges=[];for(var i3=1;i3<buffered.length;i3++){var start3=buffered.end(i3-1);var end=buffered.start(i3);ranges.push([start3,end]);}
return videojs3.createTimeRanges(ranges);};var bufferIntersection=function bufferIntersection2(bufferA,bufferB){var start3=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!bufferA||!bufferA.length||!bufferB||!bufferB.length){return videojs3.createTimeRange();}
var count=bufferA.length;while(count--){extents.push({time:bufferA.start(count),type:"start"});extents.push({time:bufferA.end(count),type:"end"});}
count=bufferB.length;while(count--){extents.push({time:bufferB.start(count),type:"start"});extents.push({time:bufferB.end(count),type:"end"});}
extents.sort(function(a2,b2){return a2.time-b2.time;});for(count=0;count<extents.length;count++){if(extents[count].type==="start"){arity++;if(arity===2){start3=extents[count].time;}}else if(extents[count].type==="end"){arity--;if(arity===1){end=extents[count].time;}}
if(start3!==null&&end!==null){ranges.push([start3,end]);start3=null;end=null;}}
return videojs3.createTimeRanges(ranges);};var printableRange=function printableRange2(range){var strArr=[];if(!range||!range.length){return "";}
for(var i3=0;i3<range.length;i3++){strArr.push(range.start(i3)+" => "+range.end(i3));}
return strArr.join(", ");};var timeUntilRebuffer=function timeUntilRebuffer2(buffered,currentTime,playbackRate){if(playbackRate===void 0){playbackRate=1;}
var bufferedEnd=buffered.length?buffered.end(buffered.length-1):0;return(bufferedEnd-currentTime)/playbackRate;};var timeRangesToArray=function timeRangesToArray2(timeRanges){var timeRangesList=[];for(var i3=0;i3<timeRanges.length;i3++){timeRangesList.push({start:timeRanges.start(i3),end:timeRanges.end(i3)});}
return timeRangesList;};var isRangeDifferent=function isRangeDifferent2(a2,b2){if(a2===b2){return false;}
if(!a2&&b2||!b2&&a2){return true;}
if(a2.length!==b2.length){return true;}
for(var i3=0;i3<a2.length;i3++){if(a2.start(i3)!==b2.start(i3)||a2.end(i3)!==b2.end(i3)){return true;}}
return false;};var lastBufferedEnd=function lastBufferedEnd2(a2){if(!a2||!a2.length||!a2.end){return;}
return a2.end(a2.length-1);};var timeAheadOf=function timeAheadOf2(range,startTime){var time=0;if(!range||!range.length){return time;}
for(var i3=0;i3<range.length;i3++){var start3=range.start(i3);var end=range.end(i3);if(startTime>end){continue;}
if(startTime>start3&&startTime<=end){time+=end-startTime;continue;}
time+=end-start3;}
return time;};var createTimeRange=videojs3.createTimeRange;var segmentDurationWithParts=function segmentDurationWithParts2(playlist,segment){if(!segment.preload){return segment.duration;}
var result=0;(segment.parts||[]).forEach(function(p2){result+=p2.duration;});(segment.preloadHints||[]).forEach(function(p2){if(p2.type==="PART"){result+=playlist.partTargetDuration;}});return result;};var getPartsAndSegments=function getPartsAndSegments2(playlist){return(playlist.segments||[]).reduce(function(acc,segment,si2){if(segment.parts){segment.parts.forEach(function(part,pi2){acc.push({duration:part.duration,segmentIndex:si2,partIndex:pi2,part,segment});});}else{acc.push({duration:segment.duration,segmentIndex:si2,partIndex:null,segment,part:null});}
return acc;},[]);};var getLastParts=function getLastParts2(media){var lastSegment=media.segments&&media.segments.length&&media.segments[media.segments.length-1];return lastSegment&&lastSegment.parts||[];};var getKnownPartCount=function getKnownPartCount2(_ref){var preloadSegment=_ref.preloadSegment;if(!preloadSegment){return;}
var parts=preloadSegment.parts,preloadHints=preloadSegment.preloadHints;var partCount=(preloadHints||[]).reduce(function(count,hint){return count+(hint.type==="PART"?1:0);},0);partCount+=parts&&parts.length?parts.length:0;return partCount;};var liveEdgeDelay=function liveEdgeDelay2(master,media){if(media.endList){return 0;}
if(master&&master.suggestedPresentationDelay){return master.suggestedPresentationDelay;}
var hasParts=getLastParts(media).length>0;if(hasParts&&media.serverControl&&media.serverControl.partHoldBack){return media.serverControl.partHoldBack;}else if(hasParts&&media.partTargetDuration){return media.partTargetDuration*3;}else if(media.serverControl&&media.serverControl.holdBack){return media.serverControl.holdBack;}else if(media.targetDuration){return media.targetDuration*3;}
return 0;};var backwardDuration=function backwardDuration2(playlist,endSequence){var result=0;var i3=endSequence-playlist.mediaSequence;var segment=playlist.segments[i3];if(segment){if(typeof segment.start!=="undefined"){return{result:segment.start,precise:true};}
if(typeof segment.end!=="undefined"){return{result:segment.end-segment.duration,precise:true};}}
while(i3--){segment=playlist.segments[i3];if(typeof segment.end!=="undefined"){return{result:result+segment.end,precise:true};}
result+=segmentDurationWithParts(playlist,segment);if(typeof segment.start!=="undefined"){return{result:result+segment.start,precise:true};}}
return{result,precise:false};};var forwardDuration=function forwardDuration2(playlist,endSequence){var result=0;var segment;var i3=endSequence-playlist.mediaSequence;for(;i3<playlist.segments.length;i3++){segment=playlist.segments[i3];if(typeof segment.start!=="undefined"){return{result:segment.start-result,precise:true};}
result+=segmentDurationWithParts(playlist,segment);if(typeof segment.end!=="undefined"){return{result:segment.end-result,precise:true};}}
return{result:-1,precise:false};};var intervalDuration=function intervalDuration2(playlist,endSequence,expired){if(typeof endSequence==="undefined"){endSequence=playlist.mediaSequence+playlist.segments.length;}
if(endSequence<playlist.mediaSequence){return 0;}
var backward=backwardDuration(playlist,endSequence);if(backward.precise){return backward.result;}
var forward=forwardDuration(playlist,endSequence);if(forward.precise){return forward.result;}
return backward.result+expired;};var duration=function duration2(playlist,endSequence,expired){if(!playlist){return 0;}
if(typeof expired!=="number"){expired=0;}
if(typeof endSequence==="undefined"){if(playlist.totalDuration){return playlist.totalDuration;}
if(!playlist.endList){return window__default["default"].Infinity;}}
return intervalDuration(playlist,endSequence,expired);};var sumDurations=function sumDurations2(_ref2){var defaultDuration=_ref2.defaultDuration,durationList=_ref2.durationList,startIndex=_ref2.startIndex,endIndex=_ref2.endIndex;var durations=0;if(startIndex>endIndex){var _ref3=[endIndex,startIndex];startIndex=_ref3[0];endIndex=_ref3[1];}
if(startIndex<0){for(var i3=startIndex;i3<Math.min(0,endIndex);i3++){durations+=defaultDuration;}
startIndex=0;}
for(var _i3=startIndex;_i3<endIndex;_i3++){durations+=durationList[_i3].duration;}
return durations;};var playlistEnd=function playlistEnd2(playlist,expired,useSafeLiveEnd,liveEdgePadding){if(!playlist||!playlist.segments){return null;}
if(playlist.endList){return duration(playlist);}
if(expired===null){return null;}
expired=expired||0;var lastSegmentEndTime=intervalDuration(playlist,playlist.mediaSequence+playlist.segments.length,expired);if(useSafeLiveEnd){liveEdgePadding=typeof liveEdgePadding==="number"?liveEdgePadding:liveEdgeDelay(null,playlist);lastSegmentEndTime-=liveEdgePadding;}
return Math.max(0,lastSegmentEndTime);};var seekable=function seekable2(playlist,expired,liveEdgePadding){var useSafeLiveEnd=true;var seekableStart=expired||0;var seekableEnd=playlistEnd(playlist,expired,useSafeLiveEnd,liveEdgePadding);if(seekableEnd===null){return createTimeRange();}
return createTimeRange(seekableStart,seekableEnd);};var getMediaInfoForTime=function getMediaInfoForTime2(_ref4){var playlist=_ref4.playlist,currentTime=_ref4.currentTime,startingSegmentIndex=_ref4.startingSegmentIndex,startingPartIndex=_ref4.startingPartIndex,startTime=_ref4.startTime,experimentalExactManifestTimings=_ref4.experimentalExactManifestTimings;var time=currentTime-startTime;var partsAndSegments=getPartsAndSegments(playlist);var startIndex=0;for(var i3=0;i3<partsAndSegments.length;i3++){var partAndSegment=partsAndSegments[i3];if(startingSegmentIndex!==partAndSegment.segmentIndex){continue;}
if(typeof startingPartIndex==="number"&&typeof partAndSegment.partIndex==="number"&&startingPartIndex!==partAndSegment.partIndex){continue;}
startIndex=i3;break;}
if(time<0){if(startIndex>0){for(var _i22=startIndex-1;_i22>=0;_i22--){var _partAndSegment=partsAndSegments[_i22];time+=_partAndSegment.duration;if(experimentalExactManifestTimings){if(time<0){continue;}}else if(time+TIME_FUDGE_FACTOR<=0){continue;}
return{partIndex:_partAndSegment.partIndex,segmentIndex:_partAndSegment.segmentIndex,startTime:startTime-sumDurations({defaultDuration:playlist.targetDuration,durationList:partsAndSegments,startIndex,endIndex:_i22})};}}
return{partIndex:partsAndSegments[0]&&partsAndSegments[0].partIndex||null,segmentIndex:partsAndSegments[0]&&partsAndSegments[0].segmentIndex||0,startTime:currentTime};}
if(startIndex<0){for(var _i3=startIndex;_i3<0;_i3++){time-=playlist.targetDuration;if(time<0){return{partIndex:partsAndSegments[0]&&partsAndSegments[0].partIndex||null,segmentIndex:partsAndSegments[0]&&partsAndSegments[0].segmentIndex||0,startTime:currentTime};}}
startIndex=0;}
for(var _i4=startIndex;_i4<partsAndSegments.length;_i4++){var _partAndSegment2=partsAndSegments[_i4];time-=_partAndSegment2.duration;if(experimentalExactManifestTimings){if(time>0){continue;}}else if(time-TIME_FUDGE_FACTOR>=0){continue;}
return{partIndex:_partAndSegment2.partIndex,segmentIndex:_partAndSegment2.segmentIndex,startTime:startTime+sumDurations({defaultDuration:playlist.targetDuration,durationList:partsAndSegments,startIndex,endIndex:_i4})};}
return{segmentIndex:partsAndSegments[partsAndSegments.length-1].segmentIndex,partIndex:partsAndSegments[partsAndSegments.length-1].partIndex,startTime:currentTime};};var isBlacklisted=function isBlacklisted2(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now();};var isIncompatible=function isIncompatible2(playlist){return playlist.excludeUntil&&playlist.excludeUntil===Infinity;};var isEnabled=function isEnabled2(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted;};var isDisabled=function isDisabled2(playlist){return playlist.disabled;};var isAes=function isAes2(media){for(var i3=0;i3<media.segments.length;i3++){if(media.segments[i3].key){return true;}}
return false;};var hasAttribute2=function hasAttribute3(attr,playlist){return playlist.attributes&&playlist.attributes[attr];};var estimateSegmentRequestTime=function estimateSegmentRequestTime2(segmentDuration,bandwidth,playlist,bytesReceived){if(bytesReceived===void 0){bytesReceived=0;}
if(!hasAttribute2("BANDWIDTH",playlist)){return NaN;}
var size=segmentDuration*playlist.attributes.BANDWIDTH;return(size-bytesReceived*8)/bandwidth;};var isLowestEnabledRendition=function isLowestEnabledRendition2(master,media){if(master.playlists.length===1){return true;}
var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return master.playlists.filter(function(playlist){if(!isEnabled(playlist)){return false;}
return(playlist.attributes.BANDWIDTH||0)<currentBandwidth;}).length===0;};var playlistMatch=function playlistMatch2(a2,b2){if(!a2&&!b2||!a2&&b2||a2&&!b2){return false;}
if(a2===b2){return true;}
if(a2.id&&b2.id&&a2.id===b2.id){return true;}
if(a2.resolvedUri&&b2.resolvedUri&&a2.resolvedUri===b2.resolvedUri){return true;}
if(a2.uri&&b2.uri&&a2.uri===b2.uri){return true;}
return false;};var someAudioVariant=function someAudioVariant2(master,callback){var AUDIO=master&&master.mediaGroups&&master.mediaGroups.AUDIO||{};var found=false;for(var groupName in AUDIO){for(var label in AUDIO[groupName]){found=callback(AUDIO[groupName][label]);if(found){break;}}
if(found){break;}}
return!!found;};var isAudioOnly=function isAudioOnly2(master){if(!master||!master.playlists||!master.playlists.length){var found=someAudioVariant(master,function(variant){return variant.playlists&&variant.playlists.length||variant.uri;});return found;}
var _loop=function _loop2(i4){var playlist=master.playlists[i4];var CODECS=playlist.attributes&&playlist.attributes.CODECS;if(CODECS&&CODECS.split(",").every(function(c2){return codecs_js.isAudioCodec(c2);})){return "continue";}
var found2=someAudioVariant(master,function(variant){return playlistMatch(playlist,variant);});if(found2){return "continue";}
return{v:false};};for(var i3=0;i3<master.playlists.length;i3++){var _ret=_loop(i3);if(_ret==="continue")
continue;if(typeof _ret==="object")
return _ret.v;}
return true;};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isBlacklisted,isIncompatible,playlistEnd,isAes,hasAttribute:hasAttribute2,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};var log=videojs3.log;var createPlaylistID=function createPlaylistID2(index,uri){return index+"-"+uri;};var groupID=function groupID2(type,group,label){return "placeholder-uri-"+type+"-"+group+"-"+label;};var parseManifest=function parseManifest2(_ref){var onwarn=_ref.onwarn,oninfo=_ref.oninfo,manifestString=_ref.manifestString,_ref$customTagParsers=_ref.customTagParsers,customTagParsers=_ref$customTagParsers===void 0?[]:_ref$customTagParsers,_ref$customTagMappers=_ref.customTagMappers,customTagMappers=_ref$customTagMappers===void 0?[]:_ref$customTagMappers,experimentalLLHLS=_ref.experimentalLLHLS;var parser=new m3u8Parser.Parser();if(onwarn){parser.on("warn",onwarn);}
if(oninfo){parser.on("info",oninfo);}
customTagParsers.forEach(function(customParser){return parser.addParser(customParser);});customTagMappers.forEach(function(mapper){return parser.addTagMapper(mapper);});parser.push(manifestString);parser.end();var manifest=parser.manifest;if(!experimentalLLHLS){["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(k2){if(manifest.hasOwnProperty(k2)){delete manifest[k2];}});if(manifest.segments){manifest.segments.forEach(function(segment){["parts","preloadHints"].forEach(function(k2){if(segment.hasOwnProperty(k2)){delete segment[k2];}});});}}
if(!manifest.targetDuration){var targetDuration=10;if(manifest.segments&&manifest.segments.length){targetDuration=manifest.segments.reduce(function(acc,s2){return Math.max(acc,s2.duration);},0);}
if(onwarn){onwarn("manifest has no targetDuration defaulting to "+targetDuration);}
manifest.targetDuration=targetDuration;}
var parts=getLastParts(manifest);if(parts.length&&!manifest.partTargetDuration){var partTargetDuration=parts.reduce(function(acc,p2){return Math.max(acc,p2.duration);},0);if(onwarn){onwarn("manifest has no partTargetDuration defaulting to "+partTargetDuration);log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.");}
manifest.partTargetDuration=partTargetDuration;}
return manifest;};var forEachMediaGroup=function forEachMediaGroup2(master,callback){if(!master.mediaGroups){return;}
["AUDIO","SUBTITLES"].forEach(function(mediaType){if(!master.mediaGroups[mediaType]){return;}
for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback(mediaProperties,mediaType,groupKey,labelKey);}}});};var setupMediaPlaylist=function setupMediaPlaylist2(_ref2){var playlist=_ref2.playlist,uri=_ref2.uri,id2=_ref2.id;playlist.id=id2;playlist.playlistErrors_=0;if(uri){playlist.uri=uri;}
playlist.attributes=playlist.attributes||{};};var setupMediaPlaylists=function setupMediaPlaylists2(master){var i3=master.playlists.length;while(i3--){var playlist=master.playlists[i3];setupMediaPlaylist({playlist,id:createPlaylistID(i3,playlist.uri)});playlist.resolvedUri=resolveUrl(master.uri,playlist.uri);master.playlists[playlist.id]=playlist;master.playlists[playlist.uri]=playlist;if(!playlist.attributes.BANDWIDTH){log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.");}}};var resolveMediaGroupUris=function resolveMediaGroupUris2(master){forEachMediaGroup(master,function(properties){if(properties.uri){properties.resolvedUri=resolveUrl(master.uri,properties.uri);}});};var masterForMedia=function masterForMedia2(media,uri){var id2=createPlaylistID(0,uri);var master={mediaGroups:{"AUDIO":{},"VIDEO":{},"CLOSED-CAPTIONS":{},"SUBTITLES":{}},uri:window__default["default"].location.href,resolvedUri:window__default["default"].location.href,playlists:[{uri,id:id2,resolvedUri:uri,attributes:{}}]};master.playlists[id2]=master.playlists[0];master.playlists[uri]=master.playlists[0];return master;};var addPropertiesToMaster=function addPropertiesToMaster2(master,uri,createGroupID){if(createGroupID===void 0){createGroupID=groupID;}
master.uri=uri;for(var i3=0;i3<master.playlists.length;i3++){if(!master.playlists[i3].uri){var phonyUri="placeholder-uri-"+i3;master.playlists[i3].uri=phonyUri;}}
var audioOnlyMaster=isAudioOnly(master);forEachMediaGroup(master,function(properties,mediaType,groupKey,labelKey){if(!properties.playlists||!properties.playlists.length){if(audioOnlyMaster&&mediaType==="AUDIO"&&!properties.uri){for(var _i3=0;_i3<master.playlists.length;_i3++){var p2=master.playlists[_i3];if(p2.attributes&&p2.attributes.AUDIO&&p2.attributes.AUDIO===groupKey){return;}}}
properties.playlists=[_extends__default["default"]({},properties)];}
properties.playlists.forEach(function(p3,i4){var groupId=createGroupID(mediaType,groupKey,labelKey,p3);var id2=createPlaylistID(i4,groupId);if(p3.uri){p3.resolvedUri=p3.resolvedUri||resolveUrl(master.uri,p3.uri);}else{p3.uri=i4===0?groupId:id2;p3.resolvedUri=p3.uri;}
p3.id=p3.id||id2;p3.attributes=p3.attributes||{};master.playlists[p3.id]=p3;master.playlists[p3.uri]=p3;});});setupMediaPlaylists(master);resolveMediaGroupUris(master);};var mergeOptions$2=videojs3.mergeOptions;var EventTarget$1=videojs3.EventTarget;var addLLHLSQueryDirectives=function addLLHLSQueryDirectives2(uri,media){if(media.endList||!media.serverControl){return uri;}
var parameters={};if(media.serverControl.canBlockReload){var preloadSegment=media.preloadSegment;var nextMSN=media.mediaSequence+media.segments.length;if(preloadSegment){var parts=preloadSegment.parts||[];var nextPart=getKnownPartCount(media)-1;if(nextPart>-1&&nextPart!==parts.length-1){parameters._HLS_part=nextPart;}
if(nextPart>-1||parts.length){nextMSN--;}}
parameters._HLS_msn=nextMSN;}
if(media.serverControl&&media.serverControl.canSkipUntil){parameters._HLS_skip=media.serverControl.canSkipDateranges?"v2":"YES";}
if(Object.keys(parameters).length){var parsedUri=new window__default["default"].URL(uri);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(name){if(!parameters.hasOwnProperty(name)){return;}
parsedUri.searchParams.set(name,parameters[name]);});uri=parsedUri.toString();}
return uri;};var updateSegment=function updateSegment2(a2,b2){if(!a2){return b2;}
var result=mergeOptions$2(a2,b2);if(a2.preloadHints&&!b2.preloadHints){delete result.preloadHints;}
if(a2.parts&&!b2.parts){delete result.parts;}else if(a2.parts&&b2.parts){for(var i3=0;i3<b2.parts.length;i3++){if(a2.parts&&a2.parts[i3]){result.parts[i3]=mergeOptions$2(a2.parts[i3],b2.parts[i3]);}}}
if(!a2.skipped&&b2.skipped){result.skipped=false;}
if(a2.preload&&!b2.preload){result.preload=false;}
return result;};var updateSegments=function updateSegments2(original,update,offset){var oldSegments=original.slice();var newSegments=update.slice();offset=offset||0;var result=[];var currentMap;for(var newIndex=0;newIndex<newSegments.length;newIndex++){var oldSegment=oldSegments[newIndex+offset];var newSegment=newSegments[newIndex];if(oldSegment){currentMap=oldSegment.map||currentMap;result.push(updateSegment(oldSegment,newSegment));}else{if(currentMap&&!newSegment.map){newSegment.map=currentMap;}
result.push(newSegment);}}
return result;};var resolveSegmentUris=function resolveSegmentUris2(segment,baseUri){if(!segment.resolvedUri&&segment.uri){segment.resolvedUri=resolveUrl(baseUri,segment.uri);}
if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=resolveUrl(baseUri,segment.key.uri);}
if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=resolveUrl(baseUri,segment.map.uri);}
if(segment.map&&segment.map.key&&!segment.map.key.resolvedUri){segment.map.key.resolvedUri=resolveUrl(baseUri,segment.map.key.uri);}
if(segment.parts&&segment.parts.length){segment.parts.forEach(function(p2){if(p2.resolvedUri){return;}
p2.resolvedUri=resolveUrl(baseUri,p2.uri);});}
if(segment.preloadHints&&segment.preloadHints.length){segment.preloadHints.forEach(function(p2){if(p2.resolvedUri){return;}
p2.resolvedUri=resolveUrl(baseUri,p2.uri);});}};var getAllSegments=function getAllSegments2(media){var segments=media.segments||[];var preloadSegment=media.preloadSegment;if(preloadSegment&&preloadSegment.parts&&preloadSegment.parts.length){if(preloadSegment.preloadHints){for(var i3=0;i3<preloadSegment.preloadHints.length;i3++){if(preloadSegment.preloadHints[i3].type==="MAP"){return segments;}}}
preloadSegment.duration=media.targetDuration;preloadSegment.preload=true;segments.push(preloadSegment);}
return segments;};var isPlaylistUnchanged=function isPlaylistUnchanged2(a2,b2){return a2===b2||a2.segments&&b2.segments&&a2.segments.length===b2.segments.length&&a2.endList===b2.endList&&a2.mediaSequence===b2.mediaSequence&&a2.preloadSegment===b2.preloadSegment;};var updateMaster$1=function updateMaster2(master,newMedia,unchangedCheck){if(unchangedCheck===void 0){unchangedCheck=isPlaylistUnchanged;}
var result=mergeOptions$2(master,{});var oldMedia=result.playlists[newMedia.id];if(!oldMedia){return null;}
if(unchangedCheck(oldMedia,newMedia)){return null;}
newMedia.segments=getAllSegments(newMedia);var mergedPlaylist=mergeOptions$2(oldMedia,newMedia);if(mergedPlaylist.preloadSegment&&!newMedia.preloadSegment){delete mergedPlaylist.preloadSegment;}
if(oldMedia.segments){if(newMedia.skip){newMedia.segments=newMedia.segments||[];for(var i3=0;i3<newMedia.skip.skippedSegments;i3++){newMedia.segments.unshift({skipped:true});}}
mergedPlaylist.segments=updateSegments(oldMedia.segments,newMedia.segments,newMedia.mediaSequence-oldMedia.mediaSequence);}
mergedPlaylist.segments.forEach(function(segment){resolveSegmentUris(segment,mergedPlaylist.resolvedUri);});for(var _i3=0;_i3<result.playlists.length;_i3++){if(result.playlists[_i3].id===newMedia.id){result.playlists[_i3]=mergedPlaylist;}}
result.playlists[newMedia.id]=mergedPlaylist;result.playlists[newMedia.uri]=mergedPlaylist;forEachMediaGroup(master,function(properties,mediaType,groupKey,labelKey){if(!properties.playlists){return;}
for(var _i22=0;_i22<properties.playlists.length;_i22++){if(newMedia.id===properties.playlists[_i22].id){properties.playlists[_i22]=mergedPlaylist;}}});return result;};var refreshDelay=function refreshDelay2(media,update){var segments=media.segments||[];var lastSegment=segments[segments.length-1];var lastPart=lastSegment&&lastSegment.parts&&lastSegment.parts[lastSegment.parts.length-1];var lastDuration=lastPart&&lastPart.duration||lastSegment&&lastSegment.duration;if(update&&lastDuration){return lastDuration*1e3;}
return(media.partTargetDuration||media.targetDuration||10)*500;};var PlaylistLoader=function(_EventTarget){_inheritsLoose__default["default"](PlaylistLoader2,_EventTarget);function PlaylistLoader2(src,vhs,options){var _this;if(options===void 0){options={};}
_this=_EventTarget.call(this)||this;if(!src){throw new Error("A non-empty playlist URL or object is required");}
_this.logger_=logger("PlaylistLoader");var _options=options,_options$withCredenti=_options.withCredentials,withCredentials=_options$withCredenti===void 0?false:_options$withCredenti,_options$handleManife=_options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===void 0?false:_options$handleManife;_this.src=src;_this.vhs_=vhs;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;var vhsOptions=vhs.options_;_this.customTagParsers=vhsOptions&&vhsOptions.customTagParsers||[];_this.customTagMappers=vhsOptions&&vhsOptions.customTagMappers||[];_this.experimentalLLHLS=vhsOptions&&vhsOptions.experimentalLLHLS||false;if(videojs3.browser.IE_VERSION){_this.experimentalLLHLS=false;}
_this.state="HAVE_NOTHING";_this.handleMediaupdatetimeout_=_this.handleMediaupdatetimeout_.bind(_assertThisInitialized__default["default"](_this));_this.on("mediaupdatetimeout",_this.handleMediaupdatetimeout_);return _this;}
var _proto=PlaylistLoader2.prototype;_proto.handleMediaupdatetimeout_=function handleMediaupdatetimeout_(){var _this2=this;if(this.state!=="HAVE_METADATA"){return;}
var media=this.media();var uri=resolveUrl(this.master.uri,media.uri);if(this.experimentalLLHLS){uri=addLLHLSQueryDirectives(uri,media);}
this.state="HAVE_CURRENT_METADATA";this.request=this.vhs_.xhr({uri,withCredentials:this.withCredentials},function(error2,req){if(!_this2.request){return;}
if(error2){return _this2.playlistRequestError(_this2.request,_this2.media(),"HAVE_METADATA");}
_this2.haveMetadata({playlistString:_this2.request.responseText,url:_this2.media().uri,id:_this2.media().id});});};_proto.playlistRequestError=function playlistRequestError(xhr,playlist,startingState){var uri=playlist.uri,id2=playlist.id;this.request=null;if(startingState){this.state=startingState;}
this.error={playlist:this.master.playlists[id2],status:xhr.status,message:"HLS playlist request error at URL: "+uri+".",responseText:xhr.responseText,code:xhr.status>=500?4:2};this.trigger("error");};_proto.parseManifest_=function parseManifest_(_ref){var _this3=this;var url=_ref.url,manifestString=_ref.manifestString;return parseManifest({onwarn:function onwarn(_ref2){var message=_ref2.message;return _this3.logger_("m3u8-parser warn for "+url+": "+message);},oninfo:function oninfo(_ref3){var message=_ref3.message;return _this3.logger_("m3u8-parser info for "+url+": "+message);},manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS});};_proto.haveMetadata=function haveMetadata(_ref4){var playlistString=_ref4.playlistString,playlistObject=_ref4.playlistObject,url=_ref4.url,id2=_ref4.id;this.request=null;this.state="HAVE_METADATA";var playlist=playlistObject||this.parseManifest_({url,manifestString:playlistString});playlist.lastRequest=Date.now();setupMediaPlaylist({playlist,uri:url,id:id2});var update=updateMaster$1(this.master,playlist);this.targetDuration=playlist.partTargetDuration||playlist.targetDuration;this.pendingMedia_=null;if(update){this.master=update;this.media_=this.master.playlists[id2];}else{this.trigger("playlistunchanged");}
this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!update));this.trigger("loadedplaylist");};_proto.dispose=function dispose(){this.trigger("dispose");this.stopRequest();window__default["default"].clearTimeout(this.mediaUpdateTimeout);window__default["default"].clearTimeout(this.finalRenditionTimeout);this.off();};_proto.stopRequest=function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}};_proto.media=function media(playlist,shouldDelay){var _this4=this;if(!playlist){return this.media_;}
if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state);}
if(typeof playlist==="string"){if(!this.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist);}
playlist=this.master.playlists[playlist];}
window__default["default"].clearTimeout(this.finalRenditionTimeout);if(shouldDelay){var delay=(playlist.partTargetDuration||playlist.targetDuration)/2*1e3||5*1e3;this.finalRenditionTimeout=window__default["default"].setTimeout(this.media.bind(this,playlist,false),delay);return;}
var startingState=this.state;var mediaChange=!this.media_||playlist.id!==this.media_.id;var masterPlaylistRef=this.master.playlists[playlist.id];if(masterPlaylistRef&&masterPlaylistRef.endList||playlist.endList&&playlist.segments.length){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null;}
this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");if(startingState==="HAVE_MASTER"){this.trigger("loadedmetadata");}else{this.trigger("mediachange");}}
return;}
this.updateMediaUpdateTimeout_(refreshDelay(playlist,true));if(!mediaChange){return;}
this.state="SWITCHING_MEDIA";if(this.request){if(playlist.resolvedUri===this.request.url){return;}
this.request.onreadystatechange=null;this.request.abort();this.request=null;}
if(this.media_){this.trigger("mediachanging");}
this.pendingMedia_=playlist;this.request=this.vhs_.xhr({uri:playlist.resolvedUri,withCredentials:this.withCredentials},function(error2,req){if(!_this4.request){return;}
playlist.lastRequest=Date.now();playlist.resolvedUri=resolveManifestRedirect(_this4.handleManifestRedirects,playlist.resolvedUri,req);if(error2){return _this4.playlistRequestError(_this4.request,playlist,startingState);}
_this4.haveMetadata({playlistString:req.responseText,url:playlist.uri,id:playlist.id});if(startingState==="HAVE_MASTER"){_this4.trigger("loadedmetadata");}else{_this4.trigger("mediachange");}});};_proto.pause=function pause(){if(this.mediaUpdateTimeout){window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}
this.stopRequest();if(this.state==="HAVE_NOTHING"){this.started=false;}
if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA";}else{this.state="HAVE_MASTER";}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA";}};_proto.load=function load(shouldDelay){var _this5=this;if(this.mediaUpdateTimeout){window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}
var media=this.media();if(shouldDelay){var delay=media?(media.partTargetDuration||media.targetDuration)/2*1e3:5*1e3;this.mediaUpdateTimeout=window__default["default"].setTimeout(function(){_this5.mediaUpdateTimeout=null;_this5.load();},delay);return;}
if(!this.started){this.start();return;}
if(media&&!media.endList){this.trigger("mediaupdatetimeout");}else{this.trigger("loadedplaylist");}};_proto.updateMediaUpdateTimeout_=function updateMediaUpdateTimeout_(delay){var _this6=this;if(this.mediaUpdateTimeout){window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}
if(!this.media()||this.media().endList){return;}
this.mediaUpdateTimeout=window__default["default"].setTimeout(function(){_this6.mediaUpdateTimeout=null;_this6.trigger("mediaupdatetimeout");_this6.updateMediaUpdateTimeout_(delay);},delay);};_proto.start=function start3(){var _this7=this;this.started=true;if(typeof this.src==="object"){if(!this.src.uri){this.src.uri=window__default["default"].location.href;}
this.src.resolvedUri=this.src.uri;setTimeout(function(){_this7.setupInitialPlaylist(_this7.src);},0);return;}
this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(error2,req){if(!_this7.request){return;}
_this7.request=null;if(error2){_this7.error={status:req.status,message:"HLS playlist request error at URL: "+_this7.src+".",responseText:req.responseText,code:2};if(_this7.state==="HAVE_NOTHING"){_this7.started=false;}
return _this7.trigger("error");}
_this7.src=resolveManifestRedirect(_this7.handleManifestRedirects,_this7.src,req);var manifest=_this7.parseManifest_({manifestString:req.responseText,url:_this7.src});_this7.setupInitialPlaylist(manifest);});};_proto.srcUri=function srcUri(){return typeof this.src==="string"?this.src:this.src.uri;};_proto.setupInitialPlaylist=function setupInitialPlaylist(manifest){this.state="HAVE_MASTER";if(manifest.playlists){this.master=manifest;addPropertiesToMaster(this.master,this.srcUri());manifest.playlists.forEach(function(playlist){playlist.segments=getAllSegments(playlist);playlist.segments.forEach(function(segment){resolveSegmentUris(segment,playlist.resolvedUri);});});this.trigger("loadedplaylist");if(!this.request){this.media(this.master.playlists[0]);}
return;}
var uri=this.srcUri()||window__default["default"].location.href;this.master=masterForMedia(manifest,uri);this.haveMetadata({playlistObject:manifest,url:uri,id:this.master.playlists[0].id});this.trigger("loadedmetadata");};return PlaylistLoader2;}(EventTarget$1);var videojsXHR=videojs3.xhr;var mergeOptions$1=videojs3.mergeOptions;var callbackWrapper=function callbackWrapper2(request,error2,response,callback){var reqResponse=request.responseType==="arraybuffer"?request.response:request.responseText;if(!error2&&reqResponse){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=reqResponse.byteLength||reqResponse.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1e3);}}
if(response.headers){request.responseHeaders=response.headers;}
if(error2&&error2.code==="ETIMEDOUT"){request.timedout=true;}
if(!error2&&!request.aborted&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error2=new Error("XHR Failed with a response of: "+(request&&(reqResponse||request.responseText)));}
callback(error2,request);};var xhrFactory=function xhrFactory2(){var xhr=function XhrFunction(options,callback){options=mergeOptions$1({timeout:45e3},options);var beforeRequest=XhrFunction.beforeRequest||videojs3.Vhs.xhr.beforeRequest;if(beforeRequest&&typeof beforeRequest==="function"){var newOptions=beforeRequest(options);if(newOptions){options=newOptions;}}
var xhrMethod=videojs3.Vhs.xhr.original===true?videojsXHR:videojs3.Vhs.xhr;var request=xhrMethod(options,function(error2,response){return callbackWrapper(request,error2,response,callback);});var originalAbort=request.abort;request.abort=function(){request.aborted=true;return originalAbort.apply(request,arguments);};request.uri=options.uri;request.requestTime=Date.now();return request;};xhr.original=true;return xhr;};var byterangeStr=function byterangeStr2(byterange){var byterangeEnd;var byterangeStart=byterange.offset;if(typeof byterange.offset==="bigint"||typeof byterange.length==="bigint"){byterangeEnd=window__default["default"].BigInt(byterange.offset)+window__default["default"].BigInt(byterange.length)-window__default["default"].BigInt(1);}else{byterangeEnd=byterange.offset+byterange.length-1;}
return "bytes="+byterangeStart+"-"+byterangeEnd;};var segmentXhrHeaders=function segmentXhrHeaders2(segment){var headers={};if(segment.byterange){headers.Range=byterangeStr(segment.byterange);}
return headers;};var textRange=function textRange2(range,i3){return range.start(i3)+"-"+range.end(i3);};var formatHexString=function formatHexString2(e2,i3){var value=e2.toString(16);return "00".substring(0,2-value.length)+value+(i3%2?" ":"");};var formatAsciiString=function formatAsciiString2(e2){if(e2>=32&&e2<126){return String.fromCharCode(e2);}
return ".";};var createTransferableMessage=function createTransferableMessage2(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(byteHelpers.isArrayBufferView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};var initSegmentId=function initSegmentId2(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(",");};var segmentKeyId=function segmentKeyId2(key){return key.resolvedUri;};var hexDump=function hexDump2(data){var bytes=Array.prototype.slice.call(data);var step=16;var result="";var hex;var ascii;for(var j2=0;j2<bytes.length/step;j2++){hex=bytes.slice(j2*step,j2*step+step).map(formatHexString).join("");ascii=bytes.slice(j2*step,j2*step+step).map(formatAsciiString).join("");result+=hex+" "+ascii+"\n";}
return result;};var tagDump=function tagDump2(_ref){var bytes=_ref.bytes;return hexDump(bytes);};var textRanges=function textRanges2(ranges){var result="";var i3;for(i3=0;i3<ranges.length;i3++){result+=textRange(ranges,i3)+" ";}
return result;};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});var SEGMENT_END_FUDGE_PERCENT=0.25;var playerTimeToProgramTime=function playerTimeToProgramTime2(playerTime,segment){if(!segment.dateTimeObject){return null;}
var transmuxerPrependedSeconds=segment.videoTimingInfo.transmuxerPrependedSeconds;var transmuxedStart=segment.videoTimingInfo.transmuxedPresentationStart;var startOfSegment=transmuxedStart+transmuxerPrependedSeconds;var offsetFromSegmentStart=playerTime-startOfSegment;return new Date(segment.dateTimeObject.getTime()+offsetFromSegmentStart*1e3);};var originalSegmentVideoDuration=function originalSegmentVideoDuration2(videoTimingInfo){return videoTimingInfo.transmuxedPresentationEnd-videoTimingInfo.transmuxedPresentationStart-videoTimingInfo.transmuxerPrependedSeconds;};var findSegmentForProgramTime=function findSegmentForProgramTime2(programTime,playlist){var dateTimeObject;try{dateTimeObject=new Date(programTime);}catch(e2){return null;}
if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}
var segment=playlist.segments[0];if(dateTimeObject<segment.dateTimeObject){return null;}
for(var i3=0;i3<playlist.segments.length-1;i3++){segment=playlist.segments[i3];var nextSegmentStart=playlist.segments[i3+1].dateTimeObject;if(dateTimeObject<nextSegmentStart){break;}}
var lastSegment=playlist.segments[playlist.segments.length-1];var lastSegmentStart=lastSegment.dateTimeObject;var lastSegmentDuration=lastSegment.videoTimingInfo?originalSegmentVideoDuration(lastSegment.videoTimingInfo):lastSegment.duration+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT;var lastSegmentEnd=new Date(lastSegmentStart.getTime()+lastSegmentDuration*1e3);if(dateTimeObject>lastSegmentEnd){return null;}
if(dateTimeObject>lastSegmentStart){segment=lastSegment;}
return{segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(playlist,playlist.mediaSequence+playlist.segments.indexOf(segment)),type:segment.videoTimingInfo?"accurate":"estimate"};};var findSegmentForPlayerTime=function findSegmentForPlayerTime2(time,playlist){if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}
var segmentEnd=0;var segment;for(var i3=0;i3<playlist.segments.length;i3++){segment=playlist.segments[i3];segmentEnd=segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationEnd:segmentEnd+segment.duration;if(time<=segmentEnd){break;}}
var lastSegment=playlist.segments[playlist.segments.length-1];if(lastSegment.videoTimingInfo&&lastSegment.videoTimingInfo.transmuxedPresentationEnd<time){return null;}
if(time>segmentEnd){if(time>segmentEnd+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT){return null;}
segment=lastSegment;}
return{segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:segmentEnd-segment.duration,type:segment.videoTimingInfo?"accurate":"estimate"};};var getOffsetFromTimestamp=function getOffsetFromTimestamp2(comparisonTimeStamp,programTime){var segmentDateTime;var programDateTime;try{segmentDateTime=new Date(comparisonTimeStamp);programDateTime=new Date(programTime);}catch(e2){}
var segmentTimeEpoch=segmentDateTime.getTime();var programTimeEpoch=programDateTime.getTime();return(programTimeEpoch-segmentTimeEpoch)/1e3;};var verifyProgramDateTimeTags=function verifyProgramDateTimeTags2(playlist){if(!playlist.segments||playlist.segments.length===0){return false;}
for(var i3=0;i3<playlist.segments.length;i3++){var segment=playlist.segments[i3];if(!segment.dateTimeObject){return false;}}
return true;};var getProgramTime=function getProgramTime2(_ref){var playlist=_ref.playlist,_ref$time=_ref.time,time=_ref$time===void 0?void 0:_ref$time,callback=_ref.callback;if(!callback){throw new Error("getProgramTime: callback must be provided");}
if(!playlist||time===void 0){return callback({message:"getProgramTime: playlist and time must be provided"});}
var matchedSegment=findSegmentForPlayerTime(time,playlist);if(!matchedSegment){return callback({message:"valid programTime was not found"});}
if(matchedSegment.type==="estimate"){return callback({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:matchedSegment.estimatedStart});}
var programTimeObject={mediaSeconds:time};var programTime=playerTimeToProgramTime(time,matchedSegment.segment);if(programTime){programTimeObject.programDateTime=programTime.toISOString();}
return callback(null,programTimeObject);};var seekToProgramTime=function seekToProgramTime2(_ref2){var programTime=_ref2.programTime,playlist=_ref2.playlist,_ref2$retryCount=_ref2.retryCount,retryCount=_ref2$retryCount===void 0?2:_ref2$retryCount,seekTo=_ref2.seekTo,_ref2$pauseAfterSeek=_ref2.pauseAfterSeek,pauseAfterSeek=_ref2$pauseAfterSeek===void 0?true:_ref2$pauseAfterSeek,tech=_ref2.tech,callback=_ref2.callback;if(!callback){throw new Error("seekToProgramTime: callback must be provided");}
if(typeof programTime==="undefined"||!playlist||!seekTo){return callback({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});}
if(!playlist.endList&&!tech.hasStarted_){return callback({message:"player must be playing a live stream to start buffering"});}
if(!verifyProgramDateTimeTags(playlist)){return callback({message:"programDateTime tags must be provided in the manifest "+playlist.resolvedUri});}
var matchedSegment=findSegmentForProgramTime(programTime,playlist);if(!matchedSegment){return callback({message:programTime+" was not found in the stream"});}
var segment=matchedSegment.segment;var mediaOffset=getOffsetFromTimestamp(segment.dateTimeObject,programTime);if(matchedSegment.type==="estimate"){if(retryCount===0){return callback({message:programTime+" is not buffered yet. Try again"});}
seekTo(matchedSegment.estimatedStart+mediaOffset);tech.one("seeked",function(){seekToProgramTime2({programTime,playlist,retryCount:retryCount-1,seekTo,pauseAfterSeek,tech,callback});});return;}
var seekToTime=segment.start+mediaOffset;var seekedCallback=function seekedCallback2(){return callback(null,tech.currentTime());};tech.one("seeked",seekedCallback);if(pauseAfterSeek){tech.pause();}
seekTo(seekToTime);};var callbackOnCompleted=function callbackOnCompleted2(request,cb){if(request.readyState===4){return cb();}
return;};var containerRequest=function containerRequest2(uri,xhr,cb){var bytes=[];var id3Offset;var finished=false;var endRequestAndCallback=function endRequestAndCallback2(err,req,type,_bytes){req.abort();finished=true;return cb(err,req,type,_bytes);};var progressListener=function progressListener2(error2,request2){if(finished){return;}
if(error2){return endRequestAndCallback(error2,request2,"",bytes);}
var newPart=request2.responseText.substring(bytes&&bytes.byteLength||0,request2.responseText.length);bytes=byteHelpers.concatTypedArrays(bytes,byteHelpers.stringToBytes(newPart,true));id3Offset=id3Offset||id3Helpers.getId3Offset(bytes);if(bytes.length<10||id3Offset&&bytes.length<id3Offset+2){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error2,request2,"",bytes);});}
var type=containers.detectContainerForBytes(bytes);if(type==="ts"&&bytes.length<188){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error2,request2,"",bytes);});}
if(!type&&bytes.length<376){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error2,request2,"",bytes);});}
return endRequestAndCallback(null,request2,type,bytes);};var options={uri,beforeSend:function beforeSend(request2){request2.overrideMimeType("text/plain; charset=x-user-defined");request2.addEventListener("progress",function(_ref){_ref.total;_ref.loaded;return callbackWrapper(request2,null,{statusCode:request2.status},progressListener);});}};var request=xhr(options,function(error2,response){return callbackWrapper(request,error2,response,progressListener);});return request;};var EventTarget=videojs3.EventTarget;var mergeOptions=videojs3.mergeOptions;var dashPlaylistUnchanged=function dashPlaylistUnchanged2(a2,b2){if(!isPlaylistUnchanged(a2,b2)){return false;}
if(a2.sidx&&b2.sidx&&(a2.sidx.offset!==b2.sidx.offset||a2.sidx.length!==b2.sidx.length)){return false;}else if(!a2.sidx&&b2.sidx||a2.sidx&&!b2.sidx){return false;}
if(a2.segments&&!b2.segments||!a2.segments&&b2.segments){return false;}
if(!a2.segments&&!b2.segments){return true;}
for(var i3=0;i3<a2.segments.length;i3++){var aSegment=a2.segments[i3];var bSegment=b2.segments[i3];if(aSegment.uri!==bSegment.uri){return false;}
if(!aSegment.byterange&&!bSegment.byterange){continue;}
var aByterange=aSegment.byterange;var bByterange=bSegment.byterange;if(aByterange&&!bByterange||!aByterange&&bByterange){return false;}
if(aByterange.offset!==bByterange.offset||aByterange.length!==bByterange.length){return false;}}
return true;};var dashGroupId=function dashGroupId2(type,group,label,playlist){var playlistId=playlist.attributes.NAME||label;return "placeholder-uri-"+type+"-"+group+"-"+playlistId;};var parseMasterXml=function parseMasterXml2(_ref){var masterXml=_ref.masterXml,srcUrl=_ref.srcUrl,clientOffset=_ref.clientOffset,sidxMapping=_ref.sidxMapping,previousManifest=_ref.previousManifest;var manifest=mpdParser.parse(masterXml,{manifestUri:srcUrl,clientOffset,sidxMapping,previousManifest});addPropertiesToMaster(manifest,srcUrl,dashGroupId);return manifest;};var removeOldMediaGroupLabels=function removeOldMediaGroupLabels2(update,newMaster){forEachMediaGroup(update,function(properties,type,group,label){if(!(label in newMaster.mediaGroups[type][group])){delete update.mediaGroups[type][group][label];}});};var updateMaster=function updateMaster2(oldMaster,newMaster,sidxMapping){var noChanges=true;var update=mergeOptions(oldMaster,{duration:newMaster.duration,minimumUpdatePeriod:newMaster.minimumUpdatePeriod,timelineStarts:newMaster.timelineStarts});for(var i3=0;i3<newMaster.playlists.length;i3++){var playlist=newMaster.playlists[i3];if(playlist.sidx){var sidxKey=mpdParser.generateSidxKey(playlist.sidx);if(sidxMapping&&sidxMapping[sidxKey]&&sidxMapping[sidxKey].sidx){mpdParser.addSidxSegmentsToPlaylist(playlist,sidxMapping[sidxKey].sidx,playlist.sidx.resolvedUri);}}
var playlistUpdate=updateMaster$1(update,playlist,dashPlaylistUnchanged);if(playlistUpdate){update=playlistUpdate;noChanges=false;}}
forEachMediaGroup(newMaster,function(properties,type,group,label){if(properties.playlists&&properties.playlists.length){var id2=properties.playlists[0].id;var _playlistUpdate=updateMaster$1(update,properties.playlists[0],dashPlaylistUnchanged);if(_playlistUpdate){update=_playlistUpdate;if(!(label in update.mediaGroups[type][group])){update.mediaGroups[type][group][label]=properties;}
update.mediaGroups[type][group][label].playlists[0]=update.playlists[id2];noChanges=false;}}});removeOldMediaGroupLabels(update,newMaster);if(newMaster.minimumUpdatePeriod!==oldMaster.minimumUpdatePeriod){noChanges=false;}
if(noChanges){return null;}
return update;};var equivalentSidx=function equivalentSidx2(a2,b2){var neitherMap=Boolean(!a2.map&&!b2.map);var equivalentMap=neitherMap||Boolean(a2.map&&b2.map&&a2.map.byterange.offset===b2.map.byterange.offset&&a2.map.byterange.length===b2.map.byterange.length);return equivalentMap&&a2.uri===b2.uri&&a2.byterange.offset===b2.byterange.offset&&a2.byterange.length===b2.byterange.length;};var compareSidxEntry=function compareSidxEntry2(playlists,oldSidxMapping){var newSidxMapping={};for(var id2 in playlists){var playlist=playlists[id2];var currentSidxInfo=playlist.sidx;if(currentSidxInfo){var key=mpdParser.generateSidxKey(currentSidxInfo);if(!oldSidxMapping[key]){break;}
var savedSidxInfo=oldSidxMapping[key].sidxInfo;if(equivalentSidx(savedSidxInfo,currentSidxInfo)){newSidxMapping[key]=oldSidxMapping[key];}}}
return newSidxMapping;};var filterChangedSidxMappings=function filterChangedSidxMappings2(master,oldSidxMapping){var videoSidx=compareSidxEntry(master.playlists,oldSidxMapping);var mediaGroupSidx=videoSidx;forEachMediaGroup(master,function(properties,mediaType,groupKey,labelKey){if(properties.playlists&&properties.playlists.length){var playlists=properties.playlists;mediaGroupSidx=mergeOptions(mediaGroupSidx,compareSidxEntry(playlists,oldSidxMapping));}});return mediaGroupSidx;};var DashPlaylistLoader=function(_EventTarget){_inheritsLoose__default["default"](DashPlaylistLoader2,_EventTarget);function DashPlaylistLoader2(srcUrlOrPlaylist,vhs,options,masterPlaylistLoader){var _this;if(options===void 0){options={};}
_this=_EventTarget.call(this)||this;_this.masterPlaylistLoader_=masterPlaylistLoader||_assertThisInitialized__default["default"](_this);if(!masterPlaylistLoader){_this.isMaster_=true;}
var _options=options,_options$withCredenti=_options.withCredentials,withCredentials=_options$withCredenti===void 0?false:_options$withCredenti,_options$handleManife=_options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===void 0?false:_options$handleManife;_this.vhs_=vhs;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;if(!srcUrlOrPlaylist){throw new Error("A non-empty playlist URL or object is required");}
_this.on("minimumUpdatePeriod",function(){_this.refreshXml_();});_this.on("mediaupdatetimeout",function(){_this.refreshMedia_(_this.media().id);});_this.state="HAVE_NOTHING";_this.loadedPlaylists_={};_this.logger_=logger("DashPlaylistLoader");if(_this.isMaster_){_this.masterPlaylistLoader_.srcUrl=srcUrlOrPlaylist;_this.masterPlaylistLoader_.sidxMapping_={};}else{_this.childPlaylist_=srcUrlOrPlaylist;}
return _this;}
var _proto=DashPlaylistLoader2.prototype;_proto.requestErrored_=function requestErrored_(err,request,startingState){if(!this.request){return true;}
this.request=null;if(err){this.error=typeof err==="object"&&!(err instanceof Error)?err:{status:request.status,message:"DASH request error at URL: "+request.uri,response:request.response,code:2};if(startingState){this.state=startingState;}
this.trigger("error");return true;}};_proto.addSidxSegments_=function addSidxSegments_(playlist,startingState,cb){var _this2=this;var sidxKey=playlist.sidx&&mpdParser.generateSidxKey(playlist.sidx);if(!playlist.sidx||!sidxKey||this.masterPlaylistLoader_.sidxMapping_[sidxKey]){this.mediaRequest_=window__default["default"].setTimeout(function(){return cb(false);},0);return;}
var uri=resolveManifestRedirect(this.handleManifestRedirects,playlist.sidx.resolvedUri);var fin=function fin2(err,request){if(_this2.requestErrored_(err,request,startingState)){return;}
var sidxMapping=_this2.masterPlaylistLoader_.sidxMapping_;var sidx;try{sidx=parseSidx__default["default"](byteHelpers.toUint8(request.response).subarray(8));}catch(e2){_this2.requestErrored_(e2,request,startingState);return;}
sidxMapping[sidxKey]={sidxInfo:playlist.sidx,sidx};mpdParser.addSidxSegmentsToPlaylist(playlist,sidx,playlist.sidx.resolvedUri);return cb(true);};this.request=containerRequest(uri,this.vhs_.xhr,function(err,request,container,bytes){if(err){return fin(err,request);}
if(!container||container!=="mp4"){return fin({status:request.status,message:"Unsupported "+(container||"unknown")+" container type for sidx segment at URL: "+uri,response:"",playlist,internal:true,blacklistDuration:Infinity,code:2},request);}
var _playlist$sidx$bytera=playlist.sidx.byterange,offset=_playlist$sidx$bytera.offset,length=_playlist$sidx$bytera.length;if(bytes.length>=length+offset){return fin(err,{response:bytes.subarray(offset,offset+length),status:request.status,uri:request.uri});}
_this2.request=_this2.vhs_.xhr({uri,responseType:"arraybuffer",headers:segmentXhrHeaders({byterange:playlist.sidx.byterange})},fin);});};_proto.dispose=function dispose(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};window__default["default"].clearTimeout(this.minimumUpdatePeriodTimeout_);window__default["default"].clearTimeout(this.mediaRequest_);window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;this.mediaRequest_=null;this.minimumUpdatePeriodTimeout_=null;if(this.masterPlaylistLoader_.createMupOnMedia_){this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_);this.masterPlaylistLoader_.createMupOnMedia_=null;}
this.off();};_proto.hasPendingRequest=function hasPendingRequest(){return this.request||this.mediaRequest_;};_proto.stopRequest=function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}};_proto.media=function media(playlist){var _this3=this;if(!playlist){return this.media_;}
if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state);}
var startingState=this.state;if(typeof playlist==="string"){if(!this.masterPlaylistLoader_.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist);}
playlist=this.masterPlaylistLoader_.master.playlists[playlist];}
var mediaChange=!this.media_||playlist.id!==this.media_.id;if(mediaChange&&this.loadedPlaylists_[playlist.id]&&this.loadedPlaylists_[playlist.id].endList){this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");this.trigger("mediachange");}
return;}
if(!mediaChange){return;}
if(this.media_){this.trigger("mediachanging");}
this.addSidxSegments_(playlist,startingState,function(sidxChanged){_this3.haveMetadata({startingState,playlist});});};_proto.haveMetadata=function haveMetadata(_ref2){var startingState=_ref2.startingState,playlist=_ref2.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[playlist.id]=playlist;this.mediaRequest_=null;this.refreshMedia_(playlist.id);if(startingState==="HAVE_MASTER"){this.trigger("loadedmetadata");}else{this.trigger("mediachange");}};_proto.pause=function pause(){if(this.masterPlaylistLoader_.createMupOnMedia_){this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_);this.masterPlaylistLoader_.createMupOnMedia_=null;}
this.stopRequest();window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;if(this.isMaster_){window__default["default"].clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_);this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null;}
if(this.state==="HAVE_NOTHING"){this.started=false;}};_proto.load=function load(isFinalRendition){var _this4=this;window__default["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=window__default["default"].setTimeout(function(){return _this4.load();},delay);return;}
if(!this.started){this.start();return;}
if(media&&!media.endList){if(this.isMaster_&&!this.minimumUpdatePeriodTimeout_){this.trigger("minimumUpdatePeriod");this.updateMinimumUpdatePeriodTimeout_();}
this.trigger("mediaupdatetimeout");}else{this.trigger("loadedplaylist");}};_proto.start=function start3(){var _this5=this;this.started=true;if(!this.isMaster_){this.mediaRequest_=window__default["default"].setTimeout(function(){return _this5.haveMaster_();},0);return;}
this.requestMaster_(function(req,masterChanged){_this5.haveMaster_();if(!_this5.hasPendingRequest()&&!_this5.media_){_this5.media(_this5.masterPlaylistLoader_.master.playlists[0]);}});};_proto.requestMaster_=function requestMaster_(cb){var _this6=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(error2,req){if(_this6.requestErrored_(error2,req)){if(_this6.state==="HAVE_NOTHING"){_this6.started=false;}
return;}
var masterChanged=req.responseText!==_this6.masterPlaylistLoader_.masterXml_;_this6.masterPlaylistLoader_.masterXml_=req.responseText;if(req.responseHeaders&&req.responseHeaders.date){_this6.masterLoaded_=Date.parse(req.responseHeaders.date);}else{_this6.masterLoaded_=Date.now();}
_this6.masterPlaylistLoader_.srcUrl=resolveManifestRedirect(_this6.handleManifestRedirects,_this6.masterPlaylistLoader_.srcUrl,req);if(masterChanged){_this6.handleMaster_();_this6.syncClientServerClock_(function(){return cb(req,masterChanged);});return;}
return cb(req,masterChanged);});};_proto.syncClientServerClock_=function syncClientServerClock_(done){var _this7=this;var utcTiming=mpdParser.parseUTCTiming(this.masterPlaylistLoader_.masterXml_);if(utcTiming===null){this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now();return done();}
if(utcTiming.method==="DIRECT"){this.masterPlaylistLoader_.clientOffset_=utcTiming.value-Date.now();return done();}
this.request=this.vhs_.xhr({uri:resolveUrl(this.masterPlaylistLoader_.srcUrl,utcTiming.value),method:utcTiming.method,withCredentials:this.withCredentials},function(error2,req){if(!_this7.request){return;}
if(error2){_this7.masterPlaylistLoader_.clientOffset_=_this7.masterLoaded_-Date.now();return done();}
var serverTime;if(utcTiming.method==="HEAD"){if(!req.responseHeaders||!req.responseHeaders.date){serverTime=_this7.masterLoaded_;}else{serverTime=Date.parse(req.responseHeaders.date);}}else{serverTime=Date.parse(req.responseText);}
_this7.masterPlaylistLoader_.clientOffset_=serverTime-Date.now();done();});};_proto.haveMaster_=function haveMaster_(){this.state="HAVE_MASTER";if(this.isMaster_){this.trigger("loadedplaylist");}else if(!this.media_){this.media(this.childPlaylist_);}};_proto.handleMaster_=function handleMaster_(){this.mediaRequest_=null;var oldMaster=this.masterPlaylistLoader_.master;var newMaster=parseMasterXml({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:oldMaster});if(oldMaster){newMaster=updateMaster(oldMaster,newMaster,this.masterPlaylistLoader_.sidxMapping_);}
this.masterPlaylistLoader_.master=newMaster?newMaster:oldMaster;var location2=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];if(location2&&location2!==this.masterPlaylistLoader_.srcUrl){this.masterPlaylistLoader_.srcUrl=location2;}
if(!oldMaster||newMaster&&newMaster.minimumUpdatePeriod!==oldMaster.minimumUpdatePeriod){this.updateMinimumUpdatePeriodTimeout_();}
return Boolean(newMaster);};_proto.updateMinimumUpdatePeriodTimeout_=function updateMinimumUpdatePeriodTimeout_(){var mpl=this.masterPlaylistLoader_;if(mpl.createMupOnMedia_){mpl.off("loadedmetadata",mpl.createMupOnMedia_);mpl.createMupOnMedia_=null;}
if(mpl.minimumUpdatePeriodTimeout_){window__default["default"].clearTimeout(mpl.minimumUpdatePeriodTimeout_);mpl.minimumUpdatePeriodTimeout_=null;}
var mup=mpl.master&&mpl.master.minimumUpdatePeriod;if(mup===0){if(mpl.media()){mup=mpl.media().targetDuration*1e3;}else{mpl.createMupOnMedia_=mpl.updateMinimumUpdatePeriodTimeout_;mpl.one("loadedmetadata",mpl.createMupOnMedia_);}}
if(typeof mup!=="number"||mup<=0){if(mup<0){this.logger_("found invalid minimumUpdatePeriod of "+mup+", not setting a timeout");}
return;}
this.createMUPTimeout_(mup);};_proto.createMUPTimeout_=function createMUPTimeout_(mup){var mpl=this.masterPlaylistLoader_;mpl.minimumUpdatePeriodTimeout_=window__default["default"].setTimeout(function(){mpl.minimumUpdatePeriodTimeout_=null;mpl.trigger("minimumUpdatePeriod");mpl.createMUPTimeout_(mup);},mup);};_proto.refreshXml_=function refreshXml_(){var _this8=this;this.requestMaster_(function(req,masterChanged){if(!masterChanged){return;}
if(_this8.media_){_this8.media_=_this8.masterPlaylistLoader_.master.playlists[_this8.media_.id];}
_this8.masterPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(_this8.masterPlaylistLoader_.master,_this8.masterPlaylistLoader_.sidxMapping_);_this8.addSidxSegments_(_this8.media(),_this8.state,function(sidxChanged){_this8.refreshMedia_(_this8.media().id);});});};_proto.refreshMedia_=function refreshMedia_(mediaID){var _this9=this;if(!mediaID){throw new Error("refreshMedia_ must take a media id");}
if(this.media_&&this.isMaster_){this.handleMaster_();}
var playlists=this.masterPlaylistLoader_.master.playlists;var mediaChanged=!this.media_||this.media_!==playlists[mediaID];if(mediaChanged){this.media_=playlists[mediaID];}else{this.trigger("playlistunchanged");}
if(!this.mediaUpdateTimeout){var createMediaUpdateTimeout=function createMediaUpdateTimeout2(){if(_this9.media().endList){return;}
_this9.mediaUpdateTimeout=window__default["default"].setTimeout(function(){_this9.trigger("mediaupdatetimeout");createMediaUpdateTimeout2();},refreshDelay(_this9.media(),Boolean(mediaChanged)));};createMediaUpdateTimeout();}
this.trigger("loadedplaylist");};return DashPlaylistLoader2;}(EventTarget);var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};var stringToArrayBuffer=function stringToArrayBuffer2(string){var view=new Uint8Array(new ArrayBuffer(string.length));for(var i3=0;i3<string.length;i3++){view[i3]=string.charCodeAt(i3);}
return view.buffer;};var browserWorkerPolyFill=function browserWorkerPolyFill2(workerObj){workerObj.on=workerObj.addEventListener;workerObj.off=workerObj.removeEventListener;return workerObj;};var createObjectURL=function createObjectURL2(str){try{return URL.createObjectURL(new Blob([str],{type:"application/javascript"}));}catch(e2){var blob=new BlobBuilder();blob.append(str);return URL.createObjectURL(blob.getBlob());}};var factory=function factory2(code){return function(){var objectUrl=createObjectURL(code);var worker=browserWorkerPolyFill(new Worker(objectUrl));worker.objURL=objectUrl;var terminate=worker.terminate;worker.on=worker.addEventListener;worker.off=worker.removeEventListener;worker.terminate=function(){URL.revokeObjectURL(objectUrl);return 

